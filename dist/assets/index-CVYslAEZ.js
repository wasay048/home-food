var Co=Object.defineProperty;var So=(e,t,n)=>t in e?Co(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Hn=(e,t,n)=>So(e,typeof t!="symbol"?t+"":t,n);import{r as m,a as Ro,c as _o,g as ma,u as zt,b as Bt,d as Lo,L as Ot,e as Do,R as Mi,N as Eo,O as Io,f as Ao,h as Ee,B as Oo}from"./vendor-D5wsu3kT.js";import{_ as Pt,C as Tt,r as wt,S as Po,F as $i,g as ha,a as Ct,b as qt,c as To,d as No,E as ga,o as Fo,L as Mo,i as va,e as xa,v as ya,f as dr,h as ba,j as $o,k as ur,l as Uo,m as wa,n as zo,p as Lt,q as ot,s as ve,t as de,u as ue,w as ze,x as Fe,y as Bo,z as qo,A as ka,B as Wo,D as Go,G as pr,H as vt,I as Yn,J as Qn}from"./firebase-B79HKUX_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var ja={exports:{}},_n={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ko=m,Ho=Symbol.for("react.element"),Yo=Symbol.for("react.fragment"),Qo=Object.prototype.hasOwnProperty,Vo=Ko.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Zo={key:!0,ref:!0,__self:!0,__source:!0};function Ca(e,t,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Qo.call(t,i)&&!Zo.hasOwnProperty(i)&&(r[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)r[i]===void 0&&(r[i]=t[i]);return{$$typeof:Ho,type:e,key:s,ref:o,props:r,_owner:Vo.current}}_n.Fragment=Yo;_n.jsx=Ca;_n.jsxs=Ca;ja.exports=_n;var a=ja.exports,Sa,fr=Ro;Sa=fr.createRoot,fr.hydrateRoot;var Ra={exports:{}},_a={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wt=m;function Jo(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Xo=typeof Object.is=="function"?Object.is:Jo,el=Wt.useSyncExternalStore,tl=Wt.useRef,nl=Wt.useEffect,il=Wt.useMemo,rl=Wt.useDebugValue;_a.useSyncExternalStoreWithSelector=function(e,t,n,i,r){var s=tl(null);if(s.current===null){var o={hasValue:!1,value:null};s.current=o}else o=s.current;s=il(function(){function c(f){if(!d){if(d=!0,p=f,f=i(f),r!==void 0&&o.hasValue){var h=o.value;if(r(h,f))return u=h}return u=f}if(h=u,Xo(p,f))return h;var x=i(f);return r!==void 0&&r(h,x)?(p=f,h):(p=f,u=x)}var d=!1,p,u,g=n===void 0?null:n;return[function(){return c(t())},g===null?void 0:function(){return c(g())}]},[t,n,i,r]);var l=el(e,s[0],s[1]);return nl(function(){o.hasValue=!0,o.value=l},[l]),rl(l),l};Ra.exports=_a;var al=Ra.exports;function sl(e){e()}function ol(){let e=null,t=null;return{clear(){e=null,t=null},notify(){sl(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const r=t={callback:n,next:null,prev:t};return r.prev?r.prev.next=r:e=r,function(){!i||e===null||(i=!1,r.next?r.next.prev=r.prev:t=r.prev,r.prev?r.prev.next=r.next:e=r.next)}}}}var mr={notify(){},get:()=>[]};function ll(e,t){let n,i=mr,r=0,s=!1;function o(x){p();const y=i.subscribe(x);let I=!1;return()=>{I||(I=!0,y(),u())}}function l(){i.notify()}function c(){h.onStateChange&&h.onStateChange()}function d(){return s}function p(){r++,n||(n=e.subscribe(c),i=ol())}function u(){r--,n&&r===0&&(n(),n=void 0,i.clear(),i=mr)}function g(){s||(s=!0,p())}function f(){s&&(s=!1,u())}const h={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:g,tryUnsubscribe:f,getListeners:()=>i};return h}var cl=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",dl=cl(),ul=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",pl=ul(),fl=()=>dl||pl?m.useLayoutEffect:m.useEffect,ml=fl(),Vn=Symbol.for("react-redux-context"),Zn=typeof globalThis!="undefined"?globalThis:{};function hl(){var n;if(!m.createContext)return{};const e=(n=Zn[Vn])!=null?n:Zn[Vn]=new Map;let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var Je=hl();function gl(e){const{children:t,context:n,serverState:i,store:r}=e,s=m.useMemo(()=>{const c=ll(r);return{store:r,subscription:c,getServerState:i?()=>i:void 0}},[r,i]),o=m.useMemo(()=>r.getState(),[r]);ml(()=>{const{subscription:c}=s;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==r.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[s,o]);const l=n||Je;return m.createElement(l.Provider,{value:s},t)}var vl=gl;function Ui(e=Je){return function(){return m.useContext(e)}}var La=Ui();function Da(e=Je){const t=e===Je?La:Ui(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var xl=Da();function yl(e=Je){const t=e===Je?xl:Da(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Xe=yl(),bl=(e,t)=>e===t;function wl(e=Je){const t=e===Je?La:Ui(e),n=(i,r={})=>{const{equalityFn:s=bl}=typeof r=="function"?{equalityFn:r}:r,o=t(),{store:l,subscription:c,getServerState:d}=o;m.useRef(!0);const p=m.useCallback({[i.name](g){return i(g)}}[i.name],[i]),u=al.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,p,s);return m.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var _e=wl();function nn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nn=function(n){return typeof n}:nn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nn(e)}function kl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cl(e,t,n){return t&&jl(e.prototype,t),e}function Sl(e,t){return t&&(nn(t)==="object"||typeof t=="function")?t:rn(e)}function fi(e){return fi=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},fi(e)}function rn(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Rl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&mi(e,t)}function mi(e,t){return mi=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},mi(e,t)}function an(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ea=function(e){Rl(t,e);function t(){var n,i;kl(this,t);for(var r=arguments.length,s=new Array(r),o=0;o<r;o++)s[o]=arguments[o];return i=Sl(this,(n=fi(t)).call.apply(n,[this].concat(s))),an(rn(i),"state",{bootstrapped:!1}),an(rn(i),"_unsubscribe",void 0),an(rn(i),"handlePersistorState",function(){var l=i.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return Cl(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(m.PureComponent);an(Ea,"defaultProps",{children:null,loading:null});let _l={data:""},Ll=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||_l,Dl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,El=/\/\*[^]*?\*\/|  +/g,hr=/\n+/g,Ve=(e,t)=>{let n="",i="",r="";for(let s in e){let o=e[s];s[0]=="@"?s[1]=="i"?n=s+" "+o+";":i+=s[1]=="f"?Ve(o,s):s+"{"+Ve(o,s[1]=="k"?"":t)+"}":typeof o=="object"?i+=Ve(o,t?t.replace(/([^,])+/g,l=>s.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):s):o!=null&&(s=/^--/.test(s)?s:s.replace(/[A-Z]/g,"-$&").toLowerCase(),r+=Ve.p?Ve.p(s,o):s+":"+o+";")}return n+(t&&r?t+"{"+r+"}":r)+i},Ge={},Ia=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Ia(e[n]);return t}return e},Il=(e,t,n,i,r)=>{let s=Ia(e),o=Ge[s]||(Ge[s]=(c=>{let d=0,p=11;for(;d<c.length;)p=101*p+c.charCodeAt(d++)>>>0;return"go"+p})(s));if(!Ge[o]){let c=s!==e?e:(d=>{let p,u,g=[{}];for(;p=Dl.exec(d.replace(El,""));)p[4]?g.shift():p[3]?(u=p[3].replace(hr," ").trim(),g.unshift(g[0][u]=g[0][u]||{})):g[0][p[1]]=p[2].replace(hr," ").trim();return g[0]})(e);Ge[o]=Ve(r?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&Ge.g?Ge.g:null;return n&&(Ge.g=Ge[o]),((c,d,p,u)=>{u?d.data=d.data.replace(u,c):d.data.indexOf(c)===-1&&(d.data=p?c+d.data:d.data+c)})(Ge[o],t,i,l),o},Al=(e,t,n)=>e.reduce((i,r,s)=>{let o=t[s];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":Ve(l,""):l===!1?"":l}return i+r+(o==null?"":o)},"");function Ln(e){let t=this||{},n=e.call?e(t.p):e;return Il(n.unshift?n.raw?Al(n,[].slice.call(arguments,1),t.p):n.reduce((i,r)=>Object.assign(i,r&&r.call?r(t.p):r),{}):n,Ll(t.target),t.g,t.o,t.k)}let Aa,hi,gi;Ln.bind({g:1});let Ye=Ln.bind({k:1});function Ol(e,t,n,i){Ve.p=t,Aa=e,hi=n,gi=i}function et(e,t){let n=this||{};return function(){let i=arguments;function r(s,o){let l=Object.assign({},s),c=l.className||r.className;n.p=Object.assign({theme:hi&&hi()},l),n.o=/ *go\d+/.test(c),l.className=Ln.apply(n,i)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),gi&&d[0]&&gi(l),Aa(d,l)}return r}}var Pl=e=>typeof e=="function",hn=(e,t)=>Pl(e)?e(t):e,Tl=(()=>{let e=0;return()=>(++e).toString()})(),Oa=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Nl=20,zi="default",Pa=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:i}=t;return Pa(e,{type:e.toasts.find(o=>o.id===i.id)?1:0,toast:i});case 3:let{toastId:r}=t;return{...e,toasts:e.toasts.map(o=>o.id===r||r===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let s=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+s}))}}},sn=[],Ta={toasts:[],pausedAt:void 0,settings:{toastLimit:Nl}},Be={},Na=(e,t=zi)=>{Be[t]=Pa(Be[t]||Ta,e),sn.forEach(([n,i])=>{n===t&&i(Be[t])})},Fa=e=>Object.keys(Be).forEach(t=>Na(e,t)),Fl=e=>Object.keys(Be).find(t=>Be[t].toasts.some(n=>n.id===e)),Dn=(e=zi)=>t=>{Na(t,e)},Ml={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$l=(e={},t=zi)=>{let[n,i]=m.useState(Be[t]||Ta),r=m.useRef(Be[t]);m.useEffect(()=>(r.current!==Be[t]&&i(Be[t]),sn.push([t,i]),()=>{let o=sn.findIndex(([l])=>l===t);o>-1&&sn.splice(o,1)}),[t]);let s=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Ml[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:s}},Ul=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Tl()}),Gt=e=>(t,n)=>{let i=Ul(t,e,n);return Dn(i.toasterId||Fl(i.id))({type:2,toast:i}),i.id},xe=(e,t)=>Gt("blank")(e,t);xe.error=Gt("error");xe.success=Gt("success");xe.loading=Gt("loading");xe.custom=Gt("custom");xe.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Dn(t)(n):Fa(n)};xe.dismissAll=e=>xe.dismiss(void 0,e);xe.remove=(e,t)=>{let n={type:4,toastId:e};t?Dn(t)(n):Fa(n)};xe.removeAll=e=>xe.remove(void 0,e);xe.promise=(e,t,n)=>{let i=xe.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(r=>{let s=t.success?hn(t.success,r):void 0;return s?xe.success(s,{id:i,...n,...n==null?void 0:n.success}):xe.dismiss(i),r}).catch(r=>{let s=t.error?hn(t.error,r):void 0;s?xe.error(s,{id:i,...n,...n==null?void 0:n.error}):xe.dismiss(i)}),e};var zl=1e3,Bl=(e,t="default")=>{let{toasts:n,pausedAt:i}=$l(e,t),r=m.useRef(new Map).current,s=m.useCallback((u,g=zl)=>{if(r.has(u))return;let f=setTimeout(()=>{r.delete(u),o({type:4,toastId:u})},g);r.set(u,f)},[]);m.useEffect(()=>{if(i)return;let u=Date.now(),g=n.map(f=>{if(f.duration===1/0)return;let h=(f.duration||0)+f.pauseDuration-(u-f.createdAt);if(h<0){f.visible&&xe.dismiss(f.id);return}return setTimeout(()=>xe.dismiss(f.id,t),h)});return()=>{g.forEach(f=>f&&clearTimeout(f))}},[n,i,t]);let o=m.useCallback(Dn(t),[t]),l=m.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=m.useCallback((u,g)=>{o({type:1,toast:{id:u,height:g}})},[o]),d=m.useCallback(()=>{i&&o({type:6,time:Date.now()})},[i,o]),p=m.useCallback((u,g)=>{let{reverseOrder:f=!1,gutter:h=8,defaultPosition:x}=g||{},y=n.filter(M=>(M.position||x)===(u.position||x)&&M.height),I=y.findIndex(M=>M.id===u.id),$=y.filter((M,v)=>v<I&&M.visible).length;return y.filter(M=>M.visible).slice(...f?[$+1]:[0,$]).reduce((M,v)=>M+(v.height||0)+h,0)},[n]);return m.useEffect(()=>{n.forEach(u=>{if(u.dismissed)s(u.id,u.removeDelay);else{let g=r.get(u.id);g&&(clearTimeout(g),r.delete(u.id))}})},[n,s]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:p}}},ql=Ye`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Wl=Ye`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Gl=Ye`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Kl=et("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${ql} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Wl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Gl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Hl=Ye`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Yl=et("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Hl} 1s linear infinite;
`,Ql=Ye`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Vl=Ye`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Zl=et("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Ql} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Vl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Jl=et("div")`
  position: absolute;
`,Xl=et("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ec=Ye`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,tc=et("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ec} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,nc=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?m.createElement(tc,null,t):t:n==="blank"?null:m.createElement(Xl,null,m.createElement(Yl,{...i}),n!=="loading"&&m.createElement(Jl,null,n==="error"?m.createElement(Kl,{...i}):m.createElement(Zl,{...i})))},ic=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,rc=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ac="0%{opacity:0;} 100%{opacity:1;}",sc="0%{opacity:1;} 100%{opacity:0;}",oc=et("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lc=et("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,cc=(e,t)=>{let n=e.includes("top")?1:-1,[i,r]=Oa()?[ac,sc]:[ic(n),rc(n)];return{animation:t?`${Ye(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Ye(r)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},dc=m.memo(({toast:e,position:t,style:n,children:i})=>{let r=e.height?cc(e.position||t||"top-center",e.visible):{opacity:0},s=m.createElement(nc,{toast:e}),o=m.createElement(lc,{...e.ariaProps},hn(e.message,e));return m.createElement(oc,{className:e.className,style:{...r,...n,...e.style}},typeof i=="function"?i({icon:s,message:o}):m.createElement(m.Fragment,null,s,o))});Ol(m.createElement);var uc=({id:e,className:t,style:n,onHeightUpdate:i,children:r})=>{let s=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;i(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return m.createElement("div",{ref:s,className:t,style:n},r)},pc=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},r=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Oa()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...r}},fc=Ln`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Qt=16,mc=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:r,toasterId:s,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=Bl(n,s);return m.createElement("div",{"data-rht-toaster":s||"",style:{position:"fixed",zIndex:9999,top:Qt,left:Qt,right:Qt,bottom:Qt,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(p=>{let u=p.position||t,g=d.calculateOffset(p,{reverseOrder:e,gutter:i,defaultPosition:t}),f=pc(u,g);return m.createElement(uc,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?fc:"",style:f},p.type==="custom"?hn(p.message,p):r?r(p):m.createElement(dc,{toast:p,position:u}))}))},yt=xe;function je(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var hc=typeof Symbol=="function"&&Symbol.observable||"@@observable",gr=hc,Jn=()=>Math.random().toString(36).substring(7).split("").join("."),gc={INIT:`@@redux/INIT${Jn()}`,REPLACE:`@@redux/REPLACE${Jn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Jn()}`},gn=gc;function Bi(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function qi(e,t,n){if(typeof e!="function")throw new Error(je(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(je(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(je(1));return n(qi)(e,t)}let i=e,r=t,s=new Map,o=s,l=0,c=!1;function d(){o===s&&(o=new Map,s.forEach((y,I)=>{o.set(I,y)}))}function p(){if(c)throw new Error(je(3));return r}function u(y){if(typeof y!="function")throw new Error(je(4));if(c)throw new Error(je(5));let I=!0;d();const $=l++;return o.set($,y),function(){if(I){if(c)throw new Error(je(6));I=!1,d(),o.delete($),s=null}}}function g(y){if(!Bi(y))throw new Error(je(7));if(typeof y.type=="undefined")throw new Error(je(8));if(typeof y.type!="string")throw new Error(je(17));if(c)throw new Error(je(9));try{c=!0,r=i(r,y)}finally{c=!1}return(s=o).forEach($=>{$()}),y}function f(y){if(typeof y!="function")throw new Error(je(10));i=y,g({type:gn.REPLACE})}function h(){const y=u;return{subscribe(I){if(typeof I!="object"||I===null)throw new Error(je(11));function $(){const v=I;v.next&&v.next(p())}return $(),{unsubscribe:y($)}},[gr](){return this}}}return g({type:gn.INIT}),{dispatch:g,subscribe:u,getState:p,replaceReducer:f,[gr]:h}}function vc(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:gn.INIT})=="undefined")throw new Error(je(12));if(typeof n(void 0,{type:gn.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(je(13))})}function Ma(e){const t=Object.keys(e),n={};for(let s=0;s<t.length;s++){const o=t[s];typeof e[o]=="function"&&(n[o]=e[o])}const i=Object.keys(n);let r;try{vc(n)}catch(s){r=s}return function(o={},l){if(r)throw r;let c=!1;const d={};for(let p=0;p<i.length;p++){const u=i[p],g=n[u],f=o[u],h=g(f,l);if(typeof h=="undefined")throw l&&l.type,new Error(je(14));d[u]=h,c=c||h!==f}return c=c||i.length!==Object.keys(o).length,c?d:o}}function vn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function xc(...e){return t=>(n,i)=>{const r=t(n,i);let s=()=>{throw new Error(je(15))};const o={getState:r.getState,dispatch:(c,...d)=>s(c,...d)},l=e.map(c=>c(o));return s=vn(...l)(r.dispatch),{...r,dispatch:s}}}function yc(e){return Bi(e)&&"type"in e&&typeof e.type=="string"}var $a=Symbol.for("immer-nothing"),vr=Symbol.for("immer-draftable"),Oe=Symbol.for("immer-state");function Ne(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var kt=Object.getPrototypeOf;function ut(e){return!!e&&!!e[Oe]}function Qe(e){var t;return e?Ua(e)||Array.isArray(e)||!!e[vr]||!!((t=e.constructor)!=null&&t[vr])||In(e)||An(e):!1}var bc=Object.prototype.constructor.toString();function Ua(e){if(!e||typeof e!="object")return!1;const t=kt(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===bc}function xn(e,t){En(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function En(e){const t=e[Oe];return t?t.type_:Array.isArray(e)?1:In(e)?2:An(e)?3:0}function vi(e,t){return En(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function za(e,t,n){const i=En(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function wc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function In(e){return e instanceof Map}function An(e){return e instanceof Set}function nt(e){return e.copy_||e.base_}function xi(e,t){if(In(e))return new Map(e);if(An(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Ua(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Oe];let r=Reflect.ownKeys(i);for(let s=0;s<r.length;s++){const o=r[s],l=i[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(kt(e),i)}else{const i=kt(e);if(i!==null&&n)return{...e};const r=Object.create(i);return Object.assign(r,e)}}function Wi(e,t=!1){return On(e)||ut(e)||!Qe(e)||(En(e)>1&&(e.set=e.add=e.clear=e.delete=kc),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Wi(i,!0))),e}function kc(){Ne(2)}function On(e){return Object.isFrozen(e)}var jc={};function pt(e){const t=jc[e];return t||Ne(0,e),t}var Nt;function Ba(){return Nt}function Cc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xr(e,t){t&&(pt("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function yi(e){bi(e),e.drafts_.forEach(Sc),e.drafts_=null}function bi(e){e===Nt&&(Nt=e.parent_)}function yr(e){return Nt=Cc(Nt,e)}function Sc(e){const t=e[Oe];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function br(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Oe].modified_&&(yi(t),Ne(4)),Qe(e)&&(e=yn(t,e),t.parent_||bn(t,e)),t.patches_&&pt("Patches").generateReplacementPatches_(n[Oe].base_,e,t.patches_,t.inversePatches_)):e=yn(t,n,[]),yi(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==$a?e:void 0}function yn(e,t,n){if(On(t))return t;const i=t[Oe];if(!i)return xn(t,(r,s)=>wr(e,i,t,r,s,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return bn(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const r=i.copy_;let s=r,o=!1;i.type_===3&&(s=new Set(r),r.clear(),o=!0),xn(s,(l,c)=>wr(e,i,r,l,c,n,o)),bn(e,r,!1),n&&e.patches_&&pt("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function wr(e,t,n,i,r,s,o){if(ut(r)){const l=s&&t&&t.type_!==3&&!vi(t.assigned_,i)?s.concat(i):void 0,c=yn(e,r,l);if(za(n,i,c),ut(c))e.canAutoFreeze_=!1;else return}else o&&n.add(r);if(Qe(r)&&!On(r)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;yn(e,r),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&bn(e,r)}}function bn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Wi(t,n)}function Rc(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:Ba(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let r=i,s=Gi;n&&(r=[i],s=Ft);const{revoke:o,proxy:l}=Proxy.revocable(r,s);return i.draft_=l,i.revoke_=o,l}var Gi={get(e,t){if(t===Oe)return e;const n=nt(e);if(!vi(n,t))return _c(e,n,t);const i=n[t];return e.finalized_||!Qe(i)?i:i===Xn(e.base_,t)?(ei(e),e.copy_[t]=ki(i,e)):i},has(e,t){return t in nt(e)},ownKeys(e){return Reflect.ownKeys(nt(e))},set(e,t,n){const i=qa(nt(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const r=Xn(nt(e),t),s=r==null?void 0:r[Oe];if(s&&s.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(wc(n,r)&&(n!==void 0||vi(e.base_,t)))return!0;ei(e),wi(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Xn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,ei(e),wi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=nt(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Ne(11)},getPrototypeOf(e){return kt(e.base_)},setPrototypeOf(){Ne(12)}},Ft={};xn(Gi,(e,t)=>{Ft[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ft.deleteProperty=function(e,t){return Ft.set.call(this,e,t,void 0)};Ft.set=function(e,t,n){return Gi.set.call(this,e[0],t,n,e[0])};function Xn(e,t){const n=e[Oe];return(n?nt(n):e)[t]}function _c(e,t,n){var r;const i=qa(t,n);return i?"value"in i?i.value:(r=i.get)==null?void 0:r.call(e.draft_):void 0}function qa(e,t){if(!(t in e))return;let n=kt(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=kt(n)}}function wi(e){e.modified_||(e.modified_=!0,e.parent_&&wi(e.parent_))}function ei(e){e.copy_||(e.copy_=xi(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Lc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const s=n;n=t;const o=this;return function(c=s,...d){return o.produce(c,p=>n.call(this,p,...d))}}typeof n!="function"&&Ne(6),i!==void 0&&typeof i!="function"&&Ne(7);let r;if(Qe(t)){const s=yr(this),o=ki(t,void 0);let l=!0;try{r=n(o),l=!1}finally{l?yi(s):bi(s)}return xr(s,i),br(r,s)}else if(!t||typeof t!="object"){if(r=n(t),r===void 0&&(r=t),r===$a&&(r=void 0),this.autoFreeze_&&Wi(r,!0),i){const s=[],o=[];pt("Patches").generateReplacementPatches_(t,r,s,o),i(s,o)}return r}else Ne(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let i,r;return[this.produce(t,n,(o,l)=>{i=o,r=l}),i,r]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qe(e)||Ne(8),ut(e)&&(e=Dc(e));const t=yr(this),n=ki(e,void 0);return n[Oe].isManual_=!0,bi(t),n}finishDraft(e,t){const n=e&&e[Oe];(!n||!n.isManual_)&&Ne(9);const{scope_:i}=n;return xr(i,t),br(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const r=t[n];if(r.path.length===0&&r.op==="replace"){e=r.value;break}}n>-1&&(t=t.slice(n+1));const i=pt("Patches").applyPatches_;return ut(e)?i(e,t):this.produce(e,r=>i(r,t))}};function ki(e,t){const n=In(e)?pt("MapSet").proxyMap_(e,t):An(e)?pt("MapSet").proxySet_(e,t):Rc(e,t);return(t?t.scope_:Ba()).drafts_.push(n),n}function Dc(e){return ut(e)||Ne(10,e),Wa(e)}function Wa(e){if(!Qe(e)||On(e))return e;const t=e[Oe];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=xi(e,t.scope_.immer_.useStrictShallowCopy_)}else n=xi(e,!0);return xn(n,(i,r)=>{za(n,i,Wa(r))}),t&&(t.finalized_=!1),n}var Pe=new Lc,Ga=Pe.produce;Pe.produceWithPatches.bind(Pe);Pe.setAutoFreeze.bind(Pe);Pe.setUseStrictShallowCopy.bind(Pe);Pe.applyPatches.bind(Pe);Pe.createDraft.bind(Pe);Pe.finishDraft.bind(Pe);function Ka(e){return({dispatch:n,getState:i})=>r=>s=>typeof s=="function"?s(n,i,e):r(s)}var Ec=Ka(),Ic=Ka,Ac=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?vn:vn.apply(null,arguments)},Oc=e=>e&&typeof e.match=="function";function Dt(e,t){function n(...i){if(t){let r=t(...i);if(!r)throw new Error(He(0));return{type:e,payload:r.payload,..."meta"in r&&{meta:r.meta},..."error"in r&&{error:r.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>yc(i)&&i.type===e,n}var Ha=class _t extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,_t.prototype)}static get[Symbol.species](){return _t}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new _t(...t[0].concat(this)):new _t(...t.concat(this))}};function kr(e){return Qe(e)?Ga(e,()=>{}):e}function Vt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Pc(e){return typeof e=="boolean"}var Tc=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:r=!0,actionCreatorCheck:s=!0}=t!=null?t:{};let o=new Ha;return n&&(Pc(n)?o.push(Ec):o.push(Ic(n.extraArgument))),o},Nc="RTK_autoBatch",jr=e=>t=>{setTimeout(t,e)},Fc=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let r=!0,s=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:jr(10):e.type==="callback"?e.queueNotification:jr(e.timeout),d=()=>{o=!1,s&&(s=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const u=()=>r&&p(),g=i.subscribe(u);return l.add(p),()=>{g(),l.delete(p)}},dispatch(p){var u;try{return r=!((u=p==null?void 0:p.meta)!=null&&u[Nc]),s=!r,s&&(o||(o=!0,c(d))),i.dispatch(p)}finally{r=!0}}})},Mc=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let r=new Ha(e);return i&&r.push(Fc(typeof i=="object"?i:void 0)),r};function $c(e){const t=Tc(),{reducer:n=void 0,middleware:i,devTools:r=!0,preloadedState:s=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Bi(n))l=Ma(n);else throw new Error(He(1));let c;typeof i=="function"?c=i(t):c=t();let d=vn;r&&(d=Ac({trace:!1,...typeof r=="object"&&r}));const p=xc(...c),u=Mc(p);let g=typeof o=="function"?o(u):u();const f=d(...g);return qi(l,s,f)}function Ya(e){const t={},n=[];let i;const r={addCase(s,o){const l=typeof s=="string"?s:s.type;if(!l)throw new Error(He(28));if(l in t)throw new Error(He(29));return t[l]=o,r},addMatcher(s,o){return n.push({matcher:s,reducer:o}),r},addDefaultCase(s){return i=s,r}};return e(r),[t,n,i]}function Uc(e){return typeof e=="function"}function zc(e,t){let[n,i,r]=Ya(t),s;if(Uc(e))s=()=>kr(e());else{const l=kr(e);s=()=>l}function o(l=s(),c){let d=[n[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[r]),d.reduce((p,u)=>{if(u)if(ut(p)){const f=u(p,c);return f===void 0?p:f}else{if(Qe(p))return Ga(p,g=>u(g,c));{const g=u(p,c);if(g===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return g}}return p},l)}return o.getInitialState=s,o}var Bc=(e,t)=>Oc(e)?e.match(t):e(t);function qc(...e){return t=>e.some(n=>Bc(n,t))}var Wc="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Gc=(e=21)=>{let t="",n=e;for(;n--;)t+=Wc[Math.random()*64|0];return t},Kc=["name","message","stack","code"],ti=class{constructor(e,t){Hn(this,"_type");this.payload=e,this.meta=t}},Cr=class{constructor(e,t){Hn(this,"_type");this.payload=e,this.meta=t}},Hc=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Kc)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},Sr="External signal was aborted",ke=(()=>{function e(t,n,i){const r=Dt(t+"/fulfilled",(c,d,p,u)=>({payload:c,meta:{...u||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),s=Dt(t+"/pending",(c,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:c,requestStatus:"pending"}})),o=Dt(t+"/rejected",(c,d,p,u,g)=>({payload:u,error:(i&&i.serializeError||Hc)(c||"Rejected"),meta:{...g||{},arg:p,requestId:d,rejectedWithValue:!!u,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(p,u,g)=>{const f=i!=null&&i.idGenerator?i.idGenerator(c):Gc(),h=new AbortController;let x,y;function I(M){y=M,h.abort()}d&&(d.aborted?I(Sr):d.addEventListener("abort",()=>I(Sr),{once:!0}));const $=async function(){var S,w;let M;try{let R=(S=i==null?void 0:i.condition)==null?void 0:S.call(i,c,{getState:u,extra:g});if(Qc(R)&&(R=await R),R===!1||h.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const q=new Promise((b,L)=>{x=()=>{L({name:"AbortError",message:y||"Aborted"})},h.signal.addEventListener("abort",x)});p(s(f,c,(w=i==null?void 0:i.getPendingMeta)==null?void 0:w.call(i,{requestId:f,arg:c},{getState:u,extra:g}))),M=await Promise.race([q,Promise.resolve(n(c,{dispatch:p,getState:u,extra:g,requestId:f,signal:h.signal,abort:I,rejectWithValue:(b,L)=>new ti(b,L),fulfillWithValue:(b,L)=>new Cr(b,L)})).then(b=>{if(b instanceof ti)throw b;return b instanceof Cr?r(b.payload,f,c,b.meta):r(b,f,c)})])}catch(R){M=R instanceof ti?o(null,f,c,R.payload,R.meta):o(R,f,c)}finally{x&&h.signal.removeEventListener("abort",x)}return i&&!i.dispatchConditionRejection&&o.match(M)&&M.meta.condition||p(M),M}();return Object.assign($,{abort:I,requestId:f,arg:c,unwrap(){return $.then(Yc)}})}}return Object.assign(l,{pending:s,rejected:o,fulfilled:r,settled:qc(o,r),typePrefix:t})}return e.withTypes=()=>e,e})();function Yc(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Qc(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Vc=Symbol.for("rtk-slice-createasyncthunk");function Zc(e,t){return`${e}/${t}`}function Jc({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Vc];return function(r){const{name:s,reducerPath:o=s}=r;if(!s)throw new Error(He(11));const l=(typeof r.reducers=="function"?r.reducers(ed()):r.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(v,S){const w=typeof v=="string"?v:v.type;if(!w)throw new Error(He(12));if(w in d.sliceCaseReducersByType)throw new Error(He(13));return d.sliceCaseReducersByType[w]=S,p},addMatcher(v,S){return d.sliceMatchers.push({matcher:v,reducer:S}),p},exposeAction(v,S){return d.actionCreators[v]=S,p},exposeCaseReducer(v,S){return d.sliceCaseReducersByName[v]=S,p}};c.forEach(v=>{const S=l[v],w={reducerName:v,type:Zc(s,v),createNotation:typeof r.reducers=="function"};nd(S)?rd(w,S,p,t):td(w,S,p)});function u(){const[v={},S=[],w=void 0]=typeof r.extraReducers=="function"?Ya(r.extraReducers):[r.extraReducers],R={...v,...d.sliceCaseReducersByType};return zc(r.initialState,q=>{for(let b in R)q.addCase(b,R[b]);for(let b of d.sliceMatchers)q.addMatcher(b.matcher,b.reducer);for(let b of S)q.addMatcher(b.matcher,b.reducer);w&&q.addDefaultCase(w)})}const g=v=>v,f=new Map,h=new WeakMap;let x;function y(v,S){return x||(x=u()),x(v,S)}function I(){return x||(x=u()),x.getInitialState()}function $(v,S=!1){function w(q){let b=q[v];return typeof b=="undefined"&&S&&(b=Vt(h,w,I)),b}function R(q=g){const b=Vt(f,S,()=>new WeakMap);return Vt(b,q,()=>{var j;const L={};for(const[N,A]of Object.entries((j=r.selectors)!=null?j:{}))L[N]=Xc(A,q,()=>Vt(h,q,I),S);return L})}return{reducerPath:v,getSelectors:R,get selectors(){return R(w)},selectSlice:w}}const M={name:s,reducer:y,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:I,...$(o),injectInto(v,{reducerPath:S,...w}={}){const R=S!=null?S:o;return v.inject({reducerPath:R,reducer:y},w),{...M,...$(R,!0)}}};return M}}function Xc(e,t,n,i){function r(s,...o){let l=t(s);return typeof l=="undefined"&&i&&(l=n()),e(l,...o)}return r.unwrapped=e,r}var Kt=Jc();function ed(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function td({type:e,reducerName:t,createNotation:n},i,r){let s,o;if("reducer"in i){if(n&&!id(i))throw new Error(He(17));s=i.reducer,o=i.prepare}else s=i;r.addCase(e,s).exposeCaseReducer(t,s).exposeAction(t,o?Dt(e,o):Dt(e))}function nd(e){return e._reducerDefinitionType==="asyncThunk"}function id(e){return e._reducerDefinitionType==="reducerWithPrepare"}function rd({type:e,reducerName:t},n,i,r){if(!r)throw new Error(He(18));const{payloadCreator:s,fulfilled:o,pending:l,rejected:c,settled:d,options:p}=n,u=r(e,s,p);i.exposeAction(t,u),o&&i.addCase(u.fulfilled,o),l&&i.addCase(u.pending,l),c&&i.addCase(u.rejected,c),d&&i.addMatcher(u.settled,d),i.exposeCaseReducer(t,{fulfilled:o||Zt,pending:l||Zt,rejected:c||Zt,settled:d||Zt})}function Zt(){}function He(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ki="persist:",Qa="persist/FLUSH",Pn="persist/REHYDRATE",Va="persist/PAUSE",Za="persist/PERSIST",Hi="persist/PURGE",Ja="persist/REGISTER",ad=-1;function on(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?on=function(n){return typeof n}:on=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},on(e)}function Rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function sd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rr(n,!0).forEach(function(i){od(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rr(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ld(e,t,n,i){i.debug;var r=sd({},n);return e&&on(e)==="object"&&Object.keys(e).forEach(function(s){s!=="_persist"&&t[s]===n[s]&&(r[s]=e[s])}),r}function cd(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],r=e.throttle||0,s="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ki).concat(e.key),o=e.storage,l;e.serialize===!1?l=function(S){return S}:typeof e.serialize=="function"?l=e.serialize:l=dd;var c=e.writeFailHandler||null,d={},p={},u=[],g=null,f=null,h=function(S){Object.keys(S).forEach(function(w){I(w)&&d[w]!==S[w]&&u.indexOf(w)===-1&&u.push(w)}),Object.keys(d).forEach(function(w){S[w]===void 0&&I(w)&&u.indexOf(w)===-1&&d[w]!==void 0&&u.push(w)}),g===null&&(g=setInterval(x,r)),d=S};function x(){if(u.length===0){g&&clearInterval(g),g=null;return}var v=u.shift(),S=i.reduce(function(w,R){return R.in(w,v,d)},d[v]);if(S!==void 0)try{p[v]=l(S)}catch(w){console.error("redux-persist/createPersistoid: error serializing state",w)}else delete p[v];u.length===0&&y()}function y(){Object.keys(p).forEach(function(v){d[v]===void 0&&delete p[v]}),f=o.setItem(s,l(p)).catch($)}function I(v){return!(n&&n.indexOf(v)===-1&&v!=="_persist"||t&&t.indexOf(v)!==-1)}function $(v){c&&c(v)}var M=function(){for(;u.length!==0;)x();return f||Promise.resolve()};return{update:h,flush:M}}function dd(e){return JSON.stringify(e)}function ud(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ki).concat(e.key),i=e.storage;e.debug;var r;return e.deserialize===!1?r=function(o){return o}:typeof e.deserialize=="function"?r=e.deserialize:r=pd,i.getItem(n).then(function(s){if(s)try{var o={},l=r(s);return Object.keys(l).forEach(function(c){o[c]=t.reduceRight(function(d,p){return p.out(d,c,l)},r(l[c]))}),o}catch(c){throw c}else return})}function pd(e){return JSON.parse(e)}function fd(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ki).concat(e.key);return t.removeItem(n,md)}function md(e){}function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_r(n,!0).forEach(function(i){hd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function hd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function gd(e,t){if(e==null)return{};var n=vd(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function vd(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}var xd=5e3;function ji(e,t){var n=e.version!==void 0?e.version:ad;e.debug;var i=e.stateReconciler===void 0?ld:e.stateReconciler,r=e.getStoredState||ud,s=e.timeout!==void 0?e.timeout:xd,o=null,l=!1,c=!0,d=function(u){return u._persist.rehydrated&&o&&!c&&o.update(u),u};return function(p,u){var g=p||{},f=g._persist,h=gd(g,["_persist"]),x=h;if(u.type===Za){var y=!1,I=function(q,b){y||(u.rehydrate(e.key,q,b),y=!0)};if(s&&setTimeout(function(){!y&&I(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},s),c=!1,o||(o=cd(e)),f)return Ke({},t(x,u),{_persist:f});if(typeof u.rehydrate!="function"||typeof u.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),r(e).then(function(R){var q=e.migrate||function(b,L){return Promise.resolve(b)};q(R,n).then(function(b){I(b)},function(b){I(void 0,b)})},function(R){I(void 0,R)}),Ke({},t(x,u),{_persist:{version:n,rehydrated:!1}})}else{if(u.type===Hi)return l=!0,u.result(fd(e)),Ke({},t(x,u),{_persist:f});if(u.type===Qa)return u.result(o&&o.flush()),Ke({},t(x,u),{_persist:f});if(u.type===Va)c=!0;else if(u.type===Pn){if(l)return Ke({},x,{_persist:Ke({},f,{rehydrated:!0})});if(u.key===e.key){var $=t(x,u),M=u.payload,v=i!==!1&&M!==void 0?i(M,p,$,e):$,S=Ke({},v,{_persist:Ke({},f,{rehydrated:!0})});return d(S)}}}if(!f)return t(p,u);var w=t(x,u);return w===x?p:d(Ke({},w,{_persist:f}))}}function Lr(e){return wd(e)||bd(e)||yd()}function yd(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function bd(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function wd(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function Dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function Ci(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dr(n,!0).forEach(function(i){kd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dr(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function kd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Xa={registry:[],bootstrapped:!1},jd=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Xa,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Ja:return Ci({},t,{registry:[].concat(Lr(t.registry),[n.key])});case Pn:var i=t.registry.indexOf(n.key),r=Lr(t.registry);return r.splice(i,1),Ci({},t,{registry:r,bootstrapped:r.length===0});default:return t}};function Cd(e,t,n){var i=qi(jd,Xa,void 0),r=function(c){i.dispatch({type:Ja,key:c})},s=function(c,d,p){var u={type:Pn,payload:d,err:p,key:c};e.dispatch(u),i.dispatch(u)},o=Ci({},i,{purge:function(){var c=[];return e.dispatch({type:Hi,result:function(p){c.push(p)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:Qa,result:function(p){c.push(p)}}),Promise.all(c)},pause:function(){e.dispatch({type:Va})},persist:function(){e.dispatch({type:Za,register:r,rehydrate:s})}});return o.persist(),o}var Yi={},Qi={};Qi.__esModule=!0;Qi.default=_d;function ln(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?ln=function(n){return typeof n}:ln=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},ln(e)}function ni(){}var Sd={getItem:ni,setItem:ni,removeItem:ni};function Rd(e){if((typeof self=="undefined"?"undefined":ln(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(i){return!1}return!0}function _d(e){var t="".concat(e,"Storage");return Rd(t)?self[t]:Sd}Yi.__esModule=!0;Yi.default=Ed;var Ld=Dd(Qi);function Dd(e){return e&&e.__esModule?e:{default:e}}function Ed(e){var t=(0,Ld.default)(e);return{getItem:function(i){return new Promise(function(r,s){r(t.getItem(i))})},setItem:function(i,r){return new Promise(function(s,o){s(t.setItem(i,r))})},removeItem:function(i){return new Promise(function(r,s){r(t.removeItem(i))})}}}var Tn=void 0,Id=Ad(Yi);function Ad(e){return e&&e.__esModule?e:{default:e}}var Od=(0,Id.default)("local");Tn=Od;const we={APP_ID:"wx4a71fe09bb125182",APP_SECRET:"e8a88b5e0271b89a1dc71261d9063fad",REDIRECT_URI:"https://www.homefreshfoods.ai/wechat/callback",SCOPE:"snsapi_userinfo",WEB_SCOPE:"snsapi_login",MOBILE_AUTHORIZE_URL:"https://open.weixin.qq.com/connect/oauth2/authorize",QR_AUTHORIZE_URL:"https://open.weixin.qq.com/connect/qrconnect",ACCESS_TOKEN_URL:"https://api.weixin.qq.com/sns/oauth2/access_token",USER_INFO_URL:"https://api.weixin.qq.com/sns/userinfo"},Mt=()=>(console.log("� Redirect URI:",we.REDIRECT_URI),we.REDIRECT_URI),Si=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ft=()=>/micromessenger/i.test(navigator.userAgent),cn=(e=null)=>{const t=e||Math.random().toString(36).substring(7);console.log("🔗 Generating WeChat OAuth URL");const n=Mt();console.log("🔍 Using redirect URI:",n);const i=new URLSearchParams({appid:we.APP_ID,redirect_uri:n,response_type:"code",scope:we.SCOPE,state:t}),s=`${ft()?we.MOBILE_AUTHORIZE_URL:we.QR_AUTHORIZE_URL}?${i.toString()}#wechat_redirect`;return console.log("🔗 Final WeChat OAuth URL:",s),console.log("📋 OAuth parameters:",Object.fromEntries(i)),console.log("🌐 Browser type:",ft()?"WeChat Browser":"External Browser"),s},es=(e=null)=>{const t=e||Math.random().toString(36).substring(7);console.log("🔗 Generating WeChat OAuth URL");const n=Mt();console.log("🔍 Using redirect URI:",n);const i=new URLSearchParams({appid:we.APP_ID,redirect_uri:n,response_type:"code",scope:we.SCOPE,state:t}),s=`${ft()?we.MOBILE_AUTHORIZE_URL:we.QR_AUTHORIZE_URL}?${i.toString()}#wechat_redirect`;return console.log("🔗 Final WeChat OAuth URL:",s),console.log("📋 OAuth parameters:",Object.fromEntries(i)),console.log("🌐 Browser type:",ft()?"WeChat Browser":"External Browser"),s},Ri={getAccessToken:async e=>{const t=new URLSearchParams({appid:we.APP_ID,secret:we.APP_SECRET,code:e,grant_type:"authorization_code"});return await(await fetch(`${we.ACCESS_TOKEN_URL}?${t.toString()}`)).json()},getUserInfo:async(e,t)=>{const n=new URLSearchParams({access_token:e,openid:t,lang:"en"});return await(await fetch(`${we.USER_INFO_URL}?${n.toString()}`)).json()}},Pd=Object.freeze(Object.defineProperty({__proto__:null,WECHAT_API:Ri,WECHAT_CONFIG:we,generateWeChatAuthUrlMobile:es,generateWeChatAuthUrlWeb:cn,getRedirectUri:Mt,isMobileDevice:Si,isWeChatBrowser:ft},Symbol.toStringTag,{value:"Module"})),ii=ke("auth/authenticateWithWeChat",async(e,{rejectWithValue:t})=>{try{console.log("Starting WeChat authentication with code:",e);const n=await Ri.getAccessToken(e);if(console.log("WeChat token response:",n),n.errcode)throw new Error(n.errmsg||"Failed to get WeChat access token");const{access_token:i,openid:r}=n,s=await Ri.getUserInfo(i,r);if(console.log("WeChat user response:",s),s.errcode)throw new Error(s.errmsg||"Failed to get WeChat user info");const o={id:`wechat_${r}`,openid:r,name:s.nickname,displayName:s.nickname,avatar:s.headimgurl,country:s.country,province:s.province,city:s.city,sex:s.sex,language:s.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:r,accessToken:i,createdAt:new Date().toISOString()};return console.log("✅ WeChat authentication successful:",o),o}catch(n){return console.error("❌ WeChat authentication failed:",n),t(n.message||"WeChat authentication failed")}}),ts=ke("auth/logout",async(e,{rejectWithValue:t})=>{try{return console.log("User logged out"),sessionStorage.removeItem("wechat_access_token"),sessionStorage.removeItem("wechat_pending_cart_action"),{clearData:!0}}catch(n){return t(n.message)}}),ns=Kt({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null,wechatAuthUrl:null},reducers:{logout:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,localStorage.removeItem("authToken"),localStorage.removeItem("userData")},clearError:e=>{e.error=null},updateUserProfile:(e,t)=>{e.user&&(e.user={...e.user,...t.payload})},setWeChatAuthUrl:(e,t)=>{e.wechatAuthUrl=t.payload},setTestUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,e.loading=!1,e.error=null},clearAllData:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.wechatAuthUrl=null}},extraReducers:e=>{e.addCase(ii.pending,t=>{t.loading=!0,t.error=null}).addCase(ii.fulfilled,(t,n)=>{t.loading=!1,t.user=n.payload,t.isAuthenticated=!0,t.error=null}).addCase(ii.rejected,(t,n)=>{t.loading=!1,t.error=n.payload,t.isAuthenticated=!1,t.user=null}).addCase(ts.fulfilled,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null}).addCase(Hi,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null})}}),{clearError:Dh,updateUserProfile:Eh,setWeChatAuthUrl:Ih,clearAllData:Td,logout:Nd,setTestUser:Jt}=ns.actions,Fd=ns.reducer;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const is="firebasestorage.googleapis.com",rs="storageBucket",Md=2*60*1e3,$d=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fe extends $i{constructor(t,n,i=0){super(ri(t),`Firebase Storage: ${n} (${ri(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,fe.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ri(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var pe;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(pe||(pe={}));function ri(e){return"storage/"+e}function Vi(){const e="An unknown error occurred, please check the error payload for server response.";return new fe(pe.UNKNOWN,e)}function Ud(e){return new fe(pe.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function zd(e){return new fe(pe.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bd(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new fe(pe.UNAUTHENTICATED,e)}function qd(){return new fe(pe.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wd(e){return new fe(pe.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Gd(){return new fe(pe.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kd(){return new fe(pe.CANCELED,"User canceled the upload/download.")}function Hd(e){return new fe(pe.INVALID_URL,"Invalid URL '"+e+"'.")}function Yd(e){return new fe(pe.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Qd(){return new fe(pe.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rs+"' property when initializing the app?")}function Vd(){return new fe(pe.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zd(){return new fe(pe.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jd(e){return new fe(pe.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function _i(e){return new fe(pe.INVALID_ARGUMENT,e)}function as(){return new fe(pe.APP_DELETED,"The Firebase app was deleted.")}function Xd(e){return new fe(pe.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Et(e,t){return new fe(pe.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Rt(e){throw new fe(pe.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ie{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ie.makeFromUrl(t,n)}catch(r){return new Ie(t,"")}if(i.path==="")return i;throw Yd(t)}static makeFromUrl(t,n){let i=null;const r="([A-Za-z0-9.\\-_]+)";function s(v){v.path.charAt(v.path.length-1)==="/"&&(v.path_=v.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+r+o,"i"),c={bucket:1,path:3};function d(v){v.path_=decodeURIComponent(v.path)}const p="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),g="(/([^?#]*).*)?$",f=new RegExp(`^https?://${u}/${p}/b/${r}/o${g}`,"i"),h={bucket:1,path:3},x=n===is?"(?:storage.googleapis.com|storage.cloud.google.com)":n,y="([^?#]*)",I=new RegExp(`^https?://${x}/${r}/${y}`,"i"),M=[{regex:l,indices:c,postModify:s},{regex:f,indices:h,postModify:d},{regex:I,indices:{bucket:1,path:2},postModify:d}];for(let v=0;v<M.length;v++){const S=M[v],w=S.regex.exec(t);if(w){const R=w[S.indices.bucket];let q=w[S.indices.path];q||(q=""),i=new Ie(R,q),S.postModify(i);break}}if(i==null)throw Hd(t);return i}}class eu{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e,t,n){let i=1,r=null,s=null,o=!1,l=0;function c(){return l===2}let d=!1;function p(...y){d||(d=!0,t.apply(null,y))}function u(y){r=setTimeout(()=>{r=null,e(f,c())},y)}function g(){s&&clearTimeout(s)}function f(y,...I){if(d){g();return}if(y){g(),p.call(null,y,...I);return}if(c()||o){g(),p.call(null,y,...I);return}i<64&&(i*=2);let M;l===1?(l=2,M=0):M=(i+Math.random())*1e3,u(M)}let h=!1;function x(y){h||(h=!0,g(),!d&&(r!==null?(y||(l=2),clearTimeout(r),u(0)):y||(l=1)))}return u(0),s=setTimeout(()=>{o=!0,x(!0)},n),x}function nu(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e){return e!==void 0}function ru(e){return typeof e=="object"&&!Array.isArray(e)}function Zi(e){return typeof e=="string"||e instanceof String}function Er(e){return Ji()&&e instanceof Blob}function Ji(){return typeof Blob!="undefined"}function Ir(e,t,n,i){if(i<t)throw _i(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw _i(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xi(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function ss(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const r=t(i)+"="+t(e[i]);n=n+r+"&"}return n=n.slice(0,-1),n}var lt;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(lt||(lt={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function au(e,t){const n=e>=500&&e<600,r=[408,429].indexOf(e)!==-1,s=t.indexOf(e)!==-1;return n||r||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class su{constructor(t,n,i,r,s,o,l,c,d,p,u,g=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=r,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=u,this.retry=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,h)=>{this.resolve_=f,this.reject_=h,this.start_()})}start_(){const t=(i,r)=>{if(r){i(!1,new Xt(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const l=s.getErrorCode()===lt.NO_ERROR,c=s.getStatus();if(!l||au(c,this.additionalRetryCodes_)&&this.retry){const p=s.getErrorCode()===lt.ABORT;i(!1,new Xt(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Xt(d,s))})},n=(i,r)=>{const s=this.resolve_,o=this.reject_,l=r.connection;if(r.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());iu(c)?s(c):s()}catch(c){o(c)}else if(l!==null){const c=Vi();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(r.canceled){const c=this.appDelete_?as():Kd();o(c)}else{const c=Gd();o(c)}};this.canceled_?n(!1,new Xt(!1,null,!0)):this.backoffId_=tu(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&nu(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Xt{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function ou(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function lu(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function cu(e,t){t&&(e["X-Firebase-GMPID"]=t)}function du(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uu(e,t,n,i,r,s,o=!0){const l=ss(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return cu(d,t),ou(d,n),lu(d,s),du(d,i),new su(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,r,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function fu(...e){const t=pu();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Ji())return new Blob(e);throw new fe(pe.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mu(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(e){if(typeof atob=="undefined")throw Jd("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ai{constructor(t,n){this.data=t,this.contentType=n||null}}function gu(e,t){switch(e){case qe.RAW:return new ai(os(t));case qe.BASE64:case qe.BASE64URL:return new ai(ls(e,t));case qe.DATA_URL:return new ai(xu(t),yu(t))}throw Vi()}function os(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const s=i,o=e.charCodeAt(++n);i=65536|(s&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function vu(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Et(qe.DATA_URL,"Malformed data URL.")}return os(t)}function ls(e,t){switch(e){case qe.BASE64:{const r=t.indexOf("-")!==-1,s=t.indexOf("_")!==-1;if(r||s)throw Et(e,"Invalid character '"+(r?"-":"_")+"' found: is it base64url encoded?");break}case qe.BASE64URL:{const r=t.indexOf("+")!==-1,s=t.indexOf("/")!==-1;if(r||s)throw Et(e,"Invalid character '"+(r?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hu(t)}catch(r){throw r.message.includes("polyfill")?r:Et(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let r=0;r<n.length;r++)i[r]=n.charCodeAt(r);return i}class cs{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Et(qe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=bu(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function xu(e){const t=new cs(e);return t.base64?ls(qe.BASE64,t.rest):vu(t.rest)}function yu(e){return new cs(e).contentType}function bu(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n){let i=0,r="";Er(t)?(this.data_=t,i=t.size,r=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=r}size(){return this.size_}type(){return this.type_}slice(t,n){if(Er(this.data_)){const i=this.data_,r=mu(i,t,n);return r===null?null:new Ze(r)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Ze(i,!0)}}static getBlob(...t){if(Ji()){const n=t.map(i=>i instanceof Ze?i.data_:i);return new Ze(fu.apply(null,n))}else{const n=t.map(o=>Zi(o)?gu(qe.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const r=new Uint8Array(i);let s=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)r[s++]=o[l]}),new Ze(r,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ds(e){let t;try{t=JSON.parse(e)}catch(n){return null}return ru(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ku(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function us(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(e,t){return t}class Re{constructor(t,n,i,r){this.server=t,this.local=n||t,this.writable=!!i,this.xform=r||ju}}let en=null;function Cu(e){return!Zi(e)||e.length<2?e:us(e)}function ps(){if(en)return en;const e=[];e.push(new Re("bucket")),e.push(new Re("generation")),e.push(new Re("metageneration")),e.push(new Re("name","fullPath",!0));function t(s,o){return Cu(o)}const n=new Re("name");n.xform=t,e.push(n);function i(s,o){return o!==void 0?Number(o):o}const r=new Re("size");return r.xform=i,e.push(r),e.push(new Re("timeCreated")),e.push(new Re("updated")),e.push(new Re("md5Hash",null,!0)),e.push(new Re("cacheControl",null,!0)),e.push(new Re("contentDisposition",null,!0)),e.push(new Re("contentEncoding",null,!0)),e.push(new Re("contentLanguage",null,!0)),e.push(new Re("contentType",null,!0)),e.push(new Re("metadata","customMetadata",!0)),en=e,en}function Su(e,t){function n(){const i=e.bucket,r=e.fullPath,s=new Ie(i,r);return t._makeStorageReference(s)}Object.defineProperty(e,"ref",{get:n})}function Ru(e,t,n){const i={};i.type="file";const r=n.length;for(let s=0;s<r;s++){const o=n[s];i[o.local]=o.xform(i,t[o.server])}return Su(i,e),i}function fs(e,t,n){const i=ds(t);return i===null?null:Ru(e,i,n)}function _u(e,t,n,i){const r=ds(t);if(r===null||!Zi(r.downloadTokens))return null;const s=r.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(d=>{const p=e.bucket,u=e.fullPath,g="/b/"+o(p)+"/o/"+o(u),f=Xi(g,n,i),h=ss({alt:"media",token:d});return f+h})[0]}function Lu(e,t){const n={},i=t.length;for(let r=0;r<i;r++){const s=t[r];s.writable&&(n[s.server]=e[s.local])}return JSON.stringify(n)}class ms{constructor(t,n,i,r){this.url=t,this.method=n,this.handler=i,this.timeout=r,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hs(e){if(!e)throw Vi()}function Du(e,t){function n(i,r){const s=fs(e,r,t);return hs(s!==null),s}return n}function Eu(e,t){function n(i,r){const s=fs(e,r,t);return hs(s!==null),_u(s,r,e.host,e._protocol)}return n}function gs(e){function t(n,i){let r;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?r=qd():r=Bd():n.getStatus()===402?r=zd(e.bucket):n.getStatus()===403?r=Wd(e.path):r=i,r.status=n.getStatus(),r.serverResponse=i.serverResponse,r}return t}function Iu(e){const t=gs(e);function n(i,r){let s=t(i,r);return i.getStatus()===404&&(s=Ud(e.path)),s.serverResponse=r.serverResponse,s}return n}function Au(e,t,n){const i=t.fullServerUrl(),r=Xi(i,e.host,e._protocol),s="GET",o=e.maxOperationRetryTime,l=new ms(r,s,Eu(e,n),o);return l.errorHandler=Iu(t),l}function Ou(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Pu(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=Ou(null,t)),i}function Tu(e,t,n,i,r){const s=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let M="";for(let v=0;v<2;v++)M=M+Math.random().toString().slice(2);return M}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=Pu(t,i,r),p=Lu(d,n),u="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,g=`\r
--`+c+"--",f=Ze.getBlob(u,i,g);if(f===null)throw Vd();const h={name:d.fullPath},x=Xi(s,e.host,e._protocol),y="POST",I=e.maxUploadRetryTime,$=new ms(x,y,Du(e,n),I);return $.urlParams=h,$.headers=o,$.body=f.uploadData(),$.errorHandler=gs(t),$}class Nu{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=lt.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=lt.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=lt.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,r){if(this.sent_)throw Rt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),r!==void 0)for(const s in r)r.hasOwnProperty(s)&&this.xhr_.setRequestHeader(s,r[s].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw Rt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Fu extends Nu{initXhr(){this.xhr_.responseType="text"}}function vs(){return new Fu}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mt{constructor(t,n){this._service=t,n instanceof Ie?this._location=n:this._location=Ie.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new mt(t,n)}get root(){const t=new Ie(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return us(this._location.path)}get storage(){return this._service}get parent(){const t=wu(this._location.path);if(t===null)return null;const n=new Ie(this._location.bucket,t);return new mt(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Xd(t)}}function Mu(e,t,n){e._throwIfRoot("uploadBytes");const i=Tu(e.storage,e._location,ps(),new Ze(t,!0),n);return e.storage.makeRequestWithTokens(i,vs).then(r=>({metadata:r,ref:e}))}function $u(e){e._throwIfRoot("getDownloadURL");const t=Au(e.storage,e._location,ps());return e.storage.makeRequestWithTokens(t,vs).then(n=>{if(n===null)throw Zd();return n})}function Uu(e,t){const n=ku(e._location.path,t),i=new Ie(e._location.bucket,n);return new mt(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){return/^[A-Za-z]+:\/\//.test(e)}function Bu(e,t){return new mt(e,t)}function xs(e,t){if(e instanceof er){const n=e;if(n._bucket==null)throw Qd();const i=new mt(n,n._bucket);return t!=null?xs(i,t):i}else return t!==void 0?Uu(e,t):e}function qu(e,t){if(t&&zu(t)){if(e instanceof er)return Bu(e,t);throw _i("To use ref(service, url), the first argument must be a Storage instance.")}else return xs(e,t)}function Ar(e,t){const n=t==null?void 0:t[rs];return n==null?null:Ie.makeFromBucketSpec(n,e)}function Wu(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:r}=i;r&&(e._overrideAuthToken=typeof r=="string"?r:No(r,e.app.options.projectId))}class er{constructor(t,n,i,r,s){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=r,this._firebaseVersion=s,this._bucket=null,this._host=is,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Md,this._maxUploadRetryTime=$d,this._requests=new Set,r!=null?this._bucket=Ie.makeFromBucketSpec(r,this._host):this._bucket=Ar(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ie.makeFromBucketSpec(this._url,t):this._bucket=Ar(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ir("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ir("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new mt(this,t)}_makeRequest(t,n,i,r,s=!0){if(this._deleted)return new eu(as());{const o=uu(t,this._appId,i,r,n,this._firebaseVersion,s);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,r]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,r).getPromise()}}const Or="@firebase/storage",Pr="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ys="storage";function Gu(e,t,n){return e=Ct(e),Mu(e,t,n)}function Ku(e){return e=Ct(e),$u(e)}function Hu(e,t){return e=Ct(e),qu(e,t)}function Yu(e=ha(),t){e=Ct(e);const i=qt(e,ys).getImmediate({identifier:t}),r=To("storage");return r&&Qu(i,...r),i}function Qu(e,t,n,i={}){Wu(e,t,n,i)}function Vu(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),r=e.getProvider("app-check-internal");return new er(n,i,r,t,Po)}function Zu(){Pt(new Tt(ys,Vu,"PUBLIC").setMultipleInstances(!0)),wt(Or,Pr,""),wt(Or,Pr,"esm2017")}Zu();const bs="@firebase/installations",tr="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=1e4,ks=`w:${tr}`,js="FIS_v2",Ju="https://firebaseinstallations.googleapis.com/v1",Xu=60*60*1e3,ep="installations",tp="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ht=new ga(ep,tp,np);function Cs(e){return e instanceof $i&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ss({projectId:e}){return`${Ju}/projects/${e}/installations`}function Rs(e){return{token:e.token,requestStatus:2,expiresIn:rp(e.expiresIn),creationTime:Date.now()}}async function _s(e,t){const i=(await t.json()).error;return ht.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Ls({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ip(e,{refreshToken:t}){const n=Ls(e);return n.append("Authorization",ap(t)),n}async function Ds(e){const t=await e();return t.status>=500&&t.status<600?e():t}function rp(e){return Number(e.replace("s","000"))}function ap(e){return`${js} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sp({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Ss(e),r=Ls(e),s=t.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={fid:n,authVersion:js,appId:e.appId,sdkVersion:ks},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await Ds(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Rs(d.authToken)}}else throw await _s("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Es(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function op(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=/^[cdef][\w-]{21}$/,Li="";function cp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=dp(e);return lp.test(n)?n:Li}catch(e){return Li}}function dp(e){return op(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nn(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Is=new Map;function As(e,t){const n=Nn(e);Os(n,t),up(n,t)}function Os(e,t){const n=Is.get(e);if(n)for(const i of n)i(t)}function up(e,t){const n=pp();n&&n.postMessage({key:e,fid:t}),fp()}let at=null;function pp(){return!at&&"BroadcastChannel"in self&&(at=new BroadcastChannel("[Firebase] FID Change"),at.onmessage=e=>{Os(e.data.key,e.data.fid)}),at}function fp(){Is.size===0&&at&&(at.close(),at=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="firebase-installations-database",hp=1,gt="firebase-installations-store";let si=null;function nr(){return si||(si=Fo(mp,hp,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(gt)}}})),si}async function wn(e,t){const n=Nn(e),r=(await nr()).transaction(gt,"readwrite"),s=r.objectStore(gt),o=await s.get(n);return await s.put(t,n),await r.done,(!o||o.fid!==t.fid)&&As(e,t.fid),t}async function Ps(e){const t=Nn(e),i=(await nr()).transaction(gt,"readwrite");await i.objectStore(gt).delete(t),await i.done}async function Fn(e,t){const n=Nn(e),r=(await nr()).transaction(gt,"readwrite"),s=r.objectStore(gt),o=await s.get(n),l=t(o);return l===void 0?await s.delete(n):await s.put(l,n),await r.done,l&&(!o||o.fid!==l.fid)&&As(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ir(e){let t;const n=await Fn(e.appConfig,i=>{const r=gp(i),s=vp(e,r);return t=s.registrationPromise,s.installationEntry});return n.fid===Li?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function gp(e){const t=e||{fid:cp(),registrationStatus:0};return Ts(t)}function vp(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const r=Promise.reject(ht.create("app-offline"));return{installationEntry:t,registrationPromise:r}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=xp(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:yp(e)}:{installationEntry:t}}async function xp(e,t){try{const n=await sp(e,t);return wn(e.appConfig,n)}catch(n){throw Cs(n)&&n.customData.serverCode===409?await Ps(e.appConfig):await wn(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function yp(e){let t=await Tr(e.appConfig);for(;t.registrationStatus===1;)await Es(100),t=await Tr(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await ir(e);return i||n}return t}function Tr(e){return Fn(e,t=>{if(!t)throw ht.create("installation-not-found");return Ts(t)})}function Ts(e){return bp(e)?{fid:e.fid,registrationStatus:0}:e}function bp(e){return e.registrationStatus===1&&e.registrationTime+ws<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wp({appConfig:e,heartbeatServiceProvider:t},n){const i=kp(e,n),r=ip(e,n),s=t.getImmediate({optional:!0});if(s){const d=await s.getHeartbeatsHeader();d&&r.append("x-firebase-client",d)}const o={installation:{sdkVersion:ks,appId:e.appId}},l={method:"POST",headers:r,body:JSON.stringify(o)},c=await Ds(()=>fetch(i,l));if(c.ok){const d=await c.json();return Rs(d)}else throw await _s("Generate Auth Token",c)}function kp(e,{fid:t}){return`${Ss(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rr(e,t=!1){let n;const i=await Fn(e.appConfig,s=>{if(!Ns(s))throw ht.create("not-registered");const o=s.authToken;if(!t&&Sp(o))return s;if(o.requestStatus===1)return n=jp(e,t),s;{if(!navigator.onLine)throw ht.create("app-offline");const l=_p(s);return n=Cp(e,l),l}});return n?await n:i.authToken}async function jp(e,t){let n=await Nr(e.appConfig);for(;n.authToken.requestStatus===1;)await Es(100),n=await Nr(e.appConfig);const i=n.authToken;return i.requestStatus===0?rr(e,t):i}function Nr(e){return Fn(e,t=>{if(!Ns(t))throw ht.create("not-registered");const n=t.authToken;return Lp(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Cp(e,t){try{const n=await wp(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await wn(e.appConfig,i),n}catch(n){if(Cs(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Ps(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await wn(e.appConfig,i)}throw n}}function Ns(e){return e!==void 0&&e.registrationStatus===2}function Sp(e){return e.requestStatus===2&&!Rp(e)}function Rp(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Xu}function _p(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Lp(e){return e.requestStatus===1&&e.requestTime+ws<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(e){const t=e,{installationEntry:n,registrationPromise:i}=await ir(t);return i?i.catch(console.error):rr(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ep(e,t=!1){const n=e;return await Ip(n),(await rr(n,t)).token}async function Ip(e){const{registrationPromise:t}=await ir(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ap(e){if(!e||!e.options)throw oi("App Configuration");if(!e.name)throw oi("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw oi(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function oi(e){return ht.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fs="installations",Op="installations-internal",Pp=e=>{const t=e.getProvider("app").getImmediate(),n=Ap(t),i=qt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Tp=e=>{const t=e.getProvider("app").getImmediate(),n=qt(t,Fs).getImmediate();return{getId:()=>Dp(n),getToken:r=>Ep(n,r)}};function Np(){Pt(new Tt(Fs,Pp,"PUBLIC")),Pt(new Tt(Op,Tp,"PRIVATE"))}Np();wt(bs,tr);wt(bs,tr,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kn="analytics",Fp="firebase_id",Mp="origin",$p=60*1e3,Up="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ar="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Le=new Mo("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ae=new ga("analytics","Analytics",zp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e){if(!e.startsWith(ar)){const t=Ae.create("invalid-gtag-resource",{gtagURL:e});return Le.warn(t.message),""}return e}function Ms(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function qp(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Wp(e,t){const n=qp("firebase-js-sdk-policy",{createScriptURL:Bp}),i=document.createElement("script"),r=`${ar}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(r):r,i.async=!0,document.head.appendChild(i)}function Gp(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Kp(e,t,n,i,r,s){const o=i[r];try{if(o)await t[o];else{const c=(await Ms(n)).find(d=>d.measurementId===r);c&&await t[c.appId]}}catch(l){Le.error(l)}e("config",r,s)}async function Hp(e,t,n,i,r){try{let s=[];if(r&&r.send_to){let o=r.send_to;Array.isArray(o)||(o=[o]);const l=await Ms(n);for(const c of o){const d=l.find(u=>u.measurementId===c),p=d&&t[d.appId];if(p)s.push(p);else{s=[];break}}}s.length===0&&(s=Object.values(t)),await Promise.all(s),e("event",i,r||{})}catch(s){Le.error(s)}}function Yp(e,t,n,i){async function r(s,...o){try{if(s==="event"){const[l,c]=o;await Hp(e,t,n,l,c)}else if(s==="config"){const[l,c]=o;await Kp(e,t,n,i,l,c)}else if(s==="consent"){const[l,c]=o;e("consent",l,c)}else if(s==="get"){const[l,c,d]=o;e("get",l,c,d)}else if(s==="set"){const[l]=o;e("set",l)}else e(s,...o)}catch(l){Le.error(l)}}return r}function Qp(e,t,n,i,r){let s=function(...o){window[i].push(arguments)};return window[r]&&typeof window[r]=="function"&&(s=window[r]),window[r]=Yp(s,e,t,n),{gtagCore:s,wrappedGtag:window[r]}}function Vp(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(ar)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=30,Jp=1e3;class Xp{constructor(t={},n=Jp){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const $s=new Xp;function ef(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function tf(e){var t;const{appId:n,apiKey:i}=e,r={method:"GET",headers:ef(i)},s=Up.replace("{app-id}",n),o=await fetch(s,r);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch(c){}throw Ae.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function nf(e,t=$s,n){const{appId:i,apiKey:r,measurementId:s}=e.options;if(!i)throw Ae.create("no-app-id");if(!r){if(s)return{measurementId:s,appId:i};throw Ae.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new sf;return setTimeout(async()=>{l.abort()},$p),Us({appId:i,apiKey:r,measurementId:s},o,l,t)}async function Us(e,{throttleEndTimeMillis:t,backoffCount:n},i,r=$s){var s;const{appId:o,measurementId:l}=e;try{await rf(i,t)}catch(c){if(l)return Le.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await tf(e);return r.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!af(d)){if(r.deleteThrottleMetadata(o),l)return Le.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const p=Number((s=d==null?void 0:d.customData)===null||s===void 0?void 0:s.httpStatus)===503?dr(n,r.intervalMillis,Zp):dr(n,r.intervalMillis),u={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return r.setThrottleMetadata(o,u),Le.debug(`Calling attemptFetch again in ${p} millis`),Us(e,u,i,r)}}function rf(e,t){return new Promise((n,i)=>{const r=Math.max(t-Date.now(),0),s=setTimeout(n,r);e.addEventListener(()=>{clearTimeout(s),i(Ae.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function af(e){if(!(e instanceof $i)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class sf{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function of(e,t,n,i,r){if(r&&r.global){e("event",n,i);return}else{const s=await t,o=Object.assign(Object.assign({},i),{send_to:s});e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(){if(xa())try{await ya()}catch(e){return Le.warn(Ae.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Le.warn(Ae.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cf(e,t,n,i,r,s,o){var l;const c=nf(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&Le.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>Le.error(f)),t.push(c);const d=lf().then(f=>{if(f)return i.getId()}),[p,u]=await Promise.all([c,d]);Vp(s)||Wp(s,p.measurementId),r("js",new Date);const g=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return g[Mp]="firebase",g.update=!0,u!=null&&(g[Fp]=u),r("config",p.measurementId,g),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t){this.app=t}_delete(){return delete It[this.app.options.appId],Promise.resolve()}}let It={},Fr=[];const Mr={};let li="dataLayer",uf="gtag",$r,zs,Ur=!1;function pf(){const e=[];if(va()&&e.push("This is a browser extension environment."),ba()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,r)=>`(${r+1}) ${i}`).join(" "),n=Ae.create("invalid-analytics-context",{errorInfo:t});Le.warn(n.message)}}function ff(e,t,n){pf();const i=e.options.appId;if(!i)throw Ae.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Le.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ae.create("no-api-key");if(It[i]!=null)throw Ae.create("already-exists",{id:i});if(!Ur){Gp(li);const{wrappedGtag:s,gtagCore:o}=Qp(It,Fr,Mr,li,uf);zs=s,$r=o,Ur=!0}return It[i]=cf(e,Fr,Mr,t,$r,li,n),new df(e)}function mf(e=ha()){e=Ct(e);const t=qt(e,kn);return t.isInitialized()?t.getImmediate():hf(e)}function hf(e,t={}){const n=qt(e,kn);if(n.isInitialized()){const r=n.getImmediate();if($o(t,n.getOptions()))return r;throw Ae.create("already-initialized")}return n.initialize({options:t})}async function gf(){if(va()||!ba()||!xa())return!1;try{return await ya()}catch(e){return!1}}function vf(e,t,n,i){e=Ct(e),of(zs,It[e.app.options.appId],t,n,i).catch(r=>Le.error(r))}const zr="@firebase/analytics",Br="0.10.8";function xf(){Pt(new Tt(kn,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),r=t.getProvider("installations-internal").getImmediate();return ff(i,r,n)},"PUBLIC")),Pt(new Tt("analytics-internal",e,"PRIVATE")),wt(zr,Br),wt(zr,Br,"esm2017");function e(t){try{const n=t.getProvider(kn).getImmediate();return{logEvent:(i,r,s)=>vf(n,i,r,s)}}catch(n){throw Ae.create("interop-component-reg-failed",{reason:n})}}}xf();const Di={apiKey:"AIzaSyD1TjtSC-Mukd2EdNtiuQq-u3l3gdMP0dc",authDomain:"homefoods-16e56.firebaseapp.com",projectId:"homefoods-16e56",storageBucket:"homefoods-16e56.firebasestorage.app",messagingSenderId:"495709118320",appId:"1:495709118320:web:6fe3b7ec2b7c19d66cf9b5",measurementId:"G-6MR0ED1C3E"},yf=["apiKey","authDomain","projectId","appId"],Se=yf.some(e=>!Di[e]);let it,ne,Bs,qr;Se?Promise.resolve(null):(it=ur().length?ur()[0]:Uo(Di),wa(it),ne=zo(it),Bs=Yu(it),Di.measurementId?gf().then(e=>e?(qr=mf(it),qr):null):Promise.resolve(null));async function bf(e,t=null,n=20){if(console.log(`[getFoodReviews] Starting fetch for foodId: "${e}", kitchenId: "${t}", limit: ${n}`),Se)return console.warn("[getFoodReviews] Firebase disabled, returning mock data"),Kr(e);if(!e||e.trim()==="")return console.log("[getFoodReviews] No foodId provided, returning empty array"),[];const i=e.trim();console.log(`[getFoodReviews] Cleaned foodId: "${i}"`);try{let r=[];if(t){console.log(`[getFoodReviews] Searching reviews in kitchen: ${t}`);const s=de(ne,"kitchens",t,"reviews"),o=ve(s,Fe("foodId","==",i),ze(n));r=(await ue(o)).docs.map(c=>({id:c.id,kitchenId:t,...c.data()})),console.log(`[getFoodReviews] Found ${r.length} reviews in kitchen ${t}`)}else{console.log("[getFoodReviews] Searching reviews across all kitchens...");const s=ve(de(ne,"kitchens")),o=await ue(s);console.log(`[getFoodReviews] Found ${o.size} kitchens to search`);for(const l of o.docs)try{const c=de(ne,"kitchens",l.id,"reviews"),d=ve(c,Fe("foodId","==",i),ze(n)),u=(await ue(d)).docs.map(g=>({id:g.id,kitchenId:l.id,...g.data()}));if(r.push(...u),console.log(`[getFoodReviews] Found ${u.length} reviews in kitchen ${l.id}`),r.length>=n)break}catch(c){console.warn(`[getFoodReviews] Error searching kitchen ${l.id}:`,c);continue}}return r.length>0&&(r=r.sort((s,o)=>{const l=p=>p?typeof p=="string"?p.includes(" at ")?new Date(p.replace(" at "," ").replace(" UTC+5","")):new Date(p):p.seconds?new Date(p.seconds*1e3):new Date(p):new Date(0),c=l(s.timeStamp);return l(o.timeStamp)-c}),r=r.slice(0,n)),console.log(`[getFoodReviews] Final result - Found ${r.length} reviews for food '${i}':`,r),r}catch(r){return console.error("[getFoodReviews] Error fetching food reviews:",r),console.log("[getFoodReviews] Returning mock data due to error"),Kr(i)}}async function wf(e,t=null){if(console.log(`[debugReviewsQuery] Testing query for foodId: ${e}, kitchenId: ${t}`),Se)return console.warn("[debugReviewsQuery] Firebase disabled"),{status:"disabled"};try{let n=[],i=[];const r=ve(de(ne,"kitchens")),s=await ue(r);console.log(`[debugReviewsQuery] Found ${s.size} kitchens`);for(const l of s.docs)try{i.push(l.id);const c=de(ne,"kitchens",l.id,"reviews"),p=(await ue(ve(c,ze(50)))).docs.map(u=>({id:u.id,kitchenId:l.id,...u.data()}));if(console.log(`[debugReviewsQuery] Kitchen ${l.id} has ${p.length} total reviews`),p.length>0&&console.log(`[debugReviewsQuery] Sample reviews from kitchen ${l.id}:`,p.slice(0,2)),e){const u=ve(c,Fe("foodId","==",e)),f=(await ue(u)).docs.map(h=>({id:h.id,kitchenId:l.id,...h.data()}));f.length>0&&(console.log(`[debugReviewsQuery] Found ${f.length} reviews for foodId '${e}' in kitchen ${l.id}:`,f),n.push(...f))}n.push(...p)}catch(c){console.warn(`[debugReviewsQuery] Error checking kitchen ${l.id}:`,c);continue}const o=[...new Set(n.map(l=>l.foodId))];return console.log("[debugReviewsQuery] All unique foodIds in reviews:",o),{status:"success",requestedFoodId:e,kitchensSearched:i,allReviewsCount:n.length,matchingReviewsCount:n.filter(l=>l.foodId===e).length,uniqueFoodIds:o,sampleReviews:n.slice(0,5)}}catch(n){return console.error("[debugReviewsQuery] Error:",n),{status:"error",error:n.message}}}async function kf(e,t=null){if(console.log(`[getFoodLikes] Starting fetch for foodId: ${e}, kitchenId: ${t}`),Se)return console.warn("[getFoodLikes] Firebase disabled, returning mock data"),Gr(e);if(!e||e.trim()==="")return console.log("[getFoodLikes] No foodId provided, returning empty array"),[];try{let n=[];if(t)try{console.log(`[getFoodLikes] Searching likes in kitchen ${t} subcollection`);const l=de(ne,"kitchens",t,"Likes");let c=ve(l,Fe("foodId","==",e)),d=await ue(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}));p.length===0&&(c=ve(l,Fe("productId","==",e)),d=await ue(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}))),n.push(...p),console.log(`[getFoodLikes] Found ${p.length} likes in kitchen subcollection`)}catch(l){console.warn("[getFoodLikes] Error searching kitchen subcollection:",l)}console.log("[getFoodLikes] Querying top-level Likes collection");let i=ve(de(ne,"Likes"),Fe("foodId","==",e)),r=await ue(i),s=r.docs.map(l=>({id:l.id,...l.data()}));s.length===0&&(console.log("[getFoodLikes] No results with foodId, trying productId in top-level..."),i=ve(de(ne,"Likes"),Fe("productId","==",e)),r=await ue(i),s=r.docs.map(l=>({id:l.id,...l.data()}))),n.push(...s),console.log(`[getFoodLikes] Found ${s.length} likes in top-level collection`);const o=n.filter((l,c,d)=>d.findIndex(p=>p.id===l.id)===c);return console.log(`[getFoodLikes] Total unique likes: ${o.length}`),o}catch(n){return console.error("[getFoodLikes] Error fetching food likes:",n),console.log("[getFoodLikes] Returning mock data due to error"),Gr(e)}}async function jf(){if(Se)return console.log("Firebase is disabled - check your .env file"),{status:"disabled"};try{console.log("Testing Firestore connection...");const e=de(ne,"kitchens"),t=await ue(ve(e,ze(5))),n=t.docs.map(d=>({id:d.id,...d.data()}));let i=[],r=[];for(const d of n)try{const p=de(ne,"kitchens",d.id,"reviews"),g=(await ue(ve(p,ze(5)))).docs.map(y=>({id:y.id,kitchenId:d.id,...y.data()}));i.push(...g);const f=de(ne,"kitchens",d.id,"Likes"),x=(await ue(ve(f,ze(5)))).docs.map(y=>({id:y.id,kitchenId:d.id,...y.data()}));r.push(...x),console.log(`Kitchen ${d.id}: ${g.length} reviews, ${x.length} likes`)}catch(p){console.warn(`Error testing kitchen ${d.id} subcollections:`,p)}const s=de(ne,"Likes"),l=(await ue(ve(s,ze(10)))).docs.map(d=>({id:d.id,...d.data()}));console.log("Reviews found in kitchen subcollections:",i),console.log("Likes found in kitchen subcollections:",r),console.log("Likes found in top-level collection:",l);const c={status:"connected",collections:{kitchens:{count:t.size,samples:n,sampleIds:n.map(d=>d.id)},reviews:{source:"kitchen_subcollections",count:i.length,samples:i,sampleIds:i.map(d=>d.id),foodIds:i.map(d=>d.foodId)},likes:{subcollectionCount:r.length,topLevelCount:l.length,samples:[...r,...l],foodIds:[...r,...l].map(d=>d.foodId||d.productId)}}};return console.log("Firestore Test Results:",c),c}catch(e){return console.error("Firestore connection test failed:",e),{status:"error",error:e.message}}}async function Cf(e,t=null){console.log(`[getFoodDetailWithKitchenAndReviews] Fetching food: ${e}, kitchen: ${t}`);try{const n=await qs(e,t),i=t||n.kitchenId;console.log(`[getFoodDetailWithKitchenAndReviews] Using kitchenId: ${i}`);const[r,s,o]=await Promise.all([i?Sf(i):Promise.resolve(null),kf(e,i),bf(e,i)]),l=Ws(o);console.log("🚀 ~ getFoodDetailWithKitchenAndReviews ~ reviewStats:",l);const c={food:n,kitchen:r,likes:s,reviews:o,totalLikes:s.length,reviewStats:l};return console.log("[getFoodDetailWithKitchenAndReviews] Complete result:",c),c}catch(n){throw console.error("[getFoodDetailWithKitchenAndReviews] Error fetching food detail:",n),n}}async function qs(e,t=null){if(console.log(`[getFoodById] Starting fetch for foodId: ${e}, kitchenId: ${t}`),Se)return console.warn("[getFoodById] Firebase disabled, returning mock data"),st(e);if(!e||e.trim()==="")throw console.error("[getFoodById] Invalid foodId provided:",e),new Error("Food ID is required and cannot be empty");try{let n,i=null,r=null;if(t&&(console.log(`[getFoodById] Querying kitchens/${t}/foodItems/${e}`),n=await Lt(ot(ne,"kitchens",t,"foodItems",e)),n.exists()))return i={id:n.id,...n.data()},r=t,console.log("[getFoodById] Found in specific kitchen subcollection:",i),{...i,kitchenId:r};if(!i){console.log("[getFoodById] Searching across all kitchen subcollections...");const s=ve(de(ne,"kitchens")),o=await ue(s);for(const l of o.docs)try{const c=ot(ne,"kitchens",l.id,"foodItems",e),d=await Lt(c);if(d.exists())return i={id:d.id,...d.data()},r=l.id,console.log(`[getFoodById] Found in kitchen ${l.id}:`,i),{...i,kitchenId:r}}catch(c){console.warn(`[getFoodById] Error checking kitchen ${l.id}:`,c);continue}}if(console.log(`[getFoodById] Trying top-level foodItems/${e}`),n=await Lt(ot(ne,"foodItems",e)),n.exists()){const s={id:n.id,...n.data()};return console.log("[getFoodById] Found in top-level collection:",s),s}return console.warn(`[getFoodById] Food item with ID '${e}' not found anywhere`),st(e)}catch(n){return console.error("[getFoodById] Error fetching food item:",n),st(e)}}async function Sf(e){if(console.log(`[getKitchenById] Starting fetch for kitchenId: ${e}`),Se)return console.warn("[getKitchenById] Firebase disabled, returning mock data"),ct(e);if(!e||e.trim()==="")throw console.error("[getKitchenById] Invalid kitchenId provided:",e),new Error("Kitchen ID is required and cannot be empty");try{console.log(`[getKitchenById] Querying Firestore collection 'kitchens' for document: ${e}`);const t=await Lt(ot(ne,"kitchens",e));if(console.log(`[getKitchenById] Document exists: ${t.exists()}`),!t.exists())return console.warn(`[getKitchenById] Kitchen with ID '${e}' not found in Firestore`),console.log("[getKitchenById] Returning mock data as fallback"),ct(e);const n={id:t.id,...t.data()};return console.log("[getKitchenById] Successfully fetched kitchen data:",n),n}catch(t){return console.error("[getKitchenById] Error fetching kitchen:",t),console.log("[getKitchenById] Returning mock data due to error"),ct(e)}}function Ws(e){if(!e||e.length===0)return{totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0}};const t=e.length;console.log("🚀 ~ calculateReviewStats ~ totalReviews:",t);const n={5:0,4:0,3:0,2:0,1:0};let i=0;e.forEach(o=>{const l=Math.floor(o.rating||0);l>=1&&l<=5&&(n[l]++,i+=o.rating)});const r=t>0?i/t:0,s={};for(let o=1;o<=5;o++)s[o]=t>0?n[o]/t*100:0;return{totalReviews:t,averageRating:parseFloat(r.toFixed(1)),ratingBreakdown:n,ratingPercentages:s}}async function Rf(e=20){if(console.log(`[getAllFoods] Starting fetch with limit: ${e}`),Se)return dt();try{const t=ve(de(ne,"foodItems"),ze(e)),i=(await ue(t)).docs.map(r=>({id:r.id,...r.data()}));return i.length>0?i:dt()}catch(t){return console.error("[getAllFoods] Error:",t),dt()}}async function Gs(e,t=1e3){if(console.log(`[getKitchenAllReviews] Fetching all reviews for kitchen: ${e}`),Se)return console.warn("[getKitchenAllReviews] Firebase disabled, returning mock data"),Wr(e);if(!e||e.trim()==="")return console.log("[getKitchenAllReviews] No kitchenId provided, returning empty array"),[];try{console.log(`[getKitchenAllReviews] Querying reviews subcollection for kitchen: ${e}`);const n=de(ne,"kitchens",e,"reviews"),i=ve(n,ze(t)),s=(await ue(i)).docs.map(o=>({id:o.id,kitchenId:e,...o.data()}));return console.log(`[getKitchenAllReviews] Found ${s.length} total reviews for kitchen ${e}`),s.length>0&&s.sort((o,l)=>{const c=u=>u?typeof u=="string"?u.includes(" at ")?new Date(u.replace(" at "," ").replace(" UTC+5","")):new Date(u):u.seconds?new Date(u.seconds*1e3):new Date(u):new Date(0),d=c(o.timeStamp);return c(l.timeStamp)-d}),console.log(`[getKitchenAllReviews] Returning ${s.length} reviews for kitchen ${e}`),s}catch(n){return console.error("[getKitchenAllReviews] Error fetching kitchen reviews:",n),console.log("[getKitchenAllReviews] Returning mock data due to error"),Wr(e)}}async function _f(e){console.log(`[getKitchenReviewStats] Getting review stats for kitchen: ${e}`);try{const t=await Gs(e),i={...Ws(t),kitchenId:e,reviewsList:t,uniqueFoodIds:[...new Set(t.map(r=>r.foodId).filter(Boolean))],lastUpdated:new Date().toISOString()};return console.log(`[getKitchenReviewStats] Kitchen ${e} stats:`,i),i}catch(t){return console.error("[getKitchenReviewStats] Error calculating kitchen stats:",t),{kitchenId:e,totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0},reviewsList:[],uniqueFoodIds:[],lastUpdated:new Date().toISOString(),error:t.message}}}function Wr(e){return[{id:"kitchen-review-1",kitchenId:e,foodId:"food-1",userId:"user-1",userName:"Alice Johnson",userProfile:"",rating:5,message:"Amazing food from this kitchen! The Dim Sum was perfect.",timeStamp:"July 10, 2025 at 2:30:00 PM UTC+5",orderId:"order-1"},{id:"kitchen-review-2",kitchenId:e,foodId:"food-2",userId:"user-2",userName:"Bob Smith",userProfile:"",rating:4,message:"Great kitchen, fast delivery and tasty food.",timeStamp:"July 9, 2025 at 7:15:00 PM UTC+5",orderId:"order-2"},{id:"kitchen-review-3",kitchenId:e,foodId:"food-1",userId:"user-3",userName:"Carol Davis",userProfile:"",rating:5,message:"Best kitchen in the area! Highly recommend.",timeStamp:"July 8, 2025 at 12:45:00 PM UTC+5",orderId:"order-3"}]}function st(e){return{id:e,name:"Dim Sum (Dumplings)",description:"A timeless delicacy from Chinese cuisine, Dim Sum dumplings are handcrafted pockets of flavor, delicately wrapped in thin, translucent dough. Each dumpling is steamed to perfection, preserving the juicy, savory filling inside.",cost:150,foodCategory:"1, 2",foodType:"Chinese",imageUrl:"/src/assets/images/product.png",kitchenId:"mock-kitchen-1",kitchenName:"Resto Parmato Bapo",isFeatured:!0,availability:{numAvailable:15,numOfSoldItem:85},engagement:{numOfLike:127,rating:4.9,numRatings:1247,countRating:1247}}}function ct(e){const t=new Date,n=new Date(t);n.setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()+2);const r=s=>s.toISOString().split("T")[0];return{id:e,name:"Coco's Kitchen",address:"Lahore-Sialkot Motorway",city:"San Francisco",cuisine:"Thai",description:"This is the kitchen of James done. This is the kitchen of James done, This is the kitchen of James done.This is the kitchen of James done",ownerId:"mock-owner-1",location:{latitude:37.5485,longitude:-121.9886},rating:4.9,ratingCount:1247,preorderSchedule:{dates:{[r(n)]:[{id:"schedule-1",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["6:22 PM","7:30 PM"],numOfAvailableItems:10,isLimitedOrder:!1},{id:"schedule-2",foodItemId:"food-4",nameOfFood:"Margherita Pizza",availableTimes:["6:22 PM","8:00 PM"],numOfAvailableItems:8,isLimitedOrder:!1}],[r(i)]:[{id:"schedule-3",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["5:30 PM","7:00 PM"],numOfAvailableItems:12,isLimitedOrder:!1}]}}}}function dt(){return[st("food-1"),{...st("food-2"),id:"food-2",name:"Margherita Pizza",cost:12.45,availability:{numAvailable:5,numOfSoldItem:2},imageUrl:"/src/assets/images/order2.png"},{...st("food-3"),id:"food-3",name:"Dim Sum (Dumplings)",cost:22.45,availability:{numAvailable:0,numOfSoldItem:15},imageUrl:"/src/assets/images/order1.png"},{...st("food-4"),id:"food-4",name:"Margherita Pizza (Pre-order)",cost:12.45,availability:{numAvailable:0,numOfSoldItem:8},imageUrl:"/src/assets/images/order2.png"}]}function Gr(e){return[{id:"like-1",userID:"user-1",foodId:e,status:"liked",timestamp:"2025-08-01T10:00:00Z"},{id:"like-2",userID:"user-2",foodId:e,status:"liked",timestamp:"2025-08-02T15:30:00Z"}]}function Kr(e){return[{id:"review-1",foodId:e,userId:"z6HJ9L3KS3XR9yLZ9rexp7K4Eo43",userName:"Testing55",userProfile:"",rating:4,message:"Testing",timeStamp:"July 7, 2025 at 6:06:01 PM UTC+5",orderId:"PrH8qFuHeHDlpfAw6c9"},{id:"review-2",foodId:e,userId:"user-456",userName:"John Doe",userProfile:"",rating:5,message:"Great food, would definitely order again!",timeStamp:"2025-07-07T15:30:00Z",orderId:"order-456"},{id:"review-3",foodId:e,userId:"user-789",userName:"Jane Smith",userProfile:"",rating:5,message:"Perfect! Exceeded my expectations.",timeStamp:"2025-07-06T10:15:30Z",orderId:"order-789"}]}async function Lf(e){if(console.log(`[getKitchenWithFoodItems] Fetching kitchen: ${e}`),Se)return console.warn("[getKitchenWithFoodItems] Firebase disabled, returning mock data"),{kitchen:ct(e),foods:dt()};try{const t=await Lt(ot(ne,"kitchens",e));if(!t.exists())return console.warn(`[getKitchenWithFoodItems] Kitchen ${e} not found`),{kitchen:null,foods:[]};const n={id:t.id,...t.data()},i=de(ne,"kitchens",e,"foodItems"),s=(await ue(i)).docs.map(o=>({id:o.id,kitchenId:e,...o.data()}));return console.log(`[getKitchenWithFoodItems] Found ${s.length} food items for kitchen ${e}`),{kitchen:n,foods:s}}catch(t){return console.error("[getKitchenWithFoodItems] Error:",t),{kitchen:ct(e),foods:dt()}}}async function Df(e=10){if(console.log(`[getAllKitchensWithFoodItems] Fetching up to ${e} kitchens`),Se)return console.warn("[getAllKitchensWithFoodItems] Firebase disabled, returning mock data"),[{kitchen:ct("mock-kitchen-1"),foods:dt()}];try{const t=ve(de(ne,"kitchens"),ze(e)),n=await ue(t),i=[];for(const r of n.docs){const s={id:r.id,...r.data()},o=de(ne,"kitchens",r.id,"foodItems"),c=(await ue(o)).docs.map(d=>({id:d.id,kitchenId:r.id,...d.data()}));i.push({kitchen:s,foods:c}),console.log(`[getAllKitchensWithFoodItems] Kitchen ${r.id}: ${c.length} food items`)}return console.log(`[getAllKitchensWithFoodItems] Loaded ${i.length} kitchens with food data`),i}catch(t){return console.error("[getAllKitchensWithFoodItems] Error:",t),[{kitchen:ct("mock-kitchen-1"),foods:dt()}]}}const Ef=async(e,t,n)=>{try{console.log("🔥 Adding like to Firestore:",{kitchenId:e,productId:t,userId:n});const i=de(ne,"kitchens",e,"likes"),r={productId:t,userId:n,timestamp:qo()},s=await ka(i,r);return console.log("✅ Like added successfully with ID:",s.id),{id:s.id,...r}}catch(i){throw console.error("❌ Error adding like:",i),i}},If=async(e,t,n)=>{try{console.log("🔥 Removing like from Firestore:",{kitchenId:e,productId:t,userId:n});const i=de(ne,"kitchens",e,"likes"),r=ve(i,Fe("productId","==",t),Fe("userId","==",n)),s=await ue(r);if(s.empty)return console.warn("⚠️ No like found to remove"),!1;const o=s.docs.map(l=>Bo(l.ref));return await Promise.all(o),console.log("✅ Like(s) removed successfully"),!0}catch(i){throw console.error("❌ Error removing like:",i),i}},Ks=async(e,t,n)=>{try{const i=de(ne,"kitchens",e,"likes"),r=ve(i,Fe("productId","==",t),Fe("userId","==",n));return!(await ue(r)).empty}catch(i){return console.error("❌ Error checking user like:",i),!1}},Hr=e=>!e||!e._lat||!e._long?null:{lat:e._lat,lng:e._long},Af=e=>!e||!e.seconds?null:new Date(e.seconds*1e3+(e.nanoseconds||0)/1e6).toISOString(),Ue=e=>{if(!e||typeof e!="object")return e;const t={...e};return t.location&&t.location._lat!==void 0&&(t.location=Hr(t.location)),Object.keys(t).forEach(n=>{const i=t[n];i&&typeof i=="object"&&(i._lat!==void 0&&i._long!==void 0?t[n]=Hr(i):i.seconds!==void 0&&(i.nanoseconds!==void 0||i.nanoseconds===0)?t[n]=Af(i):Array.isArray(i)?t[n]=i.map(r=>Ue(r)):t[n]=Ue(i))}),t},At=ke("food/fetchDetail",async({foodId:e,kitchenId:t})=>{try{return{...await Cf(e,t),foodId:e,kitchenId:t}}catch(n){return{food:await qs(e),kitchen:null,likes:[],reviews:[],reviewStats:null,foodId:e,kitchenId:t}}}),ci=ke("food/fetchAll",async(e=20)=>await Rf(e)),Hs=ke("food/checkLikeStatus",async({foodId:e,kitchenId:t},{getState:n})=>{var s;const{auth:i}=n(),r=(s=i.user)==null?void 0:s.id;if(console.log("🔍 Checking like status:",{foodId:e,kitchenId:t,userId:r}),!r||!t)return console.log("❌ Missing userId or kitchenId for like status check"),{foodId:e,liked:!1};try{const o=await Ks(t,e,r);return console.log("✅ Like status check result:",{foodId:e,isLiked:o}),{foodId:e,liked:o}}catch(o){return console.error("❌ Error checking like status:",o),{foodId:e,liked:!1}}}),Ei=ke("food/toggleLike",async(e,{getState:t})=>{var c,d;const{auth:n,food:i}=t(),r=(c=n.user)==null?void 0:c.id,s=(d=i.currentKitchen)==null?void 0:d.id;if(console.log("🔄 Toggle like action:",{foodId:e,userId:r,kitchenId:s,currentLikedFoods:i.likedFoods}),!r)throw new Error("User not authenticated");if(!s)throw new Error("Kitchen information not available");const o=i.likedFoods.includes(e);console.log("🔍 Current like state from Redux:",{foodId:e,isCurrentlyLiked:o}),console.log("🔍 Checking actual Firestore like state before toggle");const l=await Ks(s,e,r);console.log("🔍 Actual Firestore like state:",{foodId:e,actualFirestoreState:l});try{return l?(console.log("🔥 Attempting to remove like from Firestore"),await If(s,e,r),console.log("✅ Like removed from Firestore")):(console.log("🔥 Attempting to add like to Firestore"),await Ef(s,e,r),console.log("✅ Like added to Firestore")),{foodId:e,userId:r,kitchenId:s,liked:!l}}catch(p){throw console.error("❌ Error toggling like in Firestore:",p),p}});ke("food/refresh",async({foodId:e,kitchenId:t},{dispatch:n})=>n(At({foodId:e,kitchenId:t})));const Ys=Kt({name:"food",initialState:{currentFood:null,currentKitchen:null,currentReviews:[],currentReviewStats:null,currentLikes:[],allFoods:[],likedFoods:[],loading:!1,allFoodsLoading:!1,error:null,allFoodsError:null,lastUpdated:null,allFoodsLastUpdated:null},reducers:{clearCurrentFood:e=>{e.currentFood=null,e.currentKitchen=null,e.currentReviews=[],e.currentReviewStats=null,e.currentLikes=[],e.error=null},clearError:e=>{e.error=null},clearAllFoodsError:e=>{e.allFoodsError=null},updateFoodInList:(e,t)=>{var s;const{foodId:n,updates:i}=t.payload,r=e.allFoods.findIndex(o=>o.id===n);r!==-1&&(e.allFoods[r]={...e.allFoods[r],...i}),((s=e.currentFood)==null?void 0:s.id)===n&&(e.currentFood={...e.currentFood,...i})},toggleLikeLocally:(e,t)=>{const n=t.payload,i=e.likedFoods.includes(n);console.log("🔄 toggleLikeLocally called:",{foodId:n,currentlyLiked:i,likedFoods:e.likedFoods}),i?(e.likedFoods=e.likedFoods.filter(r=>r!==n),console.log("➖ Locally removed like for:",n)):(e.likedFoods.push(n),console.log("➕ Locally added like for:",n)),console.log("🔍 Updated likedFoods locally:",e.likedFoods)}},extraReducers:e=>{e.addCase(At.pending,t=>{t.loading=!0,t.error=null}).addCase(At.fulfilled,(t,n)=>{t.loading=!1;const{food:i,kitchen:r,likes:s,reviews:o,reviewStats:l}=n.payload;t.currentFood=Ue(i),t.currentKitchen=Ue(r),t.currentReviews=o?o.map(c=>Ue(c)):[],t.currentReviewStats=Ue(l),t.currentLikes=s?s.map(c=>Ue(c)):[],t.lastUpdated=new Date().toISOString()}).addCase(At.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(ci.pending,t=>{t.allFoodsLoading=!0,t.allFoodsError=null}).addCase(ci.fulfilled,(t,n)=>{t.allFoodsLoading=!1,t.allFoods=n.payload,t.allFoodsLastUpdated=new Date().toISOString()}).addCase(ci.rejected,(t,n)=>{t.allFoodsLoading=!1,t.allFoodsError=n.error.message}).addCase(Ei.fulfilled,(t,n)=>{const{foodId:i,liked:r}=n.payload;r&&!t.likedFoods.includes(i)?t.likedFoods.push(i):r||(t.likedFoods=t.likedFoods.filter(s=>s!==i))}).addCase(Ei.rejected,(t,n)=>{const i=n.meta.arg;t.likedFoods.includes(i)?t.likedFoods=t.likedFoods.filter(s=>s!==i):t.likedFoods.push(i)}).addCase(Hs.fulfilled,(t,n)=>{const{foodId:i,liked:r}=n.payload;console.log("✅ Like status check fulfilled:",{foodId:i,liked:r,currentLikedFoods:t.likedFoods}),r&&!t.likedFoods.includes(i)?(t.likedFoods.push(i),console.log("➕ Added foodId to likedFoods:",i)):r||(t.likedFoods=t.likedFoods.filter(s=>s!==i),console.log("➖ Removed foodId from likedFoods:",i)),console.log("🔍 Updated likedFoods:",t.likedFoods)})}}),{clearCurrentFood:Of,clearError:Ah,clearAllFoodsError:Oh,updateFoodInList:Ph,toggleLikeLocally:Th}=Ys.actions,Pf=Ys.reducer,bt=Kt({name:"cart",initialState:{items:[],totalItems:0,totalAmount:0,loading:!1,error:null,lastUpdated:null},reducers:{addToCart:(e,t)=>{console.log("🛒 Adding to cart:",t.payload);const n=t.payload,i=e.items.findIndex(r=>r.foodId===n.foodId&&r.selectedDate===n.selectedDate&&(r.specialInstructions||"")===(n.specialInstructions||"")&&r.orderType===n.orderType);if(i!==-1){const r=e.items[i].quantity;e.items[i].quantity+=n.quantity||1,e.items[i].updatedAt=new Date().toISOString(),console.log("📦 Updated existing cart item quantity:",{foodId:n.foodId,selectedDate:n.selectedDate,oldQuantity:r,newQuantity:e.items[i].quantity,addedQuantity:n.quantity||1})}else{const r={id:`cart-item-${Date.now()}-${Math.random()}`,foodId:n.foodId,kitchenId:n.kitchenId,userId:n.userId||"local_user",quantity:n.quantity||1,selectedDate:n.selectedDate||null,selectedTime:n.selectedTime||null,orderType:n.orderType||"GO_GRAB",specialInstructions:n.specialInstructions||"",food:n.food||null,kitchen:n.kitchen||null,pickupDetails:n.pickupDetails||{date:n.selectedDate,time:n.selectedTime,display:n.orderType==="GO_GRAB"?"Pick up today":`Pick up ${n.selectedDate}`,orderType:n.orderType||"GO_GRAB"},isPreOrder:n.isPreOrder||!1,addedAt:new Date().toISOString()};e.items.push(r),console.log("📦 Added new cart item:",r)}bt.caseReducers.calculateTotals(e)},removeFromCart:(e,t)=>{const n=t.payload;console.log("🗑️ Removing from cart:",n);const i=e.items.length;e.items=e.items.filter(r=>r.id!==n),console.log("🗑️ Removed cart item:",{itemId:n,itemsRemoved:i-e.items.length,remainingItems:e.items.length}),bt.caseReducers.calculateTotals(e)},updateCartItem:(e,t)=>{const{cartItemId:n,quantity:i,specialInstructions:r}=t.payload;console.log("📝 Updating cart item:",t.payload);const s=e.items.findIndex(o=>o.id===n);s!==-1?(i!==void 0&&(e.items[s].quantity=i),r!==void 0&&(e.items[s].specialInstructions=r),e.items[s].updatedAt=new Date().toISOString(),console.log("📝 Updated cart item:",{itemId:n,newQuantity:i,specialInstructions:r}),bt.caseReducers.calculateTotals(e)):console.error("❌ Cart item not found for update:",n)},updatePickupDetails:(e,t)=>{const{cartItemId:n,pickupDate:i,pickupTime:r,orderType:s}=t.payload;console.log("📅 Updating pickup details:",t.payload);const o=e.items.find(l=>l.id===n);o?(i!==void 0&&(o.selectedDate=i),r!==void 0&&(o.selectedTime=r),s!==void 0&&(o.orderType=s),o.pickupDetails||(o.pickupDetails={}),i!==void 0&&(o.pickupDetails.date=i,o.pickupDetails.display=s==="GO_GRAB"?"Pick up today":`Pick up ${i}`),r!==void 0&&(o.pickupDetails.time=r),s!==void 0&&(o.pickupDetails.orderType=s),o.updatedAt=new Date().toISOString(),console.log("📅 Updated pickup details for item:",n)):console.error("❌ Cart item not found for pickup details update:",n)},clearCart:e=>{console.log("🗑️ Clearing entire cart"),e.items=[],e.totalItems=0,e.totalAmount=0,e.lastUpdated=new Date().toISOString()},clearError:e=>{e.error=null},calculateTotals:e=>{e.totalItems=e.items.reduce((t,n)=>t+(n.quantity||1),0),e.totalAmount=e.items.reduce((t,n)=>{var s;const i=((s=n.food)==null?void 0:s.cost)||0,r=typeof i=="string"?parseFloat(i):i;return t+r*(n.quantity||1)},0),e.lastUpdated=new Date().toISOString(),console.log("🧮 Calculated totals:",{totalItems:e.totalItems,totalAmount:e.totalAmount,itemCount:e.items.length})},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(Pn,(t,n)=>{var i;if((i=n.payload)!=null&&i.cart){console.log("💾 Rehydrating cart from persistence:",n.payload.cart);const r={...t,...n.payload.cart,loading:!1,error:null};return bt.caseReducers.calculateTotals(r),r}})}}),{addToCart:Qs,removeFromCart:Tf,updateCartItem:Ii,updatePickupDetails:Nh,clearCart:Mn,clearError:Fh,calculateTotals:Mh,setLoading:$h,setError:Uh}=bt.actions,Nf=bt.reducer,dn=ke("kitchen/fetchStats",async e=>{try{const t=await _f(e);return{kitchenId:e,stats:t}}catch(t){throw console.error("Error fetching kitchen stats:",t),t}}),un=ke("kitchen/fetchReviews",async({kitchenId:e,limit:t=10})=>{try{const n=await Gs(e,t);return{kitchenId:e,reviews:n}}catch(n){throw console.error("Error fetching kitchen reviews:",n),n}}),Ff=ke("kitchen/addReview",async({kitchenId:e,reviewData:t},{getState:n})=>{var l,c;const{auth:i}=n(),r=(l=i.user)==null?void 0:l.id,s=((c=i.user)==null?void 0:c.name)||"Anonymous";if(!r)throw new Error("User not authenticated");console.log("Adding kitchen review:",{kitchenId:e,reviewData:t,userId:r,userName:s}),await new Promise(d=>setTimeout(d,500));const o={id:`review-${Date.now()}`,userId:r,userName:s,rating:t.rating,comment:t.comment,timestamp:new Date().toISOString(),kitchenId:e};return{kitchenId:e,review:o}}),Mf=ke("kitchen/updateReview",async({kitchenId:e,reviewId:t,updates:n},{getState:i})=>{var o;const{auth:r}=i(),s=(o=r.user)==null?void 0:o.id;if(!s)throw new Error("User not authenticated");return console.log("Updating kitchen review:",{kitchenId:e,reviewId:t,updates:n,userId:s}),await new Promise(l=>setTimeout(l,300)),{kitchenId:e,reviewId:t,updates:n}}),$f=ke("kitchen/deleteReview",async({kitchenId:e,reviewId:t},{getState:n})=>{var s;const{auth:i}=n(),r=(s=i.user)==null?void 0:s.id;if(!r)throw new Error("User not authenticated");return console.log("Deleting kitchen review:",{kitchenId:e,reviewId:t,userId:r}),await new Promise(o=>setTimeout(o,300)),{kitchenId:e,reviewId:t}}),Vs=Kt({name:"kitchen",initialState:{kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}},reducers:{clearKitchenData:(e,t)=>{const n=t.payload;delete e.kitchenStats[n],delete e.kitchenReviews[n],delete e.statsLoading[n],delete e.reviewsLoading[n],delete e.statsError[n],delete e.reviewsError[n],delete e.statsLastUpdated[n],delete e.reviewsLastUpdated[n]},clearAllKitchenData:()=>({kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}}),clearKitchenErrors:(e,t)=>{const n=t.payload;delete e.statsError[n],delete e.reviewsError[n]}},extraReducers:e=>{e.addCase(dn.pending,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!0,delete t.statsError[i]}).addCase(dn.fulfilled,(t,n)=>{const{kitchenId:i,stats:r}=n.payload;t.statsLoading[i]=!1,t.kitchenStats[i]=Ue(r),t.statsLastUpdated[i]=new Date().toISOString()}).addCase(dn.rejected,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!1,t.statsError[i]=n.error.message}).addCase(un.pending,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!0,delete t.reviewsError[i]}).addCase(un.fulfilled,(t,n)=>{const{kitchenId:i,reviews:r}=n.payload;t.reviewsLoading[i]=!1,t.kitchenReviews[i]=r?r.map(s=>Ue(s)):[],t.reviewsLastUpdated[i]=new Date().toISOString()}).addCase(un.rejected,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!1,t.reviewsError[i]=n.error.message}).addCase(Ff.fulfilled,(t,n)=>{const{kitchenId:i,review:r}=n.payload;t.kitchenReviews[i]||(t.kitchenReviews[i]=[]);const s=Ue(r);if(t.kitchenReviews[i].unshift(s),t.kitchenStats[i]){const o=t.kitchenStats[i],l=o.totalReviews||0,c=(o.averageRating||0)*l,d=l+1,p=c+r.rating;t.kitchenStats[i]={...o,totalReviews:d,averageRating:p/d}}}).addCase(Mf.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:r,updates:s}=n.payload;if(t.kitchenReviews[i]){const o=t.kitchenReviews[i].findIndex(l=>l.id===r);if(o!==-1){const l=t.kitchenReviews[i][o].rating;if(t.kitchenReviews[i][o]={...t.kitchenReviews[i][o],...s,updatedAt:new Date().toISOString()},s.rating&&s.rating!==l&&t.kitchenStats[i]){const c=t.kitchenStats[i],d=c.totalReviews||0,u=(c.averageRating||0)*d-l+s.rating;t.kitchenStats[i]={...c,averageRating:u/d}}}}}).addCase($f.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:r}=n.payload;if(t.kitchenReviews[i]){const s=t.kitchenReviews[i].findIndex(o=>o.id===r);if(s!==-1){const o=t.kitchenReviews[i][s].rating;if(t.kitchenReviews[i].splice(s,1),t.kitchenStats[i]){const l=t.kitchenStats[i],c=l.totalReviews||0;if(c>1){const d=(l.averageRating||0)*c,p=c-1,u=d-o;t.kitchenStats[i]={...l,totalReviews:p,averageRating:u/p}}else t.kitchenStats[i]={...l,totalReviews:0,averageRating:0}}}}})}}),{clearKitchenData:zh,clearAllKitchenData:Bh,clearKitchenErrors:qh}=Vs.actions,Uf=Vs.reducer,pn=ke("reviews/fetchFoodReviews",async({foodId:e,kitchenId:t,limit:n=10})=>{try{console.log("Fetching food reviews:",{foodId:e,kitchenId:t,limit:n}),await new Promise(r=>setTimeout(r,300));const i=[{id:`review-1-${e}`,userId:"user-001",userName:"Alice Chen",rating:5,comment:"Absolutely delicious! Perfect taste and portion size.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-2-${e}`,userId:"user-002",userName:"Bob Wilson",rating:4,comment:"Great food, fast delivery. Will order again!",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-3-${e}`,userId:"user-003",userName:"Carol Davis",rating:5,comment:"Outstanding quality! Fresh ingredients and amazing flavors.",timestamp:new Date(Date.now()-2592e5).toISOString(),foodId:e,kitchenId:t,verified:!0}].slice(0,n);return{foodId:e,kitchenId:t,reviews:i}}catch(i){throw console.error("Error fetching food reviews:",i),i}}),fn=ke("reviews/addFoodReview",async({foodId:e,kitchenId:t,reviewData:n},{getState:i})=>{var c,d;const{auth:r}=i(),s=(c=r.user)==null?void 0:c.id,o=((d=r.user)==null?void 0:d.name)||"Anonymous";if(!s)throw new Error("User not authenticated");console.log("Adding food review:",{foodId:e,kitchenId:t,reviewData:n,userId:s,userName:o}),await new Promise(p=>setTimeout(p,500));const l={id:`review-${Date.now()}`,userId:s,userName:o,rating:n.rating,comment:n.comment,timestamp:new Date().toISOString(),foodId:e,kitchenId:t,verified:!0};return{foodId:e,kitchenId:t,review:l}}),zf=ke("reviews/updateFoodReview",async({foodId:e,kitchenId:t,reviewId:n,updates:i},{getState:r})=>{var l;const{auth:s}=r(),o=(l=s.user)==null?void 0:l.id;if(!o)throw new Error("User not authenticated");return console.log("Updating food review:",{foodId:e,kitchenId:t,reviewId:n,updates:i,userId:o}),await new Promise(c=>setTimeout(c,300)),{foodId:e,kitchenId:t,reviewId:n,updates:i}}),Bf=ke("reviews/deleteFoodReview",async({foodId:e,kitchenId:t,reviewId:n},{getState:i})=>{var o;const{auth:r}=i(),s=(o=r.user)==null?void 0:o.id;if(!s)throw new Error("User not authenticated");return console.log("Deleting food review:",{foodId:e,kitchenId:t,reviewId:n,userId:s}),await new Promise(l=>setTimeout(l,300)),{foodId:e,kitchenId:t,reviewId:n}}),di=ke("reviews/fetchUserReviews",async({limit:e=20},{getState:t})=>{var s;const{auth:n}=t(),i=(s=n.user)==null?void 0:s.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching user reviews:",{userId:i,limit:e}),await new Promise(o=>setTimeout(o,300)),[{id:"user-review-1",userId:i,userName:n.user.name,rating:5,comment:"Loved this dish! Perfect for dinner.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:"food-001",foodName:"Kung Pao Chicken",kitchenId:"kitchen-001",kitchenName:"Mary's Kitchen",verified:!0},{id:"user-review-2",userId:i,userName:n.user.name,rating:4,comment:"Good value for money. Quick delivery.",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:"food-002",foodName:"Beef Noodle Soup",kitchenId:"kitchen-002",kitchenName:"Tom's Noodles",verified:!0}]}),Zs=Kt({name:"reviews",initialState:{foodReviews:{},userReviews:[],foodReviewsLoading:{},userReviewsLoading:!1,foodReviewsError:{},userReviewsError:null,foodReviewsLastUpdated:{},userReviewsLastUpdated:null,submissionLoading:!1,submissionError:null},reducers:{clearFoodReviews:(e,t)=>{const n=t.payload;delete e.foodReviews[n],delete e.foodReviewsLoading[n],delete e.foodReviewsError[n],delete e.foodReviewsLastUpdated[n]},clearAllReviews:e=>{e.foodReviews={},e.userReviews=[],e.foodReviewsLoading={},e.userReviewsLoading=!1,e.foodReviewsError={},e.userReviewsError=null,e.foodReviewsLastUpdated={},e.userReviewsLastUpdated=null},clearReviewErrors:(e,t)=>{if(t.payload){const n=t.payload;delete e.foodReviewsError[n]}else e.foodReviewsError={},e.userReviewsError=null,e.submissionError=null},clearSubmissionError:e=>{e.submissionError=null}},extraReducers:e=>{e.addCase(pn.pending,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!0,delete t.foodReviewsError[i]}).addCase(pn.fulfilled,(t,n)=>{const{foodId:i,reviews:r}=n.payload;t.foodReviewsLoading[i]=!1,t.foodReviews[i]=r,t.foodReviewsLastUpdated[i]=new Date().toISOString()}).addCase(pn.rejected,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!1,t.foodReviewsError[i]=n.error.message}).addCase(fn.pending,t=>{t.submissionLoading=!0,t.submissionError=null}).addCase(fn.fulfilled,(t,n)=>{t.submissionLoading=!1;const{foodId:i,review:r}=n.payload;t.foodReviews[i]||(t.foodReviews[i]=[]),t.foodReviews[i].unshift(r),t.userReviews.unshift({...r,foodName:"Unknown Food",kitchenName:"Unknown Kitchen"})}).addCase(fn.rejected,(t,n)=>{t.submissionLoading=!1,t.submissionError=n.error.message}).addCase(zf.fulfilled,(t,n)=>{const{foodId:i,reviewId:r,updates:s}=n.payload;if(t.foodReviews[i]){const l=t.foodReviews[i].findIndex(c=>c.id===r);l!==-1&&(t.foodReviews[i][l]={...t.foodReviews[i][l],...s,updatedAt:new Date().toISOString()})}const o=t.userReviews.findIndex(l=>l.id===r);o!==-1&&(t.userReviews[o]={...t.userReviews[o],...s,updatedAt:new Date().toISOString()})}).addCase(Bf.fulfilled,(t,n)=>{const{foodId:i,reviewId:r}=n.payload;t.foodReviews[i]&&(t.foodReviews[i]=t.foodReviews[i].filter(s=>s.id!==r)),t.userReviews=t.userReviews.filter(s=>s.id!==r)}).addCase(di.pending,t=>{t.userReviewsLoading=!0,t.userReviewsError=null}).addCase(di.fulfilled,(t,n)=>{t.userReviewsLoading=!1,t.userReviews=n.payload,t.userReviewsLastUpdated=new Date().toISOString()}).addCase(di.rejected,(t,n)=>{t.userReviewsLoading=!1,t.userReviewsError=n.error.message})}}),{clearFoodReviews:Wh,clearAllReviews:Gh,clearReviewErrors:Kh,clearSubmissionError:Hh}=Zs.actions,qf=Zs.reducer,Wf={key:"root",storage:Tn,whitelist:["auth","cart"],blacklist:["food","kitchen","reviews"]},Gf={key:"auth",storage:Tn,whitelist:["user","isAuthenticated","isDevelopmentMode"],blacklist:["loading","error","wechatAuthUrl"]},Kf={key:"cart",storage:Tn,whitelist:["items","totalItems","totalAmount"],blacklist:["loading","error"]},Hf=Ma({auth:ji(Gf,Fd),food:Pf,cart:ji(Kf,Nf),kitchen:Uf,reviews:qf}),Yf=ji(Wf,Hf),Js=$c({reducer:Yf,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})}),Xs=Cd(Js),Qf="modulepreload",Vf=function(e){return"/"+e},Yr={},Zf=function(t,n,i){let r=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));r=Promise.allSettled(n.map(c=>{if(c=Vf(c),c in Yr)return;Yr[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Qf,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((g,f)=>{u.addEventListener("load",g),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return r.then(o=>{for(const l of o||[])l.status==="rejected"&&s(l.reason);return t().catch(s)})},eo=ke("app/performCompleteLogout",async(e,{dispatch:t})=>{try{return console.log("🚪 Starting complete logout process..."),t(Td()),t(Mn()),await Xs.purge(),localStorage.removeItem("persist:root"),localStorage.removeItem("persist:auth"),localStorage.removeItem("persist:cart"),sessionStorage.clear(),console.log("✅ Complete logout successful"),{success:!0}}catch(n){throw console.error("❌ Logout error:",n),n}}),sr=m.createContext(null),Te=it?wa(it):null;function Jf({children:e}){const[t,n]=m.useState(null),[i,r]=m.useState(!0),s=Xe();m.useEffect(()=>{if(Se||!Te){const f=localStorage.getItem("test_user_session");if(f)try{const x=JSON.parse(f);n(x),s(Jt(x)),console.log("🧪 Restored test user session:",x)}catch(x){console.warn("Failed to restore test session:",x),localStorage.removeItem("test_user_session")}const h=localStorage.getItem("wechat_user");if(h)try{const x=JSON.parse(h);n(x),s(Jt(x)),console.log("🔄 Restored WeChat user session:",x)}catch(x){console.warn("Failed to restore WeChat session:",x),localStorage.removeItem("wechat_user")}r(!1);return}const g=Wo(Te,f=>{n(f||null),r(!1)});return()=>g()},[Te,s]);const o=m.useCallback(async()=>{if(Se||!Te){console.info("Auth disabled: anonymous sign-in skipped");return}await Go(Te)},[Te]),l=m.useCallback(()=>{const g=we.APP_ID,f=encodeURIComponent(Mt()),h=we.WEB_SCOPE,x="we_"+Math.random().toString(36).slice(2),y=`${we.QR_AUTHORIZE_URL}?appid=${g}&redirect_uri=${f}&response_type=code&scope=${h}&state=${x}#wechat_redirect`;console.log("🔗 [AuthContext] WeChat OAuth URL:",y),console.log("🔍 [AuthContext] Using redirect URI:",Mt()),window.location.href=y},[]),c=m.useCallback(async g=>{try{console.log("🔄 Exchanging WeChat code for user info...");const{WECHAT_API:f}=await Zf(async()=>{const{WECHAT_API:I}=await Promise.resolve().then(()=>Pd);return{WECHAT_API:I}},void 0),h=await f.getAccessToken(g);if(h.errcode)throw new Error(`WeChat API Error: ${h.errmsg}`);console.log("✅ Got access token:",h);const x=await f.getUserInfo(h.access_token,h.openid);if(x.errcode)throw new Error(`WeChat User Info Error: ${x.errmsg}`);console.log("✅ Got user info:",x);const y={id:`wechat_${x.openid}`,uid:x.openid,openid:x.openid,name:x.nickname,displayName:x.nickname,avatar:x.headimgurl,photoURL:x.headimgurl,country:x.country,province:x.province,city:x.city,sex:x.sex,language:x.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:x.openid,accessToken:h.access_token,createdAt:new Date().toISOString()};return localStorage.setItem("wechat_user",JSON.stringify(y)),n(y),s(Jt(y)),console.log("✅ WeChat authentication successful:",y),y}catch(f){throw console.error("❌ WeChat authentication failed:",f),f}},[s]),d=m.useCallback(async()=>{console.log("🧪 Using test user bypass");const g={id:`test_user_${Date.now()}`,uid:`test_user_${Date.now()}`,openid:`test_openid_${Date.now()}`,name:"Test User",displayName:"Test User",avatar:null,photoURL:null,email:null,country:"Test Country",province:"Test Province",city:"Test City",sex:0,language:"en",isAuthenticated:!0,authMethod:"test",wechatOpenId:`test_openid_${Date.now()}`,accessToken:"test_access_token",providerId:"test",isAnonymous:!1,createdAt:new Date().toISOString()};return n(g),s(Jt(g)),localStorage.setItem("test_user_session",JSON.stringify(g)),console.log("✅ Test user signed in:",g),g},[s]),p=m.useCallback(async()=>{try{!Se&&Te&&await pr(Te),localStorage.removeItem("test_user_session"),localStorage.removeItem("wechat_user"),n(null),await s(eo()).unwrap(),console.log("✅ Complete logout successful")}catch(g){console.error("❌ Logout error:",g),!Se&&Te&&await pr(Te),localStorage.removeItem("test_user_session"),localStorage.removeItem("wechat_user"),n(null)}},[Te,s]),u={user:t,initializing:i,authDisabled:Se,signInAnonymously:o,signInWithWeChatPopup:l,signInWithTestUser:d,handleWeChatCallback:c,signOut:p};return a.jsx(sr.Provider,{value:u,children:e})}function or(){const e=m.useContext(sr);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Xf(){const{user:e,signOut:t,authDisabled:n}=or();return a.jsxs("div",{className:"container py-3",children:[a.jsxs("h1",{className:"h4 mb-3",children:["Welcome ",(e==null?void 0:e.displayName)||"User"]}),a.jsx("p",{className:"text-secondary small mb-4",children:"This is a mobile-first boilerplate."}),n&&a.jsx("div",{className:"alert alert-warning p-2 small",role:"alert",children:"Firebase auth disabled (placeholder config). Add real env values to enable."}),a.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:t,children:"Sign out"})]})}const Ai="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3ccircle%20cx='9'%20cy='10'%20r='1'/%3e%3ccircle%20cx='15'%20cy='10'%20r='1'/%3e%3cpath%20d='M5%2015c-1.143-1.012-2-2.547-2-4.25C3%207.798%205.91%205%209.5%205s6.5%202.798%206.5%205.75S13.09%2016.5%209.5%2016.5c-.517%200-1.02-.057-1.5-.165L5%2018l.8-2.4'/%3e%3cpath%20d='M16.5%208.5c2.485%200%204.5%201.79%204.5%204s-2.015%204-4.5%204c-.275%200-.544-.02-.805-.06L14%2018l.6-1.8'/%3e%3c/svg%3e";function em(){const{signInWithWeChatPopup:e,signInAnonymously:t}=or();return a.jsxs("div",{className:"container py-5",children:[a.jsx("h1",{className:"h5 mb-4 text-center",children:"Sign In"}),a.jsxs("div",{className:"d-grid gap-3",children:[a.jsxs("button",{className:"btn btn-success d-flex align-items-center justify-content-center gap-2",onClick:e,children:[a.jsx("img",{src:Ai,alt:"WeChat",style:{width:20,height:20}}),a.jsx("span",{children:"Continue with WeChat"})]}),a.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Continue as Guest"})]})]})}const tm="https://us-central1/homefoods-16e56.cloudfunctions.net/exchangeWeChatCode",nm=()=>{const[e,t]=m.useState<"loading"|"ok"|!1,[n,i]=m.useState(null);return m.useEffect(()=>{(async()=>{const r=new URLSearchParams(window.location.search),s=r.get("code");console.log("code",s);const o=r.get("state"),l=sessionStorage.getItem("wx_state");if(!s){t("error"),i({error:"missing_code"});return}if(!o||!l||o!==l){t("error"),i({error:"bad_state"});return}try{const c=await fetch(tm,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({code:s}),credentials:"omit"}),d=await c.json();if(!c.ok||d.error){t("error"),i({error:d.error||`http_${c.status}`});return}t("ok"),i(d)}catch(c){t("error"),i({error:(c==null?void 0:c.message)||"network_error"})}})()},[]),e==="loading"?a.jsx("p",{children:"Exchanging code…"}):e==="error"?a.jsxs("pre",{children:["Error: ",JSON.stringify(n,null,2)]}):a.jsxs("div",{children:[a.jsx("h2",{children:"WeChat login success"}),a.jsx("pre",{style:{fontSize:12,background:"#f6f6f6",padding:12},children:JSON.stringify(n,null,2)})]})};class $n{constructor(){this.domain="homefreshfoods.ai",this.appId="wx4a71fe09bb125182",this.redirectUri=`https://${this.domain}/wechat/callback`,this.results={timestamp:new Date().toISOString(),domain:this.domain,appId:this.appId,tests:{}}}async runAllTests(){console.log("🔍 Starting WeChat diagnostics...");try{this.results.tests.domainAccess=await this.testDomainAccess(),this.results.tests.verificationFile=await this.testVerificationFile(),this.results.tests.sslCertificate=await this.testSSLCertificate(),this.results.tests.redirectAccess=await this.testRedirectAccess(),this.results.tests.authUrl=this.generateAuthUrl();const t=Object.values(this.results.tests).filter(i=>i.success).length,n=Object.keys(this.results.tests).length-1;return this.results.overall={success:t===n,score:`${t}/${n}`,message:t===n?"All tests passed!":"Some tests failed - check WeChat Console configuration"},console.log("✅ Diagnostics complete:",this.results),this.results}catch(t){return console.error("❌ Diagnostics failed:",t),this.results.error=t.message,this.results}}async testDomainAccess(){const t={name:"Domain Access",success:!1,message:"",url:`https://${this.domain}/`};try{const n=new AbortController,i=setTimeout(()=>n.abort(),1e4),r=await fetch(t.url,{method:"HEAD",signal:n.signal});clearTimeout(i),r.ok?(t.success=!0,t.message=`Domain ${this.domain} is accessible`,t.status=r.status):(t.message=`HTTP ${r.status}: ${r.statusText}`,t.status=r.status)}catch(n){t.message=`Connection failed: ${n.message}`,t.error=n.name}return t}async testVerificationFile(){const t={name:"Verification File",success:!1,message:"",checkedFiles:[]},n=["MP_verify_placeholder.txt",`MP_verify_${this.appId}.txt`,"MP_verify_wx4a71fe09bb125182.txt"];for(const i of n){const r=`https://${this.domain}/${i}`;t.checkedFiles.push(i);try{const s=await fetch(r);if(s.ok){const o=await s.text();t.success=!0,t.message=`Found verification file: ${i}`,t.filename=i,t.content=o.substring(0,100),t.url=r;break}}catch(s){}}return t.success||(t.message="No verification file found. Upload MP_verify_*.txt from WeChat Console",t.recommendation="Download verification file from WeChat Developer Console and upload to website root"),t}async testSSLCertificate(){const t={name:"SSL Certificate",success:!1,message:"",url:`https://${this.domain}/`};try{const n=await fetch(t.url,{method:"HEAD"});n.ok?(t.success=!0,t.message="Valid HTTPS connection established",t.protocol="HTTPS"):(t.message=`HTTPS connection established but got HTTP ${n.status}`,t.protocol="HTTPS",t.status=n.status)}catch(n){t.message=`SSL/HTTPS error: ${n.message}`,t.error=n.name}return t}async testRedirectAccess(){const t={name:"Redirect URI Access",success:!1,message:"",url:this.redirectUri};try{const n=await fetch(this.redirectUri,{method:"HEAD"});n.ok||n.status===404||n.status===405?(t.success=!0,t.message=`Redirect URI is accessible (HTTP ${n.status})`,t.status=n.status):(t.message=`Redirect URI returned HTTP ${n.status}`,t.status=n.status)}catch(n){t.message=`Redirect URI test failed: ${n.message}`,t.error=n.name}return t}generateAuthUrl(t=null){const n=t||`test_${Math.random().toString(36).substring(7)}`,r=`https://open.weixin.qq.com/connect/oauth2/authorize?${new URLSearchParams({appid:this.appId,redirect_uri:this.redirectUri,response_type:"code",scope:"snsapi_base",state:n}).toString()}#wechat_redirect`;return{name:"Auth URL Generation",success:!0,message:"WeChat OAuth URL generated successfully",url:r,state:n,qrCodeUrl:`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(r)}`}}getWeChatConsoleChecklist(){return{title:"WeChat Developer Console Checklist",url:"https://developers.weixin.qq.com/",steps:[{step:1,action:"Login to WeChat Developer Console",url:"https://developers.weixin.qq.com/",status:"manual"},{step:2,action:"Navigate to Development Configuration (开发配置) tab",description:"Click on the Development Configuration tab in your app dashboard",status:"manual"},{step:3,action:"Find Web Authorization Domain (网页授权域名) section",description:"Look for the Web Authorization Domain configuration area",status:"critical"},{step:4,action:`Verify ${this.domain} is listed and verified`,description:`Ensure ${this.domain} appears in the authorized domains list with verified status`,status:"critical"},{step:5,action:"Check verification file accessibility",description:`Ensure MP_verify_*.txt file is uploaded and accessible at https://${this.domain}/MP_verify_*.txt`,status:"critical"},{step:6,action:'Verify domain status is "Verified" or "Active"',description:"Domain status should show as verified, not pending",status:"critical"}],commonIssues:[`Domain ${this.domain} not added to Web Authorization Domain list`,"Verification file missing or inaccessible","Domain added but not verified (still pending)","Wrong verification file uploaded","HTTPS not properly configured"]}}generateReport(){var n,i,r;const t={...this.results,checklist:this.getWeChatConsoleChecklist(),recommendations:[],nextSteps:[]};return(n=this.results.tests.domainAccess)!=null&&n.success||(t.recommendations.push("Fix domain accessibility issues"),t.nextSteps.push("Check DNS configuration and hosting setup")),(i=this.results.tests.verificationFile)!=null&&i.success||(t.recommendations.push("Upload WeChat verification file"),t.nextSteps.push("Download MP_verify_*.txt from WeChat Console and upload to website root")),(r=this.results.tests.sslCertificate)!=null&&r.success||(t.recommendations.push("Fix SSL certificate issues"),t.nextSteps.push("Ensure HTTPS is properly configured for the domain")),t.recommendations.length===0&&(t.recommendations.push("All technical tests passed - check WeChat Console configuration"),t.nextSteps.push("Verify domain is added to Web Authorization Domain list in WeChat Console")),t}}const to=async()=>await new $n().runAllTests(),no=async()=>{const e=new $n;await e.runAllTests();const t=e.generateReport();return console.group("🔍 WeChat Domain Verification Report"),console.log("Overall Status:",t.overall),console.log("Test Results:",t.tests),console.log("Recommendations:",t.recommendations),console.log("Next Steps:",t.nextSteps),console.groupEnd(),t};typeof window!="undefined"&&(window.WeChatDiagnostics=$n,window.runWeChatDiagnostics=to,window.checkWeChatDomain=no);const im=({isVisible:e=!1,onClose:t=()=>{},autoRun:n=!1})=>{var g,f,h,x;const[i,r]=m.useState(null),[s,o]=m.useState(!1),[l,c]=m.useState(null);m.useEffect(()=>{n&&e&&d()},[n,e]);const d=async()=>{o(!0);try{const y=new $n,I=await y.runAllTests(),$=y.generateReport();r(I),c($)}catch(y){console.error("Diagnostic error:",y),r({error:y.message})}finally{o(!1)}},p=y=>y?"✅":"❌",u=y=>y?"#4CAF50":"#F44336";return e?a.jsx("div",{style:ie.overlay,children:a.jsxs("div",{style:ie.panel,children:[a.jsxs("div",{style:ie.header,children:[a.jsx("h2",{children:"WeChat Diagnostics"}),a.jsx("button",{onClick:t,style:ie.closeButton,children:"×"})]}),a.jsx("div",{style:ie.actions,children:a.jsx("button",{onClick:d,disabled:s,style:ie.runButton,children:s?"Running Tests...":"Run Diagnostics"})}),s&&a.jsxs("div",{style:ie.loading,children:[a.jsx("div",{style:ie.spinner}),a.jsx("p",{children:"Running WeChat diagnostic tests..."})]}),i&&!s&&a.jsx("div",{style:ie.results,children:i.error?a.jsxs("div",{style:ie.error,children:[a.jsx("h3",{children:"Error"}),a.jsx("p",{children:i.error})]}):a.jsxs(a.Fragment,{children:[a.jsxs("div",{style:ie.overall,children:[a.jsxs("h3",{children:["Overall Status: ",p((g=i.overall)==null?void 0:g.success)]}),a.jsx("p",{style:{color:u((f=i.overall)==null?void 0:f.success)},children:(h=i.overall)==null?void 0:h.message}),a.jsxs("p",{children:["Score: ",(x=i.overall)==null?void 0:x.score]})]}),a.jsxs("div",{style:ie.tests,children:[a.jsx("h3",{children:"Test Results"}),Object.entries(i.tests).map(([y,I])=>a.jsxs("div",{style:ie.testItem,children:[a.jsxs("div",{style:ie.testHeader,children:[a.jsx("span",{style:ie.testIcon,children:p(I.success)}),a.jsx("strong",{children:I.name})]}),a.jsx("p",{style:ie.testMessage,children:I.message}),I.url&&a.jsxs("p",{style:ie.testUrl,children:["URL:"," ",a.jsx("a",{href:I.url,target:"_blank",rel:"noopener noreferrer",children:I.url})]}),I.qrCodeUrl&&a.jsxs("div",{style:ie.qrCode,children:[a.jsx("p",{children:"QR Code for mobile testing:"}),a.jsx("img",{src:I.qrCodeUrl,alt:"WeChat Auth QR",style:ie.qrImage})]})]},y))]}),l&&a.jsxs("div",{style:ie.recommendations,children:[a.jsx("h3",{children:"Recommendations"}),l.recommendations.map((y,I)=>a.jsxs("div",{style:ie.recommendation,children:[a.jsx("span",{style:ie.bullet,children:"•"})," ",y]},I)),a.jsx("h3",{children:"Next Steps"}),l.nextSteps.map((y,I)=>a.jsxs("div",{style:ie.nextStep,children:[a.jsxs("span",{style:ie.stepNumber,children:[I+1,"."]})," ",y]},I))]}),a.jsxs("div",{style:ie.checklist,children:[a.jsx("h3",{children:"WeChat Console Checklist"}),a.jsx("p",{children:a.jsx("a",{href:"https://developers.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer",style:ie.link,children:"Open WeChat Developer Console"})}),l==null?void 0:l.checklist.steps.map(y=>a.jsxs("div",{style:ie.checklistItem,children:[a.jsxs("span",{style:ie.stepNumber,children:[y.step,"."]}),a.jsx("span",{children:y.action}),y.status==="critical"&&a.jsx("span",{style:ie.critical,children:" (Critical)"})]},y.step))]})]})})]})}):null},ie={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e4,overflow:"auto"},panel:{backgroundColor:"white",margin:"20px auto",padding:"20px",maxWidth:"800px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"20px"},closeButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px"},actions:{marginBottom:"20px"},runButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},loading:{textAlign:"center",padding:"20px"},spinner:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 10px"},results:{marginTop:"20px"},overall:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",marginBottom:"20px"},error:{backgroundColor:"#ffebee",color:"#c62828",padding:"15px",borderRadius:"4px"},tests:{marginBottom:"20px"},testItem:{border:"1px solid #ddd",padding:"10px",marginBottom:"10px",borderRadius:"4px"},testHeader:{display:"flex",alignItems:"center",marginBottom:"5px"},testIcon:{marginRight:"8px"},testMessage:{margin:"5px 0",fontSize:"14px"},testUrl:{margin:"5px 0",fontSize:"12px",color:"#666"},qrCode:{textAlign:"center",marginTop:"10px"},qrImage:{maxWidth:"200px",height:"auto"},recommendations:{backgroundColor:"#fff3cd",padding:"15px",borderRadius:"4px",marginBottom:"20px"},recommendation:{display:"flex",alignItems:"flex-start",marginBottom:"5px"},bullet:{marginRight:"8px",color:"#856404"},nextStep:{display:"flex",alignItems:"flex-start",marginBottom:"5px"},stepNumber:{marginRight:"8px",color:"#856404",fontWeight:"bold"},checklist:{backgroundColor:"#e1f5fe",padding:"15px",borderRadius:"4px"},checklistItem:{display:"flex",alignItems:"flex-start",marginBottom:"8px"},critical:{color:"#d32f2f",fontWeight:"bold"},link:{color:"#1976d2",textDecoration:"none"}},rm=()=>{const[e,t]=m.useState(!1),[n,i]=m.useState(null),r=async()=>{console.log("🚀 Running quick WeChat test...");const c=await to();i(c),console.log("✅ Quick test completed:",c)},s=async()=>{console.log("📊 Generating full WeChat report...");const c=await no();i(c),console.log("📋 Full report completed:",c)},o=()=>{window.open("https://developers.weixin.qq.com/","_blank")},l=()=>{window.open("/wechat-diagnosis.html","_blank")};return a.jsxs("div",{style:se.container,children:[a.jsxs("div",{style:se.header,children:[a.jsx("h1",{children:"WeChat Authentication Debug"}),a.jsx("p",{children:"Diagnostic tools for troubleshooting WeChat domain verification issues"})]}),a.jsxs("div",{style:se.section,children:[a.jsx("h2",{children:"Quick Actions"}),a.jsxs("div",{style:se.buttonGrid,children:[a.jsx("button",{onClick:r,style:se.button,children:"🔍 Run Quick Test"}),a.jsx("button",{onClick:s,style:se.button,children:"📊 Generate Full Report"}),a.jsx("button",{onClick:()=>t(!0),style:se.button,children:"🛠️ Open Diagnostic Panel"}),a.jsx("button",{onClick:l,style:se.button,children:"🌐 Open Web Diagnostic Tool"})]})]}),a.jsxs("div",{style:se.section,children:[a.jsx("h2",{children:"External Resources"}),a.jsxs("div",{style:se.buttonGrid,children:[a.jsx("button",{onClick:o,style:se.externalButton,children:"🏗️ WeChat Developer Console"}),a.jsx("a",{href:"https://homefreshfoods.ai/MP_verify_placeholder.txt",target:"_blank",rel:"noopener noreferrer",style:se.link,children:"📄 Check Verification File"})]})]}),a.jsxs("div",{style:se.section,children:[a.jsx("h2",{children:"Current Configuration"}),a.jsxs("div",{style:se.config,children:[a.jsxs("div",{style:se.configItem,children:[a.jsx("strong",{children:"Domain:"})," homefreshfoods.ai"]}),a.jsxs("div",{style:se.configItem,children:[a.jsx("strong",{children:"App ID:"})," wx4a71fe09bb125182"]}),a.jsxs("div",{style:se.configItem,children:[a.jsx("strong",{children:"Redirect URI:"})," ","https://homefreshfoods.ai/wechat/callback"]}),a.jsxs("div",{style:se.configItem,children:[a.jsx("strong",{children:"Environment:"})," Production"]})]})]}),n&&a.jsxs("div",{style:se.section,children:[a.jsx("h2",{children:"Latest Results"}),a.jsx("div",{style:se.results,children:a.jsx("pre",{style:se.pre,children:JSON.stringify(n,null,2)})})]}),a.jsxs("div",{style:se.section,children:[a.jsx("h2",{children:"Common Issues & Solutions"}),a.jsxs("div",{style:se.troubleshooting,children:[a.jsxs("div",{style:se.issue,children:[a.jsx("h3",{children:"Error 10003: Redirect URI Domain Mismatch"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Verify domain is added to Web Authorization Domain list"}),a.jsx("li",{children:"Ensure verification file is uploaded and accessible"}),a.jsx("li",{children:'Check domain status is "Verified" not "Pending"'}),a.jsx("li",{children:"Confirm no typos in domain name"})]})]}),a.jsxs("div",{style:se.issue,children:[a.jsx("h3",{children:"Verification File Not Found"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Download MP_verify_*.txt from WeChat Console"}),a.jsx("li",{children:"Upload to website root directory"}),a.jsx("li",{children:"Ensure file is accessible via HTTPS"}),a.jsx("li",{children:"Check file permissions and hosting configuration"})]})]}),a.jsxs("div",{style:se.issue,children:[a.jsx("h3",{children:"Domain Not Verified"}),a.jsxs("ul",{children:[a.jsx("li",{children:"Upload correct verification file"}),a.jsx("li",{children:"Wait for WeChat verification process (can take minutes)"}),a.jsx("li",{children:"Try removing and re-adding domain"}),a.jsx("li",{children:"Ensure HTTPS is properly configured"})]})]})]})]}),a.jsx(im,{isVisible:e,onClose:()=>t(!1),autoRun:!0})]})},se={container:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif"},header:{textAlign:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid #eee"},section:{marginBottom:"30px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px"},buttonGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",marginTop:"15px"},button:{padding:"12px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",textAlign:"center"},externalButton:{padding:"12px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",textAlign:"center"},link:{display:"inline-block",padding:"12px 20px",backgroundColor:"#6c757d",color:"white",textDecoration:"none",borderRadius:"6px",textAlign:"center"},config:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd"},configItem:{padding:"8px 0",borderBottom:"1px solid #eee"},results:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd",maxHeight:"400px",overflow:"auto"},pre:{margin:0,fontSize:"12px",lineHeight:"1.4"},troubleshooting:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd"},issue:{marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #eee"}},io="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='1024'%20height='1024'%20viewBox='0%200%20500%20500'%3e%3crect%20x='0'%20y='0'%20width='500'%20height='500'%20fill='%23ffffff'/%3e%3cg%20transform='scale(18.519)'%3e%3cg%20transform='translate(1,1)'%3e%3cg%3e%3cg%20transform='translate(3.5,3.5)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(21.5,3.5)'%3e%3cg%20transform='rotate(90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(3.5,21.5)'%3e%3cg%20transform='rotate(-90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20fill-rule='evenodd'%20d='M9%200L9%202L8%202L8%208L10%208L10%209L9%209L9%2011L8%2011L8%2013L7%2013L7%2012L5%2012L5%2013L4%2013L4%2012L2%2012L2%2013L3%2013L3%2014L4%2014L4%2015L5%2015L5%2016L6%2016L6%2017L7%2017L7%2016L8%2016L8%2018L9%2018L9%2012L10%2012L10%2013L12%2013L12%2017L10%2017L10%2018L12%2018L12%2019L11%2019L11%2020L12%2020L12%2022L13%2022L13%2023L11%2023L11%2024L12%2024L12%2025L13%2025L13%2023L14%2023L14%2024L15%2024L15%2021L16%2021L16%2022L17%2022L17%2024L22%2024L22%2025L25%2025L25%2024L24%2024L24%2023L25%2023L25%2021L23%2021L23%2022L22%2022L22%2023L21%2023L21%2021L22%2021L22%2019L25%2019L25%2015L23%2015L23%2014L22%2014L22%2015L23%2015L23%2016L24%2016L24%2018L22%2018L22%2019L21%2019L21%2017L22%2017L22%2016L15%2016L15%2013L16%2013L16%2014L17%2014L17%2015L19%2015L19%2014L20%2014L20%2015L21%2015L21%2013L22%2013L22%2012L18%2012L18%2011L19%2011L19%2010L20%2010L20%2011L21%2011L21%209L23%209L23%208L18%208L18%209L17%209L17%2010L16%2010L16%208L17%208L17%206L16%206L16%204L17%204L17%202L16%202L16%201L17%201L17%200L16%200L16%201L15%201L15%200L14%200L14%201L13%201L13%200L12%200L12%202L16%202L16%203L14%203L14%205L13%205L13%203L9%203L9%202L11%202L11%201L10%201L10%200ZM9%204L9%207L10%207L10%208L12%208L12%209L13%209L13%2011L12%2011L12%2010L11%2010L11%2011L12%2011L12%2012L13%2012L13%2014L14%2014L14%2013L15%2013L15%2012L16%2012L16%2013L17%2013L17%2014L19%2014L19%2013L17%2013L17%2012L16%2012L16%2011L15%2011L15%2012L13%2012L13%2011L14%2011L14%209L13%209L13%207L14%207L14%208L16%208L16%206L15%206L15%205L14%205L14%206L13%206L13%205L12%205L12%204L11%204L11%207L10%207L10%204ZM12%206L12%207L13%207L13%206ZM14%206L14%207L15%207L15%206ZM0%208L0%209L1%209L1%2010L0%2010L0%2017L1%2017L1%2010L2%2010L2%2011L5%2011L5%2010L3%2010L3%209L7%209L7%2010L6%2010L6%2011L7%2011L7%2010L8%2010L8%209L7%209L7%208L2%208L2%209L1%209L1%208ZM18%209L18%2010L19%2010L19%209ZM24%209L24%2010L25%2010L25%209ZM22%2010L22%2011L23%2011L23%2010ZM23%2012L23%2013L24%2013L24%2014L25%2014L25%2012ZM5%2013L5%2015L6%2015L6%2016L7%2016L7%2015L8%2015L8%2014L7%2014L7%2013ZM6%2014L6%2015L7%2015L7%2014ZM10%2014L10%2016L11%2016L11%2014ZM2%2015L2%2017L3%2017L3%2015ZM13%2015L13%2016L14%2016L14%2015ZM12%2017L12%2018L13%2018L13%2019L12%2019L12%2020L14%2020L14%2021L13%2021L13%2022L14%2022L14%2021L15%2021L15%2020L16%2020L16%2017ZM17%2017L17%2020L20%2020L20%2017ZM14%2018L14%2019L15%2019L15%2018ZM18%2018L18%2019L19%2019L19%2018ZM8%2019L8%2023L9%2023L9%2024L8%2024L8%2025L10%2025L10%2022L11%2022L11%2021L10%2021L10%2022L9%2022L9%2020L10%2020L10%2019ZM17%2021L17%2022L19%2022L19%2023L20%2023L20%2021ZM23%2022L23%2023L22%2023L22%2024L23%2024L23%2023L24%2023L24%2022Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";var ro={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(_o,function(){var n=1e3,i=6e4,r=36e5,s="millisecond",o="second",l="minute",c="hour",d="day",p="week",u="month",g="quarter",f="year",h="date",x="Invalid Date",y=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,I=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,$={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(_){var k=["th","st","nd","rd"],C=_%100;return"["+_+(k[(C-20)%10]||k[C]||k[0])+"]"}},M=function(_,k,C){var P=String(_);return!P||P.length>=k?_:""+Array(k+1-P.length).join(C)+_},v={s:M,z:function(_){var k=-_.utcOffset(),C=Math.abs(k),P=Math.floor(C/60),T=C%60;return(k<=0?"+":"-")+M(P,2,"0")+":"+M(T,2,"0")},m:function _(k,C){if(k.date()<C.date())return-_(C,k);var P=12*(C.year()-k.year())+(C.month()-k.month()),T=k.clone().add(P,u),U=C-T<0,G=k.clone().add(P+(U?-1:1),u);return+(-(P+(C-T)/(U?T-G:G-T))||0)},a:function(_){return _<0?Math.ceil(_)||0:Math.floor(_)},p:function(_){return{M:u,y:f,w:p,d,D:h,h:c,m:l,s:o,ms:s,Q:g}[_]||String(_||"").toLowerCase().replace(/s$/,"")},u:function(_){return _===void 0}},S="en",w={};w[S]=$;var R="$isDayjsObject",q=function(_){return _ instanceof N||!(!_||!_[R])},b=function _(k,C,P){var T;if(!k)return S;if(typeof k=="string"){var U=k.toLowerCase();w[U]&&(T=U),C&&(w[U]=C,T=U);var G=k.split("-");if(!T&&G.length>1)return _(G[0])}else{var F=k.name;w[F]=k,T=F}return!P&&T&&(S=T),T||!P&&S},L=function(_,k){if(q(_))return _.clone();var C=typeof k=="object"?k:{};return C.date=_,C.args=arguments,new N(C)},j=v;j.l=b,j.i=q,j.w=function(_,k){return L(_,{locale:k.$L,utc:k.$u,x:k.$x,$offset:k.$offset})};var N=function(){function _(C){this.$L=b(C.locale,null,!0),this.parse(C),this.$x=this.$x||C.x||{},this[R]=!0}var k=_.prototype;return k.parse=function(C){this.$d=function(P){var T=P.date,U=P.utc;if(T===null)return new Date(NaN);if(j.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var G=T.match(y);if(G){var F=G[2]-1||0,z=(G[7]||"0").substring(0,3);return U?new Date(Date.UTC(G[1],F,G[3]||1,G[4]||0,G[5]||0,G[6]||0,z)):new Date(G[1],F,G[3]||1,G[4]||0,G[5]||0,G[6]||0,z)}}return new Date(T)}(C),this.init()},k.init=function(){var C=this.$d;this.$y=C.getFullYear(),this.$M=C.getMonth(),this.$D=C.getDate(),this.$W=C.getDay(),this.$H=C.getHours(),this.$m=C.getMinutes(),this.$s=C.getSeconds(),this.$ms=C.getMilliseconds()},k.$utils=function(){return j},k.isValid=function(){return this.$d.toString()!==x},k.isSame=function(C,P){var T=L(C);return this.startOf(P)<=T&&T<=this.endOf(P)},k.isAfter=function(C,P){return L(C)<this.startOf(P)},k.isBefore=function(C,P){return this.endOf(P)<L(C)},k.$g=function(C,P,T){return j.u(C)?this[P]:this.set(T,C)},k.unix=function(){return Math.floor(this.valueOf()/1e3)},k.valueOf=function(){return this.$d.getTime()},k.startOf=function(C,P){var T=this,U=!!j.u(P)||P,G=j.p(C),F=function(W,Q){var D=j.w(T.$u?Date.UTC(T.$y,Q,W):new Date(T.$y,Q,W),T);return U?D:D.endOf(d)},z=function(W,Q){return j.w(T.toDate()[W].apply(T.toDate("s"),(U?[0,0,0,0]:[23,59,59,999]).slice(Q)),T)},H=this.$W,V=this.$M,ee=this.$D,Z="set"+(this.$u?"UTC":"");switch(G){case f:return U?F(1,0):F(31,11);case u:return U?F(1,V):F(0,V+1);case p:var te=this.$locale().weekStart||0,ae=(H<te?H+7:H)-te;return F(U?ee-ae:ee+(6-ae),V);case d:case h:return z(Z+"Hours",0);case c:return z(Z+"Minutes",1);case l:return z(Z+"Seconds",2);case o:return z(Z+"Milliseconds",3);default:return this.clone()}},k.endOf=function(C){return this.startOf(C,!1)},k.$set=function(C,P){var T,U=j.p(C),G="set"+(this.$u?"UTC":""),F=(T={},T[d]=G+"Date",T[h]=G+"Date",T[u]=G+"Month",T[f]=G+"FullYear",T[c]=G+"Hours",T[l]=G+"Minutes",T[o]=G+"Seconds",T[s]=G+"Milliseconds",T)[U],z=U===d?this.$D+(P-this.$W):P;if(U===u||U===f){var H=this.clone().set(h,1);H.$d[F](z),H.init(),this.$d=H.set(h,Math.min(this.$D,H.daysInMonth())).$d}else F&&this.$d[F](z);return this.init(),this},k.set=function(C,P){return this.clone().$set(C,P)},k.get=function(C){return this[j.p(C)]()},k.add=function(C,P){var T,U=this;C=Number(C);var G=j.p(P),F=function(V){var ee=L(U);return j.w(ee.date(ee.date()+Math.round(V*C)),U)};if(G===u)return this.set(u,this.$M+C);if(G===f)return this.set(f,this.$y+C);if(G===d)return F(1);if(G===p)return F(7);var z=(T={},T[l]=i,T[c]=r,T[o]=n,T)[G]||1,H=this.$d.getTime()+C*z;return j.w(H,this)},k.subtract=function(C,P){return this.add(-1*C,P)},k.format=function(C){var P=this,T=this.$locale();if(!this.isValid())return T.invalidDate||x;var U=C||"YYYY-MM-DDTHH:mm:ssZ",G=j.z(this),F=this.$H,z=this.$m,H=this.$M,V=T.weekdays,ee=T.months,Z=T.meridiem,te=function(Q,D,K,E){return Q&&(Q[D]||Q(P,U))||K[D].slice(0,E)},ae=function(Q){return j.s(F%12||12,Q,"0")},W=Z||function(Q,D,K){var E=Q<12?"AM":"PM";return K?E.toLowerCase():E};return U.replace(I,function(Q,D){return D||function(K){switch(K){case"YY":return String(P.$y).slice(-2);case"YYYY":return j.s(P.$y,4,"0");case"M":return H+1;case"MM":return j.s(H+1,2,"0");case"MMM":return te(T.monthsShort,H,ee,3);case"MMMM":return te(ee,H);case"D":return P.$D;case"DD":return j.s(P.$D,2,"0");case"d":return String(P.$W);case"dd":return te(T.weekdaysMin,P.$W,V,2);case"ddd":return te(T.weekdaysShort,P.$W,V,3);case"dddd":return V[P.$W];case"H":return String(F);case"HH":return j.s(F,2,"0");case"h":return ae(1);case"hh":return ae(2);case"a":return W(F,z,!0);case"A":return W(F,z,!1);case"m":return String(z);case"mm":return j.s(z,2,"0");case"s":return String(P.$s);case"ss":return j.s(P.$s,2,"0");case"SSS":return j.s(P.$ms,3,"0");case"Z":return G}return null}(Q)||G.replace(":","")})},k.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},k.diff=function(C,P,T){var U,G=this,F=j.p(P),z=L(C),H=(z.utcOffset()-this.utcOffset())*i,V=this-z,ee=function(){return j.m(G,z)};switch(F){case f:U=ee()/12;break;case u:U=ee();break;case g:U=ee()/3;break;case p:U=(V-H)/6048e5;break;case d:U=(V-H)/864e5;break;case c:U=V/r;break;case l:U=V/i;break;case o:U=V/n;break;default:U=V}return T?U:j.a(U)},k.daysInMonth=function(){return this.endOf(u).$D},k.$locale=function(){return w[this.$L]},k.locale=function(C,P){if(!C)return this.$L;var T=this.clone(),U=b(C,P,!0);return U&&(T.$L=U),T},k.clone=function(){return j.w(this.$d,this)},k.toDate=function(){return new Date(this.valueOf())},k.toJSON=function(){return this.isValid()?this.toISOString():null},k.toISOString=function(){return this.$d.toISOString()},k.toString=function(){return this.$d.toUTCString()},_}(),A=N.prototype;return L.prototype=A,[["$ms",s],["$s",o],["$m",l],["$H",c],["$W",d],["$M",u],["$y",f],["$D",h]].forEach(function(_){A[_[1]]=function(k){return this.$g(k,_[0],_[1])}}),L.extend=function(_,k){return _.$i||(_(k,N,L),_.$i=!0),L},L.locale=b,L.isDayjs=q,L.unix=function(_){return L(1e3*_)},L.en=w[S],L.Ls=w,L.p={},L})})(ro);var am=ro.exports;const J=ma(am);function ao(e){const[t,n]=m.useState(null),[i,r]=m.useState([]),[s,o]=m.useState(!0),[l,c]=m.useState(null);return m.useEffect(()=>{async function d(){if(!e){o(!1);return}console.log(`[useKitchenWithFoods] Fetching kitchen: ${e}`);try{o(!0),c(null);const{kitchen:p,foods:u}=await Lf(e);n(p),r(u),console.log(`[useKitchenWithFoods] Loaded kitchen with ${u.length} foods`)}catch(p){console.error("[useKitchenWithFoods] Error:",p),c(p.message)}finally{o(!1)}}d()},[e]),{kitchen:t,foods:i,loading:s,error:l,hasData:!!t&&i.length>0}}function sm(e=10){const[t,n]=m.useState([]),[i,r]=m.useState(!0),[s,o]=m.useState(null);m.useEffect(()=>{async function d(){console.log(`[useAllKitchensWithFoods] Fetching up to ${e} kitchens`);try{r(!0),o(null);const p=await Df(e);n(p);const u=p.reduce((g,f)=>g+f.foods.length,0);console.log(`[useAllKitchensWithFoods] Loaded ${p.length} kitchens with ${u} total foods`)}catch(p){console.error("[useAllKitchensWithFoods] Error:",p),o(p.message)}finally{r(!1)}}d()},[e]);const l=t.reduce((d,p)=>[...d,...p.foods],[]),c=t.length>0?t[0].kitchen:null;return{kitchensData:t,allFoods:l,primaryKitchen:c,loading:i,error:s,hasData:t.length>0,totalKitchens:t.length,totalFoods:l.length}}const ge={success:(e,t={})=>yt.success(e,{icon:"✅",duration:3e3,style:{background:"#F0FDF4",color:"#15803D",border:"1px solid #22C55E",borderRadius:"12px",padding:"16px"},...t}),error:(e,t={})=>yt.error(e,{icon:"❌",duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #EF4444",borderRadius:"12px",padding:"16px"},...t}),info:(e,t={})=>yt(e,{icon:"ℹ️",duration:3500,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #3B82F6",borderRadius:"12px",padding:"16px"},...t}),warning:(e,t={})=>yt(e,{icon:"⚠️",duration:4e3,style:{background:"#FEF3C7",color:"#92400E",border:"1px solid #F59E0B",borderRadius:"12px",padding:"16px"},...t}),cart:(e,t={})=>yt.success(e,{icon:"🛒",duration:3e3,style:{background:"#F0F9FF",color:"#0C4A6E",border:"1px solid #0EA5E9",borderRadius:"12px",padding:"16px"},...t}),loading:(e,t={})=>yt.loading(e,{style:{background:"#F9FAFB",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"12px",padding:"16px"},...t})},Ht=()=>{const e=Xe(),t=_e(s=>s.cart.items),n=m.useCallback((s,o,l=null,c=99)=>{var u,g;if(!s)return{isAvailable:!1,maxAvailable:0,orderType:l?"PRE_ORDER":"GO_GRAB",message:"Food item not found",warning:null,actualCheckingDate:l};const d=J().startOf("day"),p=((u=s.availability)==null?void 0:u.numAvailable)||s.numAvailable||0;if(p>0)return{isAvailable:!0,maxAvailable:Math.min(p,c),orderType:"GO_GRAB",message:null,warning:p<5?`Only ${p} left`:null,actualCheckingDate:null};if(l){if(J(l).startOf("day").isBefore(d))return p>0?{isAvailable:!0,maxAvailable:Math.min(p,c),orderType:"GO_GRAB",message:null,warning:p<5?`Only ${p} left`:null,actualCheckingDate:null}:{isAvailable:!1,maxAvailable:0,orderType:"GO_GRAB",message:"Sold Out",warning:null,actualCheckingDate:null};const h="PRE_ORDER";if(!((g=o==null?void 0:o.preorderSchedule)!=null&&g.dates))return{isAvailable:!1,maxAvailable:0,orderType:h,message:"Pre-orders not available for this kitchen",warning:null,actualCheckingDate:l};const x=l.includes("-")?l:J(l).format("YYYY-MM-DD"),y=o.preorderSchedule.dates[x];if(!y||!Array.isArray(y))return{isAvailable:!1,maxAvailable:0,orderType:h,message:"Not available for pre-order on selected date",warning:null,actualCheckingDate:l};const I=y.find($=>$.foodItemId===s.id);if(!I)return{isAvailable:!1,maxAvailable:0,orderType:h,message:"This item is not available for pre-order on selected date",warning:null,actualCheckingDate:l};if(I.isLimitedOrder===!1){const $=I.numOfAvailableItems||0;return{isAvailable:$>0,maxAvailable:Math.min($,c),orderType:h,message:$<=0?"Sold Out":null,warning:$<5&&$>0?`Only ${$} left`:null,actualCheckingDate:l}}else return{isAvailable:!0,maxAvailable:c,orderType:h,message:null,warning:null,actualCheckingDate:l}}return{isAvailable:!1,maxAvailable:0,orderType:"GO_GRAB",message:"Sold Out",warning:null,actualCheckingDate:null}},[]),i=m.useCallback((s,o=null)=>!s||!t||t.length===0?0:t.filter(d=>{const p=String(d.foodId)===String(s),u=d.orderType==="GO_GRAB"||d.orderType==="Go&Grab"||d.orderType==="Go & Grab"||!d.orderType;let g;return u?g=!0:o?g=d.selectedDate===o:g=!d.selectedDate,p&&g}).reduce((d,p)=>d+(p.quantity||1),0),[t]),r=m.useCallback(({food:s,kitchen:o,newQuantity:l,selectedDate:c=null,selectedTime:d=null,specialInstructions:p=""})=>{try{const g=n(s,o,c).orderType,f=g==="GO_GRAB",h=t.find(x=>{const y=String(x.foodId)===String(s.id),I=x.orderType==="GO_GRAB"||x.orderType==="Go&Grab"||x.orderType==="Go & Grab"||!x.orderType;let $;f&&I?$=!0:!f&&!I?$=x.selectedDate===c:$=!1;const M=(x.specialInstructions||"")===(p||"");return y&&(f?I:!I)&&$&&M});if(l===0){h&&e(Tf(h.id));return}if(h){const x={cartItemId:h.id,quantity:l,specialInstructions:p};f?(x.selectedDate=c,x.selectedTime=d,x.orderType="GO_GRAB"):(x.selectedDate=c,x.selectedTime=d,x.orderType="PRE_ORDER"),e(Ii(x))}else{const x={foodId:s.id,food:{id:s.id,name:s.name,cost:s.cost,imageUrl:s.imageUrl,description:s.description},kitchen:{id:o.id,name:o.name},kitchenId:o.id,quantity:l,selectedDate:c,selectedTime:d,specialInstructions:p,isPreOrder:g==="PRE_ORDER",orderType:g};e(Qs(x))}}catch(u){console.error("❌ Error updating cart:",u),ge.error("Failed to update cart")}},[e,t,n]);return{cartItems:t,getCartQuantity:i,handleQuantityChange:r,calculateAvailability:n}},$t=({food:e=null,kitchen:t=null,selectedDate:n=null,initialQuantity:i=1,maxQuantity:r=99,minQuantity:s=1,onQuantityChange:o=()=>{},onAvailabilityChange:l=()=>{},onError:c=()=>{},onWarning:d=()=>{},showAvailabilityInfo:p=!0,showErrorMessages:u=!0,size:g="medium",className:f="",disabled:h=!1})=>{const{calculateAvailability:x,getCartQuantity:y,handleQuantityChange:I}=Ht(),[$,M]=m.useState(!1),[v,S]=m.useState({title:"",body:""}),w=m.useMemo(()=>e!=null&&e.id?y(e.id,n):0,[e==null?void 0:e.id,n,y]),R=m.useMemo(()=>x(e,t,n,r),[x,e,t,n,r]),q=m.useCallback(N=>{if(N<0){c("Quantity cannot be negative");return}if(N>R.maxAvailable){R.maxAvailable===0?alert("♡ this food to the chef that we want it! When it is added to Go&Grab or Pre-Order, you will be notified."):alert(`Currently only ${R.maxAvailable} items are available.`),c(`Maximum available quantity is ${R.maxAvailable}`);return}if(!e||!t){console.log("🔥 Missing food or kitchen data"),c("Missing food or kitchen information");return}console.log("🔥 Calling useGenericCart handleQuantityChange:",{newQuantity:N,currentCartQuantity:w,selectedDate:n}),I({food:e,kitchen:t,newQuantity:N,currentQuantity:w,selectedDate:n,selectedTime:null,specialInstructions:"",isPreOrder:R.orderType==="PRE_ORDER"})},[w,R.maxAvailable,R.orderType,c,e,t,n,I]);m.useEffect(()=>{l(R),R.warning&&d(R.warning),R.message&&R.isAvailable},[R,l,d,c]);const b=m.useCallback(()=>{if(console.log("🔥 INCREMENT CLICKED!",{disabled:h,isAvailable:R.isAvailable,currentCartQuantity:w,maxAvailable:R.maxAvailable}),h||!R.isAvailable){alert("♡ this food to the chef that we want it! When it is added to Go&Grab or Pre-Order, you will be notified."),console.log("🔥 INCREMENT BLOCKED: Item not available");return}const N=w+1;if(N>R.maxAvailable){console.log("🔥 INCREMENT BLOCKED: At maximum quantity"),R.maxAvailable===0?alert("♡ this food to the chef that we want it! When it is added to Go&Grab or Pre-Order, you will be notified."):alert(`Currently only ${R.maxAvailable} items are available.`);return}console.log("🔥 INCREMENT: Calling handleQuantityChange with:",N),q(N)},[h,R.isAvailable,R.maxAvailable,w,q]),L=m.useCallback(()=>{if(console.log("🔥 DECREMENT CLICKED!",{disabled:h,currentCartQuantity:w,minQuantity:s}),h){console.log("🔥 DECREMENT BLOCKED: Component disabled");return}const N=w-1;if(N<0){console.log("🔥 DECREMENT BLOCKED: Cannot go below 0");return}console.log("🔥 DECREMENT: Calling handleQuantityChange with:",N),q(N)},[h,w,q,s]),j=["quantity-selector",`quantity-selector--${g}`,f,h&&"quantity-selector--disabled",!R.isAvailable&&"quantity-selector--unavailable"].filter(Boolean).join(" ");return a.jsxs("div",{className:j,children:[$&&a.jsx("div",{className:"modal-overlay",onClick:()=>M(!1),children:a.jsxs("div",{className:"modal-content",onClick:N=>N.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{children:v.title}),a.jsx("button",{className:"modal-close",onClick:()=>M(!1),children:"×"})]}),a.jsxs("div",{className:"modal-body",children:[a.jsx("p",{children:v.body}),a.jsx("button",{onClick:()=>M(!1),children:"OK"})]})]})}),a.jsxs("div",{className:"quantity-selector__controls",children:[a.jsx("div",{className:"quantity-selector__display",children:a.jsx("span",{className:"quantity-number",children:w})}),a.jsxs("div",{className:"quantity-selector__buttons",children:[a.jsx("button",{type:"button",className:"quantity-btn quantity-btn--decrement",onClick:L,disabled:h||w<=0,"aria-label":"Decrease quantity",children:a.jsx("svg",{width:"13",height:"2",viewBox:"0 0 13 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("rect",{x:"0.887695",width:"11.6854",height:"1.46067",fill:"currentColor"})})}),a.jsx("button",{type:"button",className:"quantity-btn quantity-btn--increment",onClick:b,"aria-label":"Increase quantity",children:a.jsxs("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M0.707673 5.27007H12.3931V6.73075H0.707673V5.27007Z",fill:"currentColor"}),a.jsx("path",{d:"M7.28071 0.157715L7.28071 11.8431H5.82003L5.82003 0.157715L7.28071 0.157715Z",fill:"currentColor"})]})})]})]})]})};function so({isLoading:e=!0,text:t="Loading...",overlay:n=!0,size:i="medium"}){if(!e)return null;const r={small:"spinner-sm",medium:"spinner-md",large:"spinner-lg"},s=()=>a.jsx("div",{className:`mobile-loader-content ${n?"overlay":"inline"}`,children:a.jsxs("div",{className:"loader-spinner-wrapper",children:[a.jsxs("div",{className:`custom-spinner ${r[i]}`,children:[a.jsx("div",{className:"spinner-ring"}),a.jsx("div",{className:"spinner-ring"}),a.jsx("div",{className:"spinner-ring"})]}),t&&a.jsx("p",{className:"loader-text",children:t})]})});return n?a.jsx("div",{className:"mobile-loader-overlay",children:a.jsx(s,{})}):a.jsx(s,{})}const jn=({food:e,kitchen:t,orderType:n="GO_GRAB",selectedDate:i=null,selectedTime:r=null,onDateChange:s=()=>{},onTimeChange:o=()=>{},disabled:l=!1,showTimeFirst:c=!1,className:d="",dateLabel:p="Pick up date:",timeLabel:u="Pick up time:",style:g={}})=>{var U,G;const[f,h]=m.useState(i),[x,y]=m.useState(r),[I,$]=m.useState(!1),M=m.useRef(null),v=m.useRef(i),S=m.useRef(r),w=m.useRef(n),R=m.useRef(e==null?void 0:e.id),q=m.useRef(t==null?void 0:t.id),b=m.useRef(!1),L=m.useRef(!1),j=m.useMemo(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]),N=m.useMemo(()=>{const F=J().startOf("day");if(n==="GO_GRAB"){const z=[];for(let H=0;H<30;H++){const V=F.add(H,"day"),ee=V.format("YYYY-MM-DD");let Z;H===0?Z=`${V.format("MMM D, YYYY")} (Today)`:H===1?Z=`${V.format("MMM D, YYYY")} (Tomorrow)`:Z=`${V.format("dddd")}, ${V.format("MMM D, YYYY")}`,z.push({date:ee,display:Z,dayjs:V,isToday:H===0,isAvailable:!0})}return z}else if(n==="PRE_ORDER"){if(!i)return console.log("🚫 DateTimePicker - No selectedDate provided for PRE_ORDER"),[];const z=J(i),H=z.isSame(F,"day"),V=z.isSame(F.add(1,"day"),"day");let ee;return H?ee=`${z.format("MMM D, YYYY")} (Today)`:V?ee=`${z.format("MMM D, YYYY")} (Tomorrow)`:ee=`${z.format("dddd")}, ${z.format("MMM D, YYYY")}`,[{date:i,display:ee,dayjs:z,isToday:H,isAvailable:!0}]}return[]},[n,i,e==null?void 0:e.id]),A=m.useMemo(()=>{var F;if(!f)return[];if(n==="GO_GRAB"){const z=J(),H=J(f),V=9,ee=21,Z=[];let te;if(H.isSame(z,"day")){te=z.add(30,"minutes");const W=te.minute(),Q=Math.ceil(W/15)*15;te=te.minute(Q).second(0),te.minute()===60&&(te=te.add(1,"hour").minute(0))}else te=H.hour(V).minute(0).second(0);let ae=te;for(;ae.hour()<ee||ae.hour()===ee&&ae.minute()===0;)Z.push({value:ae.format("h:mm A"),display:ae.format("h:mm A"),dayjs:ae,isAvailable:!0}),ae=ae.add(15,"minutes");return Z}else if(n==="PRE_ORDER"){if(!i||!((F=t==null?void 0:t.preorderSchedule)!=null&&F.dates))return[];let z;try{z=J(i).format("YYYY-MM-DD")}catch(Z){return console.error("Error parsing selectedDate:",i,Z),[]}if(!t.preorderSchedule.dates[z])return[];const V=t.preorderSchedule.dates[z].filter(Z=>Z.foodItemId===(e==null?void 0:e.id));if(V.length===0)return[];const ee=[];return V.forEach(Z=>{Z.availableTimes&&Array.isArray(Z.availableTimes)&&Z.availableTimes.forEach(te=>{const ae=J(`2000-01-01 ${te}`,"YYYY-MM-DD h:mm A");for(let W=-30;W<=30;W+=15){const Q=ae.add(W,"minutes"),D=Q.format("h:mm A"),K=Q.hour();K>=8&&K<=22&&!ee.find(E=>E.value===D)&&ee.push({value:D,display:D+(W===0?" (Recommended)":""),isAvailable:!0,scheduleItem:Z,isRecommended:W===0,originalTime:te})}})}),ee.sort((Z,te)=>{const ae=J(`2000-01-01 ${Z.value}`,"YYYY-MM-DD h:mm A"),W=J(`2000-01-01 ${te.value}`,"YYYY-MM-DD h:mm A");return ae.diff(W)})}return[]},[f,n,i,t,e]),_=m.useCallback(F=>{const z=J(F),H=J().startOf("day");if(console.log("📱 Date change:",{selectedDate:F,isBeforeToday:z.isBefore(H),orderType:n,isMobile:j}),n==="GO_GRAB"&&z.isBefore(H)){alert("Please select today or a future date for pickup.");const V=H.format("YYYY-MM-DD");h(V),s(V);return}if(n==="PRE_ORDER"&&F!==i){alert("For pre-orders, the pickup date cannot be changed."),h(i);return}h(F),y(null),L.current=!1,s(F),o(null)},[n,i,s,o,j]),k=m.useCallback(F=>{y(F),o(F)},[o]),C=()=>I?a.jsx("div",{className:"mobile-date-picker-overlay",onClick:()=>$(!1),children:a.jsxs("div",{className:"mobile-date-picker-content",onClick:F=>F.stopPropagation(),children:[a.jsxs("div",{className:"mobile-date-picker-header",children:[a.jsx("button",{onClick:()=>$(!1),children:"Cancel"}),a.jsx("h3",{children:"Select Date"}),a.jsx("button",{onClick:()=>$(!1),children:"Done"})]}),a.jsx("div",{className:"mobile-date-grid",children:N.map(F=>a.jsxs("button",{className:`mobile-date-option ${f===F.date?"selected":""} ${F.isToday?"today":""}`,onClick:()=>{_(F.date),$(!1)},disabled:!F.isAvailable,children:[a.jsx("div",{className:"mobile-date-day",children:F.dayjs.format("D")}),a.jsx("div",{className:"mobile-date-month",children:F.dayjs.format("MMM")}),a.jsx("div",{className:"mobile-date-weekday",children:F.dayjs.format("ddd")})]},F.date))})]})}):null;if(m.useEffect(()=>{const F=n!==w.current||(e==null?void 0:e.id)!==R.current||(t==null?void 0:t.id)!==q.current;if(F&&(console.log("🔄 Key props changed, resetting component"),b.current=!1,L.current=!1,h(null),y(null)),(i!==v.current||F)&&i!==f&&(console.log("🔄 Syncing selectedDate:",i),h(i)),(r!==S.current||F)&&r!==x&&(console.log("🔄 Syncing selectedTime:",r),y(r)),n==="GO_GRAB"&&!b.current&&!f&&N.length>0){const z=N[0].date;h(z),s(z),b.current=!0}if(!L.current&&f&&!x&&A.length>0){const z=A[0].value;console.log("🔄 Auto-selecting time:",z),y(z),o(z),L.current=!0}v.current=i,S.current=r,w.current=n,R.current=e==null?void 0:e.id,q.current=t==null?void 0:t.id},[i,r,n,e==null?void 0:e.id,t==null?void 0:t.id,f,x,N,A,s,o]),l)return a.jsxs("div",{className:`date-time-picker disabled ${d}`,style:g,children:[a.jsxs("div",{className:"picker-field",children:[a.jsx("label",{className:"picker-label",children:p}),a.jsx("div",{className:"picker-value disabled",children:"Not available"})]}),a.jsxs("div",{className:"picker-field",children:[a.jsx("label",{className:"picker-label",children:u}),a.jsx("div",{className:"picker-value disabled",children:"Not available"})]})]});if(N.length===0)return a.jsx("div",{className:`${d}`,style:g});const P=c?{}:{"data-first":!0},T=c?{"data-first":!0}:{};return a.jsxs("div",{className:`date-time-picker ${d}`,style:g,"data-order-type":n,"data-mobile":j,children:[a.jsxs("div",{className:"picker-field",...P,children:[a.jsx("label",{className:"picker-label",children:p}),a.jsx("div",{className:"date-input-wrapper",children:j&&n==="GO_GRAB"?a.jsxs("div",{className:"picker-select date-select mobile-date-trigger",onClick:()=>$(!0),style:{paddingRight:"18px"},children:[a.jsx("span",{className:"",children:f?((U=N.find(F=>F.date===f))==null?void 0:U.display)||J(f).format("MMM D, YYYY"):"Select date"}),a.jsx("svg",{className:"picker-arrow",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:a.jsx("path",{d:"M1 1L6 6L11 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}):a.jsxs(a.Fragment,{children:[a.jsx("input",{type:"date",ref:M,className:"picker-select date-select date-input",value:f||"",onChange:F=>_(F.target.value),disabled:l||N.length===0,min:n==="PRE_ORDER"&&i?i:J().format("YYYY-MM-DD"),max:n==="PRE_ORDER"&&i?i:N.length>0?N[N.length-1].date:J().add(7,"day").format("YYYY-MM-DD"),readOnly:n==="PRE_ORDER"}),a.jsx("div",{className:"date-display-text",onClick:()=>{var F,z,H;!l&&n!=="PRE_ORDER"&&((F=M.current)==null||F.focus(),(H=(z=M.current)==null?void 0:z.showPicker)==null||H.call(z))},children:f?((G=N.find(F=>F.date===f))==null?void 0:G.display)||J(f).format("MMM D, YYYY"):n==="PRE_ORDER"?"Date pre-selected":"Select date"}),a.jsx("svg",{className:"picker-arrow",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:{opacity:n==="PRE_ORDER"?.5:1},onClick:()=>{var F,z,H;!l&&n!=="PRE_ORDER"&&((F=M.current)==null||F.focus(),(H=(z=M.current)==null?void 0:z.showPicker)==null||H.call(z))},children:a.jsx("path",{d:"M1 1L6 6L11 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),a.jsxs("div",{className:"picker-field",...T,children:[a.jsx("label",{className:"picker-label",children:u}),a.jsxs("select",{className:"picker-select time-select",value:x||"",onChange:F=>k(F.target.value),children:[a.jsx("option",{value:"",disabled:!0,children:"Select time"}),A.map(F=>a.jsx("option",{value:F.value,disabled:!F.isAvailable,"data-recommended":F.isRecommended||!1,children:F.display},F.value))]})]}),a.jsx(C,{})]})};function Qr(){const e=zt(),t=Bt(),{kitchenId:n}=Lo(),i=()=>{var j,N,A,_;if((N=(j=t.state)==null?void 0:j.from)!=null&&N.fullUrl){console.log("Going back to FoodDetailPage with params:",t.state.from.fullUrl),e(t.state.from.fullUrl);return}if((_=(A=t.state)==null?void 0:A.from)!=null&&_.pathname){console.log("Going back to:",t.state.from.pathname+(t.state.from.search||"")),e(t.state.from.pathname+(t.state.from.search||""));return}try{e(-1)}catch(k){e("/")}},{cartItems:r,getCartQuantity:s,handleQuantityChange:o}=Ht(),[l,c]=m.useState({}),[d,p]=m.useState({}),{allFoods:u}=sm(10),g=n||(u.length>0?u[0].kitchenId:null),{kitchen:f,foods:h,loading:x,error:y}=ao(g);m.useEffect(()=>{f&&h.length>0&&console.log("[ListingPage] Kitchen data loaded successfully")},[f,h]);const I=()=>{var C;if(!((C=f==null?void 0:f.preorderSchedule)!=null&&C.dates))return[];const j=J(),N=j.format("YYYY-MM-DD"),A=[];for(let P=1;P<=2;P++){const U=j.add(P,"day").format("YYYY-MM-DD");A.push(U)}return A.filter(P=>f.preorderSchedule.dates[P]&&P!==N).map(P=>{const U=J(P).format("ddd, MMM D");return{dateString:P,displayDate:U}})},{goGrabItems:$,preOrderItems:M}=m.useMemo(()=>{var _;if(!h.length)return{goGrabItems:[],preOrderItems:[]};const j=h.filter(k=>k.kitchenId===g),N=j.filter(k=>{var P;return(((P=k.availability)==null?void 0:P.numAvailable)||k.numAvailable||0)>0});let A=[];if((_=f==null?void 0:f.preorderSchedule)!=null&&_.dates){const k=f.preorderSchedule.dates,C=new Set;Object.values(k).flat().forEach(P=>{C.add(P.foodItemId)}),A=j.filter(P=>C.has(P.id))}return{goGrabItems:N,preOrderItems:A}},[h,f,g]),v=m.useCallback((j,N,A=!1)=>{const _=A?`${j}_preorder`:j;c(k=>({...k,[_]:N}))},[]),S=m.useCallback((j,N,A=!1)=>{const _=A?`${j}_preorder`:j;p(k=>({...k,[_]:N}))},[]),w=j=>{var A,_;return(_=(A=f==null?void 0:f.preorderSchedule)==null?void 0:A.dates)!=null&&_[j]?f.preorderSchedule.dates[j].map(k=>{const C=M.find(P=>P.id===k.foodItemId);return C?{...C,scheduleItem:k}:null}).filter(Boolean):[]},R=I(),q=m.useMemo(()=>{const j=new Map;return h&&h.length>0&&h.forEach(N=>{j.set(`${N.id}`,s(N.id)),R.length>0&&R.forEach(A=>{j.set(`${N.id}-${A.dateString}`,s(N.id,A.dateString))})}),j},[h.length,r.length,R.length]),b=m.useCallback((j,N=null)=>{const A=N?`${j}-${N}`:`${j}`;return q.get(A)||0},[q]),L=!x&&f&&h.length>0;return y?a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsx("div",{className:"padding-20",children:a.jsxs("div",{className:"text-center py-5 text-danger",children:["Error: ",y]})})})}):x||!L?a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsx(so,{isLoading:!0,text:"Loading menu items...",overlay:!0,size:"medium"})})}):a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsxs("div",{className:"padding-20",children:[a.jsxs("div",{className:"back-link-title",children:[a.jsx("button",{className:"back-link",onClick:i,style:{border:"none",background:"none",cursor:"pointer"},children:a.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),a.jsx("div",{className:"title",children:"More offers from HomeFresh"})]}),a.jsx("h2",{className:"small-title mb-2",children:(f==null?void 0:f.name)||"Coco&apos;s Kitchen"}),$.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"small-title mb-20",children:"Grab & Go"}),a.jsx("div",{className:"menu-listing",children:$.map(j=>{const N=b(j.id);return a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:j.imageUrl||"/src/assets/images/product.png",alt:j.name,onError:A=>{A.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:j.name}),a.jsx("div",{className:"text",children:j.description||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",j.cost]})]})]}),a.jsxs("div",{className:"quantity-warpper",children:[a.jsx("div",{className:"right mb-1",children:a.jsx($t,{food:j,kitchen:f,selectedDate:null,size:"small",initialQuantity:N,minQuantity:0,onQuantityChange:A=>{try{const _=b(j.id),k=l[j.id],C=d[j.id],P=k?J(k).isSame(J(),"day"):!0;o({food:j,kitchen:f,newQuantity:A,currentQuantity:_,selectedDate:k,selectedTime:C,specialInstructions:"",isPreOrder:!P})}catch(_){console.error("Error updating quantity:",_),ge.error("Failed to update cart")}}})}),a.jsx("div",{className:"pickup-time-section",children:a.jsx(jn,{food:j,kitchen:f,orderType:"GO_GRAB",selectedDate:l[j.id],selectedTime:d[j.id],onDateChange:A=>v(j.id,A,!1),onTimeChange:A=>S(j.id,A,!1),disabled:!j||!f,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},j.id)})})]}),R.map(j=>{const N=w(j.dateString);return N.length===0?null:a.jsxs("div",{children:[a.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",j.displayDate]}),a.jsx("div",{className:"menu-listing",children:N.map(A=>{const _=b(A.id,j.dateString);return a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:A.imageUrl||"/src/assets/images/product.png",alt:A.name,onError:k=>{k.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:A.name}),a.jsx("div",{className:"text",children:A.description||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",A.cost]})]})]}),a.jsxs("div",{className:"quantity-warpper",children:[a.jsx("div",{className:"right mb-1",children:a.jsx($t,{food:A,kitchen:f,selectedDate:j.dateString,size:"small",initialQuantity:_,minQuantity:0,onQuantityChange:k=>{try{const C=b(A.id,j.dateString),P=d[`${A.id}_preorder`];console.log("🛒 ListingPage Pre-Order quantity change:",{foodId:A.id,date:j.dateString,newQuantity:k,currentQty:C}),o({food:A,kitchen:f,newQuantity:k,currentQuantity:C,selectedDate:j.dateString,selectedTime:P,specialInstructions:"",isPreOrder:!0})}catch(C){console.error("Error updating pre-order quantity:",C),ge.error("Failed to update cart")}}})}),a.jsx("div",{className:"pickup-time-section",children:a.jsx(jn,{food:A,kitchen:f,orderType:"PRE_ORDER",selectedDate:l[`${A.id}_preorder`]||j.dateString,selectedTime:d[`${A.id}_preorder`],onDateChange:k=>v(A.id,k,!0),onTimeChange:k=>S(A.id,k,!0),disabled:!A||!f,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},`${A.id}-${j.dateString}`)})})]},j.dateString)}),a.jsx("button",{className:"action-button mb-16",onClick:()=>{r.length===0?alert("Oops! Your cart is empty. Add something delicious to get started."):e("/order")},children:"Continue to View Cart"}),a.jsxs("div",{className:"scanner-bottom mb-16",children:[a.jsx("div",{className:"text",children:"Full menus from your local home kitchens can be found in the HomeFresh app, available in the iOS App Store."}),a.jsx("div",{className:"qr",children:a.jsx("img",{src:io,alt:"QR Code"})})]})]})})})}const om=()=>{const e=Xe(),t=zt();return{logout:m.useCallback(async()=>{try{const i=ge.loading("Logging out...");await e(eo()).unwrap(),ge.success("Successfully logged out!"),t("/login",{replace:!0})}catch(i){console.error("❌ Logout failed:",i),ge.error("Logout failed, but redirecting anyway"),t("/login",{replace:!0})}},[e,t])}},lm=()=>(m.useEffect(()=>{const e={currentUrl:window.location.href,hostname:window.location.hostname,origin:window.location.origin,userAgent:navigator.userAgent,isWeChatBrowser:/micromessenger/i.test(navigator.userAgent),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),timestamp:new Date().toISOString()};console.log("🔍 WeChat Debug Info:",e),localStorage.setItem("wechat_debug_info",JSON.stringify(e,null,2))},[]),null);function cm(){const[e,t]=m.useState(new Date),[n,i]=m.useState(""),r="Enjoy delicious meal from your favorite chef.";console.log("Deployed Version 21");const{user:s,isAuthenticated:o}=_e(u=>u.auth),{items:l,totalItems:c}=_e(u=>u.cart),{logout:d}=om();m.useEffect(()=>{const u=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(u)},[]),m.useEffect(()=>{let u=0;const g=setInterval(()=>{u<r.length?(i(r.slice(0,u+1)),u++):clearInterval(g)},50);return()=>clearInterval(g)},[]);const p=u=>u.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"});return a.jsxs("div",{className:"landing-page",children:[a.jsxs("div",{className:"background-animation",children:[a.jsx("div",{className:"floating-food food-1",children:"🥘"}),a.jsx("div",{className:"floating-food food-2",children:"🍜"}),a.jsx("div",{className:"floating-food food-3",children:"🥗"}),a.jsx("div",{className:"floating-food food-4",children:"🍲"}),a.jsx("div",{className:"floating-food food-5",children:"🥙"}),a.jsx("div",{className:"floating-food food-6",children:"🍱"})]}),a.jsxs("div",{className:"landing-content",children:[a.jsxs("div",{className:"logo-section",children:[a.jsx("div",{className:"logo-circle",children:a.jsx("span",{className:"logo-icon",children:"🏠"})}),a.jsxs("h1",{className:"brand-name",children:["Home",a.jsx("span",{className:"accent-text",children:"Fresh"})]})]}),a.jsxs("div",{className:"coming-soon-section",children:[a.jsxs("h2",{className:"coming-soon-title",children:["Welcome to ",a.jsx("span",{className:"gradient-text",children:"HomeFresh!"})]}),a.jsxs("p",{className:"subtitle",children:[n,a.jsx("span",{className:"cursor",children:"|"})]}),a.jsxs("div",{className:"feature-grid",children:[a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:"👨‍🍳"}),a.jsx("h3",{children:"Home Chefs"}),a.jsx("p",{children:"Local talented chefs cooking with love"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:"🚀"}),a.jsx("h3",{children:"Fresh Experience"}),a.jsx("p",{children:"Fast and reliable taste you can trust"})]}),a.jsxs("div",{className:"feature-card",children:[a.jsx("div",{className:"feature-icon",children:"💝"}),a.jsx("h3",{children:"Made with Love"}),a.jsx("p",{children:"Every meal crafted with care and passion"})]})]}),a.jsxs("div",{className:"live-clock",children:[a.jsx("span",{className:"clock-icon",children:"⏰"}),a.jsx("span",{className:"time-display",children:p(e)})]}),a.jsxs("div",{className:"cta-section",children:[a.jsx("p",{className:"launch-text",children:"We're putting the finishing touches on something special!"}),a.jsxs(Ot,{to:"/foods",className:"explore-btn",children:[a.jsx("span",{children:"Explore Preview"}),a.jsx("div",{className:"btn-arrow",children:"→"})]})]}),a.jsxs("div",{className:"progress-container",children:[a.jsx("div",{className:"progress-label",children:"Launch Progress"}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"progress-fill"})}),a.jsx("div",{className:"progress-text",children:"95% Complete"})]})]}),a.jsxs("footer",{className:"landing-footer",children:[a.jsx("p",{children:"Get ready for a culinary revolution 🌟"}),a.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,0,0,0.1)",borderRadius:"8px",fontSize:"12px"},children:[a.jsx("h4",{children:"🔧 Debug Panel (Persistence Test)"}),a.jsxs("p",{children:[a.jsx("strong",{children:"User:"})," ",o?(s==null?void 0:s.name)||"Authenticated":"Not logged in"]}),a.jsxs("p",{children:[a.jsx("strong",{children:"Cart Items:"})," ",c," items"]}),a.jsxs("div",{style:{marginTop:"10px"},children:[a.jsx("button",{onClick:d,style:{padding:"8px 16px",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"🚪 Test Logout (Clear All Data)"}),a.jsx(Ot,{to:"/foods",style:{padding:"8px 16px",backgroundColor:"#44ff44",color:"white",textDecoration:"none",borderRadius:"4px"},children:"🛒 Go to Foods (Test Cart)"})]})]})]})]}),a.jsx(lm,{})]})}const mn="/assets/product-BvDHopBm.png",dm="/assets/user1-DLLHbfvd.svg",um=(e,t)=>{const n=Xe(),[i,r]=m.useState(!1),{user:s}=_e(W=>W.auth),{currentFood:o,currentKitchen:l,currentReviews:c,currentReviewStats:d,currentLikes:p,loading:u,error:g,likedFoods:f}=_e(W=>W.food),{kitchenStats:h,kitchenReviews:x,statsLoading:y,reviewsLoading:I}=_e(W=>W.kitchen),{foodReviews:$,foodReviewsLoading:M,submissionLoading:v}=_e(W=>W.reviews),{items:S,loading:w}=_e(W=>W.cart),R=h[t],q=x[t],b=$[e],L=M[e],j=y[t],N=I[t],A=f.includes(e),_=S.filter(W=>W.foodId===e&&W.kitchenId===t).reduce((W,Q)=>W+Q.quantity,0),k=m.useCallback(W=>S.find(Q=>Q.foodId===e&&Q.kitchenId===t&&Q.selectedDate===W.selectedDate&&Q.specialInstructions===(W.specialInstructions||"")),[S,e,t]),C=m.useCallback(()=>{e&&t&&n(At({foodId:e,kitchenId:t}))},[n,e,t]),P=m.useCallback(()=>{t&&!R&&!j&&n(dn(t))},[n,t,R,j]),T=m.useCallback(()=>{t&&!q&&!N&&n(un({kitchenId:t,limit:10}))},[n,t,q,N]),U=m.useCallback(()=>{e&&!b&&!L&&n(pn({foodId:e,kitchenId:t,limit:10}))},[n,e,t,b,L]),G=m.useCallback(()=>{if(!t){console.warn("Kitchen ID is required to like food");return}if(!i){console.warn("Like status not yet checked, preventing toggle");return}console.log("🔍 Toggle like called:",{foodId:e,kitchenId:t,userId:s==null?void 0:s.id,currentlyLiked:A,likedFoodsArray:f,likeStatusChecked:i}),n(Ei(e))},[n,e,t,A,f,s==null?void 0:s.id,i]),F=m.useCallback((W=null,Q=null)=>{const D=J();if(W){const K=J(W),E=Q||"6:30 PM",X=K.isSame(D,"day")?"Go&Grab":"Pre-Order";return{date:K.format("YYYY-MM-DD"),time:E,display:`${K.format("MMM DD, YYYY")} at ${E}`,orderType:X}}else{const K=Q||D.add(30,"minutes").format("h:mm A");return{date:D.format("YYYY-MM-DD"),time:K,display:`Today at ${K}`,orderType:"Go&Grab"}}},[]),z=m.useCallback(W=>{const Q=k(W);if(Q)return console.log("Item already exists, updating quantity:",Q.quantity,"to",W.quantity),n(Ii({cartItemId:Q.id,quantity:W.quantity,specialInstructions:W.specialInstructions})),{success:!0,message:"Cart item quantity updated successfully",existingQuantity:Q.quantity,newQuantity:W.quantity};const D=F(W.selectedDate,W.selectedTime),K={foodId:e,kitchenId:t,quantity:W.quantity,orderType:W.orderType,selectedDate:W.selectedDate,selectedTime:W.selectedTime,specialInstructions:W.specialInstructions||"",pickupDetails:D,isPreOrder:W.selectedDate&&!J(W.selectedDate).isSame(J(),"day"),food:o?{id:o.id,name:o.name,cost:o.cost,price:o.price||o.cost,imageUrl:o.imageUrl,image:o.image||o.imageUrl,description:o.description,category:o.category,isAvailable:o.isAvailable,kitchenName:o.kitchenName,maxQuantity:o.maxQuantity,totalQuantity:o.totalQuantity,availableQuantity:o.availableQuantity,isPreOrder:o.isPreOrder,...o}:null,kitchen:l?{id:l.id,name:l.name,address:l.address,rating:l.rating,ratingCount:l.ratingCount,...l}:null};return console.log("Adding new item to cart:",K),n(Qs(K)),{success:!0,message:"Item added to cart successfully"}},[n,e,t,k,o,l,F]),H=m.useCallback(W=>{const Q=S.find(D=>D.foodId===e&&D.kitchenId===t);Q&&(console.log("Updating cart item quantity:",{cartItemId:Q.id,quantity:W}),n(Ii({cartItemId:Q.id,quantity:W})))},[n,e,t,S]),V=m.useCallback(W=>n(fn({foodId:e,kitchenId:t,reviewData:W})),[n,e,t]),ee=m.useCallback(()=>{n(Of())},[n]);return m.useEffect(()=>(C(),P(),U(),()=>{}),[C,P,U]),m.useEffect(()=>{e&&t&&o&&(console.log("🔍 Checking like status for food:",{foodId:e,kitchenId:t,userId:s==null?void 0:s.id}),n(Hs({foodId:e,kitchenId:t})).then(W=>{console.log("✅ Like status checked:",W),r(!0)}))},[n,e,t,o,s==null?void 0:s.id]),{food:o,kitchen:l,reviews:c||[],reviewStats:d||R,kitchenStats:R,likes:p,isLiked:A,cartQuantity:_,loading:u||j,reviewsLoading:L,kitchenStatsLoading:j,kitchenReviewsLoading:N,reviewSubmissionLoading:v,cartLoading:w,error:g,user:s,toggleLike:G,addToCartAction:z,updateCartItemQuantity:H,addReview:V,loadFoodDetail:C,loadKitchenStats:P,loadKitchenReviews:T,loadFoodReviews:U,clearData:ee}},Vr=({src:e,alt:t,fallbackSrc:n=mn,className:i=""})=>{const[r,s]=m.useState(null),[o,l]=m.useState(),[c,d]=m.useState(!1),[p,u]=m.useState(!1),g=m.useRef(),f=m.useCallback(y=>{g.current&&g.current.disconnect(),g.current=new IntersectionObserver(I=>{I.forEach($=>{$.isIntersecting&&(s(e),g.current.disconnect())})},{threshold:.1,rootMargin:"50px"}),y&&g.current.observe(y),l(y)},[e]),h=()=>{d(!0)},x=()=>{u(!0),s(n),d(!0)};return a.jsxs("div",{className:"lazy-image-container",style:{position:"relative"},children:[!c&&a.jsx("div",{className:"image-placeholder",children:a.jsx("div",{className:"image-skeleton"})}),a.jsx("img",{ref:f,src:r||n,alt:t,className:`${i} ${c?"loaded":"loading"}`,onLoad:h,onError:x,loading:"lazy",style:{opacity:c?1:0,transition:"opacity 0.3s ease-in-out"}}),p&&a.jsx("div",{className:"image-error-indicator",children:a.jsx("small",{children:"Using fallback image"})})]})},Zr=({rating:e=0,maxStars:t=5,size:n="small",showRating:i=!1,reviewCount:r=null,className:s=""})=>{const o=Math.max(0,Math.min(e,t)),l={small:{width:12,height:12,gap:"2px"},medium:{width:16,height:17,gap:"3px"},large:{width:20,height:21,gap:"4px"}},{width:c,height:d,gap:p}=l[n]||l.small,u=()=>{const g=[];for(let f=1;f<=t;f++){const h=Math.max(0,Math.min(1,o-(f-1)));g.push(a.jsxs("div",{className:"star-container",style:{position:"relative"},children:[a.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"star-empty",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8542 1.20117C5.80112 1.20117 5.67045 1.21576 5.60103 1.35459L4.53587 3.48434C4.36728 3.82092 4.04237 4.05484 3.6667 4.10851L1.28203 4.45209C1.12453 4.47484 1.07087 4.59151 1.05453 4.6405C1.03995 4.68776 1.01662 4.80792 1.12512 4.91176L2.84945 6.56842C3.1242 6.83267 3.24903 7.21359 3.1837 7.58634L2.7777 9.9255C2.75262 10.0719 2.8442 10.1571 2.88503 10.1863C2.9282 10.2189 3.0437 10.2837 3.18662 10.209L5.3187 9.10359C5.6547 8.93034 6.05487 8.93034 6.3897 9.10359L8.5212 10.2084C8.6647 10.2825 8.7802 10.2178 8.82395 10.1863C8.86478 10.1571 8.95637 10.0719 8.93128 9.9255L8.52412 7.58634C8.45878 7.21359 8.58362 6.83267 8.85837 6.56842L10.5827 4.91176C10.6918 4.80792 10.6684 4.68717 10.6533 4.6405C10.6375 4.59151 10.5839 4.47484 10.4264 4.45209L8.0417 4.10851C7.66662 4.05484 7.3417 3.82092 7.17312 3.48376L6.10678 1.35459C6.03795 1.21576 5.90728 1.20117 5.8542 1.20117Z",fill:"#E5E7EB",stroke:"#E5E7EB",strokeWidth:"0.2"})}),h>0&&a.jsx("div",{className:"star-filled",style:{position:"absolute",top:0,left:0,width:`${h*100}%`,overflow:"hidden"},children:a.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.45251 6.92967C9.30143 7.07609 9.23201 7.28784 9.26643 7.4955L9.78502 10.3655C9.82876 10.6088 9.7261 10.8549 9.52251 10.9955C9.32301 11.1413 9.0576 11.1588 8.84001 11.0422L6.25643 9.69467C6.1666 9.64684 6.06685 9.62117 5.96476 9.61825H5.80668C5.75185 9.62642 5.69818 9.64392 5.64918 9.67075L3.06501 11.0247C2.93726 11.0888 2.7926 11.1116 2.65085 11.0888C2.30551 11.0235 2.0751 10.6945 2.13168 10.3474L2.65085 7.47742C2.68526 7.268 2.61585 7.05509 2.46476 6.90633L0.358348 4.86467C0.182181 4.69375 0.120931 4.43709 0.201431 4.2055C0.279598 3.9745 0.479098 3.80592 0.720015 3.768L3.61918 3.34742C3.83968 3.32467 4.03335 3.1905 4.13251 2.99217L5.41001 0.373001C5.44035 0.314668 5.47943 0.261001 5.52668 0.215501L5.57918 0.174668C5.6066 0.144335 5.6381 0.119251 5.6731 0.0988346L5.73668 0.0755013L5.83585 0.034668H6.08143C6.30076 0.057418 6.49385 0.188668 6.59476 0.384668L7.88918 2.99217C7.98251 3.18292 8.16393 3.31533 8.37335 3.34742L11.2725 3.768C11.5175 3.803 11.7223 3.97217 11.8033 4.2055C11.8798 4.43942 11.8138 4.69608 11.6342 4.86467L9.45251 6.92967Z",fill:"#FF981F"})})})]},f))}return g};return a.jsxs("div",{className:`star-rating ${n} ${s}`,children:[a.jsx("div",{className:"stars-container",style:{gap:p},children:u()}),(i||r)&&a.jsxs("div",{className:"rating-info",children:[i&&a.jsx("span",{className:"rating-value",children:a.jsx("strong",{children:o.toFixed(1)})}),r&&a.jsxs("span",{className:"review-count",children:["(",r>1e3?`${(r/1e3).toFixed(1)}k`:r,"+ reviews)"]})]})]})},oo=({onClose:e})=>{console.log("🚀 WeChatAuthDialog rendered!");const{signInWithTestUser:t}=m.useContext(sr),n=async()=>{try{console.log("🧪 Using test user bypass"),await t(),sessionStorage.removeItem("wechat_pending_cart_action"),e()}catch(s){console.error("❌ Error with test user bypass:",s)}},i=async()=>{try{const s=Si(),o=ft();console.log("🔍 Auth context:",{isMobile:s,isWeChat:o}),sessionStorage.setItem("wechat_pending_cart_action","true");let l=cn();o?(l=cn(),console.log("📱 WeChat browser detected - direct redirect"),alert(l)):s?(console.log("📱 Mobile device - attempting WeChat authentication"),l=es(),alert(l)):(console.log("🖥️ Desktop - direct redirect"),alert(l))}catch(s){console.error("❌ Error in WeChat authentication:",s);const o=cn();alert(o)}},r=s=>{s.target===s.currentTarget&&e()};return a.jsx("div",{className:"wechat-auth-dialog-overlay",onClick:r,children:a.jsxs("div",{className:"wechat-auth-dialog",children:[a.jsxs("div",{className:"wechat-auth-header",children:[a.jsx("h3",{children:"Sign in to Continue"}),a.jsx("button",{className:"wechat-auth-close",onClick:e,"aria-label":"Close dialog",children:"×"})]}),a.jsxs("div",{className:"wechat-auth-content",children:[a.jsx("div",{className:"wechat-auth-icon",children:a.jsx("img",{src:Ai,alt:"WeChat"})}),a.jsx("p",{className:"wechat-auth-message",children:"Please sign in with WeChat to add items to your cart"}),a.jsxs("button",{className:"wechat-auth-button",onClick:i,children:[a.jsx("img",{src:Ai,alt:"WeChat"}),"Continue with WeChat"]}),a.jsx("button",{className:"wechat-auth-button",onClick:n,style:{backgroundColor:"#ff6b35",marginTop:"10px",fontSize:"14px"},children:"🧪 Skip for Testing (Temporary)"}),a.jsx("p",{className:"wechat-auth-note",children:Si()&&!ft()?"This will open WeChat app for secure authentication":"We'll redirect you to WeChat for secure authentication"})]})]})})},pm=({food:e,isLiked:t,handleLikeToggle:n})=>{console.log("🚀 ~ CustomSlider ~ isLiked:",t);const r=(()=>{if(console.log("🖼️ [CustomSlider] Checking imagesUrl array:",e),e!=null&&e.imageUrls&&Array.isArray(e.imageUrls)&&e.imageUrls.length>0)return console.log("🖼️ [CustomSlider] Using imageUrls array with",e.imageUrls.length,"images"),e.imageUrls;if(e!=null&&e.imageUrl&&!(e!=null&&e.imageUrls))return[e.imageUrl]})()||[],[s,o]=m.useState(0),[l,c]=m.useState(!1);m.useEffect(()=>{if(!l||!r||r.length<=1)return;const f=setInterval(()=>{o(h=>(h+1)%r.length)},2e3);return()=>clearInterval(f)},[l,r]),m.useEffect(()=>{r&&r.length>1&&c(!1)},[r]);const d=()=>{c(!1),setTimeout(()=>{r&&r.length>1&&c(!1)},3e3)},p=()=>{!r||r.length===0||(d(),o(f=>f===0?r.length-1:f-1))},u=()=>{!r||r.length===0||(d(),o(f=>(f+1)%r.length))},g=f=>{!r||r.length===0||(d(),o(f))};return!r||r.length===0?a.jsx("div",{className:"custom-slider",children:a.jsx("div",{className:"slider-container",children:a.jsx("div",{className:"slider-slide",children:a.jsx(Vr,{src:mn,alt:"No image available",fallbackSrc:mn,className:"slider-image"})})})}):a.jsx("div",{className:`custom-slider ${l?"auto-sliding":""}`,children:a.jsxs("div",{className:"slider-container",children:[a.jsx("div",{className:"slider-track",style:{transform:`translateX(-${s*100}%)`},children:r.map((f,h)=>a.jsx("div",{className:"slider-slide",children:a.jsx(Vr,{src:f,alt:`${(e==null?void 0:e.name)||"Food"} Image ${h+1}`,fallbackSrc:mn,className:"slider-image"})},h))}),a.jsx("div",{className:`icon heart-icon ${t?"liked":""}`,onClick:n,children:a.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M9.80568 16.3852C9.53252 16.4816 9.08261 16.4816 8.80945 16.3852C6.47955 15.5898 1.27344 12.2717 1.27344 6.64781C1.27344 4.16527 3.27393 2.15674 5.74041 2.15674C7.20262 2.15674 8.49612 2.86374 9.30756 3.95638C10.119 2.86374 11.4205 2.15674 12.8747 2.15674C15.3412 2.15674 17.3417 4.16527 17.3417 6.64781C17.3417 12.2717 12.1356 15.5898 9.80568 16.3852Z",stroke:"#FF5555",fill:t?"#FF5555":"transparent",strokeWidth:"1.20512"})})}),r.length>1&&a.jsx("button",{className:"slider-btn slider-prev",onClick:p,"aria-label":"Previous image",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:a.jsx("path",{d:"M12.5 15L7.5 10L12.5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.length>1&&a.jsx("button",{className:"slider-btn slider-next",onClick:u,"aria-label":"Next image",children:a.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:a.jsx("path",{d:"M7.5 5L12.5 10L7.5 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),r.length>1&&a.jsx("div",{className:"slider-dots",children:r.map((f,h)=>a.jsx("button",{className:`slider-dot ${s===h?"active":""}`,onClick:()=>g(h),"aria-label":`Go to slide ${h+1}`},h))})]})})};function Jr(){var K,E;const[e]=Do(),t=Xe(),n=Bt(),i=zt(),r=_e(O=>O.auth.user),{getCartQuantity:s,handleQuantityChange:o}=Ht(),l=()=>{if(console.log("🔍 [FoodDetailPage] Current pathname:",n.pathname),console.log("🔍 [FoodDetailPage] Search params:",e.toString()),n.pathname==="/share"||n.pathname==="/share/"){const O={kitchenId:e.get("kitchenId"),foodId:e.get("foodId"),selectedDate:e.get("date")};return console.log("🔍 [FoodDetailPage] Extracted params:",O),O}return console.log("🔍 [FoodDetailPage] Using fallback params (pathname not /share)"),{kitchenId:null,foodId:null,selectedDate:null}},{kitchenId:c,foodId:d,selectedDate:p}=l();if(!c||!d)return a.jsx("div",{className:"mobile-container",children:a.jsx("div",{className:"padding-20",children:a.jsxs("div",{className:"alert alert-danger",role:"alert",children:[a.jsx("h4",{children:"Invalid URL"}),a.jsx("p",{children:"Missing required parameters. Please check your link and try again."}),a.jsxs("small",{className:"text-muted",children:["Expected: kitchenId and foodId"," ",n.pathname==="/share"?"as query parameters":"as URL parameters"]})]})})});const[u,g]=m.useState("reviews"),[f,h]=m.useState(0),[x,y]=m.useState(""),[I,$]=m.useState(!1),[M,v]=m.useState(p),[S,w]=m.useState(null);m.useEffect(()=>{console.log("🔍 showWeChatDialog state changed to:",I)},[I]);const[R,q]=m.useState({isAvailable:!0,quantity:1,orderType:"GO_GRAB"}),{food:b,kitchen:L,likes:j,reviews:N,reviewStats:A,loading:_,error:k,isLiked:C,toggleLike:P}=um(d,c),T=s(d,M||p),U=Mi.useMemo(()=>{var X,oe;const O=((X=b==null?void 0:b.availability)==null?void 0:X.numAvailable)||(b==null?void 0:b.numAvailable)||0;return O>0?(console.log("DEBUG - Setting orderType to GO_GRAB due to availability:",O),"GO_GRAB"):p?(console.log("DEBUG - No availability, checking Pre-Order for date:",p),"PRE_ORDER"):(oe=L==null?void 0:L.preorderSchedule)!=null&&oe.dates&&Object.values(L.preorderSchedule.dates).flat().some(he=>he.foodItemId===(b==null?void 0:b.id))?"PRE_ORDER":"GO_GRAB"},[p,b,L]),G=m.useCallback(O=>{console.log(`[FoodDetailPage] Quantity changed to: ${O}`),h(O),console.log(`[FoodDetailPage] Local quantity state updated to: ${O}`)},[]);console.log("FoodDetailPage data:",{food:b,kitchen:L,likes:j,reviews:N,reviewStats:A,loading:_,error:k,selectedDate:p,orderType:U,pickupDate:M,pickupTime:S,urlPattern:n.pathname,extractedParams:{kitchenId:c,foodId:d,selectedDate:p},kitchenPreorderSchedule:L==null?void 0:L.preorderSchedule});const F=m.useCallback(O=>{v(O),console.log("📅 Date changed to:",O)},[]),z=m.useCallback(O=>{w(O),console.log("⏰ Time changed to:",O)},[]),H=m.useCallback(O=>{q(O)},[]),V=m.useCallback(O=>{console.error(`[FoodDetailPage] Quantity error: ${O}`),ge.error(O)},[]),ee=m.useCallback(O=>{console.warn(`[FoodDetailPage] Quantity warning: ${O}`),ge.warning(O)},[]),Z=m.useCallback(()=>{if(console.log("[FoodDetailPage] Add to Cart button clicked!"),console.log("[FoodDetailPage] Availability status:",R),console.log("[FoodDetailPage] Selected quantity:",f),console.log("[FoodDetailPage] Cart quantity:",T),console.log("[FoodDetailPage] Special instructions:",x),!R.isAvailable){ge.error("This item is currently unavailable");return}if(T===0){alert("Please use the quantity selector to add items to cart first.");return}T>0&&x.trim()&&(console.log("[FoodDetailPage] Updating special instructions for existing cart item"),b&&L&&(o({food:b,kitchen:L,newQuantity:T,currentQuantity:T,selectedDate:M||p,selectedTime:S,specialInstructions:x.trim(),isPreOrder:U==="PRE_ORDER"}),ge.success("Special instructions updated!"))),console.log("[FoodDetailPage] Navigating back to foods page");const O=new URLSearchParams({kitchenId:c||"",foodId:d||"",...p&&{date:p}}).toString();i("/foods",{replace:!0,state:{from:{pathname:n.pathname,search:n.search,fullUrl:`/share?${O}`}}})},[R,T,f,x,b,L,M,p,S,U,o,c,d,i,n]);m.useEffect(()=>{T>0&&h(T)},[T]),m.useEffect(()=>{p&&!M&&v(p)},[p,M]),m.useEffect(()=>{(async()=>{console.log("=== DEBUGGING REVIEWS ==="),console.log("URL params - foodId:",d,"kitchenId:",c,"selectedDate:",p);const X=await jf();if(console.log("Connection test:",X),d){const oe=await wf(d);console.log("Debug reviews result:",oe)}})()},[d,c,p]),console.log("🚀 ~ FoodDetailPage ~ reviewStats:",A);const te=(A==null?void 0:A.averageRating)||0,ae=(A==null?void 0:A.totalReviews)||0,W=(A==null?void 0:A.ratingPercentages)||{5:90,4:70,3:40,2:20,1:8},Q=(N==null?void 0:N.length)>0?N.map(O=>({id:O.id,image:O.userProfile||dm,date:O.timeStamp?(()=>{try{let X;return typeof O.timeStamp=="string"?O.timeStamp.includes(" at ")?X=new Date(O.timeStamp.replace(" at "," ").replace(" UTC+5","")):X=new Date(O.timeStamp):O.timeStamp.seconds?X=new Date(O.timeStamp.seconds*1e3):X=new Date(O.timeStamp),X.toLocaleDateString()}catch(X){return console.warn("Error parsing timestamp:",O.timeStamp),"Unknown date"}})():"Unknown date",name:O.userName||"Anonymous User",rating:O.rating||5,description:O.message||"No comment provided"})):[],D=m.useCallback(()=>{P(),console.log(`[FoodDetailPage] Food ${C?"unliked":"liked"}`)},[P,C]);return m.useEffect(()=>{const O=!document.referrer||!document.referrer.includes(window.location.origin),X=n.state&&(n.state.from||n.state.editItem);O&&!X&&(console.log("🛒 Clearing cart on direct landing to FoodDetailPage"),t(Mn()),console.log("Existing cart data cleard!"),console.log("Existing cart data cleared!"),r&&(console.log("👤 Clearing user authentication state on direct landing"),t(Nd()),console.log("User authentication cleared - will require re-auth for orders!")))},[t,n.state]),_?a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsx(so,{isLoading:_,text:"Loading food details...",overlay:!0,size:"medium"})})}):a.jsxs("div",{className:"container",children:[a.jsx("div",{className:"mobile-container",children:a.jsxs("div",{className:"product-detail",children:[a.jsxs("div",{className:"padding-20",children:[a.jsx("h2",{className:"title text-center",children:b==null?void 0:b.name}),a.jsxs("h2",{className:"text text-center",children:["By ",b==null?void 0:b.kitchenName]}),a.jsxs("div",{className:"review-info",children:[a.jsxs("div",{className:"left flex-0",children:[a.jsx("div",{children:a.jsx("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7499 4.80322L9.97336 4.26881L8.28761 0.940677C8.12458 0.667862 7.82468 0.5 7.50028 0.5C7.17588 0.5 6.87597 0.667862 6.71295 0.940677L5.02719 4.26966L1.25064 4.80322C0.920725 4.84924 0.64636 5.07363 0.543084 5.38188C0.439808 5.69013 0.525567 6.02868 0.764246 6.25497L3.49628 8.84616L2.85154 12.5053C2.79531 12.8246 2.93026 13.1472 3.19965 13.3375C3.46905 13.5279 3.82617 13.553 4.12089 13.4022L7.50028 11.6739L10.8779 13.4005C11.1726 13.5513 11.5298 13.5262 11.7992 13.3358C12.0685 13.1455 12.2035 12.8229 12.1473 12.5036L11.5025 8.84446L14.2363 6.25497C14.4744 6.02885 14.56 5.69094 14.4572 5.38312C14.3543 5.0753 14.0809 4.85087 13.7517 4.80407L13.7499 4.80322Z",fill:"#FBBC04"})})}),a.jsx("div",{className:"text",children:a.jsx("strong",{children:L!=null&&L.rating&&(L!=null&&L.ratingCount)?parseFloat(parseInt(L==null?void 0:L.rating)/parseInt(L==null?void 0:L.ratingCount)).toFixed(1):"0"})})]}),a.jsx("div",{className:"line"}),a.jsxs("div",{className:"left flex-0",children:[a.jsx("div",{children:a.jsx("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M7.41337 11.8736C7.18671 11.9536 6.81337 11.9536 6.58671 11.8736C4.65337 11.2136 0.333374 8.46023 0.333374 3.79356C0.333374 1.73356 1.99337 0.0668945 4.04004 0.0668945C5.25337 0.0668945 6.32671 0.653561 7.00004 1.56023C7.67337 0.653561 8.75337 0.0668945 9.96004 0.0668945C12.0067 0.0668945 13.6667 1.73356 13.6667 3.79356C13.6667 8.46023 9.34671 11.2136 7.41337 11.8736Z",fill:"#FF5555"})})}),a.jsx("div",{className:"text",children:a.jsx("strong",{children:(K=b==null?void 0:b.numOfLike)!=null?K:0})})]}),a.jsx("div",{className:"line"}),a.jsxs("div",{className:"left flex-0",children:[a.jsx("div",{children:a.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M13.3067 5.9731C12.86 5.47977 12.1867 5.1931 11.2534 5.0931V4.58644C11.2534 3.6731 10.8667 2.7931 10.1867 2.17977C9.50003 1.5531 8.6067 1.25977 7.68003 1.34644C6.0867 1.49977 4.7467 3.03977 4.7467 4.70644V5.0931C3.81337 5.1931 3.14003 5.47977 2.69337 5.9731C2.0467 6.6931 2.0667 7.6531 2.14003 8.31977L2.6067 12.0331C2.7467 13.3331 3.27337 14.6664 6.14003 14.6664H9.86003C12.7267 14.6664 13.2534 13.3331 13.3934 12.0398L13.86 8.3131C13.9334 7.6531 13.9534 6.6931 13.3067 5.9731ZM7.77337 2.2731C8.44003 2.2131 9.07337 2.41977 9.5667 2.86644C10.0534 3.30644 10.3267 3.9331 10.3267 4.58644V5.0531H5.67337V4.70644C5.67337 3.51977 6.65337 2.37977 7.77337 2.2731ZM8.00003 12.3864C6.6067 12.3864 5.47337 11.2531 5.47337 9.85977C5.47337 8.46644 6.6067 7.3331 8.00003 7.3331C9.39337 7.3331 10.5267 8.46644 10.5267 9.85977C10.5267 11.2531 9.39337 12.3864 8.00003 12.3864Z",fill:"#3FC045"}),a.jsx("path",{d:"M7.62 11.0933C7.49334 11.0933 7.36667 11.0466 7.26667 10.9466L6.60667 10.2866C6.41334 10.0933 6.41334 9.7733 6.60667 9.57997C6.8 9.38664 7.12 9.38664 7.31334 9.57997L7.63334 9.89997L8.7 8.9133C8.9 8.72664 9.22 8.73997 9.40667 8.93997C9.59334 9.13997 9.58 9.45997 9.38 9.64664L7.96 10.96C7.86 11.0466 7.74 11.0933 7.62 11.0933Z",fill:"#3FC045"})]})}),a.jsx("div",{className:"text",children:a.jsx("strong",{children:(E=b==null?void 0:b.numOfSoldItem)!=null?E:0})})]}),a.jsx("div",{className:"line"}),a.jsxs("div",{className:"left",children:[a.jsx("div",{children:a.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[a.jsx("path",{d:"M10.1667 6.00016C10.1667 6.92063 9.42051 7.66683 8.50004 7.66683C7.57957 7.66683 6.83337 6.92063 6.83337 6.00016C6.83337 5.07969 7.57957 4.3335 8.50004 4.3335C9.42051 4.3335 10.1667 5.07969 10.1667 6.00016Z",stroke:"#3FC045"}),a.jsx("path",{d:"M12.6481 11.3335C13.5778 12.6592 14.0225 13.3652 13.7576 13.9334C13.731 13.9904 13.6999 14.0454 13.6646 14.098C13.2816 14.6668 12.2916 14.6668 10.3118 14.6668H6.68811C4.7083 14.6668 3.71839 14.6668 3.33536 14.098C3.29999 14.0454 3.26888 13.9904 3.24232 13.9334C2.97742 13.3652 3.42213 12.6592 4.35181 11.3335",stroke:"#3FC045",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M9.33831 11.6626C9.11344 11.8791 8.81291 12.0002 8.50017 12.0002C8.18737 12.0002 7.88684 11.8791 7.66197 11.6626C5.60291 9.66736 2.8435 7.4385 4.18918 4.20265C4.91677 2.45304 6.66333 1.3335 8.50017 1.3335C10.337 1.3335 12.0835 2.45305 12.8111 4.20265C14.1551 7.43443 11.4024 9.67423 9.33831 11.6626Z",stroke:"#3FC045"})]})}),a.jsx("div",{className:"text",children:(L==null?void 0:L.address)||"Unknown location"})]})]}),a.jsx(pm,{food:b,isLiked:C,handleLikeToggle:D}),a.jsxs("div",{className:"quantity-warpper",children:[a.jsxs("div",{className:"price",children:[a.jsx("sup",{children:"$"}),(b==null?void 0:b.cost)&&parseFloat(b==null?void 0:b.cost).toFixed(2)]}),a.jsx($t,{food:b,kitchen:L,selectedDate:M||p,initialQuantity:T,minQuantity:0,onQuantityChange:G,onAvailabilityChange:H,onError:V,onWarning:ee,showAvailabilityInfo:!1,showErrorMessages:!0,size:"large",className:"food-detail-quantity"})]}),a.jsx("div",{className:"pickup-details",children:a.jsx(jn,{food:b,kitchen:L,orderType:U,selectedDate:M,selectedTime:S,onDateChange:F,onTimeChange:z,disabled:!b||!L,className:"food-detail-picker"})})]}),a.jsx("div",{className:"hr"}),a.jsxs("div",{className:"padding-20",children:[a.jsx("h3",{className:"small-title mb-8",children:"Special Instruction"}),a.jsx("p",{className:"body-text mb-16",children:"Please let us know if you are allergic to anything or if we need to avoid anything."}),a.jsx("textarea",{className:"special-instructions-input",placeholder:"Enter your special instructions here...",value:x,onChange:O=>y(O.target.value),rows:3,style:{width:"100%",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",marginBottom:"16px"}}),a.jsxs("div",{className:"add-to-cart-action mt-2",children:[a.jsx("button",{className:`button ${R.isAvailable?"":"sold-out"}`,onClick:O=>{console.log("🔥 BUTTON CLICKED! Event:",O),console.log("🔥 handleAddToCart type:",typeof Z),R.isAvailable||alert("♡ this food to the chef that we want it! When it is added to Go&Grab or Pre-Order, you will be notified."),Z(O)},disabled:!R.isAvailable,style:{pointerEvents:"auto"},children:R.isAvailable?"Add to Cart":"Sold Out"}),a.jsx("div",{className:"icon",children:a.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{const O=new URLSearchParams({kitchenId:c||"",foodId:d||"",...p&&{date:p}}).toString();i("/foods",{replace:!0,state:{from:{pathname:n.pathname,search:n.search,fullUrl:`/share?${O}`}}})},children:[a.jsx("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M3 6H21",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),a.jsx("path",{d:"M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),a.jsxs("div",{className:"custom-accordian",children:[a.jsx("button",{className:`button${u==="description"?" active":""}`,onClick:()=>g("description"),children:"Description"}),a.jsx("button",{className:`button${u==="reviews"?" active":""}`,onClick:()=>g("reviews"),children:"Reviews"})]}),a.jsxs("div",{className:"accordian-content",children:[u==="description"&&a.jsx("div",{className:"description-content",children:(b==null?void 0:b.description)||"No description available."}),u==="reviews"&&a.jsxs("div",{className:"reviews-content",children:[a.jsxs("div",{className:"overall-reviews",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"bold",children:te>0?te.toFixed(1):"0"}),a.jsx(Zr,{rating:te,size:"small",showRating:!1}),a.jsxs("div",{className:"body-text",children:["(",ae,"+ reviews)"]})]}),a.jsx("div",{className:"line"}),a.jsx("div",{className:"right",children:[5,4,3,2,1].map(O=>a.jsxs("div",{className:"review",children:[a.jsx("div",{className:"text",children:O}),a.jsx("div",{className:"progress-bar",children:a.jsx("div",{className:"fill",style:{width:`${W[O]}%`}})})]},O))})]}),a.jsx("div",{className:"reviews-list",children:Q.map((O,X)=>a.jsxs("div",{className:"review-item",children:[a.jsxs("div",{className:"header",children:[a.jsxs("div",{className:"profile",children:[a.jsx("img",{src:O.image,alt:O.name,className:"image"}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"name",children:O.name}),a.jsx("div",{className:"rating",children:a.jsx(Zr,{rating:O.rating||5,size:"small",showRating:!1})}),a.jsx("div",{className:"date",children:O.date})]})]}),a.jsx("div",{className:"icon"})]}),a.jsx("div",{className:"description",children:O.description})]},O.id||X))})]})]})]})]})}),I&&a.jsx(oo,{onClose:handleWeChatDialogClose})]})}function fm(){const e=zt(),t=Xe(),n=Bt(),i=_e(v=>v.cart.items),{getCartQuantity:r,handleQuantityChange:s}=Ht(),[o,l]=m.useState(new Set);m.useEffect(()=>{var v;if((v=n.state)!=null&&v.editItem){const S=n.state.editItem;l(new Set([S])),window.history.replaceState({},document.title)}},[n.state]);const c=i.length>0?i[0].kitchenId:null,{kitchen:d,foods:p,loading:u}=ao(c);console.log("OrderPage - Kitchen data:",{kitchenId:c,hasKitchen:!!d,foodsCount:p.length,kitchenLoading:u});const g=m.useMemo(()=>{const v=new Map;return p.forEach(S=>{v.set(S.id,S)}),v},[p]),f=m.useCallback((v,S=null)=>r(v,S),[r]),h=v=>{var R,q,b,L;const S=g.get(v.foodId);if(console.log(`OrderPage - Getting food data for ${v.foodId}:`,{hasFullData:!!S,fullFoodData:S?{id:S.id,name:S.name,availability:S.availability,numAvailable:S.numAvailable}:null}),S)return S;const w={id:v.foodId,name:(R=v.food)==null?void 0:R.name,cost:(q=v.food)==null?void 0:q.cost,imageUrl:(b=v.food)==null?void 0:b.imageUrl,kitchenId:v.kitchenId,description:(L=v.food)==null?void 0:L.description,availability:{numAvailable:99},numAvailable:99};return console.log(`OrderPage - Using fallback data for ${v.foodId}:`,w),w},x=m.useMemo(()=>{const v={grabAndGo:[],preOrders:{}};i.forEach(w=>{var q,b,L,j,N,A,_,k;const R=((q=w.pickupDetails)==null?void 0:q.orderType)||w.orderType||(w.isPreOrder?"PRE_ORDER":"GO_GRAB");if(R==="GO_GRAB"||R==="Go&Grab")v.grabAndGo.push({...w,displayPickupTime:((b=w.pickupDetails)==null?void 0:b.display)||"Pick up today",displayPickupClock:((L=w.pickupDetails)==null?void 0:L.time)||J().add(30,"minutes").format("h:mm A")});else if(R==="PRE_ORDER"||R==="Pre-Order"||w.isPreOrder||w.selectedDate){const C=w.selectedDate||((j=w.pickupDetails)==null?void 0:j.date);C&&(v.preOrders[C]||(v.preOrders[C]=[]),v.preOrders[C].push({...w,displayPickupTime:((N=w.pickupDetails)==null?void 0:N.display)||`Pick up ${J(C).format("MMM D ddd")}`,displayPickupClock:((A=w.pickupDetails)==null?void 0:A.time)||"6:30 PM"}))}else v.grabAndGo.push({...w,displayPickupTime:((_=w.pickupDetails)==null?void 0:_.display)||"Pick up today",displayPickupClock:((k=w.pickupDetails)==null?void 0:k.time)||J().add(30,"minutes").format("h:mm A")})});const S={};return Object.keys(v.preOrders).sort((w,R)=>J(w).diff(J(R))).forEach(w=>{S[w]=v.preOrders[w]}),v.preOrders=S,v},[i]),y=m.useMemo(()=>{const v=i.reduce((R,q)=>{var N,A,_;const b=g.get(q.foodId),L=(b==null?void 0:b.cost)||((N=q.food)==null?void 0:N.cost)||0,j=typeof L=="string"?parseFloat(L):L;return console.log(`OrderPage - Pricing calculation for ${q.foodId}:`,{itemName:(A=q.food)==null?void 0:A.name,quantity:q.quantity,originalCost:(_=q.food)==null?void 0:_.cost,enrichedCost:b==null?void 0:b.cost,finalCost:j,lineTotal:j*q.quantity}),R+j*q.quantity},0),S=v*.0725,w=v+S;return console.log("OrderPage - Total calculation:",{subtotal:v.toFixed(2),tax:S.toFixed(2),total:w.toFixed(2),cartItemsCount:i.length}),{subtotal:v.toFixed(2),tax:S.toFixed(2),total:w.toFixed(2)}},[i,g]),I=()=>{t(Mn()),ge.info("Cart cleared successfully")},$=v=>J(v).format("MMM D ddd"),M=(i==null?void 0:i.length)||0;return a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsxs("div",{className:"padding-20",children:[a.jsxs("div",{className:"back-link-title",children:[a.jsx(Ot,{className:"back-link",to:"/foods",children:a.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:a.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),a.jsxs("div",{className:"title",children:["Order (",M," Item",M!==1?"s":"",")"]})]}),i.length>0&&i[0].kitchen&&a.jsx("h2",{className:"small-title mb-2",children:i[0].kitchen.name}),i.length===0?a.jsxs("div",{className:"text-center py-5",children:[a.jsx("p",{children:"Your cart is empty"}),a.jsx(Ot,{to:"/foods",className:"action-button",style:{textDecoration:"none",display:"inline-block",padding:"12px 24px",marginTop:"16px"},children:"Continue Shopping"})]}):a.jsxs(a.Fragment,{children:[x.grabAndGo.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"small-title mb-20",children:"Go&Grab"}),a.jsx("div",{className:"menu-listing",children:x.grabAndGo.map((v,S)=>{var R,q,b,L,j;const w=f(v.foodId);return a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:((R=v.food)==null?void 0:R.imageUrl)||"/src/assets/images/product.png",alt:((q=v.food)==null?void 0:q.name)||"Food item",onError:N=>{N.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:((b=v.food)==null?void 0:b.name)||"Unknown Item"}),a.jsx("div",{className:"text",children:((L=v.food)==null?void 0:L.description)||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",((j=v.food)==null?void 0:j.cost)||"0.00"]})]})]}),a.jsx("div",{className:"quantity-warpper",children:a.jsx("div",{className:"right mb-1",children:a.jsx($t,{food:h(v),kitchen:d||v.kitchen,selectedDate:null,size:"small",initialQuantity:w,minQuantity:0,onQuantityChange:N=>{console.log("🛒 OrderPage Go&Grab quantity change:",{foodId:v.foodId,newQuantity:N,currentQty:w});const A=h(v);s({food:A,kitchen:d||v.kitchen,newQuantity:N,currentQuantity:w,selectedDate:null,specialInstructions:v.specialInstructions||"",isPreOrder:!1})}})})})]},`grab-${v.foodId}-${S}`)})})]}),Object.entries(x.preOrders).map(([v,S])=>a.jsxs("div",{children:[a.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",$(v)]}),a.jsx("div",{className:"menu-listing",children:S.map((w,R)=>{var b,L,j,N,A;const q=f(w.foodId,v);return a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:((b=w.food)==null?void 0:b.imageUrl)||"/src/assets/images/product.png",alt:((L=w.food)==null?void 0:L.name)||"Food item",onError:_=>{_.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:((j=w.food)==null?void 0:j.name)||"Unknown Item"}),a.jsx("div",{className:"text",children:((N=w.food)==null?void 0:N.description)||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",((A=w.food)==null?void 0:A.cost)||"0.00"]})]})]}),a.jsxs("div",{className:"quantity-warpper",children:[a.jsx("div",{className:"right mb-1",children:a.jsx($t,{food:h(w),kitchen:d||w.kitchen,selectedDate:v,size:"small",initialQuantity:q,minQuantity:0,onQuantityChange:_=>{console.log("🛒 OrderPage Pre-Order quantity change:",{foodId:w.foodId,date:v,newQuantity:_,currentQty:q});const k=h(w);s({food:k,kitchen:d||w.kitchen,newQuantity:_,currentQuantity:q,selectedDate:v,specialInstructions:w.specialInstructions||"",isPreOrder:!0})}})}),a.jsx("div",{className:"title",children:w.displayPickupTime})]})]},`preorder-${w.foodId}-${v}-${R}`)})})]},v)),a.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsxs("span",{children:["Subtotal (",M," item",M!==1?"s":"","):"]}),a.jsxs("span",{children:["$",y.subtotal]})]}),a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:"Tax (7.25%):"}),a.jsxs("span",{children:["$",y.tax]})]}),a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:["$",y.total]})]})]}),a.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[a.jsx("button",{onClick:I,style:{flex:"1",padding:"12px 16px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",color:"#6c757d",cursor:"pointer"},children:"Clear Cart"}),a.jsx("button",{className:"action-button",onClick:()=>e("/checkout"),style:{flex:"2"},children:"Check Out"})]})]})]})})})}var lo={exports:{}},mm="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",hm=mm,gm=hm;function co(){}function uo(){}uo.resetWarningCache=co;var vm=function(){function e(i,r,s,o,l,c){if(c!==gm){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:uo,resetWarningCache:co};return n.PropTypes=n,n};lo.exports=vm();var xm=lo.exports;const re=ma(xm),ym=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function jt(e,t,n){const i=bm(e),{webkitRelativePath:r}=e,s=typeof t=="string"?t:typeof r=="string"&&r.length>0?r:`./${e.name}`;return typeof i.path!="string"&&Xr(i,"path",s),Xr(i,"relativePath",s),i}function bm(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const i=t.split(".").pop().toLowerCase(),r=ym.get(i);r&&Object.defineProperty(e,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return e}function Xr(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const wm=[".DS_Store","Thumbs.db"];function km(e){return vt(this,void 0,void 0,function*(){return Cn(e)&&jm(e.dataTransfer)?_m(e.dataTransfer,e.type):Cm(e)?Sm(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Rm(e):[]})}function jm(e){return Cn(e)}function Cm(e){return Cn(e)&&Cn(e.target)}function Cn(e){return typeof e=="object"&&e!==null}function Sm(e){return Oi(e.target.files).map(t=>jt(t))}function Rm(e){return vt(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>jt(n))})}function _m(e,t){return vt(this,void 0,void 0,function*(){if(e.items){const n=Oi(e.items).filter(r=>r.kind==="file");if(t!=="drop")return n;const i=yield Promise.all(n.map(Lm));return ea(po(i))}return ea(Oi(e.files).map(n=>jt(n)))})}function ea(e){return e.filter(t=>wm.indexOf(t.name)===-1)}function Oi(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(i)}return t}function Lm(e){if(typeof e.webkitGetAsEntry!="function")return ta(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?fo(t):ta(e,t)}function po(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?po(n):[n]],[])}function ta(e,t){return vt(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const s=yield e.getAsFileSystemHandle();if(s===null)throw new Error(`${e} is not a File`);if(s!==void 0){const o=yield s.getFile();return o.handle=s,jt(o)}}const i=e.getAsFile();if(!i)throw new Error(`${e} is not a File`);return jt(i,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function Dm(e){return vt(this,void 0,void 0,function*(){return e.isDirectory?fo(e):Em(e)})}function fo(e){const t=e.createReader();return new Promise((n,i)=>{const r=[];function s(){t.readEntries(o=>vt(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Dm));r.push(l),s()}else try{const l=yield Promise.all(r);n(l)}catch(l){i(l)}}),o=>{i(o)})}s()})}function Em(e){return vt(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(i=>{const r=jt(i,e.fullPath);t(r)},i=>{n(i)})})})}var ui=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var i=e.name||"",r=(e.type||"").toLowerCase(),s=r.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?s===l.replace(/\/.*$/,""):r===l})}return!0};function na(e){return Om(e)||Am(e)||ho(e)||Im()}function Im(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Am(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Om(e){if(Array.isArray(e))return Pi(e)}function ia(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ia(Object(n),!0).forEach(function(i){mo(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ia(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function mo(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ut(e,t){return Nm(e)||Tm(e,t)||ho(e,t)||Pm()}function Pm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ho(e,t){if(e){if(typeof e=="string")return Pi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pi(e,t)}}function Pi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Tm(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],r=!0,s=!1,o,l;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));r=!0);}catch(c){s=!0,l=c}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw l}}return i}}function Nm(e){if(Array.isArray(e))return e}var Fm=typeof ui=="function"?ui:ui.default,Mm="file-invalid-type",$m="file-too-large",Um="file-too-small",zm="too-many-files",Bm=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Mm,message:"File type must be ".concat(i)}},aa=function(t){return{code:$m,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},sa=function(t){return{code:Um,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},qm={code:zm,message:"Too many files"};function go(e,t){var n=e.type==="application/x-moz-file"||Fm(e,t);return[n,n?null:Bm(t)]}function vo(e,t,n){if(rt(e.size))if(rt(t)&&rt(n)){if(e.size>n)return[!1,aa(n)];if(e.size<t)return[!1,sa(t)]}else{if(rt(t)&&e.size<t)return[!1,sa(t)];if(rt(n)&&e.size>n)return[!1,aa(n)]}return[!0,null]}function rt(e){return e!=null}function Wm(e){var t=e.files,n=e.accept,i=e.minSize,r=e.maxSize,s=e.multiple,o=e.maxFiles,l=e.validator;return!s&&t.length>1||s&&o>=1&&t.length>o?!1:t.every(function(c){var d=go(c,n),p=Ut(d,1),u=p[0],g=vo(c,i,r),f=Ut(g,1),h=f[0],x=l?l(c):null;return u&&h&&!x})}function Sn(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function tn(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function oa(e){e.preventDefault()}function Gm(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Km(e){return e.indexOf("Edge/")!==-1}function Hm(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Gm(e)||Km(e)}function $e(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){for(var r=arguments.length,s=new Array(r>1?r-1:0),o=1;o<r;o++)s[o-1]=arguments[o];return t.some(function(l){return!Sn(i)&&l&&l.apply(void 0,[i].concat(s)),Sn(i)})}}function Ym(){return"showOpenFilePicker"in window}function Qm(e){if(rt(e)){var t=Object.entries(e).filter(function(n){var i=Ut(n,2),r=i[0],s=i[1],o=!0;return xo(r)||(console.warn('Skipped "'.concat(r,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(s)||!s.every(yo))&&(console.warn('Skipped "'.concat(r,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,i){var r=Ut(i,2),s=r[0],o=r[1];return ra(ra({},n),{},mo({},s,o))},{});return[{description:"Files",accept:t}]}return e}function Vm(e){if(rt(e))return Object.entries(e).reduce(function(t,n){var i=Ut(n,2),r=i[0],s=i[1];return[].concat(na(t),[r],na(s))},[]).filter(function(t){return xo(t)||yo(t)}).join(",")}function Zm(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Jm(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function xo(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function yo(e){return/^.*\.[\w]+$/.test(e)}var Xm=["children"],eh=["open"],th=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],nh=["refKey","onChange","onClick"];function ih(e){return sh(e)||ah(e)||bo(e)||rh()}function rh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ah(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sh(e){if(Array.isArray(e))return Ti(e)}function pi(e,t){return ch(e)||lh(e,t)||bo(e,t)||oh()}function oh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bo(e,t){if(e){if(typeof e=="string")return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ti(e,t)}}function Ti(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function lh(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],r=!0,s=!1,o,l;try{for(n=n.call(e);!(r=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));r=!0);}catch(c){s=!0,l=c}finally{try{!r&&n.return!=null&&n.return()}finally{if(s)throw l}}return i}}function ch(e){if(Array.isArray(e))return e}function la(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(e,r).enumerable})),n.push.apply(n,i)}return n}function ce(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?la(Object(n),!0).forEach(function(i){Ni(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):la(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Ni(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rn(e,t){if(e==null)return{};var n=dh(e,t),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)i=s[r],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function dh(e,t){if(e==null)return{};var n={},i=Object.keys(e),r,s;for(s=0;s<i.length;s++)r=i[s],!(t.indexOf(r)>=0)&&(n[r]=e[r]);return n}var lr=m.forwardRef(function(e,t){var n=e.children,i=Rn(e,Xm),r=ko(i),s=r.open,o=Rn(r,eh);return m.useImperativeHandle(t,function(){return{open:s}},[s]),Mi.createElement(m.Fragment,null,n(ce(ce({},o),{},{open:s})))});lr.displayName="Dropzone";var wo={disabled:!1,getFilesFromEvent:km,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};lr.defaultProps=wo;lr.propTypes={children:re.func,accept:re.objectOf(re.arrayOf(re.string)),multiple:re.bool,preventDropOnDocument:re.bool,noClick:re.bool,noKeyboard:re.bool,noDrag:re.bool,noDragEventsBubbling:re.bool,minSize:re.number,maxSize:re.number,maxFiles:re.number,disabled:re.bool,getFilesFromEvent:re.func,onFileDialogCancel:re.func,onFileDialogOpen:re.func,useFsAccessApi:re.bool,autoFocus:re.bool,onDragEnter:re.func,onDragLeave:re.func,onDragOver:re.func,onDrop:re.func,onDropAccepted:re.func,onDropRejected:re.func,onError:re.func,validator:re.func};var Fi={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ko(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=ce(ce({},wo),e),n=t.accept,i=t.disabled,r=t.getFilesFromEvent,s=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,p=t.onDragLeave,u=t.onDragOver,g=t.onDrop,f=t.onDropAccepted,h=t.onDropRejected,x=t.onFileDialogCancel,y=t.onFileDialogOpen,I=t.useFsAccessApi,$=t.autoFocus,M=t.preventDropOnDocument,v=t.noClick,S=t.noKeyboard,w=t.noDrag,R=t.noDragEventsBubbling,q=t.onError,b=t.validator,L=m.useMemo(function(){return Vm(n)},[n]),j=m.useMemo(function(){return Qm(n)},[n]),N=m.useMemo(function(){return typeof y=="function"?y:ca},[y]),A=m.useMemo(function(){return typeof x=="function"?x:ca},[x]),_=m.useRef(null),k=m.useRef(null),C=m.useReducer(uh,Fi),P=pi(C,2),T=P[0],U=P[1],G=T.isFocused,F=T.isFileDialogActive,z=m.useRef(typeof window!="undefined"&&window.isSecureContext&&I&&Ym()),H=function(){!z.current&&F&&setTimeout(function(){if(k.current){var Y=k.current.files;Y.length||(U({type:"closeDialog"}),A())}},300)};m.useEffect(function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}},[k,F,A,z]);var V=m.useRef([]),ee=function(Y){_.current&&_.current.contains(Y.target)||(Y.preventDefault(),V.current=[])};m.useEffect(function(){return M&&(document.addEventListener("dragover",oa,!1),document.addEventListener("drop",ee,!1)),function(){M&&(document.removeEventListener("dragover",oa),document.removeEventListener("drop",ee))}},[_,M]),m.useEffect(function(){return!i&&$&&_.current&&_.current.focus(),function(){}},[_,$,i]);var Z=m.useCallback(function(B){q?q(B):console.error(B)},[q]),te=m.useCallback(function(B){B.preventDefault(),B.persist(),Ce(B),V.current=[].concat(ih(V.current),[B.target]),tn(B)&&Promise.resolve(r(B)).then(function(Y){if(!(Sn(B)&&!R)){var le=Y.length,be=le>0&&Wm({files:Y,accept:L,minSize:o,maxSize:s,multiple:l,maxFiles:c,validator:b}),De=le>0&&!be;U({isDragAccept:be,isDragReject:De,isDragActive:!0,type:"setDraggedFiles"}),d&&d(B)}}).catch(function(Y){return Z(Y)})},[r,d,Z,R,L,o,s,l,c,b]),ae=m.useCallback(function(B){B.preventDefault(),B.persist(),Ce(B);var Y=tn(B);if(Y&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch(le){}return Y&&u&&u(B),!1},[u,R]),W=m.useCallback(function(B){B.preventDefault(),B.persist(),Ce(B);var Y=V.current.filter(function(be){return _.current&&_.current.contains(be)}),le=Y.indexOf(B.target);le!==-1&&Y.splice(le,1),V.current=Y,!(Y.length>0)&&(U({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),tn(B)&&p&&p(B))},[_,p,R]),Q=m.useCallback(function(B,Y){var le=[],be=[];B.forEach(function(De){var St=go(De,L),xt=pi(St,2),Un=xt[0],zn=xt[1],Bn=vo(De,o,s),Yt=pi(Bn,2),qn=Yt[0],Wn=Yt[1],Gn=b?b(De):null;if(Un&&qn&&!Gn)le.push(De);else{var Kn=[zn,Wn];Gn&&(Kn=Kn.concat(Gn)),be.push({file:De,errors:Kn.filter(function(jo){return jo})})}}),(!l&&le.length>1||l&&c>=1&&le.length>c)&&(le.forEach(function(De){be.push({file:De,errors:[qm]})}),le.splice(0)),U({acceptedFiles:le,fileRejections:be,isDragReject:be.length>0,type:"setFiles"}),g&&g(le,be,Y),be.length>0&&h&&h(be,Y),le.length>0&&f&&f(le,Y)},[U,l,L,o,s,c,g,f,h,b]),D=m.useCallback(function(B){B.preventDefault(),B.persist(),Ce(B),V.current=[],tn(B)&&Promise.resolve(r(B)).then(function(Y){Sn(B)&&!R||Q(Y,B)}).catch(function(Y){return Z(Y)}),U({type:"reset"})},[r,Q,Z,R]),K=m.useCallback(function(){if(z.current){U({type:"openDialog"}),N();var B={multiple:l,types:j};window.showOpenFilePicker(B).then(function(Y){return r(Y)}).then(function(Y){Q(Y,null),U({type:"closeDialog"})}).catch(function(Y){Zm(Y)?(A(Y),U({type:"closeDialog"})):Jm(Y)?(z.current=!1,k.current?(k.current.value=null,k.current.click()):Z(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Z(Y)});return}k.current&&(U({type:"openDialog"}),N(),k.current.value=null,k.current.click())},[U,N,A,I,Q,Z,j,l]),E=m.useCallback(function(B){!_.current||!_.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),K())},[_,K]),O=m.useCallback(function(){U({type:"focus"})},[]),X=m.useCallback(function(){U({type:"blur"})},[]),oe=m.useCallback(function(){v||(Hm()?setTimeout(K,0):K())},[v,K]),me=function(Y){return i?null:Y},ye=function(Y){return S?null:me(Y)},he=function(Y){return w?null:me(Y)},Ce=function(Y){R&&Y.stopPropagation()},We=m.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=B.refKey,le=Y===void 0?"ref":Y,be=B.role,De=B.onKeyDown,St=B.onFocus,xt=B.onBlur,Un=B.onClick,zn=B.onDragEnter,Bn=B.onDragOver,Yt=B.onDragLeave,qn=B.onDrop,Wn=Rn(B,th);return ce(ce(Ni({onKeyDown:ye($e(De,E)),onFocus:ye($e(St,O)),onBlur:ye($e(xt,X)),onClick:me($e(Un,oe)),onDragEnter:he($e(zn,te)),onDragOver:he($e(Bn,ae)),onDragLeave:he($e(Yt,W)),onDrop:he($e(qn,D)),role:typeof be=="string"&&be!==""?be:"presentation"},le,_),!i&&!S?{tabIndex:0}:{}),Wn)}},[_,E,O,X,oe,te,ae,W,D,S,w,i]),tt=m.useCallback(function(B){B.stopPropagation()},[]),Me=m.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Y=B.refKey,le=Y===void 0?"ref":Y,be=B.onChange,De=B.onClick,St=Rn(B,nh),xt=Ni({accept:L,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:me($e(be,D)),onClick:me($e(De,tt)),tabIndex:-1},le,k);return ce(ce({},xt),St)}},[k,n,l,D,i]);return ce(ce({},T),{},{isFocused:G&&!i,getRootProps:We,getInputProps:Me,rootRef:_,inputRef:k,open:me(K)})}function uh(e,t){switch(t.type){case"focus":return ce(ce({},e),{},{isFocused:!0});case"blur":return ce(ce({},e),{},{isFocused:!1});case"openDialog":return ce(ce({},Fi),{},{isFileDialogActive:!0});case"closeDialog":return ce(ce({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return ce(ce({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return ce(ce({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return ce({},Fi);default:return e}}function ca(){}const da="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16675%201.66699H7.50008C3.33341%201.66699%201.66675%203.33366%201.66675%207.50033V12.5003C1.66675%2016.667%203.33341%2018.3337%207.50008%2018.3337H12.5001C16.6667%2018.3337%2018.3334%2016.667%2018.3334%2012.5003V10.8337'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.3668%202.51639L6.80014%209.08306C6.55014%209.33306%206.30014%209.82472%206.25014%2010.1831L5.89181%2012.6914C5.75848%2013.5997%206.40014%2014.2331%207.30848%2014.1081L9.81681%2013.7497C10.1668%2013.6997%2010.6585%2013.4497%2010.9168%2013.1997L17.4835%206.63306C18.6168%205.49972%2019.1501%204.18306%2017.4835%202.51639C15.8168%200.849722%2014.5001%201.38306%2013.3668%202.51639Z'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.425%203.45801C12.9834%205.44967%2014.5417%207.00801%2016.5417%207.57467'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var ph={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const fh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),mh=(e,t)=>{const n=m.forwardRef(({color:i="currentColor",size:r=24,strokeWidth:s=2,absoluteStrokeWidth:o,children:l,...c},d)=>m.createElement("svg",{ref:d,...ph,width:r,height:r,stroke:i,strokeWidth:o?Number(s)*24/Number(r):s,className:`lucide lucide-${fh(e)}`,...c},[...t.map(([p,u])=>m.createElement(p,u)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var cr=mh;const ua=cr("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),hh=cr("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),pa=cr("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),gh=async(e,t="payment-screenshots",n="anonymous")=>{try{if(!e)throw new Error("No file provided");if(!e.type.startsWith("image/"))throw new Error("File must be an image");const i=10*1024*1024;if(e.size>i)throw new Error("File size must be less than 10MB");const r=new Date().getTime(),s=e.name.split(".").pop()||"jpg",o=`${n}_${r}.${s}`,l=Hu(Bs,`${t}/${o}`);console.log("Uploading file to Firebase Storage...");const c=await Gu(l,e),d=await Ku(c.ref);return console.log("File uploaded successfully:",d),d}catch(i){throw console.error("Error uploading file to Firebase Storage:",i),i}},vh=async e=>{try{console.log("Placing order with data:",e);const t=await ka(de(ne,"orders"),e);if(console.log("Order placed successfully with ID:",t.id),await Yn(t,{orderIDKey:t.id}),e.kitchenId)try{const n=ot(ne,"kitchens",e.kitchenId);await Yn(n,{totalOrders:Qn(1),lastOrderDate:new Date})}catch(n){console.warn("Could not update kitchen statistics:",n)}for(const n of e.orderedFoodItems)try{const i=ot(ne,"foods",n.foodItemId);await Yn(i,{numOfSoldItem:Qn(n.quantity),numberOfAvailableItem:Qn(-n.quantity)})}catch(i){console.warn(`Could not update food item ${n.foodItemId} statistics:`,i)}return t.id}catch(t){throw console.error("Error placing order:",t),t}},xh=()=>Math.floor(1e5+Math.random()*9e5).toString(),yh=({cartItems:e,kitchenInfo:t,firebaseImageUrl:n,currentUser:i,paymentCalculation:r,groupedCartItems:s})=>{const o=new Date().toISOString(),l=xh(),c=Object.keys(s.preOrders).length>0,d=s.grabAndGo.length>0;let p="grabAndGo";c&&!d?p="preOrder":c&&d&&(p="mixed");let u=o;if(c){const h=Object.keys(s.preOrders);if(h.length>0){const x=h.sort()[0];u=new Date(x).toISOString()}}const g=e.map(h=>{var x,y,I,$,M,v,S,w,R,q,b,L;return{countRating:0,foodItemId:h.foodId||h.id,id:fa(),imageUrl:((x=h.food)==null?void 0:x.imageUrl)||((y=h.food)==null?void 0:y.image)||"",isFromPreorder:((I=h.pickupDetails)==null?void 0:I.orderType)==="PRE_ORDER"||h.isPreOrder||!1,name:(($=h.food)==null?void 0:$.name)||"Unknown Item",numOfLike:((M=h.food)==null?void 0:M.numOfLike)||0,numOfSoldItem:((v=h.food)==null?void 0:v.numOfSoldItem)||0,numberOfAvailableItem:((S=h.food)==null?void 0:S.numberOfAvailableItem)||0,quantity:parseInt(h.quantity||1),rating:0,specialInstructions:h.specialInstructions||"",...((w=h.food)==null?void 0:w.preOrder)&&{preOrder:{availableTimes:h.food.preOrder.availableTimes||[],foodItemId:h.foodId||h.id,id:fa(),nameOfFood:((R=h.food)==null?void 0:R.name)||"Unknown Item",numOfAvailableItems:((q=h.food)==null?void 0:q.numberOfAvailableItem)||0,price:parseFloat(((b=h.food)==null?void 0:b.cost)||((L=h.food)==null?void 0:L.price)||0)}},pickupDetails:h.pickupDetails||{}}});return{datePickedUp:u,datePlaced:o,kitchenId:(t==null?void 0:t.id)||(t==null?void 0:t.kitchenId)||"unknown",kitchenName:(t==null?void 0:t.name)||"Unknown Kitchen",orderID:l,orderIDKey:"",orderPaymentImage:n||"",orderStatus:"pending",orderTotalCoast:parseFloat(r.totalPayment),orderType:p,orderedFoodItems:g,paymentVia:{other:{method:"manual_upload",uploadedAt:n?o:null}},pickUpAddress:(t==null?void 0:t.address)||"Address not available",userId:(i==null?void 0:i.uid)||"mzqXlFHOJXNVA0BUvtvbbhgF78x1",subtotal:parseFloat(r.subtotal),salesTax:parseFloat(r.salesTax),taxRate:.0725,createdAt:o,updatedAt:o}},fa=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16).toUpperCase()});function bh(){var W,Q;const[e,t]=m.useState(null),[n,i]=m.useState(null),[r,s]=m.useState(null),[o,l]=m.useState(!1),[c,d]=m.useState(null),[p,u]=m.useState(!1),[g,f]=m.useState(!1),[h,x]=m.useState(null),[y,I]=m.useState(null),[$,M]=m.useState(null),[v,S]=m.useState(!1),{handleQuantityChange:w}=Ht(),R=zt(),q=Xe(),b=_e(D=>D.cart.items),L=_e(D=>D.food.currentKitchen),j=_e(D=>D.auth.user),N=_e(D=>D.auth.isAuthenticated),A=m.useMemo(()=>{var D,K;if(L){const E=L;if(console.log("kitchen",E),E)return{id:E.id||E.ownerId||"PKcWQYMxEZQxnKSLp4de",name:E.name||"James Kitchen",address:E.address||"120 Lane San Francisco, East Falmouth MA",latitude:((D=E.location)==null?void 0:D.lat)||E.latitude||41.5742,longitude:((K=E.location)==null?void 0:K.lng)||E.longitude||-70.6109,preorderSchedule:(E==null?void 0:E.preorderSchedule)||null}}return{id:"PKcWQYMxEZQxnKSLp4de",name:"James Kitchen",address:"120 Lane San Francisco, East Falmouth MA",latitude:41.5742,longitude:-70.6109}},[L]),_=D=>{var K,E;x(D),I(D.selectedDate||((K=D.pickupDetails)==null?void 0:K.date)),M((E=D.pickupDetails)==null?void 0:E.time),f(!0)},k=()=>{f(!1),x(null),I(null),M(null)},C=D=>{I(D)},P=D=>{M(D)},T=m.useCallback(()=>{S(!1)},[]),U=async()=>{if(h&&y&&$){const D=y!==J().format("YYYY-MM-DD"),K={date:y,time:$,display:D?`Pick up ${J(y).format("MMM D ddd")}`:"Pick up today",orderType:D?"PRE_ORDER":"GO_GRAB"};console.log("🔄 Updating pickup details for item:",h),console.log("🔄 New pickup details:",K);try{await w({food:h.food,kitchen:A,newQuantity:h.quantity,currentQuantity:h.quantity,selectedDate:y,selectedTime:$,specialInstructions:h.specialInstructions||"",isPreOrder:D}),ge.success(`Pickup time updated to ${K.display} at ${K.time}`),k()}catch(E){console.error("Error updating pickup details:",E),ge.error("Failed to update pickup time")}}else ge.error("Please select both date and time")},G=m.useMemo(()=>{const D={grabAndGo:[],preOrders:{}};b.forEach(E=>{var X,oe,me,ye,he,Ce,We,tt;const O=((X=E.pickupDetails)==null?void 0:X.orderType)||E.orderType||(E.isPreOrder?"PRE_ORDER":"GO_GRAB");if(O==="GO_GRAB")D.grabAndGo.push({...E,displayPickupTime:((oe=E.pickupDetails)==null?void 0:oe.display)||"Pick up today",displayPickupClock:((me=E.pickupDetails)==null?void 0:me.time)||J().add(30,"minutes").format("h:mm A")});else if(O==="PRE_ORDER"||E.isPreOrder||E.selectedDate){const Me=E.selectedDate||((ye=E.pickupDetails)==null?void 0:ye.date);Me&&(D.preOrders[Me]||(D.preOrders[Me]=[]),D.preOrders[Me].push({...E,displayPickupTime:((he=E.pickupDetails)==null?void 0:he.display)||`Pick up ${J(Me).format("MMM D ddd")}`,displayPickupClock:((Ce=E.pickupDetails)==null?void 0:Ce.time)||"6:30 PM"}))}else D.grabAndGo.push({...E,displayPickupTime:((We=E.pickupDetails)==null?void 0:We.display)||"Pick up today",displayPickupClock:((tt=E.pickupDetails)==null?void 0:tt.time)||J().add(30,"minutes").format("h:mm A")})});const K={};return Object.keys(D.preOrders).sort((E,O)=>J(E).diff(J(O))).forEach(E=>{K[E]=D.preOrders[E]}),D.preOrders=K,D},[b]),F=D=>J(D).format("MMM D ddd");m.useMemo(()=>{const D=[];if(G.grabAndGo.length>0){const K=G.grabAndGo[0];D.push({type:"Go&Grab",date:"Today",time:K.displayPickupClock,count:G.grabAndGo.length})}return Object.entries(G.preOrders).forEach(([K,E])=>{const O=E[0];D.push({type:"Pre-Order",date:F(K),time:O.displayPickupClock,count:E.length})}),D},[G,F]);const z=m.useMemo(()=>{const D=b.reduce((X,oe)=>{var he,Ce;const me=parseFloat(((he=oe.food)==null?void 0:he.cost)||((Ce=oe.food)==null?void 0:Ce.price)||0),ye=parseInt(oe.quantity||1);return X+me*ye},0),E=D*.0725,O=D+E;return{subtotal:D.toFixed(2),salesTax:E.toFixed(2),totalPayment:O.toFixed(2)}},[b]),H=async D=>{if(D.length>0){const K=D[0];i(K),d(null),e&&URL.revokeObjectURL(e);const E=URL.createObjectURL(K);t(E);try{l(!0);const O=(j==null?void 0:j.uid)||"anonymous",X=await gh(K,"payment-screenshots",O);s(X),ge.success("Payment screenshot uploaded successfully!"),console.log("Firebase Storage URL:",X)}catch(O){console.error("Error uploading to Firebase:",O),d(O.message),ge.error(`Upload failed: ${O.message}`)}finally{l(!1)}}},{getRootProps:V,getInputProps:ee,isDragActive:Z}=ko({onDrop:H,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".bmp",".webp"]},multiple:!1,maxSize:10*1024*1024}),te=()=>{e&&URL.revokeObjectURL(e),t(null),i(null),s(null),d(null)},ae=async()=>{try{if(b.length===0){ge.error("Your cart is empty. Please add items before placing an order.");return}if(!N||!j){console.log("🔒 Authentication required for placing order"),S(!0);return}if(!r){ge.error("Please upload a payment confirmation screenshot before placing your order.");return}u(!0);const D=yh({cartItems:b,kitchenInfo:A,firebaseImageUrl:r,currentUser:j,paymentCalculation:z,groupedCartItems:G});console.log("Order data to be placed:",D);const K=await vh(D);q(Mn()),ge.success("Order placed successfully! Redirecting to success page..."),setTimeout(()=>{R("/success",{state:{orderID:D.orderID,orderDocId:K,totalAmount:z.totalPayment,kitchenName:A.name,pickupAddress:A.address,orderedItems:b.map(E=>{var me,ye,he,Ce,We,tt,Me,B,Y,le;const O=((me=E.pickupDetails)==null?void 0:me.date)||E.selectedDate,X=(ye=E.pickupDetails)==null?void 0:ye.orderType,oe=X==="PRE_ORDER"||E.isPreOrder||O&&O!==J().format("YYYY-MM-DD");return console.log("🔍 [PaymentPage] Mapping cart item:",{name:(he=E.food)==null?void 0:he.name,pickupDate:O,orderType:X,isPreOrderItem:oe,originalIsPreOrder:E.isPreOrder}),{id:E.foodId||E.id,foodItemId:E.foodId||E.id,name:((Ce=E.food)==null?void 0:Ce.name)||"Unknown Item",description:((We=E.food)==null?void 0:We.description)||"This dish features tender, juicy flavors",imageUrl:((tt=E.food)==null?void 0:tt.imageUrl)||((Me=E.food)==null?void 0:Me.image),price:((B=E.food)==null?void 0:B.cost)||((Y=E.food)==null?void 0:Y.price)||"0.00",quantity:E.quantity||1,pickupDate:O,pickupTime:(le=E.pickupDetails)==null?void 0:le.time,isPreOrder:oe,orderType:X,isFromPreorder:E.isFromPreorder||oe}})}})},2e3)}catch(D){console.error("Error placing order:",D),ge.error(`Failed to place order: ${D.message}`)}finally{u(!1)}};return a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsxs("div",{className:"padding-20 order-page",children:[a.jsx("h4",{className:"medium-title mb-12",children:"Pickup Address"}),a.jsx("p",{className:"body-text-med mb-20",children:A.address}),a.jsx("div",{className:"hr mb-18"}),a.jsxs("div",{className:"other-payments-wrapper mb-20",children:[a.jsx("h2",{className:"title",children:"Other Payments acceptable to James Kitchen Kitchen"}),a.jsxs("div",{className:"item-flex",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"text",children:"PayPal to"}),a.jsx("a",{className:"email",children:"jamesPayPal00@gmail.com"})]}),a.jsxs("div",{className:"copy",children:[a.jsx(ua,{})," Copy"]})]}),a.jsxs("div",{className:"item-flex",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"text",children:"Venmo to"}),a.jsx("a",{className:"email",children:"jamesVenmo00@gmail.com"})]}),a.jsxs("div",{className:"copy",children:[a.jsx(ua,{})," Copy"]})]})]}),a.jsxs("div",{className:"payment-method mb-20",children:[a.jsx("h5",{className:"medium-title mb-20",children:"Payment Details"}),a.jsx("div",{className:"hr mb-20"}),a.jsxs("div",{className:"item-flex",children:[a.jsx("span",{children:"Subtotal"}),a.jsxs("span",{children:["$",z.subtotal]})]}),a.jsxs("div",{className:"item-flex",children:[a.jsx("span",{children:"Sales Tax (7.25%)"}),a.jsxs("span",{children:["$",z.salesTax]})]}),a.jsx("div",{className:"hr mb-12"}),a.jsxs("div",{className:"item-flex bold",children:[a.jsx("span",{children:"Total Payment"}),a.jsxs("span",{children:["$",z.totalPayment]})]})]}),a.jsxs("div",{className:"order-items-section mb-20",children:[a.jsx("h3",{className:"order-items-title",children:"Select Pickup Date & Time"}),b.length===0?a.jsx("div",{className:"empty-cart-message",children:a.jsx("p",{className:"body-text-med",children:"No items in cart"})}):a.jsxs("div",{className:"pickup-items-list",children:[G.grabAndGo.length>0&&G.grabAndGo.map((D,K)=>{var E,O,X,oe,me,ye;return a.jsxs("div",{className:"pickup-item-row",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("div",{className:"food-image",children:a.jsx("img",{src:((E=D.food)==null?void 0:E.imageUrl)||((O=D.food)==null?void 0:O.image),alt:(X=D.food)==null?void 0:X.name,onError:he=>{he.target.style.display="none"}})}),a.jsxs("div",{className:"food-details",children:[a.jsx("h5",{className:"food-name",children:((oe=D.food)==null?void 0:oe.name)||"Unknown Item"}),a.jsxs("div",{className:"pickup-time",children:["Today, ",D.displayPickupClock]}),a.jsxs("div",{className:"item-quantity",children:["Qty: ",D.quantity," × $",((me=D.food)==null?void 0:me.cost)||((ye=D.food)==null?void 0:ye.price)||"0.00"]})]})]}),a.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>_(D),children:a.jsx("img",{src:da,alt:"Edit pickup time"})})]},`grab-${D.foodId}-${K}`)}),Object.keys(G.preOrders).length>0&&Object.entries(G.preOrders).map(([D,K])=>K.map((E,O)=>{var X,oe,me,ye,he,Ce;return a.jsxs("div",{className:"pickup-item-row",children:[a.jsxs("div",{className:"item-info",children:[a.jsx("div",{className:"food-image",children:a.jsx("img",{src:((X=E.food)==null?void 0:X.imageUrl)||((oe=E.food)==null?void 0:oe.image),alt:(me=E.food)==null?void 0:me.name,onError:We=>{We.target.style.display="none"}})}),a.jsxs("div",{className:"food-details",children:[a.jsx("h5",{className:"food-name",children:((ye=E.food)==null?void 0:ye.name)||"Unknown Item"}),a.jsxs("div",{className:"pickup-time",children:[F(D),", ",E.displayPickupClock]}),a.jsxs("div",{className:"item-quantity",children:["Qty: ",E.quantity," × $",((he=E.food)==null?void 0:he.cost)||((Ce=E.food)==null?void 0:Ce.price)||"0.00"]})]})]}),a.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>_(E),children:a.jsx("img",{src:da,alt:"Edit pickup time"})})]},`preorder-${E.foodId}-${D}-${O}`)}))]})]}),a.jsxs("div",{className:"upload-section mb-20",children:[a.jsx("h5",{className:"medium-title mb-12",children:"Payment Confirmation"}),a.jsx("p",{className:"body-text-med mb-16",children:"Upload payment confirmation screenshot"}),e?a.jsx("div",{className:"upload-preview-container",children:a.jsxs("div",{className:"upload-preview",children:[a.jsx("img",{src:e,alt:"Payment confirmation preview",className:"preview-image"}),a.jsx("button",{type:"button",className:"remove-image-btn",onClick:te,"aria-label":"Remove image",disabled:o,children:a.jsx(pa,{size:16})}),o&&a.jsxs("div",{className:"upload-status-overlay",children:[a.jsx("div",{className:"upload-spinner"}),a.jsx("p",{children:"Uploading to Firebase..."})]})]})}):a.jsxs("div",{...V(),className:`upload-dropzone ${Z?"active":""}`,children:[a.jsx("input",{...ee()}),a.jsxs("div",{className:"upload-content",children:[a.jsx("div",{className:"upload-icon",children:a.jsx(hh,{size:32})}),a.jsx("h6",{className:"upload-title",children:Z?"Drop image here":"Upload Screenshot"}),a.jsxs("p",{className:"upload-description",children:["Drag & drop your payment confirmation or"," ",a.jsx("span",{className:"upload-link",children:"browse files"})]}),a.jsx("p",{className:"upload-formats",children:"Supports: JPG, PNG, GIF, WebP (Max 10MB)"})]})]})]}),a.jsx("button",{className:"action-button",onClick:ae,disabled:p||o||b.length===0,children:p?"Placing Order...":N?"Place My Order":"Login to Place Order"})]})})}),g&&h&&a.jsx("div",{className:"modal-overlay",onClick:k,children:a.jsxs("div",{className:"modal-container",onClick:D=>D.stopPropagation(),children:[a.jsxs("div",{className:"modal-header",children:[a.jsx("h3",{className:"modal-title",children:"Edit Pickup Time"}),a.jsx("button",{className:"modal-close-btn",onClick:k,"aria-label":"Close modal",children:a.jsx(pa,{size:24})})]}),a.jsxs("div",{className:"modal-content",children:[a.jsxs("div",{className:"editing-item-info",children:[a.jsx("h4",{children:((W=h.food)==null?void 0:W.name)||"Food Item"}),a.jsxs("p",{children:["Current pickup: ",h.displayPickupTime," at"," ",h.displayPickupClock]})]}),a.jsx("div",{className:"date-time-picker-container",children:a.jsx(jn,{food:h.food,kitchen:A,orderType:h.orderType||((Q=h.pickupDetails)==null?void 0:Q.orderType)||"GO_GRAB",selectedDate:y,selectedTime:$,onDateChange:C,onTimeChange:P,disabled:!1,className:"payment-modal-picker",dateLabel:"Select Pickup Date:",timeLabel:"Select Pickup Time:"})})]}),a.jsxs("div",{className:"modal-footer",children:[a.jsx("button",{className:"btn-secondary",onClick:k,children:"Cancel"}),a.jsx("button",{className:"btn-primary",onClick:U,disabled:!y||!$,children:"Update Pickup Time"})]})]})}),v&&a.jsx(oo,{onClose:T})]})}const wh="data:image/svg+xml,%3csvg%20width='173'%20height='162'%20viewBox='0%200%20173%20162'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='85.5'%20cy='93'%20r='67'%20fill='%23829F35'/%3e%3ccircle%20cx='166'%20cy='32.5'%20r='6.5'%20fill='%23829F35'/%3e%3cellipse%20cx='11'%20cy='10'%20rx='10.5'%20ry='10'%20fill='%23829F35'/%3e%3cellipse%20cx='5.5'%20cy='136.5'%20rx='5'%20ry='5.5'%20fill='%23829F35'/%3e%3cellipse%20cx='154'%20cy='160'%20rx='2.5'%20ry='2'%20fill='%23829F35'/%3e%3cpath%20d='M82.1976%20111C80.5838%20111%2078.9701%20110.393%2078.048%20109.179L65.138%2094.6121C63.2937%2092.5889%2063.7548%2089.7565%2066.0602%2088.1379C68.3655%2086.5193%2071.593%2086.924%2073.4373%2088.9472L82.1976%2098.8609L101.563%2076.808C103.407%2074.7848%20106.635%2074.3801%20108.94%2075.9987C111.245%2077.6173%20111.706%2080.4498%20109.862%2082.4729L86.3473%20109.179C85.1946%20110.191%2083.8114%20111%2082.1976%20111Z'%20fill='white'/%3e%3ccircle%20cx='114'%20cy='103.5'%20r='2.5'%20fill='white'/%3e%3ccircle%20cx='48.5'%20cy='76'%20r='4'%20fill='white'/%3e%3ccircle%20cx='107'%20cy='54.5'%20r='1.5'%20fill='white'/%3e%3ccircle%20cx='65.5'%20cy='125'%20r='2'%20fill='white'/%3e%3ccircle%20cx='87.5'%20cy='77'%20r='1'%20fill='white'/%3e%3c/svg%3e";function kh(){const t=Bt().state||{},{orderID:n,totalAmount:i,kitchenName:r,pickupAddress:s,orderedItems:o}=t;console.log("🔍 [SuccessPage] Order details received:",{orderID:n,totalAmount:i,kitchenName:r,pickupAddress:s,orderedItemsCount:(o==null?void 0:o.length)||0,orderedItems:o});const l=u=>u?J(u).format("ddd, MMM D"):"Today",c=m.useMemo(()=>{if(!(o!=null&&o.length))return{goGrab:[],preOrders:{}};const u={goGrab:[],preOrders:{}};return console.log("🔍 [SuccessPage] Grouping ordered items:",o),o.forEach(g=>{if(console.log("🔍 [SuccessPage] Processing item:",{name:g.name,isPreOrder:g.isPreOrder,pickupDate:g.pickupDate,hasPickupDate:!!g.pickupDate}),(g.orderType==="PRE_ORDER"||g.orderType==="Pre-Order")&&g.pickupDate){const h=g.pickupDate;u.preOrders[h]||(u.preOrders[h]=[]),u.preOrders[h].push(g),console.log("🔍 [SuccessPage] Added to pre-orders for date:",h)}else u.goGrab.push(g),console.log("🔍 [SuccessPage] Added to go&grab")}),console.log("🔍 [SuccessPage] Final grouping:",{goGrabCount:u.goGrab.length,preOrderDates:Object.keys(u.preOrders),preOrderCounts:Object.entries(u.preOrders).map(([g,f])=>({date:g,count:f.length}))}),u},[o]),d=m.useMemo(()=>{if(!(o!=null&&o.length))return{subtotal:"0.00",tax:"0.00",total:"0.00"};const u=o.reduce((h,x)=>{const y=parseFloat(x.price||x.cost||0),I=parseInt(x.quantity||1);return h+y*I},0),g=u*.0725,f=u+g;return{subtotal:u.toFixed(2),tax:g.toFixed(2),total:f.toFixed(2)}},[o]),p=(o==null?void 0:o.reduce((u,g)=>u+parseInt(g.quantity||1),0))||0;return a.jsx("div",{className:"container",children:a.jsx("div",{className:"mobile-container",children:a.jsxs("div",{className:"padding-20 order-page",children:[a.jsxs("div",{className:"success-image-wrapper pt-5",children:[a.jsx("img",{src:wh,alt:"Success"}),a.jsx("h2",{className:"title",children:"Your order has been successfully placed"})]}),o&&o.length>0?a.jsxs(a.Fragment,{children:[c.goGrab.length>0&&a.jsxs(a.Fragment,{children:[a.jsx("h2",{className:"small-title mb-16",children:"Go & Grab"}),a.jsx("div",{className:"menu-listing",children:c.goGrab.map((u,g)=>a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:u.imageUrl||"/src/assets/images/product.png",alt:u.name||"Food item",onError:f=>{f.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:u.name||"Unknown Item"}),a.jsx("div",{className:"text",children:u.description||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",u.price||u.cost||"0.00"]})]})]}),a.jsx("div",{className:"quantity-warpper",children:a.jsx("div",{className:"right",children:a.jsxs("div",{className:"quantity-text",children:["Qty: ",u.quantity||1]})})})]},`go-grab-${u.foodItemId||u.id}-${g}`))})]}),Object.entries(c.preOrders).map(([u,g])=>a.jsxs("div",{children:[a.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",l(u)]}),a.jsx("div",{className:"menu-listing",children:g.map((f,h)=>a.jsxs("div",{className:"menu-list",children:[a.jsxs("div",{className:"left",children:[a.jsx("div",{className:"image",children:a.jsx("img",{src:f.imageUrl||"/src/assets/images/product.png",alt:f.name||"Food item",onError:x=>{x.target.src="/src/assets/images/product.png"}})}),a.jsxs("div",{className:"data",children:[a.jsx("div",{className:"title",children:f.name||"Unknown Item"}),a.jsx("div",{className:"text",children:f.description||"This dish features tender, juicy flavors"}),a.jsxs("div",{className:"price",children:["$ ",f.price||f.cost||"0.00"]})]})]}),a.jsx("div",{className:"quantity-warpper",children:a.jsxs("div",{className:"right flex-column",children:[a.jsxs("div",{className:"quantity-text",children:["Qty: ",f.quantity||1]}),f.pickupTime&&a.jsx("div",{className:"pickup-time-display",children:f.pickupTime})]})})]},`preorder-${f.foodItemId||f.id}-${u}-${h}`))})]},u)),a.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsxs("span",{children:["Subtotal (",p," item",p!==1?"s":"","):"]}),a.jsxs("span",{children:["$",d.subtotal]})]}),a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[a.jsx("span",{children:"Tax (7.25%):"}),a.jsxs("span",{children:["$",d.tax]})]}),a.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[a.jsx("span",{children:"Total:"}),a.jsxs("span",{children:["$",d.total]})]})]})]}):a.jsxs("div",{style:{padding:"20px",background:"#f0f0f0",margin:"20px 0",borderRadius:"8px"},children:[a.jsx("h4",{children:"Debug: No Ordered Items Found"}),a.jsxs("p",{children:["Order Details: ",JSON.stringify(t,null,2)]})]}),a.jsx("div",{className:"success-actions mb-16",children:a.jsx(Ot,{to:"/",className:"action-button",children:"Back to Home"})}),a.jsxs("div",{className:"scanner-bottom mb-16",children:[a.jsxs("div",{className:"text",children:["Order can be viewed in the ",a.jsx("strong",{children:"HomeFresh"})," app, available in the iOS App Store. The app also sends reminders on the morning of each scheduled pickup."]}),a.jsx("div",{className:"qr",children:a.jsx("img",{src:io,alt:"QR Code"})})]})]})})})}function jh(){const{user:e,initializing:t}=or(),n=Bt();return t?a.jsx("div",{className:"d-flex vh-100 align-items-center justify-content-center",children:"Loading..."}):e?a.jsx(Io,{}):a.jsx(Eo,{to:"/login",replace:!0,state:{from:n}})}function Ch(){return a.jsxs(Ao,{children:[a.jsx(Ee,{path:"/",element:a.jsx(cm,{})}),a.jsx(Ee,{path:"/foods",element:a.jsx(Qr,{})}),a.jsx(Ee,{path:"/foods/:kitchenId",element:a.jsx(Qr,{})}),a.jsx(Ee,{path:"/share",element:a.jsx(Jr,{})}),a.jsx(Ee,{path:"/share/",element:a.jsx(Jr,{})}),a.jsx(Ee,{path:"/order",element:a.jsx(fm,{})}),a.jsx(Ee,{path:"/checkout",element:a.jsx(bh,{})}),a.jsx(Ee,{path:"/success",element:a.jsx(kh,{})}),a.jsx(Ee,{path:"/login",element:a.jsx(em,{})}),a.jsx(Ee,{path:"/wechat/callback",element:a.jsx(nm,{})}),a.jsx(Ee,{path:"/wechat/debug",element:a.jsx(rm,{})}),a.jsx(Ee,{element:a.jsx(jh,{}),children:a.jsx(Ee,{path:"/home",element:a.jsx(Xf,{})})})]})}const Sh=()=>{const e=Xe(),t=_e(s=>s.auth),[n,i]=m.useState(window.innerWidth<768);m.useEffect(()=>{const s=()=>{i(window.innerWidth<768)};return window.addEventListener("resize",s),()=>window.removeEventListener("resize",s)},[]);const r=()=>{e(ts())};return n?null:a.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#f8f9fa",padding:"15px",border:"2px solid #dee2e6",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",zIndex:9999,maxWidth:"300px"},children:[a.jsx("h6",{style:{margin:"0 0 10px 0",fontSize:"14px"},children:"🔍 Auth Debug Panel"}),a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsx("strong",{children:"Is Authenticated:"})," ",a.jsx("span",{style:{color:t.isAuthenticated?"green":"red"},children:t.isAuthenticated?"✅ YES":"❌ NO"})]}),a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsx("strong",{children:"Auth Status:"})," ",a.jsx("span",{style:{color:t.loading?"orange":"gray"},children:t.loading?"� LOADING":"READY"})]}),a.jsxs("div",{style:{marginBottom:"10px"},children:[a.jsx("strong",{children:"User:"})," ",t.user?a.jsx("span",{style:{color:"green"},children:t.user.nickname||t.user.openid||"WeChat User"}):a.jsx("span",{style:{color:"red"},children:"None"})]}),t.error&&a.jsxs("div",{style:{marginBottom:"10px",color:"red"},children:[a.jsx("strong",{children:"Error:"})," ",t.error]}),t.isAuthenticated&&a.jsx("button",{onClick:r,style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:"🔓 Logout"}),a.jsx("div",{style:{marginTop:"10px",fontSize:"10px",color:"#6c757d"},children:"WeChat Authentication System"})]})};Sa(document.getElementById("root")).render(a.jsx(Mi.StrictMode,{children:a.jsx(vl,{store:Js,children:a.jsx(Ea,{loading:a.jsx("div",{children:"Loading..."}),persistor:Xs,children:a.jsx(Oo,{children:a.jsxs(Jf,{children:[a.jsx(Ch,{}),a.jsx(Sh,{}),a.jsx(mc,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:3e3,style:{background:"#fff",color:"#333",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #e0e0e0"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})})}));
