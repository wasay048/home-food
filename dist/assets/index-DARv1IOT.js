var Rs=Object.defineProperty;var Cs=(e,t,n)=>t in e?Rs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Bn=(e,t,n)=>Cs(e,typeof t!="symbol"?t+"":t,n);import{r as h,a as Ls,u as or,b as vt,c as Ds,g as sr,d as Nt,e as Es,L as Be,R as Ei,N as _s,O as As,f as Is,h as Se,B as Ts}from"./vendor-Ctg7QK9K.js";import{_ as Et,C as _t,r as mt,S as Os,F as _i,g as lr,a as xt,b as Ft,c as Ps,d as Ns,E as cr,o as Fs,L as $s,i as dr,e as ur,v as pr,f as ea,h as fr,j as Ms,k as ta,l as Us,m as mr,n as zs,p as jt,q as Je,s as se,t as te,u as ne,w as _e,x as Le,y as Bs,z as qs,A as hr,B as Ws,D as Gs,O as Ks,G as Hs,H as na,I as lt,J as qn,K as Wn}from"./firebase-BmPdqLyL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();var gr={exports:{}},kn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ys=h,Vs=Symbol.for("react.element"),Qs=Symbol.for("react.fragment"),Zs=Object.prototype.hasOwnProperty,Js=Ys.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Xs={key:!0,ref:!0,__self:!0,__source:!0};function vr(e,t,n){var i,a={},r=null,s=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)Zs.call(t,i)&&!Xs.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Vs,type:e,key:r,ref:s,props:a,_owner:Js.current}}kn.Fragment=Qs;kn.jsx=vr;kn.jsxs=vr;gr.exports=kn;var o=gr.exports,xr,ia=Ls;xr=ia.createRoot,ia.hydrateRoot;var yr={exports:{}},wr={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var $t=h;function el(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var tl=typeof Object.is=="function"?Object.is:el,nl=$t.useSyncExternalStore,il=$t.useRef,al=$t.useEffect,rl=$t.useMemo,ol=$t.useDebugValue;wr.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var r=il(null);if(r.current===null){var s={hasValue:!1,value:null};r.current=s}else s=r.current;r=rl(function(){function c(g){if(!d){if(d=!0,f=g,g=i(g),a!==void 0&&s.hasValue){var w=s.value;if(a(w,g))return p=w}return p=g}if(w=p,tl(f,g))return w;var C=i(g);return a!==void 0&&a(w,C)?(f=g,w):(f=g,p=C)}var d=!1,f,p,v=n===void 0?null:n;return[function(){return c(t())},v===null?void 0:function(){return c(v())}]},[t,n,i,a]);var l=nl(e,r[0],r[1]);return al(function(){s.hasValue=!0,s.value=l},[l]),ol(l),l};yr.exports=wr;var sl=yr.exports;function ll(e){e()}function cl(){let e=null,t=null;return{clear(){e=null,t=null},notify(){ll(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var aa={notify(){},get:()=>[]};function dl(e,t){let n,i=aa,a=0,r=!1;function s(C){f();const I=i.subscribe(C);let L=!1;return()=>{L||(L=!0,I(),p())}}function l(){i.notify()}function c(){w.onStateChange&&w.onStateChange()}function d(){return r}function f(){a++,n||(n=e.subscribe(c),i=cl())}function p(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=aa)}function v(){r||(r=!0,f())}function g(){r&&(r=!1,p())}const w={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:v,tryUnsubscribe:g,getListeners:()=>i};return w}var ul=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",pl=ul(),fl=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",ml=fl(),hl=()=>pl||ml?h.useLayoutEffect:h.useEffect,gl=hl(),Gn=Symbol.for("react-redux-context"),Kn=typeof globalThis!="undefined"?globalThis:{};function vl(){var n;if(!h.createContext)return{};const e=(n=Kn[Gn])!=null?n:Kn[Gn]=new Map;let t=e.get(h.createContext);return t||(t=h.createContext(null),e.set(h.createContext,t)),t}var We=vl();function xl(e){const{children:t,context:n,serverState:i,store:a}=e,r=h.useMemo(()=>{const c=dl(a);return{store:a,subscription:c,getServerState:i?()=>i:void 0}},[a,i]),s=h.useMemo(()=>a.getState(),[a]);gl(()=>{const{subscription:c}=r;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[r,s]);const l=n||We;return h.createElement(l.Provider,{value:r},t)}var yl=xl;function Ai(e=We){return function(){return h.useContext(e)}}var br=Ai();function kr(e=We){const t=e===We?br:Ai(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var wl=kr();function bl(e=We){const t=e===We?wl:kr(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var Ge=bl(),kl=(e,t)=>e===t;function jl(e=We){const t=e===We?br:Ai(e),n=(i,a={})=>{const{equalityFn:r=kl}=typeof a=="function"?{equalityFn:a}:a,s=t(),{store:l,subscription:c,getServerState:d}=s;h.useRef(!0);const f=h.useCallback({[i.name](v){return i(v)}}[i.name],[i]),p=sl.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,f,r);return h.useDebugValue(p),p};return Object.assign(n,{withTypes:()=>n}),n}var he=jl();function Zt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Zt=function(n){return typeof n}:Zt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Zt(e)}function Sl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Rl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cl(e,t,n){return t&&Rl(e.prototype,t),e}function Ll(e,t){return t&&(Zt(t)==="object"||typeof t=="function")?t:Jt(e)}function si(e){return si=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},si(e)}function Jt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&li(e,t)}function li(e,t){return li=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},li(e,t)}function Xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var jr=function(e){Dl(t,e);function t(){var n,i;Sl(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return i=Ll(this,(n=si(t)).call.apply(n,[this].concat(r))),Xt(Jt(i),"state",{bootstrapped:!1}),Xt(Jt(i),"_unsubscribe",void 0),Xt(Jt(i),"handlePersistorState",function(){var l=i.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return Cl(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(h.PureComponent);Xt(jr,"defaultProps",{children:null,loading:null});let El={data:""},_l=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||El,Al=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Il=/\/\*[^]*?\*\/|  +/g,ra=/\n+/g,Me=(e,t)=>{let n="",i="",a="";for(let r in e){let s=e[r];r[0]=="@"?r[1]=="i"?n=r+" "+s+";":i+=r[1]=="f"?Me(s,r):r+"{"+Me(s,r[1]=="k"?"":t)+"}":typeof s=="object"?i+=Me(s,t?t.replace(/([^,])+/g,l=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):r):s!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Me.p?Me.p(r,s):r+":"+s+";")}return n+(t&&a?t+"{"+a+"}":a)+i},Te={},Sr=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Sr(e[n]);return t}return e},Tl=(e,t,n,i,a)=>{let r=Sr(e),s=Te[r]||(Te[r]=(c=>{let d=0,f=11;for(;d<c.length;)f=101*f+c.charCodeAt(d++)>>>0;return"go"+f})(r));if(!Te[s]){let c=r!==e?e:(d=>{let f,p,v=[{}];for(;f=Al.exec(d.replace(Il,""));)f[4]?v.shift():f[3]?(p=f[3].replace(ra," ").trim(),v.unshift(v[0][p]=v[0][p]||{})):v[0][f[1]]=f[2].replace(ra," ").trim();return v[0]})(e);Te[s]=Me(a?{["@keyframes "+s]:c}:c,n?"":"."+s)}let l=n&&Te.g?Te.g:null;return n&&(Te.g=Te[s]),((c,d,f,p)=>{p?d.data=d.data.replace(p,c):d.data.indexOf(c)===-1&&(d.data=f?c+d.data:d.data+c)})(Te[s],t,i,l),s},Ol=(e,t,n)=>e.reduce((i,a,r)=>{let s=t[r];if(s&&s.call){let l=s(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;s=c?"."+c:l&&typeof l=="object"?l.props?"":Me(l,""):l===!1?"":l}return i+a+(s==null?"":s)},"");function jn(e){let t=this||{},n=e.call?e(t.p):e;return Tl(n.unshift?n.raw?Ol(n,[].slice.call(arguments,1),t.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):n,_l(t.target),t.g,t.o,t.k)}let Rr,ci,di;jn.bind({g:1});let Fe=jn.bind({k:1});function Pl(e,t,n,i){Me.p=t,Rr=e,ci=n,di=i}function Ke(e,t){let n=this||{};return function(){let i=arguments;function a(r,s){let l=Object.assign({},r),c=l.className||a.className;n.p=Object.assign({theme:ci&&ci()},l),n.o=/ *go\d+/.test(c),l.className=jn.apply(n,i)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),di&&d[0]&&di(l),Rr(d,l)}return a}}var Nl=e=>typeof e=="function",cn=(e,t)=>Nl(e)?e(t):e,Fl=(()=>{let e=0;return()=>(++e).toString()})(),Cr=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),$l=20,Ii="default",Lr=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:i}=t;return Lr(e,{type:e.toasts.find(s=>s.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+r}))}}},en=[],Dr={toasts:[],pausedAt:void 0,settings:{toastLimit:$l}},Ae={},Er=(e,t=Ii)=>{Ae[t]=Lr(Ae[t]||Dr,e),en.forEach(([n,i])=>{n===t&&i(Ae[t])})},_r=e=>Object.keys(Ae).forEach(t=>Er(e,t)),Ml=e=>Object.keys(Ae).find(t=>Ae[t].toasts.some(n=>n.id===e)),Sn=(e=Ii)=>t=>{Er(t,e)},Ul={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},zl=(e={},t=Ii)=>{let[n,i]=h.useState(Ae[t]||Dr),a=h.useRef(Ae[t]);h.useEffect(()=>(a.current!==Ae[t]&&i(Ae[t]),en.push([t,i]),()=>{let s=en.findIndex(([l])=>l===t);s>-1&&en.splice(s,1)}),[t]);let r=n.toasts.map(s=>{var l,c,d;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((l=e[s.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((c=e[s.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Ul[s.type],style:{...e.style,...(d=e[s.type])==null?void 0:d.style,...s.style}}});return{...n,toasts:r}},Bl=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Fl()}),Mt=e=>(t,n)=>{let i=Bl(t,e,n);return Sn(i.toasterId||Ml(i.id))({type:2,toast:i}),i.id},ce=(e,t)=>Mt("blank")(e,t);ce.error=Mt("error");ce.success=Mt("success");ce.loading=Mt("loading");ce.custom=Mt("custom");ce.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Sn(t)(n):_r(n)};ce.dismissAll=e=>ce.dismiss(void 0,e);ce.remove=(e,t)=>{let n={type:4,toastId:e};t?Sn(t)(n):_r(n)};ce.removeAll=e=>ce.remove(void 0,e);ce.promise=(e,t,n)=>{let i=ce.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let r=t.success?cn(t.success,a):void 0;return r?ce.success(r,{id:i,...n,...n==null?void 0:n.success}):ce.dismiss(i),a}).catch(a=>{let r=t.error?cn(t.error,a):void 0;r?ce.error(r,{id:i,...n,...n==null?void 0:n.error}):ce.dismiss(i)}),e};var ql=1e3,Wl=(e,t="default")=>{let{toasts:n,pausedAt:i}=zl(e,t),a=h.useRef(new Map).current,r=h.useCallback((p,v=ql)=>{if(a.has(p))return;let g=setTimeout(()=>{a.delete(p),s({type:4,toastId:p})},v);a.set(p,g)},[]);h.useEffect(()=>{if(i)return;let p=Date.now(),v=n.map(g=>{if(g.duration===1/0)return;let w=(g.duration||0)+g.pauseDuration-(p-g.createdAt);if(w<0){g.visible&&ce.dismiss(g.id);return}return setTimeout(()=>ce.dismiss(g.id,t),w)});return()=>{v.forEach(g=>g&&clearTimeout(g))}},[n,i,t]);let s=h.useCallback(Sn(t),[t]),l=h.useCallback(()=>{s({type:5,time:Date.now()})},[s]),c=h.useCallback((p,v)=>{s({type:1,toast:{id:p,height:v}})},[s]),d=h.useCallback(()=>{i&&s({type:6,time:Date.now()})},[i,s]),f=h.useCallback((p,v)=>{let{reverseOrder:g=!1,gutter:w=8,defaultPosition:C}=v||{},I=n.filter(F=>(F.position||C)===(p.position||C)&&F.height),L=I.findIndex(F=>F.id===p.id),z=I.filter((F,A)=>A<L&&F.visible).length;return I.filter(F=>F.visible).slice(...g?[z+1]:[0,z]).reduce((F,A)=>F+(A.height||0)+w,0)},[n]);return h.useEffect(()=>{n.forEach(p=>{if(p.dismissed)r(p.id,p.removeDelay);else{let v=a.get(p.id);v&&(clearTimeout(v),a.delete(p.id))}})},[n,r]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:f}}},Gl=Fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Kl=Fe`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Hl=Fe`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yl=Ke("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Gl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Kl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Hl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Vl=Fe`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Ql=Ke("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Vl} 1s linear infinite;
`,Zl=Fe`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Jl=Fe`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Xl=Ke("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Zl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Jl} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,ec=Ke("div")`
  position: absolute;
`,tc=Ke("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,nc=Fe`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ic=Ke("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${nc} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,ac=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?h.createElement(ic,null,t):t:n==="blank"?null:h.createElement(tc,null,h.createElement(Ql,{...i}),n!=="loading"&&h.createElement(ec,null,n==="error"?h.createElement(Yl,{...i}):h.createElement(Xl,{...i})))},rc=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,oc=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sc="0%{opacity:0;} 100%{opacity:1;}",lc="0%{opacity:1;} 100%{opacity:0;}",cc=Ke("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,dc=Ke("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,uc=(e,t)=>{let n=e.includes("top")?1:-1,[i,a]=Cr()?[sc,lc]:[rc(n),oc(n)];return{animation:t?`${Fe(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Fe(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},pc=h.memo(({toast:e,position:t,style:n,children:i})=>{let a=e.height?uc(e.position||t||"top-center",e.visible):{opacity:0},r=h.createElement(ac,{toast:e}),s=h.createElement(dc,{...e.ariaProps},cn(e.message,e));return h.createElement(cc,{className:e.className,style:{...a,...n,...e.style}},typeof i=="function"?i({icon:r,message:s}):h.createElement(h.Fragment,null,r,s))});Pl(h.createElement);var fc=({id:e,className:t,style:n,onHeightUpdate:i,children:a})=>{let r=h.useCallback(s=>{if(s){let l=()=>{let c=s.getBoundingClientRect().height;i(e,c)};l(),new MutationObserver(l).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return h.createElement("div",{ref:r,className:t,style:n},a)},mc=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Cr()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...a}},hc=jn`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Gt=16,gc=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:a,toasterId:r,containerStyle:s,containerClassName:l})=>{let{toasts:c,handlers:d}=Wl(n,r);return h.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:Gt,left:Gt,right:Gt,bottom:Gt,pointerEvents:"none",...s},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(f=>{let p=f.position||t,v=d.calculateOffset(f,{reverseOrder:e,gutter:i,defaultPosition:t}),g=mc(p,v);return h.createElement(fc,{id:f.id,key:f.id,onHeightUpdate:d.updateHeight,className:f.visible?hc:"",style:g},f.type==="custom"?cn(f.message,f):a?a(f):h.createElement(pc,{toast:f,position:p}))}))},ft=ce;function ue(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var vc=typeof Symbol=="function"&&Symbol.observable||"@@observable",oa=vc,Hn=()=>Math.random().toString(36).substring(7).split("").join("."),xc={INIT:`@@redux/INIT${Hn()}`,REPLACE:`@@redux/REPLACE${Hn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Hn()}`},dn=xc;function Ti(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Oi(e,t,n){if(typeof e!="function")throw new Error(ue(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(ue(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(ue(1));return n(Oi)(e,t)}let i=e,a=t,r=new Map,s=r,l=0,c=!1;function d(){s===r&&(s=new Map,r.forEach((I,L)=>{s.set(L,I)}))}function f(){if(c)throw new Error(ue(3));return a}function p(I){if(typeof I!="function")throw new Error(ue(4));if(c)throw new Error(ue(5));let L=!0;d();const z=l++;return s.set(z,I),function(){if(L){if(c)throw new Error(ue(6));L=!1,d(),s.delete(z),r=null}}}function v(I){if(!Ti(I))throw new Error(ue(7));if(typeof I.type=="undefined")throw new Error(ue(8));if(typeof I.type!="string")throw new Error(ue(17));if(c)throw new Error(ue(9));try{c=!0,a=i(a,I)}finally{c=!1}return(r=s).forEach(z=>{z()}),I}function g(I){if(typeof I!="function")throw new Error(ue(10));i=I,v({type:dn.REPLACE})}function w(){const I=p;return{subscribe(L){if(typeof L!="object"||L===null)throw new Error(ue(11));function z(){const A=L;A.next&&A.next(f())}return z(),{unsubscribe:I(z)}},[oa](){return this}}}return v({type:dn.INIT}),{dispatch:v,subscribe:p,getState:f,replaceReducer:g,[oa]:w}}function yc(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:dn.INIT})=="undefined")throw new Error(ue(12));if(typeof n(void 0,{type:dn.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(ue(13))})}function Ar(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const s=t[r];typeof e[s]=="function"&&(n[s]=e[s])}const i=Object.keys(n);let a;try{yc(n)}catch(r){a=r}return function(s={},l){if(a)throw a;let c=!1;const d={};for(let f=0;f<i.length;f++){const p=i[f],v=n[p],g=s[p],w=v(g,l);if(typeof w=="undefined")throw l&&l.type,new Error(ue(14));d[p]=w,c=c||w!==g}return c=c||i.length!==Object.keys(s).length,c?d:s}}function un(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function wc(...e){return t=>(n,i)=>{const a=t(n,i);let r=()=>{throw new Error(ue(15))};const s={getState:a.getState,dispatch:(c,...d)=>r(c,...d)},l=e.map(c=>c(s));return r=un(...l)(a.dispatch),{...a,dispatch:r}}}function bc(e){return Ti(e)&&"type"in e&&typeof e.type=="string"}var Ir=Symbol.for("immer-nothing"),sa=Symbol.for("immer-draftable"),ke=Symbol.for("immer-state");function Ce(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var ht=Object.getPrototypeOf;function it(e){return!!e&&!!e[ke]}function $e(e){var t;return e?Tr(e)||Array.isArray(e)||!!e[sa]||!!((t=e.constructor)!=null&&t[sa])||Cn(e)||Ln(e):!1}var kc=Object.prototype.constructor.toString();function Tr(e){if(!e||typeof e!="object")return!1;const t=ht(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===kc}function pn(e,t){Rn(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function Rn(e){const t=e[ke];return t?t.type_:Array.isArray(e)?1:Cn(e)?2:Ln(e)?3:0}function ui(e,t){return Rn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function Or(e,t,n){const i=Rn(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function jc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Cn(e){return e instanceof Map}function Ln(e){return e instanceof Set}function He(e){return e.copy_||e.base_}function pi(e,t){if(Cn(e))return new Map(e);if(Ln(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Tr(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[ke];let a=Reflect.ownKeys(i);for(let r=0;r<a.length;r++){const s=a[r],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[s]})}return Object.create(ht(e),i)}else{const i=ht(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function Pi(e,t=!1){return Dn(e)||it(e)||!$e(e)||(Rn(e)>1&&(e.set=e.add=e.clear=e.delete=Sc),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Pi(i,!0))),e}function Sc(){Ce(2)}function Dn(e){return Object.isFrozen(e)}var Rc={};function at(e){const t=Rc[e];return t||Ce(0,e),t}var At;function Pr(){return At}function Cc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function la(e,t){t&&(at("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function fi(e){mi(e),e.drafts_.forEach(Lc),e.drafts_=null}function mi(e){e===At&&(At=e.parent_)}function ca(e){return At=Cc(At,e)}function Lc(e){const t=e[ke];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function da(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[ke].modified_&&(fi(t),Ce(4)),$e(e)&&(e=fn(t,e),t.parent_||mn(t,e)),t.patches_&&at("Patches").generateReplacementPatches_(n[ke].base_,e,t.patches_,t.inversePatches_)):e=fn(t,n,[]),fi(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ir?e:void 0}function fn(e,t,n){if(Dn(t))return t;const i=t[ke];if(!i)return pn(t,(a,r)=>ua(e,i,t,a,r,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return mn(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let r=a,s=!1;i.type_===3&&(r=new Set(a),a.clear(),s=!0),pn(r,(l,c)=>ua(e,i,a,l,c,n,s)),mn(e,a,!1),n&&e.patches_&&at("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function ua(e,t,n,i,a,r,s){if(it(a)){const l=r&&t&&t.type_!==3&&!ui(t.assigned_,i)?r.concat(i):void 0,c=fn(e,a,l);if(Or(n,i,c),it(c))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if($e(a)&&!Dn(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;fn(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&mn(e,a)}}function mn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pi(t,n)}function Dc(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:Pr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,r=Ni;n&&(a=[i],r=It);const{revoke:s,proxy:l}=Proxy.revocable(a,r);return i.draft_=l,i.revoke_=s,l}var Ni={get(e,t){if(t===ke)return e;const n=He(e);if(!ui(n,t))return Ec(e,n,t);const i=n[t];return e.finalized_||!$e(i)?i:i===Yn(e.base_,t)?(Vn(e),e.copy_[t]=gi(i,e)):i},has(e,t){return t in He(e)},ownKeys(e){return Reflect.ownKeys(He(e))},set(e,t,n){const i=Nr(He(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=Yn(He(e),t),r=a==null?void 0:a[ke];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(jc(n,a)&&(n!==void 0||ui(e.base_,t)))return!0;Vn(e),hi(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Yn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Vn(e),hi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=He(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Ce(11)},getPrototypeOf(e){return ht(e.base_)},setPrototypeOf(){Ce(12)}},It={};pn(Ni,(e,t)=>{It[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});It.deleteProperty=function(e,t){return It.set.call(this,e,t,void 0)};It.set=function(e,t,n){return Ni.set.call(this,e[0],t,n,e[0])};function Yn(e,t){const n=e[ke];return(n?He(n):e)[t]}function Ec(e,t,n){var a;const i=Nr(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function Nr(e,t){if(!(t in e))return;let n=ht(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=ht(n)}}function hi(e){e.modified_||(e.modified_=!0,e.parent_&&hi(e.parent_))}function Vn(e){e.copy_||(e.copy_=pi(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var _c=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const s=this;return function(c=r,...d){return s.produce(c,f=>n.call(this,f,...d))}}typeof n!="function"&&Ce(6),i!==void 0&&typeof i!="function"&&Ce(7);let a;if($e(t)){const r=ca(this),s=gi(t,void 0);let l=!0;try{a=n(s),l=!1}finally{l?fi(r):mi(r)}return la(r,i),da(a,r)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===Ir&&(a=void 0),this.autoFreeze_&&Pi(a,!0),i){const r=[],s=[];at("Patches").generateReplacementPatches_(t,a,r,s),i(r,s)}return a}else Ce(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,c=>t(c,...l));let i,a;return[this.produce(t,n,(s,l)=>{i=s,a=l}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){$e(e)||Ce(8),it(e)&&(e=Ac(e));const t=ca(this),n=gi(e,void 0);return n[ke].isManual_=!0,mi(t),n}finishDraft(e,t){const n=e&&e[ke];(!n||!n.isManual_)&&Ce(9);const{scope_:i}=n;return la(i,t),da(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=at("Patches").applyPatches_;return it(e)?i(e,t):this.produce(e,a=>i(a,t))}};function gi(e,t){const n=Cn(e)?at("MapSet").proxyMap_(e,t):Ln(e)?at("MapSet").proxySet_(e,t):Dc(e,t);return(t?t.scope_:Pr()).drafts_.push(n),n}function Ac(e){return it(e)||Ce(10,e),Fr(e)}function Fr(e){if(!$e(e)||Dn(e))return e;const t=e[ke];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=pi(e,t.scope_.immer_.useStrictShallowCopy_)}else n=pi(e,!0);return pn(n,(i,a)=>{Or(n,i,Fr(a))}),t&&(t.finalized_=!1),n}var je=new _c,$r=je.produce;je.produceWithPatches.bind(je);je.setAutoFreeze.bind(je);je.setUseStrictShallowCopy.bind(je);je.applyPatches.bind(je);je.createDraft.bind(je);je.finishDraft.bind(je);function Mr(e){return({dispatch:n,getState:i})=>a=>r=>typeof r=="function"?r(n,i,e):a(r)}var Ic=Mr(),Tc=Mr,Oc=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?un:un.apply(null,arguments)},Pc=e=>e&&typeof e.match=="function";function St(e,t){function n(...i){if(t){let a=t(...i);if(!a)throw new Error(Ne(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>bc(i)&&i.type===e,n}var Ur=class kt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,kt.prototype)}static get[Symbol.species](){return kt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new kt(...t[0].concat(this)):new kt(...t.concat(this))}};function pa(e){return $e(e)?$r(e,()=>{}):e}function Kt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Nc(e){return typeof e=="boolean"}var Fc=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:r=!0}=t!=null?t:{};let s=new Ur;return n&&(Nc(n)?s.push(Ic):s.push(Tc(n.extraArgument))),s},$c="RTK_autoBatch",fa=e=>t=>{setTimeout(t,e)},Mc=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let a=!0,r=!1,s=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:fa(10):e.type==="callback"?e.queueNotification:fa(e.timeout),d=()=>{s=!1,r&&(r=!1,l.forEach(f=>f()))};return Object.assign({},i,{subscribe(f){const p=()=>a&&f(),v=i.subscribe(p);return l.add(f),()=>{v(),l.delete(f)}},dispatch(f){var p;try{return a=!((p=f==null?void 0:f.meta)!=null&&p[$c]),r=!a,r&&(s||(s=!0,c(d))),i.dispatch(f)}finally{a=!0}}})},Uc=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let a=new Ur(e);return i&&a.push(Mc(typeof i=="object"?i:void 0)),a};function zc(e){const t=Fc(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:r=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Ti(n))l=Ar(n);else throw new Error(Ne(1));let c;typeof i=="function"?c=i(t):c=t();let d=un;a&&(d=Oc({trace:!1,...typeof a=="object"&&a}));const f=wc(...c),p=Uc(f);let v=typeof s=="function"?s(p):p();const g=d(...v);return Oi(l,r,g)}function zr(e){const t={},n=[];let i;const a={addCase(r,s){const l=typeof r=="string"?r:r.type;if(!l)throw new Error(Ne(28));if(l in t)throw new Error(Ne(29));return t[l]=s,a},addMatcher(r,s){return n.push({matcher:r,reducer:s}),a},addDefaultCase(r){return i=r,a}};return e(a),[t,n,i]}function Bc(e){return typeof e=="function"}function qc(e,t){let[n,i,a]=zr(t),r;if(Bc(e))r=()=>pa(e());else{const l=pa(e);r=()=>l}function s(l=r(),c){let d=[n[c.type],...i.filter(({matcher:f})=>f(c)).map(({reducer:f})=>f)];return d.filter(f=>!!f).length===0&&(d=[a]),d.reduce((f,p)=>{if(p)if(it(f)){const g=p(f,c);return g===void 0?f:g}else{if($e(f))return $r(f,v=>p(v,c));{const v=p(f,c);if(v===void 0){if(f===null)return f;throw Error("A case reducer on a non-draftable value must not return undefined")}return v}}return f},l)}return s.getInitialState=r,s}var Wc=(e,t)=>Pc(e)?e.match(t):e(t);function Gc(...e){return t=>e.some(n=>Wc(n,t))}var Kc="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Hc=(e=21)=>{let t="",n=e;for(;n--;)t+=Kc[Math.random()*64|0];return t},Yc=["name","message","stack","code"],Qn=class{constructor(e,t){Bn(this,"_type");this.payload=e,this.meta=t}},ma=class{constructor(e,t){Bn(this,"_type");this.payload=e,this.meta=t}},Vc=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Yc)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},ha="External signal was aborted",J=(()=>{function e(t,n,i){const a=St(t+"/fulfilled",(c,d,f,p)=>({payload:c,meta:{...p||{},arg:f,requestId:d,requestStatus:"fulfilled"}})),r=St(t+"/pending",(c,d,f)=>({payload:void 0,meta:{...f||{},arg:d,requestId:c,requestStatus:"pending"}})),s=St(t+"/rejected",(c,d,f,p,v)=>({payload:p,error:(i&&i.serializeError||Vc)(c||"Rejected"),meta:{...v||{},arg:f,requestId:d,rejectedWithValue:!!p,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(f,p,v)=>{const g=i!=null&&i.idGenerator?i.idGenerator(c):Hc(),w=new AbortController;let C,I;function L(F){I=F,w.abort()}d&&(d.aborted?L(ha):d.addEventListener("abort",()=>L(ha),{once:!0}));const z=async function(){var R,_;let F;try{let N=(R=i==null?void 0:i.condition)==null?void 0:R.call(i,c,{getState:p,extra:v});if(Zc(N)&&(N=await N),N===!1||w.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const B=new Promise((T,S)=>{C=()=>{S({name:"AbortError",message:I||"Aborted"})},w.signal.addEventListener("abort",C)});f(r(g,c,(_=i==null?void 0:i.getPendingMeta)==null?void 0:_.call(i,{requestId:g,arg:c},{getState:p,extra:v}))),F=await Promise.race([B,Promise.resolve(n(c,{dispatch:f,getState:p,extra:v,requestId:g,signal:w.signal,abort:L,rejectWithValue:(T,S)=>new Qn(T,S),fulfillWithValue:(T,S)=>new ma(T,S)})).then(T=>{if(T instanceof Qn)throw T;return T instanceof ma?a(T.payload,g,c,T.meta):a(T,g,c)})])}catch(N){F=N instanceof Qn?s(null,g,c,N.payload,N.meta):s(N,g,c)}finally{C&&w.signal.removeEventListener("abort",C)}return i&&!i.dispatchConditionRejection&&s.match(F)&&F.meta.condition||f(F),F}();return Object.assign(z,{abort:L,requestId:g,arg:c,unwrap(){return z.then(Qc)}})}}return Object.assign(l,{pending:r,rejected:s,fulfilled:a,settled:Gc(s,a),typePrefix:t})}return e.withTypes=()=>e,e})();function Qc(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Zc(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Jc=Symbol.for("rtk-slice-createasyncthunk");function Xc(e,t){return`${e}/${t}`}function ed({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Jc];return function(a){const{name:r,reducerPath:s=r}=a;if(!r)throw new Error(Ne(11));const l=(typeof a.reducers=="function"?a.reducers(nd()):a.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},f={addCase(A,R){const _=typeof A=="string"?A:A.type;if(!_)throw new Error(Ne(12));if(_ in d.sliceCaseReducersByType)throw new Error(Ne(13));return d.sliceCaseReducersByType[_]=R,f},addMatcher(A,R){return d.sliceMatchers.push({matcher:A,reducer:R}),f},exposeAction(A,R){return d.actionCreators[A]=R,f},exposeCaseReducer(A,R){return d.sliceCaseReducersByName[A]=R,f}};c.forEach(A=>{const R=l[A],_={reducerName:A,type:Xc(r,A),createNotation:typeof a.reducers=="function"};ad(R)?od(_,R,f,t):id(_,R,f)});function p(){const[A={},R=[],_=void 0]=typeof a.extraReducers=="function"?zr(a.extraReducers):[a.extraReducers],N={...A,...d.sliceCaseReducersByType};return qc(a.initialState,B=>{for(let T in N)B.addCase(T,N[T]);for(let T of d.sliceMatchers)B.addMatcher(T.matcher,T.reducer);for(let T of R)B.addMatcher(T.matcher,T.reducer);_&&B.addDefaultCase(_)})}const v=A=>A,g=new Map,w=new WeakMap;let C;function I(A,R){return C||(C=p()),C(A,R)}function L(){return C||(C=p()),C.getInitialState()}function z(A,R=!1){function _(B){let T=B[A];return typeof T=="undefined"&&R&&(T=Kt(w,_,L)),T}function N(B=v){const T=Kt(g,R,()=>new WeakMap);return Kt(T,B,()=>{var O;const S={};for(const[m,j]of Object.entries((O=a.selectors)!=null?O:{}))S[m]=td(j,B,()=>Kt(w,B,L),R);return S})}return{reducerPath:A,getSelectors:N,get selectors(){return N(_)},selectSlice:_}}const F={name:r,reducer:I,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:L,...z(s),injectInto(A,{reducerPath:R,..._}={}){const N=R!=null?R:s;return A.inject({reducerPath:N,reducer:I},_),{...F,...z(N,!0)}}};return F}}function td(e,t,n,i){function a(r,...s){let l=t(r);return typeof l=="undefined"&&i&&(l=n()),e(l,...s)}return a.unwrapped=e,a}var Ut=ed();function nd(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function id({type:e,reducerName:t,createNotation:n},i,a){let r,s;if("reducer"in i){if(n&&!rd(i))throw new Error(Ne(17));r=i.reducer,s=i.prepare}else r=i;a.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,s?St(e,s):St(e))}function ad(e){return e._reducerDefinitionType==="asyncThunk"}function rd(e){return e._reducerDefinitionType==="reducerWithPrepare"}function od({type:e,reducerName:t},n,i,a){if(!a)throw new Error(Ne(18));const{payloadCreator:r,fulfilled:s,pending:l,rejected:c,settled:d,options:f}=n,p=a(e,r,f);i.exposeAction(t,p),s&&i.addCase(p.fulfilled,s),l&&i.addCase(p.pending,l),c&&i.addCase(p.rejected,c),d&&i.addMatcher(p.settled,d),i.exposeCaseReducer(t,{fulfilled:s||Ht,pending:l||Ht,rejected:c||Ht,settled:d||Ht})}function Ht(){}function Ne(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Fi="persist:",Br="persist/FLUSH",En="persist/REHYDRATE",qr="persist/PAUSE",Wr="persist/PERSIST",$i="persist/PURGE",Gr="persist/REGISTER",sd=-1;function tn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tn=function(n){return typeof n}:tn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tn(e)}function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ld(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ga(n,!0).forEach(function(i){cd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function cd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dd(e,t,n,i){i.debug;var a=ld({},n);return e&&tn(e)==="object"&&Object.keys(e).forEach(function(r){r!=="_persist"&&t[r]===n[r]&&(a[r]=e[r])}),a}function ud(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:Fi).concat(e.key),s=e.storage,l;e.serialize===!1?l=function(R){return R}:typeof e.serialize=="function"?l=e.serialize:l=pd;var c=e.writeFailHandler||null,d={},f={},p=[],v=null,g=null,w=function(R){Object.keys(R).forEach(function(_){L(_)&&d[_]!==R[_]&&p.indexOf(_)===-1&&p.push(_)}),Object.keys(d).forEach(function(_){R[_]===void 0&&L(_)&&p.indexOf(_)===-1&&d[_]!==void 0&&p.push(_)}),v===null&&(v=setInterval(C,a)),d=R};function C(){if(p.length===0){v&&clearInterval(v),v=null;return}var A=p.shift(),R=i.reduce(function(_,N){return N.in(_,A,d)},d[A]);if(R!==void 0)try{f[A]=l(R)}catch(_){console.error("redux-persist/createPersistoid: error serializing state",_)}else delete f[A];p.length===0&&I()}function I(){Object.keys(f).forEach(function(A){d[A]===void 0&&delete f[A]}),g=s.setItem(r,l(f)).catch(z)}function L(A){return!(n&&n.indexOf(A)===-1&&A!=="_persist"||t&&t.indexOf(A)!==-1)}function z(A){c&&c(A)}var F=function(){for(;p.length!==0;)C();return g||Promise.resolve()};return{update:w,flush:F}}function pd(e){return JSON.stringify(e)}function fd(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Fi).concat(e.key),i=e.storage;e.debug;var a;return e.deserialize===!1?a=function(s){return s}:typeof e.deserialize=="function"?a=e.deserialize:a=md,i.getItem(n).then(function(r){if(r)try{var s={},l=a(r);return Object.keys(l).forEach(function(c){s[c]=t.reduceRight(function(d,f){return f.out(d,c,l)},a(l[c]))}),s}catch(c){throw c}else return})}function md(e){return JSON.parse(e)}function hd(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Fi).concat(e.key);return t.removeItem(n,gd)}function gd(e){}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Oe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?va(n,!0).forEach(function(i){vd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function vd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xd(e,t){if(e==null)return{};var n=yd(e,t),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function yd(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,r;for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var wd=5e3;function vi(e,t){var n=e.version!==void 0?e.version:sd;e.debug;var i=e.stateReconciler===void 0?dd:e.stateReconciler,a=e.getStoredState||fd,r=e.timeout!==void 0?e.timeout:wd,s=null,l=!1,c=!0,d=function(p){return p._persist.rehydrated&&s&&!c&&s.update(p),p};return function(f,p){var v=f||{},g=v._persist,w=xd(v,["_persist"]),C=w;if(p.type===Wr){var I=!1,L=function(B,T){I||(p.rehydrate(e.key,B,T),I=!0)};if(r&&setTimeout(function(){!I&&L(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},r),c=!1,s||(s=ud(e)),g)return Oe({},t(C,p),{_persist:g});if(typeof p.rehydrate!="function"||typeof p.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return p.register(e.key),a(e).then(function(N){var B=e.migrate||function(T,S){return Promise.resolve(T)};B(N,n).then(function(T){L(T)},function(T){L(void 0,T)})},function(N){L(void 0,N)}),Oe({},t(C,p),{_persist:{version:n,rehydrated:!1}})}else{if(p.type===$i)return l=!0,p.result(hd(e)),Oe({},t(C,p),{_persist:g});if(p.type===Br)return p.result(s&&s.flush()),Oe({},t(C,p),{_persist:g});if(p.type===qr)c=!0;else if(p.type===En){if(l)return Oe({},C,{_persist:Oe({},g,{rehydrated:!0})});if(p.key===e.key){var z=t(C,p),F=p.payload,A=i!==!1&&F!==void 0?i(F,f,z,e):z,R=Oe({},A,{_persist:Oe({},g,{rehydrated:!0})});return d(R)}}}if(!g)return t(f,p);var _=t(C,p);return _===C?f:d(Oe({},_,{_persist:g}))}}function xa(e){return jd(e)||kd(e)||bd()}function bd(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function kd(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function jd(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function xi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ya(n,!0).forEach(function(i){Sd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Sd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Kr={registry:[],bootstrapped:!1},Rd=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Kr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Gr:return xi({},t,{registry:[].concat(xa(t.registry),[n.key])});case En:var i=t.registry.indexOf(n.key),a=xa(t.registry);return a.splice(i,1),xi({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function Cd(e,t,n){var i=Oi(Rd,Kr,void 0),a=function(c){i.dispatch({type:Gr,key:c})},r=function(c,d,f){var p={type:En,payload:d,err:f,key:c};e.dispatch(p),i.dispatch(p)},s=xi({},i,{purge:function(){var c=[];return e.dispatch({type:$i,result:function(f){c.push(f)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:Br,result:function(f){c.push(f)}}),Promise.all(c)},pause:function(){e.dispatch({type:qr})},persist:function(){e.dispatch({type:Wr,register:a,rehydrate:r})}});return s.persist(),s}var Mi={},Ui={};Ui.__esModule=!0;Ui.default=Ed;function nn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?nn=function(n){return typeof n}:nn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},nn(e)}function Zn(){}var Ld={getItem:Zn,setItem:Zn,removeItem:Zn};function Dd(e){if((typeof self=="undefined"?"undefined":nn(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(i){return!1}return!0}function Ed(e){var t="".concat(e,"Storage");return Dd(t)?self[t]:Ld}Mi.__esModule=!0;Mi.default=Id;var _d=Ad(Ui);function Ad(e){return e&&e.__esModule?e:{default:e}}function Id(e){var t=(0,_d.default)(e);return{getItem:function(i){return new Promise(function(a,r){a(t.getItem(i))})},setItem:function(i,a){return new Promise(function(r,s){r(t.setItem(i,a))})},removeItem:function(i){return new Promise(function(a,r){a(t.removeItem(i))})}}}var _n=void 0,Td=Od(Mi);function Od(e){return e&&e.__esModule?e:{default:e}}var Pd=(0,Td.default)("local");_n=Pd;const ze={APP_ID:"wx4a71fe09bb125182",APP_SECRET:"e8a88b5e0271b89a1dc71261d9063fad",REDIRECT_URI:`${window.location.origin}/wechat/callback`,SCOPE:"snsapi_base",WEB_AUTHORIZE_URL:"https://open.weixin.qq.com/connect/oauth2/authorize",ACCESS_TOKEN_URL:"https://api.weixin.qq.com/sns/oauth2/access_token",USER_INFO_URL:"https://api.weixin.qq.com/sns/userinfo"},wa=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ba=()=>/micromessenger/i.test(navigator.userAgent),ka=(e=null)=>{const t=e||Math.random().toString(36).substring(7);console.log(" Generating WeChat OAuth URL"),console.log(" Current origin:",window.location.origin);const n=new URLSearchParams({appid:ze.APP_ID,redirect_uri:ze.REDIRECT_URI,response_type:"code",scope:ze.SCOPE,state:t}),a=`${ze.WEB_AUTHORIZE_URL}?${n.toString()}#wechat_redirect`;return console.log(" Final WeChat OAuth URL:",a),console.log(" OAuth parameters:",Object.fromEntries(n)),a},ja={getAccessToken:async e=>{const t=new URLSearchParams({appid:ze.APP_ID,secret:ze.APP_SECRET,code:e,grant_type:"authorization_code"});return await(await fetch(`${ze.ACCESS_TOKEN_URL}?${t.toString()}`)).json()},getUserInfo:async(e,t)=>{const n=new URLSearchParams({access_token:e,openid:t,lang:"en"});return await(await fetch(`${ze.USER_INFO_URL}?${n.toString()}`)).json()}},an=J("auth/authenticateWithWeChat",async(e,{rejectWithValue:t})=>{try{console.log("Starting WeChat authentication with code:",e);const n=await ja.getAccessToken(e);if(console.log("WeChat token response:",n),n.errcode)throw new Error(n.errmsg||"Failed to get WeChat access token");const{access_token:i,openid:a}=n,r=await ja.getUserInfo(i,a);if(console.log("WeChat user response:",r),r.errcode)throw new Error(r.errmsg||"Failed to get WeChat user info");const s={id:`wechat_${a}`,openid:a,name:r.nickname,displayName:r.nickname,avatar:r.headimgurl,country:r.country,province:r.province,city:r.city,sex:r.sex,language:r.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:a,accessToken:i,createdAt:new Date().toISOString()};return console.log(" WeChat authentication successful:",s),s}catch(n){return console.error(" WeChat authentication failed:",n),t(n.message||"WeChat authentication failed")}}),Hr=J("auth/logout",async(e,{rejectWithValue:t})=>{try{return console.log("User logged out"),sessionStorage.removeItem("wechat_access_token"),sessionStorage.removeItem("wechat_pending_cart_action"),{clearData:!0}}catch(n){return t(n.message)}}),Yr=Ut({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null,wechatAuthUrl:null},reducers:{clearError:e=>{e.error=null},updateUserProfile:(e,t)=>{e.user&&(e.user={...e.user,...t.payload})},setWeChatAuthUrl:(e,t)=>{e.wechatAuthUrl=t.payload},setTestUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,e.loading=!1,e.error=null},clearAllData:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.wechatAuthUrl=null}},extraReducers:e=>{e.addCase(an.pending,t=>{t.loading=!0,t.error=null}).addCase(an.fulfilled,(t,n)=>{t.loading=!1,t.user=n.payload,t.isAuthenticated=!0,t.error=null}).addCase(an.rejected,(t,n)=>{t.loading=!1,t.error=n.payload,t.isAuthenticated=!1,t.user=null}).addCase(Hr.fulfilled,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null}).addCase($i,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null})}}),{clearError:Ph,updateUserProfile:Nh,setWeChatAuthUrl:Fh,clearAllData:Nd,setTestUser:Sa}=Yr.actions,Fd=Yr.reducer;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vr="firebasestorage.googleapis.com",Qr="storageBucket",$d=2*60*1e3,Md=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ae extends _i{constructor(t,n,i=0){super(Jn(t),`Firebase Storage: ${n} (${Jn(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ae.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Jn(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ie;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ie||(ie={}));function Jn(e){return"storage/"+e}function zi(){const e="An unknown error occurred, please check the error payload for server response.";return new ae(ie.UNKNOWN,e)}function Ud(e){return new ae(ie.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function zd(e){return new ae(ie.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Bd(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ae(ie.UNAUTHENTICATED,e)}function qd(){return new ae(ie.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Wd(e){return new ae(ie.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Gd(){return new ae(ie.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Kd(){return new ae(ie.CANCELED,"User canceled the upload/download.")}function Hd(e){return new ae(ie.INVALID_URL,"Invalid URL '"+e+"'.")}function Yd(e){return new ae(ie.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Vd(){return new ae(ie.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+Qr+"' property when initializing the app?")}function Qd(){return new ae(ie.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Zd(){return new ae(ie.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Jd(e){return new ae(ie.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function yi(e){return new ae(ie.INVALID_ARGUMENT,e)}function Zr(){return new ae(ie.APP_DELETED,"The Firebase app was deleted.")}function Xd(e){return new ae(ie.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Rt(e,t){return new ae(ie.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function bt(e){throw new ae(ie.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class we{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=we.makeFromUrl(t,n)}catch(a){return new we(t,"")}if(i.path==="")return i;throw Yd(t)}static makeFromUrl(t,n){let i=null;const a="([A-Za-z0-9.\\-_]+)";function r(A){A.path.charAt(A.path.length-1)==="/"&&(A.path_=A.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+a+s,"i"),c={bucket:1,path:3};function d(A){A.path_=decodeURIComponent(A.path)}const f="v[A-Za-z0-9_]+",p=n.replace(/[.]/g,"\\."),v="(/([^?#]*).*)?$",g=new RegExp(`^https?://${p}/${f}/b/${a}/o${v}`,"i"),w={bucket:1,path:3},C=n===Vr?"(?:storage.googleapis.com|storage.cloud.google.com)":n,I="([^?#]*)",L=new RegExp(`^https?://${C}/${a}/${I}`,"i"),F=[{regex:l,indices:c,postModify:r},{regex:g,indices:w,postModify:d},{regex:L,indices:{bucket:1,path:2},postModify:d}];for(let A=0;A<F.length;A++){const R=F[A],_=R.regex.exec(t);if(_){const N=_[R.indices.bucket];let B=_[R.indices.path];B||(B=""),i=new we(N,B),R.postModify(i);break}}if(i==null)throw Hd(t);return i}}class eu{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e,t,n){let i=1,a=null,r=null,s=!1,l=0;function c(){return l===2}let d=!1;function f(...I){d||(d=!0,t.apply(null,I))}function p(I){a=setTimeout(()=>{a=null,e(g,c())},I)}function v(){r&&clearTimeout(r)}function g(I,...L){if(d){v();return}if(I){v(),f.call(null,I,...L);return}if(c()||s){v(),f.call(null,I,...L);return}i<64&&(i*=2);let F;l===1?(l=2,F=0):F=(i+Math.random())*1e3,p(F)}let w=!1;function C(I){w||(w=!0,v(),!d&&(a!==null?(I||(l=2),clearTimeout(a),p(0)):I||(l=1)))}return p(0),r=setTimeout(()=>{s=!0,C(!0)},n),C}function nu(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e){return e!==void 0}function au(e){return typeof e=="object"&&!Array.isArray(e)}function Bi(e){return typeof e=="string"||e instanceof String}function Ra(e){return qi()&&e instanceof Blob}function qi(){return typeof Blob!="undefined"}function Ca(e,t,n,i){if(i<t)throw yi(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw yi(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wi(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function Jr(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const a=t(i)+"="+t(e[i]);n=n+a+"&"}return n=n.slice(0,-1),n}var Xe;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(Xe||(Xe={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(e,t){const n=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||a||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ou{constructor(t,n,i,a,r,s,l,c,d,f,p,v=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=a,this.successCodes_=r,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=f,this.connectionFactory_=p,this.retry=v,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((g,w)=>{this.resolve_=g,this.reject_=w,this.start_()})}start_(){const t=(i,a)=>{if(a){i(!1,new Yt(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const s=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&r.addUploadProgressListener(s),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(s),this.pendingConnection_=null;const l=r.getErrorCode()===Xe.NO_ERROR,c=r.getStatus();if(!l||ru(c,this.additionalRetryCodes_)&&this.retry){const f=r.getErrorCode()===Xe.ABORT;i(!1,new Yt(!1,null,f));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Yt(d,r))})},n=(i,a)=>{const r=this.resolve_,s=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());iu(c)?r(c):r()}catch(c){s(c)}else if(l!==null){const c=zi();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(a.canceled){const c=this.appDelete_?Zr():Kd();s(c)}else{const c=Gd();s(c)}};this.canceled_?n(!1,new Yt(!1,null,!0)):this.backoffId_=tu(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&nu(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yt{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function su(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function lu(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function cu(e,t){t&&(e["X-Firebase-GMPID"]=t)}function du(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function uu(e,t,n,i,a,r,s=!0){const l=Jr(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return cu(d,t),su(d,n),lu(d,r),du(d,i),new ou(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pu(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function fu(...e){const t=pu();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(qi())return new Blob(e);throw new ae(ie.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function mu(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hu(e){if(typeof atob=="undefined")throw Jd("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ie={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Xn{constructor(t,n){this.data=t,this.contentType=n||null}}function gu(e,t){switch(e){case Ie.RAW:return new Xn(Xr(t));case Ie.BASE64:case Ie.BASE64URL:return new Xn(eo(e,t));case Ie.DATA_URL:return new Xn(xu(t),yu(t))}throw zi()}function Xr(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const r=i,s=e.charCodeAt(++n);i=65536|(r&1023)<<10|s&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function vu(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Rt(Ie.DATA_URL,"Malformed data URL.")}return Xr(t)}function eo(e,t){switch(e){case Ie.BASE64:{const a=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(a||r)throw Rt(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Ie.BASE64URL:{const a=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(a||r)throw Rt(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=hu(t)}catch(a){throw a.message.includes("polyfill")?a:Rt(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}class to{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Rt(Ie.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=wu(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function xu(e){const t=new to(e);return t.base64?eo(Ie.BASE64,t.rest):vu(t.rest)}function yu(e){return new to(e).contentType}function wu(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ue{constructor(t,n){let i=0,a="";Ra(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ra(this.data_)){const i=this.data_,a=mu(i,t,n);return a===null?null:new Ue(a)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Ue(i,!0)}}static getBlob(...t){if(qi()){const n=t.map(i=>i instanceof Ue?i.data_:i);return new Ue(fu.apply(null,n))}else{const n=t.map(s=>Bi(s)?gu(Ie.RAW,s).data:s.data_);let i=0;n.forEach(s=>{i+=s.byteLength});const a=new Uint8Array(i);let r=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)a[r++]=s[l]}),new Ue(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function no(e){let t;try{t=JSON.parse(e)}catch(n){return null}return au(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bu(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function ku(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function io(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(e,t){return t}class fe{constructor(t,n,i,a){this.server=t,this.local=n||t,this.writable=!!i,this.xform=a||ju}}let Vt=null;function Su(e){return!Bi(e)||e.length<2?e:io(e)}function ao(){if(Vt)return Vt;const e=[];e.push(new fe("bucket")),e.push(new fe("generation")),e.push(new fe("metageneration")),e.push(new fe("name","fullPath",!0));function t(r,s){return Su(s)}const n=new fe("name");n.xform=t,e.push(n);function i(r,s){return s!==void 0?Number(s):s}const a=new fe("size");return a.xform=i,e.push(a),e.push(new fe("timeCreated")),e.push(new fe("updated")),e.push(new fe("md5Hash",null,!0)),e.push(new fe("cacheControl",null,!0)),e.push(new fe("contentDisposition",null,!0)),e.push(new fe("contentEncoding",null,!0)),e.push(new fe("contentLanguage",null,!0)),e.push(new fe("contentType",null,!0)),e.push(new fe("metadata","customMetadata",!0)),Vt=e,Vt}function Ru(e,t){function n(){const i=e.bucket,a=e.fullPath,r=new we(i,a);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:n})}function Cu(e,t,n){const i={};i.type="file";const a=n.length;for(let r=0;r<a;r++){const s=n[r];i[s.local]=s.xform(i,t[s.server])}return Ru(i,e),i}function ro(e,t,n){const i=no(t);return i===null?null:Cu(e,i,n)}function Lu(e,t,n,i){const a=no(t);if(a===null||!Bi(a.downloadTokens))return null;const r=a.downloadTokens;if(r.length===0)return null;const s=encodeURIComponent;return r.split(",").map(d=>{const f=e.bucket,p=e.fullPath,v="/b/"+s(f)+"/o/"+s(p),g=Wi(v,n,i),w=Jr({alt:"media",token:d});return g+w})[0]}function Du(e,t){const n={},i=t.length;for(let a=0;a<i;a++){const r=t[a];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class oo{constructor(t,n,i,a){this.url=t,this.method=n,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(e){if(!e)throw zi()}function Eu(e,t){function n(i,a){const r=ro(e,a,t);return so(r!==null),r}return n}function _u(e,t){function n(i,a){const r=ro(e,a,t);return so(r!==null),Lu(r,a,e.host,e._protocol)}return n}function lo(e){function t(n,i){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=qd():a=Bd():n.getStatus()===402?a=zd(e.bucket):n.getStatus()===403?a=Wd(e.path):a=i,a.status=n.getStatus(),a.serverResponse=i.serverResponse,a}return t}function Au(e){const t=lo(e);function n(i,a){let r=t(i,a);return i.getStatus()===404&&(r=Ud(e.path)),r.serverResponse=a.serverResponse,r}return n}function Iu(e,t,n){const i=t.fullServerUrl(),a=Wi(i,e.host,e._protocol),r="GET",s=e.maxOperationRetryTime,l=new oo(a,r,_u(e,n),s);return l.errorHandler=Au(t),l}function Tu(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Ou(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=Tu(null,t)),i}function Pu(e,t,n,i,a){const r=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let F="";for(let A=0;A<2;A++)F=F+Math.random().toString().slice(2);return F}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const d=Ou(t,i,a),f=Du(d,n),p="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+f+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,v=`\r
--`+c+"--",g=Ue.getBlob(p,i,v);if(g===null)throw Qd();const w={name:d.fullPath},C=Wi(r,e.host,e._protocol),I="POST",L=e.maxUploadRetryTime,z=new oo(C,I,Eu(e,n),L);return z.urlParams=w,z.headers=s,z.body=g.uploadData(),z.errorHandler=lo(t),z}class Nu{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=Xe.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=Xe.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=Xe.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,a){if(this.sent_)throw bt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),a!==void 0)for(const r in a)a.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,a[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw bt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw bt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw bt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw bt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Fu extends Nu{initXhr(){this.xhr_.responseType="text"}}function co(){return new Fu}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t,n){this._service=t,n instanceof we?this._location=n:this._location=we.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new rt(t,n)}get root(){const t=new we(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return io(this._location.path)}get storage(){return this._service}get parent(){const t=bu(this._location.path);if(t===null)return null;const n=new we(this._location.bucket,t);return new rt(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Xd(t)}}function $u(e,t,n){e._throwIfRoot("uploadBytes");const i=Pu(e.storage,e._location,ao(),new Ue(t,!0),n);return e.storage.makeRequestWithTokens(i,co).then(a=>({metadata:a,ref:e}))}function Mu(e){e._throwIfRoot("getDownloadURL");const t=Iu(e.storage,e._location,ao());return e.storage.makeRequestWithTokens(t,co).then(n=>{if(n===null)throw Zd();return n})}function Uu(e,t){const n=ku(e._location.path,t),i=new we(e._location.bucket,n);return new rt(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(e){return/^[A-Za-z]+:\/\//.test(e)}function Bu(e,t){return new rt(e,t)}function uo(e,t){if(e instanceof Gi){const n=e;if(n._bucket==null)throw Vd();const i=new rt(n,n._bucket);return t!=null?uo(i,t):i}else return t!==void 0?Uu(e,t):e}function qu(e,t){if(t&&zu(t)){if(e instanceof Gi)return Bu(e,t);throw yi("To use ref(service, url), the first argument must be a Storage instance.")}else return uo(e,t)}function La(e,t){const n=t==null?void 0:t[Qr];return n==null?null:we.makeFromBucketSpec(n,e)}function Wu(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:a}=i;a&&(e._overrideAuthToken=typeof a=="string"?a:Ns(a,e.app.options.projectId))}class Gi{constructor(t,n,i,a,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=a,this._firebaseVersion=r,this._bucket=null,this._host=Vr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=$d,this._maxUploadRetryTime=Md,this._requests=new Set,a!=null?this._bucket=we.makeFromBucketSpec(a,this._host):this._bucket=La(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=we.makeFromBucketSpec(this._url,t):this._bucket=La(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Ca("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Ca("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new rt(this,t)}_makeRequest(t,n,i,a,r=!0){if(this._deleted)return new eu(Zr());{const s=uu(t,this._appId,i,a,n,this._firebaseVersion,r);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,a).getPromise()}}const Da="@firebase/storage",Ea="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const po="storage";function Gu(e,t,n){return e=xt(e),$u(e,t,n)}function Ku(e){return e=xt(e),Mu(e)}function Hu(e,t){return e=xt(e),qu(e,t)}function Yu(e=lr(),t){e=xt(e);const i=Ft(e,po).getImmediate({identifier:t}),a=Ps("storage");return a&&Vu(i,...a),i}function Vu(e,t,n,i={}){Wu(e,t,n,i)}function Qu(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Gi(n,i,a,t,Os)}function Zu(){Et(new _t(po,Qu,"PUBLIC").setMultipleInstances(!0)),mt(Da,Ea,""),mt(Da,Ea,"esm2017")}Zu();const fo="@firebase/installations",Ki="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mo=1e4,ho=`w:${Ki}`,go="FIS_v2",Ju="https://firebaseinstallations.googleapis.com/v1",Xu=60*60*1e3,ep="installations",tp="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const np={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ot=new cr(ep,tp,np);function vo(e){return e instanceof _i&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xo({projectId:e}){return`${Ju}/projects/${e}/installations`}function yo(e){return{token:e.token,requestStatus:2,expiresIn:ap(e.expiresIn),creationTime:Date.now()}}async function wo(e,t){const i=(await t.json()).error;return ot.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function bo({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function ip(e,{refreshToken:t}){const n=bo(e);return n.append("Authorization",rp(t)),n}async function ko(e){const t=await e();return t.status>=500&&t.status<600?e():t}function ap(e){return Number(e.replace("s","000"))}function rp(e){return`${go} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function op({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=xo(e),a=bo(e),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={fid:n,authVersion:go,appId:e.appId,sdkVersion:ho},l={method:"POST",headers:a,body:JSON.stringify(s)},c=await ko(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:yo(d.authToken)}}else throw await wo("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jo(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sp(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lp=/^[cdef][\w-]{21}$/,wi="";function cp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=dp(e);return lp.test(n)?n:wi}catch(e){return wi}}function dp(e){return sp(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const So=new Map;function Ro(e,t){const n=An(e);Co(n,t),up(n,t)}function Co(e,t){const n=So.get(e);if(n)for(const i of n)i(t)}function up(e,t){const n=pp();n&&n.postMessage({key:e,fid:t}),fp()}let Qe=null;function pp(){return!Qe&&"BroadcastChannel"in self&&(Qe=new BroadcastChannel("[Firebase] FID Change"),Qe.onmessage=e=>{Co(e.data.key,e.data.fid)}),Qe}function fp(){So.size===0&&Qe&&(Qe.close(),Qe=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mp="firebase-installations-database",hp=1,st="firebase-installations-store";let ei=null;function Hi(){return ei||(ei=Fs(mp,hp,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(st)}}})),ei}async function hn(e,t){const n=An(e),a=(await Hi()).transaction(st,"readwrite"),r=a.objectStore(st),s=await r.get(n);return await r.put(t,n),await a.done,(!s||s.fid!==t.fid)&&Ro(e,t.fid),t}async function Lo(e){const t=An(e),i=(await Hi()).transaction(st,"readwrite");await i.objectStore(st).delete(t),await i.done}async function In(e,t){const n=An(e),a=(await Hi()).transaction(st,"readwrite"),r=a.objectStore(st),s=await r.get(n),l=t(s);return l===void 0?await r.delete(n):await r.put(l,n),await a.done,l&&(!s||s.fid!==l.fid)&&Ro(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(e){let t;const n=await In(e.appConfig,i=>{const a=gp(i),r=vp(e,a);return t=r.registrationPromise,r.installationEntry});return n.fid===wi?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function gp(e){const t=e||{fid:cp(),registrationStatus:0};return Do(t)}function vp(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ot.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=xp(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:yp(e)}:{installationEntry:t}}async function xp(e,t){try{const n=await op(e,t);return hn(e.appConfig,n)}catch(n){throw vo(n)&&n.customData.serverCode===409?await Lo(e.appConfig):await hn(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function yp(e){let t=await _a(e.appConfig);for(;t.registrationStatus===1;)await jo(100),t=await _a(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Yi(e);return i||n}return t}function _a(e){return In(e,t=>{if(!t)throw ot.create("installation-not-found");return Do(t)})}function Do(e){return wp(e)?{fid:e.fid,registrationStatus:0}:e}function wp(e){return e.registrationStatus===1&&e.registrationTime+mo<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bp({appConfig:e,heartbeatServiceProvider:t},n){const i=kp(e,n),a=ip(e,n),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={installation:{sdkVersion:ho,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(s)},c=await ko(()=>fetch(i,l));if(c.ok){const d=await c.json();return yo(d)}else throw await wo("Generate Auth Token",c)}function kp(e,{fid:t}){return`${xo(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Vi(e,t=!1){let n;const i=await In(e.appConfig,r=>{if(!Eo(r))throw ot.create("not-registered");const s=r.authToken;if(!t&&Rp(s))return r;if(s.requestStatus===1)return n=jp(e,t),r;{if(!navigator.onLine)throw ot.create("app-offline");const l=Lp(r);return n=Sp(e,l),l}});return n?await n:i.authToken}async function jp(e,t){let n=await Aa(e.appConfig);for(;n.authToken.requestStatus===1;)await jo(100),n=await Aa(e.appConfig);const i=n.authToken;return i.requestStatus===0?Vi(e,t):i}function Aa(e){return In(e,t=>{if(!Eo(t))throw ot.create("not-registered");const n=t.authToken;return Dp(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Sp(e,t){try{const n=await bp(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await hn(e.appConfig,i),n}catch(n){if(vo(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Lo(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await hn(e.appConfig,i)}throw n}}function Eo(e){return e!==void 0&&e.registrationStatus===2}function Rp(e){return e.requestStatus===2&&!Cp(e)}function Cp(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Xu}function Lp(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Dp(e){return e.requestStatus===1&&e.requestTime+mo<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ep(e){const t=e,{installationEntry:n,registrationPromise:i}=await Yi(t);return i?i.catch(console.error):Vi(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _p(e,t=!1){const n=e;return await Ap(n),(await Vi(n,t)).token}async function Ap(e){const{registrationPromise:t}=await Yi(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ip(e){if(!e||!e.options)throw ti("App Configuration");if(!e.name)throw ti("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ti(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ti(e){return ot.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o="installations",Tp="installations-internal",Op=e=>{const t=e.getProvider("app").getImmediate(),n=Ip(t),i=Ft(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Pp=e=>{const t=e.getProvider("app").getImmediate(),n=Ft(t,_o).getImmediate();return{getId:()=>Ep(n),getToken:a=>_p(n,a)}};function Np(){Et(new _t(_o,Op,"PUBLIC")),Et(new _t(Tp,Pp,"PRIVATE"))}Np();mt(fo,Ki);mt(fo,Ki,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gn="analytics",Fp="firebase_id",$p="origin",Mp=60*1e3,Up="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qi="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ge=new $s("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zp={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},be=new cr("analytics","Analytics",zp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bp(e){if(!e.startsWith(Qi)){const t=be.create("invalid-gtag-resource",{gtagURL:e});return ge.warn(t.message),""}return e}function Ao(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function qp(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Wp(e,t){const n=qp("firebase-js-sdk-policy",{createScriptURL:Bp}),i=document.createElement("script"),a=`${Qi}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function Gp(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Kp(e,t,n,i,a,r){const s=i[a];try{if(s)await t[s];else{const c=(await Ao(n)).find(d=>d.measurementId===a);c&&await t[c.appId]}}catch(l){ge.error(l)}e("config",a,r)}async function Hp(e,t,n,i,a){try{let r=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const l=await Ao(n);for(const c of s){const d=l.find(p=>p.measurementId===c),f=d&&t[d.appId];if(f)r.push(f);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",i,a||{})}catch(r){ge.error(r)}}function Yp(e,t,n,i){async function a(r,...s){try{if(r==="event"){const[l,c]=s;await Hp(e,t,n,l,c)}else if(r==="config"){const[l,c]=s;await Kp(e,t,n,i,l,c)}else if(r==="consent"){const[l,c]=s;e("consent",l,c)}else if(r==="get"){const[l,c,d]=s;e("get",l,c,d)}else if(r==="set"){const[l]=s;e("set",l)}else e(r,...s)}catch(l){ge.error(l)}}return a}function Vp(e,t,n,i,a){let r=function(...s){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(r=window[a]),window[a]=Yp(r,e,t,n),{gtagCore:r,wrappedGtag:window[a]}}function Qp(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Qi)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zp=30,Jp=1e3;class Xp{constructor(t={},n=Jp){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Io=new Xp;function ef(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function tf(e){var t;const{appId:n,apiKey:i}=e,a={method:"GET",headers:ef(i)},r=Up.replace("{app-id}",n),s=await fetch(r,a);if(s.status!==200&&s.status!==304){let l="";try{const c=await s.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch(c){}throw be.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function nf(e,t=Io,n){const{appId:i,apiKey:a,measurementId:r}=e.options;if(!i)throw be.create("no-app-id");if(!a){if(r)return{measurementId:r,appId:i};throw be.create("no-api-key")}const s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new of;return setTimeout(async()=>{l.abort()},Mp),To({appId:i,apiKey:a,measurementId:r},s,l,t)}async function To(e,{throttleEndTimeMillis:t,backoffCount:n},i,a=Io){var r;const{appId:s,measurementId:l}=e;try{await af(i,t)}catch(c){if(l)return ge.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:l};throw c}try{const c=await tf(e);return a.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!rf(d)){if(a.deleteThrottleMetadata(s),l)return ge.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:l};throw c}const f=Number((r=d==null?void 0:d.customData)===null||r===void 0?void 0:r.httpStatus)===503?ea(n,a.intervalMillis,Zp):ea(n,a.intervalMillis),p={throttleEndTimeMillis:Date.now()+f,backoffCount:n+1};return a.setThrottleMetadata(s,p),ge.debug(`Calling attemptFetch again in ${f} millis`),To(e,p,i,a)}}function af(e,t){return new Promise((n,i)=>{const a=Math.max(t-Date.now(),0),r=setTimeout(n,a);e.addEventListener(()=>{clearTimeout(r),i(be.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function rf(e){if(!(e instanceof _i)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class of{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function sf(e,t,n,i,a){if(a&&a.global){e("event",n,i);return}else{const r=await t,s=Object.assign(Object.assign({},i),{send_to:r});e("event",n,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lf(){if(ur())try{await pr()}catch(e){return ge.warn(be.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return ge.warn(be.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function cf(e,t,n,i,a,r,s){var l;const c=nf(e);c.then(g=>{n[g.measurementId]=g.appId,e.options.measurementId&&g.measurementId!==e.options.measurementId&&ge.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${g.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(g=>ge.error(g)),t.push(c);const d=lf().then(g=>{if(g)return i.getId()}),[f,p]=await Promise.all([c,d]);Qp(r)||Wp(r,f.measurementId),a("js",new Date);const v=(l=s==null?void 0:s.config)!==null&&l!==void 0?l:{};return v[$p]="firebase",v.update=!0,p!=null&&(v[Fp]=p),a("config",f.measurementId,v),f.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t){this.app=t}_delete(){return delete Ct[this.app.options.appId],Promise.resolve()}}let Ct={},Ia=[];const Ta={};let ni="dataLayer",uf="gtag",Oa,Oo,Pa=!1;function pf(){const e=[];if(dr()&&e.push("This is a browser extension environment."),fr()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=be.create("invalid-analytics-context",{errorInfo:t});ge.warn(n.message)}}function ff(e,t,n){pf();const i=e.options.appId;if(!i)throw be.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)ge.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw be.create("no-api-key");if(Ct[i]!=null)throw be.create("already-exists",{id:i});if(!Pa){Gp(ni);const{wrappedGtag:r,gtagCore:s}=Vp(Ct,Ia,Ta,ni,uf);Oo=r,Oa=s,Pa=!0}return Ct[i]=cf(e,Ia,Ta,t,Oa,ni,n),new df(e)}function mf(e=lr()){e=xt(e);const t=Ft(e,gn);return t.isInitialized()?t.getImmediate():hf(e)}function hf(e,t={}){const n=Ft(e,gn);if(n.isInitialized()){const a=n.getImmediate();if(Ms(t,n.getOptions()))return a;throw be.create("already-initialized")}return n.initialize({options:t})}async function gf(){if(dr()||!fr()||!ur())return!1;try{return await pr()}catch(e){return!1}}function vf(e,t,n,i){e=xt(e),sf(Oo,Ct[e.app.options.appId],t,n,i).catch(a=>ge.error(a))}const Na="@firebase/analytics",Fa="0.10.8";function xf(){Et(new _t(gn,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return ff(i,a,n)},"PUBLIC")),Et(new _t("analytics-internal",e,"PRIVATE")),mt(Na,Fa),mt(Na,Fa,"esm2017");function e(t){try{const n=t.getProvider(gn).getImmediate();return{logEvent:(i,a,r)=>vf(n,i,a,r)}}catch(n){throw be.create("interop-component-reg-failed",{reason:n})}}}xf();const bi={apiKey:"AIzaSyD1TjtSC-Mukd2EdNtiuQq-u3l3gdMP0dc",authDomain:"homefoods-16e56.firebaseapp.com",projectId:"homefoods-16e56",storageBucket:"homefoods-16e56.firebasestorage.app",messagingSenderId:"495709118320",appId:"1:495709118320:web:6fe3b7ec2b7c19d66cf9b5",measurementId:"G-6MR0ED1C3E"},yf=["apiKey","authDomain","projectId","appId"],pe=yf.some(e=>!bi[e]);let Ye,V,Po,$a;pe?Promise.resolve(null):(Ye=ta().length?ta()[0]:Us(bi),mr(Ye),V=zs(Ye),Po=Yu(Ye),bi.measurementId?gf().then(e=>e?($a=mf(Ye),$a):null):Promise.resolve(null));async function wf(e,t=null,n=20){if(console.log(`[getFoodReviews] Starting fetch for foodId: "${e}", kitchenId: "${t}", limit: ${n}`),pe)return console.warn("[getFoodReviews] Firebase disabled, returning mock data"),za(e);if(!e||e.trim()==="")return console.log("[getFoodReviews] No foodId provided, returning empty array"),[];const i=e.trim();console.log(`[getFoodReviews] Cleaned foodId: "${i}"`);try{let a=[];if(t){console.log(`[getFoodReviews] Searching reviews in kitchen: ${t}`);const r=te(V,"kitchens",t,"reviews"),s=se(r,Le("foodId","==",i),_e(n));a=(await ne(s)).docs.map(c=>({id:c.id,kitchenId:t,...c.data()})),console.log(`[getFoodReviews] Found ${a.length} reviews in kitchen ${t}`)}else{console.log("[getFoodReviews] Searching reviews across all kitchens...");const r=se(te(V,"kitchens")),s=await ne(r);console.log(`[getFoodReviews] Found ${s.size} kitchens to search`);for(const l of s.docs)try{const c=te(V,"kitchens",l.id,"reviews"),d=se(c,Le("foodId","==",i),_e(n)),p=(await ne(d)).docs.map(v=>({id:v.id,kitchenId:l.id,...v.data()}));if(a.push(...p),console.log(`[getFoodReviews] Found ${p.length} reviews in kitchen ${l.id}`),a.length>=n)break}catch(c){console.warn(`[getFoodReviews] Error searching kitchen ${l.id}:`,c);continue}}return a.length>0&&(a=a.sort((r,s)=>{const l=f=>f?typeof f=="string"?f.includes(" at ")?new Date(f.replace(" at "," ").replace(" UTC+5","")):new Date(f):f.seconds?new Date(f.seconds*1e3):new Date(f):new Date(0),c=l(r.timeStamp);return l(s.timeStamp)-c}),a=a.slice(0,n)),console.log(`[getFoodReviews] Final result - Found ${a.length} reviews for food '${i}':`,a),a}catch(a){return console.error("[getFoodReviews] Error fetching food reviews:",a),console.log("[getFoodReviews] Returning mock data due to error"),za(i)}}async function bf(e,t=null){if(console.log(`[debugReviewsQuery] Testing query for foodId: ${e}, kitchenId: ${t}`),pe)return console.warn("[debugReviewsQuery] Firebase disabled"),{status:"disabled"};try{let n=[],i=[];const a=se(te(V,"kitchens")),r=await ne(a);console.log(`[debugReviewsQuery] Found ${r.size} kitchens`);for(const l of r.docs)try{i.push(l.id);const c=te(V,"kitchens",l.id,"reviews"),f=(await ne(se(c,_e(50)))).docs.map(p=>({id:p.id,kitchenId:l.id,...p.data()}));if(console.log(`[debugReviewsQuery] Kitchen ${l.id} has ${f.length} total reviews`),f.length>0&&console.log(`[debugReviewsQuery] Sample reviews from kitchen ${l.id}:`,f.slice(0,2)),e){const p=se(c,Le("foodId","==",e)),g=(await ne(p)).docs.map(w=>({id:w.id,kitchenId:l.id,...w.data()}));g.length>0&&(console.log(`[debugReviewsQuery] Found ${g.length} reviews for foodId '${e}' in kitchen ${l.id}:`,g),n.push(...g))}n.push(...f)}catch(c){console.warn(`[debugReviewsQuery] Error checking kitchen ${l.id}:`,c);continue}const s=[...new Set(n.map(l=>l.foodId))];return console.log("[debugReviewsQuery] All unique foodIds in reviews:",s),{status:"success",requestedFoodId:e,kitchensSearched:i,allReviewsCount:n.length,matchingReviewsCount:n.filter(l=>l.foodId===e).length,uniqueFoodIds:s,sampleReviews:n.slice(0,5)}}catch(n){return console.error("[debugReviewsQuery] Error:",n),{status:"error",error:n.message}}}async function kf(e,t=null){if(console.log(`[getFoodLikes] Starting fetch for foodId: ${e}, kitchenId: ${t}`),pe)return console.warn("[getFoodLikes] Firebase disabled, returning mock data"),Ua(e);if(!e||e.trim()==="")return console.log("[getFoodLikes] No foodId provided, returning empty array"),[];try{let n=[];if(t)try{console.log(`[getFoodLikes] Searching likes in kitchen ${t} subcollection`);const l=te(V,"kitchens",t,"Likes");let c=se(l,Le("foodId","==",e)),d=await ne(c),f=d.docs.map(p=>({id:p.id,kitchenId:t,...p.data()}));f.length===0&&(c=se(l,Le("productId","==",e)),d=await ne(c),f=d.docs.map(p=>({id:p.id,kitchenId:t,...p.data()}))),n.push(...f),console.log(`[getFoodLikes] Found ${f.length} likes in kitchen subcollection`)}catch(l){console.warn("[getFoodLikes] Error searching kitchen subcollection:",l)}console.log("[getFoodLikes] Querying top-level Likes collection");let i=se(te(V,"Likes"),Le("foodId","==",e)),a=await ne(i),r=a.docs.map(l=>({id:l.id,...l.data()}));r.length===0&&(console.log("[getFoodLikes] No results with foodId, trying productId in top-level..."),i=se(te(V,"Likes"),Le("productId","==",e)),a=await ne(i),r=a.docs.map(l=>({id:l.id,...l.data()}))),n.push(...r),console.log(`[getFoodLikes] Found ${r.length} likes in top-level collection`);const s=n.filter((l,c,d)=>d.findIndex(f=>f.id===l.id)===c);return console.log(`[getFoodLikes] Total unique likes: ${s.length}`),s}catch(n){return console.error("[getFoodLikes] Error fetching food likes:",n),console.log("[getFoodLikes] Returning mock data due to error"),Ua(e)}}async function jf(){if(pe)return console.log("Firebase is disabled - check your .env file"),{status:"disabled"};try{console.log("Testing Firestore connection...");const e=te(V,"kitchens"),t=await ne(se(e,_e(5))),n=t.docs.map(d=>({id:d.id,...d.data()}));let i=[],a=[];for(const d of n)try{const f=te(V,"kitchens",d.id,"reviews"),v=(await ne(se(f,_e(5)))).docs.map(I=>({id:I.id,kitchenId:d.id,...I.data()}));i.push(...v);const g=te(V,"kitchens",d.id,"Likes"),C=(await ne(se(g,_e(5)))).docs.map(I=>({id:I.id,kitchenId:d.id,...I.data()}));a.push(...C),console.log(`Kitchen ${d.id}: ${v.length} reviews, ${C.length} likes`)}catch(f){console.warn(`Error testing kitchen ${d.id} subcollections:`,f)}const r=te(V,"Likes"),l=(await ne(se(r,_e(10)))).docs.map(d=>({id:d.id,...d.data()}));console.log("Reviews found in kitchen subcollections:",i),console.log("Likes found in kitchen subcollections:",a),console.log("Likes found in top-level collection:",l);const c={status:"connected",collections:{kitchens:{count:t.size,samples:n,sampleIds:n.map(d=>d.id)},reviews:{source:"kitchen_subcollections",count:i.length,samples:i,sampleIds:i.map(d=>d.id),foodIds:i.map(d=>d.foodId)},likes:{subcollectionCount:a.length,topLevelCount:l.length,samples:[...a,...l],foodIds:[...a,...l].map(d=>d.foodId||d.productId)}}};return console.log("Firestore Test Results:",c),c}catch(e){return console.error("Firestore connection test failed:",e),{status:"error",error:e.message}}}async function Sf(e,t=null){console.log(`[getFoodDetailWithKitchenAndReviews] Fetching food: ${e}, kitchen: ${t}`);try{const n=await No(e,t),i=t||n.kitchenId;console.log(`[getFoodDetailWithKitchenAndReviews] Using kitchenId: ${i}`);const[a,r,s]=await Promise.all([i?Rf(i):Promise.resolve(null),kf(e,i),wf(e,i)]),l=Fo(s);console.log(" ~ getFoodDetailWithKitchenAndReviews ~ reviewStats:",l);const c={food:n,kitchen:a,likes:r,reviews:s,totalLikes:r.length,reviewStats:l};return console.log("[getFoodDetailWithKitchenAndReviews] Complete result:",c),c}catch(n){throw console.error("[getFoodDetailWithKitchenAndReviews] Error fetching food detail:",n),n}}async function No(e,t=null){if(console.log(`[getFoodById] Starting fetch for foodId: ${e}, kitchenId: ${t}`),pe)return console.warn("[getFoodById] Firebase disabled, returning mock data"),Ze(e);if(!e||e.trim()==="")throw console.error("[getFoodById] Invalid foodId provided:",e),new Error("Food ID is required and cannot be empty");try{let n,i=null,a=null;if(t&&(console.log(`[getFoodById] Querying kitchens/${t}/foodItems/${e}`),n=await jt(Je(V,"kitchens",t,"foodItems",e)),n.exists()))return i={id:n.id,...n.data()},a=t,console.log("[getFoodById] Found in specific kitchen subcollection:",i),{...i,kitchenId:a};if(!i){console.log("[getFoodById] Searching across all kitchen subcollections...");const r=se(te(V,"kitchens")),s=await ne(r);for(const l of s.docs)try{const c=Je(V,"kitchens",l.id,"foodItems",e),d=await jt(c);if(d.exists())return i={id:d.id,...d.data()},a=l.id,console.log(`[getFoodById] Found in kitchen ${l.id}:`,i),{...i,kitchenId:a}}catch(c){console.warn(`[getFoodById] Error checking kitchen ${l.id}:`,c);continue}}if(console.log(`[getFoodById] Trying top-level foodItems/${e}`),n=await jt(Je(V,"foodItems",e)),n.exists()){const r={id:n.id,...n.data()};return console.log("[getFoodById] Found in top-level collection:",r),r}return console.warn(`[getFoodById] Food item with ID '${e}' not found anywhere`),Ze(e)}catch(n){return console.error("[getFoodById] Error fetching food item:",n),Ze(e)}}async function Rf(e){if(console.log(`[getKitchenById] Starting fetch for kitchenId: ${e}`),pe)return console.warn("[getKitchenById] Firebase disabled, returning mock data"),et(e);if(!e||e.trim()==="")throw console.error("[getKitchenById] Invalid kitchenId provided:",e),new Error("Kitchen ID is required and cannot be empty");try{console.log(`[getKitchenById] Querying Firestore collection 'kitchens' for document: ${e}`);const t=await jt(Je(V,"kitchens",e));if(console.log(`[getKitchenById] Document exists: ${t.exists()}`),!t.exists())return console.warn(`[getKitchenById] Kitchen with ID '${e}' not found in Firestore`),console.log("[getKitchenById] Returning mock data as fallback"),et(e);const n={id:t.id,...t.data()};return console.log("[getKitchenById] Successfully fetched kitchen data:",n),n}catch(t){return console.error("[getKitchenById] Error fetching kitchen:",t),console.log("[getKitchenById] Returning mock data due to error"),et(e)}}function Fo(e){if(!e||e.length===0)return{totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0}};const t=e.length;console.log(" ~ calculateReviewStats ~ totalReviews:",t);const n={5:0,4:0,3:0,2:0,1:0};let i=0;e.forEach(s=>{const l=Math.floor(s.rating||0);l>=1&&l<=5&&(n[l]++,i+=s.rating)});const a=t>0?i/t:0,r={};for(let s=1;s<=5;s++)r[s]=t>0?n[s]/t*100:0;return{totalReviews:t,averageRating:parseFloat(a.toFixed(1)),ratingBreakdown:n,ratingPercentages:r}}async function Cf(e=20){if(console.log(`[getAllFoods] Starting fetch with limit: ${e}`),pe)return tt();try{const t=se(te(V,"foodItems"),_e(e)),i=(await ne(t)).docs.map(a=>({id:a.id,...a.data()}));return i.length>0?i:tt()}catch(t){return console.error("[getAllFoods] Error:",t),tt()}}async function $o(e,t=1e3){if(console.log(`[getKitchenAllReviews] Fetching all reviews for kitchen: ${e}`),pe)return console.warn("[getKitchenAllReviews] Firebase disabled, returning mock data"),Ma(e);if(!e||e.trim()==="")return console.log("[getKitchenAllReviews] No kitchenId provided, returning empty array"),[];try{console.log(`[getKitchenAllReviews] Querying reviews subcollection for kitchen: ${e}`);const n=te(V,"kitchens",e,"reviews"),i=se(n,_e(t)),r=(await ne(i)).docs.map(s=>({id:s.id,kitchenId:e,...s.data()}));return console.log(`[getKitchenAllReviews] Found ${r.length} total reviews for kitchen ${e}`),r.length>0&&r.sort((s,l)=>{const c=p=>p?typeof p=="string"?p.includes(" at ")?new Date(p.replace(" at "," ").replace(" UTC+5","")):new Date(p):p.seconds?new Date(p.seconds*1e3):new Date(p):new Date(0),d=c(s.timeStamp);return c(l.timeStamp)-d}),console.log(`[getKitchenAllReviews] Returning ${r.length} reviews for kitchen ${e}`),r}catch(n){return console.error("[getKitchenAllReviews] Error fetching kitchen reviews:",n),console.log("[getKitchenAllReviews] Returning mock data due to error"),Ma(e)}}async function Lf(e){console.log(`[getKitchenReviewStats] Getting review stats for kitchen: ${e}`);try{const t=await $o(e),i={...Fo(t),kitchenId:e,reviewsList:t,uniqueFoodIds:[...new Set(t.map(a=>a.foodId).filter(Boolean))],lastUpdated:new Date().toISOString()};return console.log(`[getKitchenReviewStats] Kitchen ${e} stats:`,i),i}catch(t){return console.error("[getKitchenReviewStats] Error calculating kitchen stats:",t),{kitchenId:e,totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0},reviewsList:[],uniqueFoodIds:[],lastUpdated:new Date().toISOString(),error:t.message}}}function Ma(e){return[{id:"kitchen-review-1",kitchenId:e,foodId:"food-1",userId:"user-1",userName:"Alice Johnson",userProfile:"",rating:5,message:"Amazing food from this kitchen! The Dim Sum was perfect.",timeStamp:"July 10, 2025 at 2:30:00 PM UTC+5",orderId:"order-1"},{id:"kitchen-review-2",kitchenId:e,foodId:"food-2",userId:"user-2",userName:"Bob Smith",userProfile:"",rating:4,message:"Great kitchen, fast delivery and tasty food.",timeStamp:"July 9, 2025 at 7:15:00 PM UTC+5",orderId:"order-2"},{id:"kitchen-review-3",kitchenId:e,foodId:"food-1",userId:"user-3",userName:"Carol Davis",userProfile:"",rating:5,message:"Best kitchen in the area! Highly recommend.",timeStamp:"July 8, 2025 at 12:45:00 PM UTC+5",orderId:"order-3"}]}function Ze(e){return{id:e,name:"Dim Sum (Dumplings)",description:"A timeless delicacy from Chinese cuisine, Dim Sum dumplings are handcrafted pockets of flavor, delicately wrapped in thin, translucent dough. Each dumpling is steamed to perfection, preserving the juicy, savory filling inside.",cost:150,foodCategory:"1, 2",foodType:"Chinese",imageUrl:"/src/assets/images/product.png",kitchenId:"mock-kitchen-1",kitchenName:"Resto Parmato Bapo",isFeatured:!0,availability:{numAvailable:15,numOfSoldItem:85},engagement:{numOfLike:127,rating:4.9,numRatings:1247,countRating:1247}}}function et(e){const t=new Date,n=new Date(t);n.setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()+2);const a=r=>r.toISOString().split("T")[0];return{id:e,name:"Coco's Kitchen",address:"Lahore-Sialkot Motorway",city:"San Francisco",cuisine:"Thai",description:"This is the kitchen of James done. This is the kitchen of James done, This is the kitchen of James done.This is the kitchen of James done",ownerId:"mock-owner-1",location:{latitude:37.5485,longitude:-121.9886},rating:4.9,ratingCount:1247,preorderSchedule:{dates:{[a(n)]:[{id:"schedule-1",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["6:22 PM","7:30 PM"],numOfAvailableItems:10,isLimitedOrder:!1},{id:"schedule-2",foodItemId:"food-4",nameOfFood:"Margherita Pizza",availableTimes:["6:22 PM","8:00 PM"],numOfAvailableItems:8,isLimitedOrder:!1}],[a(i)]:[{id:"schedule-3",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["5:30 PM","7:00 PM"],numOfAvailableItems:12,isLimitedOrder:!1}]}}}}function tt(){return[Ze("food-1"),{...Ze("food-2"),id:"food-2",name:"Margherita Pizza",cost:12.45,availability:{numAvailable:5,numOfSoldItem:2},imageUrl:"/src/assets/images/order2.png"},{...Ze("food-3"),id:"food-3",name:"Dim Sum (Dumplings)",cost:22.45,availability:{numAvailable:0,numOfSoldItem:15},imageUrl:"/src/assets/images/order1.png"},{...Ze("food-4"),id:"food-4",name:"Margherita Pizza (Pre-order)",cost:12.45,availability:{numAvailable:0,numOfSoldItem:8},imageUrl:"/src/assets/images/order2.png"}]}function Ua(e){return[{id:"like-1",userID:"user-1",foodId:e,status:"liked",timestamp:"2025-08-01T10:00:00Z"},{id:"like-2",userID:"user-2",foodId:e,status:"liked",timestamp:"2025-08-02T15:30:00Z"}]}function za(e){return[{id:"review-1",foodId:e,userId:"z6HJ9L3KS3XR9yLZ9rexp7K4Eo43",userName:"Testing55",userProfile:"",rating:4,message:"Testing",timeStamp:"July 7, 2025 at 6:06:01 PM UTC+5",orderId:"PrH8qFuHeHDlpfAw6c9"},{id:"review-2",foodId:e,userId:"user-456",userName:"John Doe",userProfile:"",rating:5,message:"Great food, would definitely order again!",timeStamp:"2025-07-07T15:30:00Z",orderId:"order-456"},{id:"review-3",foodId:e,userId:"user-789",userName:"Jane Smith",userProfile:"",rating:5,message:"Perfect! Exceeded my expectations.",timeStamp:"2025-07-06T10:15:30Z",orderId:"order-789"}]}async function Df(e){if(console.log(`[getKitchenWithFoodItems] Fetching kitchen: ${e}`),pe)return console.warn("[getKitchenWithFoodItems] Firebase disabled, returning mock data"),{kitchen:et(e),foods:tt()};try{const t=await jt(Je(V,"kitchens",e));if(!t.exists())return console.warn(`[getKitchenWithFoodItems] Kitchen ${e} not found`),{kitchen:null,foods:[]};const n={id:t.id,...t.data()},i=te(V,"kitchens",e,"foodItems"),r=(await ne(i)).docs.map(s=>({id:s.id,kitchenId:e,...s.data()}));return console.log(`[getKitchenWithFoodItems] Found ${r.length} food items for kitchen ${e}`),{kitchen:n,foods:r}}catch(t){return console.error("[getKitchenWithFoodItems] Error:",t),{kitchen:et(e),foods:tt()}}}async function Ef(e=10){if(console.log(`[getAllKitchensWithFoodItems] Fetching up to ${e} kitchens`),pe)return console.warn("[getAllKitchensWithFoodItems] Firebase disabled, returning mock data"),[{kitchen:et("mock-kitchen-1"),foods:tt()}];try{const t=se(te(V,"kitchens"),_e(e)),n=await ne(t),i=[];for(const a of n.docs){const r={id:a.id,...a.data()},s=te(V,"kitchens",a.id,"foodItems"),c=(await ne(s)).docs.map(d=>({id:d.id,kitchenId:a.id,...d.data()}));i.push({kitchen:r,foods:c}),console.log(`[getAllKitchensWithFoodItems] Kitchen ${a.id}: ${c.length} food items`)}return console.log(`[getAllKitchensWithFoodItems] Loaded ${i.length} kitchens with food data`),i}catch(t){return console.error("[getAllKitchensWithFoodItems] Error:",t),[{kitchen:et("mock-kitchen-1"),foods:tt()}]}}const _f=async(e,t,n)=>{try{console.log(" Adding like to Firestore:",{kitchenId:e,productId:t,userId:n});const i=te(V,"kitchens",e,"likes"),a={productId:t,userId:n,timestamp:qs()},r=await hr(i,a);return console.log(" Like added successfully with ID:",r.id),{id:r.id,...a}}catch(i){throw console.error(" Error adding like:",i),i}},Af=async(e,t,n)=>{try{console.log(" Removing like from Firestore:",{kitchenId:e,productId:t,userId:n});const i=te(V,"kitchens",e,"likes"),a=se(i,Le("productId","==",t),Le("userId","==",n)),r=await ne(a);if(r.empty)return console.warn(" No like found to remove"),!1;const s=r.docs.map(l=>Bs(l.ref));return await Promise.all(s),console.log(" Like(s) removed successfully"),!0}catch(i){throw console.error(" Error removing like:",i),i}},Mo=async(e,t,n)=>{try{const i=te(V,"kitchens",e,"likes"),a=se(i,Le("productId","==",t),Le("userId","==",n));return!(await ne(a)).empty}catch(i){return console.error(" Error checking user like:",i),!1}},Ba=e=>!e||!e._lat||!e._long?null:{lat:e._lat,lng:e._long},If=e=>!e||!e.seconds?null:new Date(e.seconds*1e3+(e.nanoseconds||0)/1e6).toISOString(),Ee=e=>{if(!e||typeof e!="object")return e;const t={...e};return t.location&&t.location._lat!==void 0&&(t.location=Ba(t.location)),Object.keys(t).forEach(n=>{const i=t[n];i&&typeof i=="object"&&(i._lat!==void 0&&i._long!==void 0?t[n]=Ba(i):i.seconds!==void 0&&(i.nanoseconds!==void 0||i.nanoseconds===0)?t[n]=If(i):Array.isArray(i)?t[n]=i.map(a=>Ee(a)):t[n]=Ee(i))}),t},Lt=J("food/fetchDetail",async({foodId:e,kitchenId:t})=>{try{return{...await Sf(e,t),foodId:e,kitchenId:t}}catch(n){return{food:await No(e),kitchen:null,likes:[],reviews:[],reviewStats:null,foodId:e,kitchenId:t}}}),ii=J("food/fetchAll",async(e=20)=>await Cf(e)),Uo=J("food/checkLikeStatus",async({foodId:e,kitchenId:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(console.log(" Checking like status:",{foodId:e,kitchenId:t,userId:a}),!a||!t)return console.log(" Missing userId or kitchenId for like status check"),{foodId:e,liked:!1};try{const s=await Mo(t,e,a);return console.log(" Like status check result:",{foodId:e,isLiked:s}),{foodId:e,liked:s}}catch(s){return console.error(" Error checking like status:",s),{foodId:e,liked:!1}}}),ki=J("food/toggleLike",async(e,{getState:t})=>{var c,d;const{auth:n,food:i}=t(),a=(c=n.user)==null?void 0:c.id,r=(d=i.currentKitchen)==null?void 0:d.id;if(console.log(" Toggle like action:",{foodId:e,userId:a,kitchenId:r,currentLikedFoods:i.likedFoods}),!a)throw new Error("User not authenticated");if(!r)throw new Error("Kitchen information not available");const s=i.likedFoods.includes(e);console.log(" Current like state from Redux:",{foodId:e,isCurrentlyLiked:s}),console.log(" Checking actual Firestore like state before toggle");const l=await Mo(r,e,a);console.log(" Actual Firestore like state:",{foodId:e,actualFirestoreState:l});try{return l?(console.log(" Attempting to remove like from Firestore"),await Af(r,e,a),console.log(" Like removed from Firestore")):(console.log(" Attempting to add like to Firestore"),await _f(r,e,a),console.log(" Like added to Firestore")),{foodId:e,userId:a,kitchenId:r,liked:!l}}catch(f){throw console.error(" Error toggling like in Firestore:",f),f}});J("food/refresh",async({foodId:e,kitchenId:t},{dispatch:n})=>n(Lt({foodId:e,kitchenId:t})));const zo=Ut({name:"food",initialState:{currentFood:null,currentKitchen:null,currentReviews:[],currentReviewStats:null,currentLikes:[],allFoods:[],likedFoods:[],loading:!1,allFoodsLoading:!1,error:null,allFoodsError:null,lastUpdated:null,allFoodsLastUpdated:null},reducers:{clearCurrentFood:e=>{e.currentFood=null,e.currentKitchen=null,e.currentReviews=[],e.currentReviewStats=null,e.currentLikes=[],e.error=null},clearError:e=>{e.error=null},clearAllFoodsError:e=>{e.allFoodsError=null},updateFoodInList:(e,t)=>{var r;const{foodId:n,updates:i}=t.payload,a=e.allFoods.findIndex(s=>s.id===n);a!==-1&&(e.allFoods[a]={...e.allFoods[a],...i}),((r=e.currentFood)==null?void 0:r.id)===n&&(e.currentFood={...e.currentFood,...i})},toggleLikeLocally:(e,t)=>{const n=t.payload,i=e.likedFoods.includes(n);console.log(" toggleLikeLocally called:",{foodId:n,currentlyLiked:i,likedFoods:e.likedFoods}),i?(e.likedFoods=e.likedFoods.filter(a=>a!==n),console.log(" Locally removed like for:",n)):(e.likedFoods.push(n),console.log(" Locally added like for:",n)),console.log(" Updated likedFoods locally:",e.likedFoods)}},extraReducers:e=>{e.addCase(Lt.pending,t=>{t.loading=!0,t.error=null}).addCase(Lt.fulfilled,(t,n)=>{t.loading=!1;const{food:i,kitchen:a,likes:r,reviews:s,reviewStats:l}=n.payload;t.currentFood=Ee(i),t.currentKitchen=Ee(a),t.currentReviews=s?s.map(c=>Ee(c)):[],t.currentReviewStats=Ee(l),t.currentLikes=r?r.map(c=>Ee(c)):[],t.lastUpdated=new Date().toISOString()}).addCase(Lt.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(ii.pending,t=>{t.allFoodsLoading=!0,t.allFoodsError=null}).addCase(ii.fulfilled,(t,n)=>{t.allFoodsLoading=!1,t.allFoods=n.payload,t.allFoodsLastUpdated=new Date().toISOString()}).addCase(ii.rejected,(t,n)=>{t.allFoodsLoading=!1,t.allFoodsError=n.error.message}).addCase(ki.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;a&&!t.likedFoods.includes(i)?t.likedFoods.push(i):a||(t.likedFoods=t.likedFoods.filter(r=>r!==i))}).addCase(ki.rejected,(t,n)=>{const i=n.meta.arg;t.likedFoods.includes(i)?t.likedFoods=t.likedFoods.filter(r=>r!==i):t.likedFoods.push(i)}).addCase(Uo.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;console.log(" Like status check fulfilled:",{foodId:i,liked:a,currentLikedFoods:t.likedFoods}),a&&!t.likedFoods.includes(i)?(t.likedFoods.push(i),console.log(" Added foodId to likedFoods:",i)):a||(t.likedFoods=t.likedFoods.filter(r=>r!==i),console.log(" Removed foodId from likedFoods:",i)),console.log(" Updated likedFoods:",t.likedFoods)})}}),{clearCurrentFood:Tf,clearError:$h,clearAllFoodsError:Mh,updateFoodInList:Uh,toggleLikeLocally:zh}=zo.actions,Of=zo.reducer,qe=J("cart/addToCart",async({foodId:e,kitchenId:t,quantity:n,selectedDate:i,orderType:a,food:r,specialInstructions:s,pickupDetails:l},{getState:c})=>{var p;const{auth:d}=c(),f=(p=d.user)==null?void 0:p.id;if(!f)throw new Error("User not authenticated");return console.log("Adding to cart:",{foodId:e,kitchenId:t,quantity:n,selectedDate:i,orderType:a,specialInstructions:s,pickupDetails:l,userId:f}),await new Promise(v=>setTimeout(v,500)),{id:`cart-item-${Date.now()}`,foodId:e,kitchenId:t,userId:f,quantity:n,selectedDate:i,orderType:a,specialInstructions:s||"",food:r||null,pickupDetails:l||{date:i,time:null,display:a==="GO_GRAB"?"Pick up today":`Pick up ${i}`,orderType:a},addedAt:new Date().toISOString()}}),nt=J("cart/removeFromCart",async(e,{getState:t})=>{var a;const{auth:n}=t(),i=(a=n.user)==null?void 0:a.id;if(!i)throw new Error("User not authenticated");return console.log("Removing from cart:",{cartItemId:e,userId:i}),await new Promise(r=>setTimeout(r,300)),e}),Dt=J("cart/updateQuantity",async({cartItemId:e,quantity:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");return console.log("Updating cart quantity:",{cartItemId:e,quantity:t,userId:a}),await new Promise(s=>setTimeout(s,300)),{cartItemId:e,quantity:t}}),vn=J("cart/updateItem",async({cartItemId:e,quantity:t,specialInstructions:n},{getState:i})=>{var s;const{auth:a}=i(),r=(s=a.user)==null?void 0:s.id;if(!r)throw new Error("User not authenticated");return console.log("Updating cart item:",{cartItemId:e,quantity:t,specialInstructions:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{cartItemId:e,quantity:t,specialInstructions:n}}),Bo=J("cart/updatePickupDetails",async({cartItemId:e,pickupDate:t,pickupTime:n,orderType:i},{getState:a})=>{var l;const{auth:r}=a(),s=(l=r.user)==null?void 0:l.id;if(!s)throw new Error("User not authenticated");return console.log("Updating pickup details:",{cartItemId:e,pickupDate:t,pickupTime:n,orderType:i,userId:s}),await new Promise(c=>setTimeout(c,300)),{cartItemId:e,pickupDate:t,pickupTime:n,orderType:i}}),qo=J("cart/fetchCart",async(e,{getState:t})=>{var a;const{auth:n}=t(),i=(a=n.user)==null?void 0:a.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching cart for user:",i),[]}),Pe=Ut({name:"cart",initialState:{items:[],totalItems:0,totalAmount:0,loading:!1,error:null,lastUpdated:null},reducers:{clearCart:e=>{e.items=[],e.totalItems=0,e.totalAmount=0,e.lastUpdated=new Date().toISOString()},clearError:e=>{e.error=null},calculateTotals:e=>{e.totalItems=e.items.reduce((t,n)=>t+n.quantity,0),e.totalAmount=e.items.reduce((t,n)=>{var a;const i=((a=n.food)==null?void 0:a.cost)||0;return t+parseFloat(i)*n.quantity},0),e.lastUpdated=new Date().toISOString()},addItemLocally:(e,t)=>{const{foodId:n,quantity:i,selectedDate:a}=t.payload,r=e.items.find(s=>s.foodId===n&&s.selectedDate===a);r?r.quantity+=i:e.items.push(t.payload),Pe.caseReducers.calculateTotals(e)},updatePickupDetailsLocally:(e,t)=>{const{cartItemId:n,pickupDate:i,pickupTime:a,orderType:r}=t.payload,s=e.items.find(l=>l.id===n);s&&(i!==void 0&&(s.selectedDate=i),r!==void 0&&(s.orderType=r),s.pickupDetails||(s.pickupDetails={}),i!==void 0&&(s.pickupDetails.date=i,s.pickupDetails.display=r==="GO_GRAB"?"Pick up today":`Pick up ${i}`),a!==void 0&&(s.pickupDetails.time=a),r!==void 0&&(s.pickupDetails.orderType=r),e.lastUpdated=new Date().toISOString())}},extraReducers:e=>{e.addCase(qe.pending,t=>{t.loading=!0,t.error=null}).addCase(qe.fulfilled,(t,n)=>{t.loading=!1;const i=n.payload,a=t.items.find(r=>r.foodId===i.foodId&&r.selectedDate===i.selectedDate&&r.specialInstructions===i.specialInstructions);a?a.quantity+=i.quantity:t.items.push(i),Pe.caseReducers.calculateTotals(t)}).addCase(qe.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(nt.pending,t=>{t.loading=!0}).addCase(nt.fulfilled,(t,n)=>{t.loading=!1,t.items=t.items.filter(i=>i.id!==n.payload),Pe.caseReducers.calculateTotals(t)}).addCase(nt.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(Dt.fulfilled,(t,n)=>{const{cartItemId:i,quantity:a}=n.payload,r=t.items.find(s=>s.id===i);r&&(r.quantity=a),Pe.caseReducers.calculateTotals(t)}).addCase(vn.fulfilled,(t,n)=>{const{cartItemId:i,quantity:a,specialInstructions:r}=n.payload,s=t.items.find(l=>l.id===i);s&&(s.quantity=a,r!==void 0&&(s.specialInstructions=r)),Pe.caseReducers.calculateTotals(t)}).addCase(Bo.fulfilled,(t,n)=>{const{cartItemId:i,pickupDate:a,pickupTime:r,orderType:s}=n.payload,l=t.items.find(c=>c.id===i);l&&(a!==void 0&&(l.selectedDate=a),s!==void 0&&(l.orderType=s),l.pickupDetails||(l.pickupDetails={}),a!==void 0&&(l.pickupDetails.date=a,l.pickupDetails.display=s==="GO_GRAB"?"Pick up today":`Pick up ${a}`),r!==void 0&&(l.pickupDetails.time=r),s!==void 0&&(l.pickupDetails.orderType=s)),Pe.caseReducers.calculateTotals(t)}).addCase(qo.fulfilled,(t,n)=>{t.items=n.payload,Pe.caseReducers.calculateTotals(t)}).addCase(En,(t,n)=>{var i;if((i=n.payload)!=null&&i.cart)return{...t,...n.payload.cart,loading:!1,error:null}})}}),{clearCart:Tn,clearError:Pf,calculateTotals:Nf,addItemLocally:Ff,updatePickupDetailsLocally:Wo}=Pe.actions,Go=Pe.reducer,Ko=Object.freeze(Object.defineProperty({__proto__:null,addItemLocally:Ff,addToCart:qe,calculateTotals:Nf,clearCart:Tn,clearError:Pf,default:Go,fetchCart:qo,removeFromCart:nt,updateCartItem:vn,updateCartQuantity:Dt,updatePickupDetails:Bo,updatePickupDetailsLocally:Wo},Symbol.toStringTag,{value:"Module"})),rn=J("kitchen/fetchStats",async e=>{try{const t=await Lf(e);return{kitchenId:e,stats:t}}catch(t){throw console.error("Error fetching kitchen stats:",t),t}}),on=J("kitchen/fetchReviews",async({kitchenId:e,limit:t=10})=>{try{const n=await $o(e,t);return{kitchenId:e,reviews:n}}catch(n){throw console.error("Error fetching kitchen reviews:",n),n}}),$f=J("kitchen/addReview",async({kitchenId:e,reviewData:t},{getState:n})=>{var l,c;const{auth:i}=n(),a=(l=i.user)==null?void 0:l.id,r=((c=i.user)==null?void 0:c.name)||"Anonymous";if(!a)throw new Error("User not authenticated");console.log("Adding kitchen review:",{kitchenId:e,reviewData:t,userId:a,userName:r}),await new Promise(d=>setTimeout(d,500));const s={id:`review-${Date.now()}`,userId:a,userName:r,rating:t.rating,comment:t.comment,timestamp:new Date().toISOString(),kitchenId:e};return{kitchenId:e,review:s}}),Mf=J("kitchen/updateReview",async({kitchenId:e,reviewId:t,updates:n},{getState:i})=>{var s;const{auth:a}=i(),r=(s=a.user)==null?void 0:s.id;if(!r)throw new Error("User not authenticated");return console.log("Updating kitchen review:",{kitchenId:e,reviewId:t,updates:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{kitchenId:e,reviewId:t,updates:n}}),Uf=J("kitchen/deleteReview",async({kitchenId:e,reviewId:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");return console.log("Deleting kitchen review:",{kitchenId:e,reviewId:t,userId:a}),await new Promise(s=>setTimeout(s,300)),{kitchenId:e,reviewId:t}}),Ho=Ut({name:"kitchen",initialState:{kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}},reducers:{clearKitchenData:(e,t)=>{const n=t.payload;delete e.kitchenStats[n],delete e.kitchenReviews[n],delete e.statsLoading[n],delete e.reviewsLoading[n],delete e.statsError[n],delete e.reviewsError[n],delete e.statsLastUpdated[n],delete e.reviewsLastUpdated[n]},clearAllKitchenData:()=>({kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}}),clearKitchenErrors:(e,t)=>{const n=t.payload;delete e.statsError[n],delete e.reviewsError[n]}},extraReducers:e=>{e.addCase(rn.pending,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!0,delete t.statsError[i]}).addCase(rn.fulfilled,(t,n)=>{const{kitchenId:i,stats:a}=n.payload;t.statsLoading[i]=!1,t.kitchenStats[i]=Ee(a),t.statsLastUpdated[i]=new Date().toISOString()}).addCase(rn.rejected,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!1,t.statsError[i]=n.error.message}).addCase(on.pending,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!0,delete t.reviewsError[i]}).addCase(on.fulfilled,(t,n)=>{const{kitchenId:i,reviews:a}=n.payload;t.reviewsLoading[i]=!1,t.kitchenReviews[i]=a?a.map(r=>Ee(r)):[],t.reviewsLastUpdated[i]=new Date().toISOString()}).addCase(on.rejected,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!1,t.reviewsError[i]=n.error.message}).addCase($f.fulfilled,(t,n)=>{const{kitchenId:i,review:a}=n.payload;t.kitchenReviews[i]||(t.kitchenReviews[i]=[]);const r=Ee(a);if(t.kitchenReviews[i].unshift(r),t.kitchenStats[i]){const s=t.kitchenStats[i],l=s.totalReviews||0,c=(s.averageRating||0)*l,d=l+1,f=c+a.rating;t.kitchenStats[i]={...s,totalReviews:d,averageRating:f/d}}}).addCase(Mf.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a,updates:r}=n.payload;if(t.kitchenReviews[i]){const s=t.kitchenReviews[i].findIndex(l=>l.id===a);if(s!==-1){const l=t.kitchenReviews[i][s].rating;if(t.kitchenReviews[i][s]={...t.kitchenReviews[i][s],...r,updatedAt:new Date().toISOString()},r.rating&&r.rating!==l&&t.kitchenStats[i]){const c=t.kitchenStats[i],d=c.totalReviews||0,p=(c.averageRating||0)*d-l+r.rating;t.kitchenStats[i]={...c,averageRating:p/d}}}}}).addCase(Uf.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a}=n.payload;if(t.kitchenReviews[i]){const r=t.kitchenReviews[i].findIndex(s=>s.id===a);if(r!==-1){const s=t.kitchenReviews[i][r].rating;if(t.kitchenReviews[i].splice(r,1),t.kitchenStats[i]){const l=t.kitchenStats[i],c=l.totalReviews||0;if(c>1){const d=(l.averageRating||0)*c,f=c-1,p=d-s;t.kitchenStats[i]={...l,totalReviews:f,averageRating:p/f}}else t.kitchenStats[i]={...l,totalReviews:0,averageRating:0}}}}})}}),{clearKitchenData:Bh,clearAllKitchenData:qh,clearKitchenErrors:Wh}=Ho.actions,zf=Ho.reducer,sn=J("reviews/fetchFoodReviews",async({foodId:e,kitchenId:t,limit:n=10})=>{try{console.log("Fetching food reviews:",{foodId:e,kitchenId:t,limit:n}),await new Promise(a=>setTimeout(a,300));const i=[{id:`review-1-${e}`,userId:"user-001",userName:"Alice Chen",rating:5,comment:"Absolutely delicious! Perfect taste and portion size.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-2-${e}`,userId:"user-002",userName:"Bob Wilson",rating:4,comment:"Great food, fast delivery. Will order again!",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-3-${e}`,userId:"user-003",userName:"Carol Davis",rating:5,comment:"Outstanding quality! Fresh ingredients and amazing flavors.",timestamp:new Date(Date.now()-2592e5).toISOString(),foodId:e,kitchenId:t,verified:!0}].slice(0,n);return{foodId:e,kitchenId:t,reviews:i}}catch(i){throw console.error("Error fetching food reviews:",i),i}}),ln=J("reviews/addFoodReview",async({foodId:e,kitchenId:t,reviewData:n},{getState:i})=>{var c,d;const{auth:a}=i(),r=(c=a.user)==null?void 0:c.id,s=((d=a.user)==null?void 0:d.name)||"Anonymous";if(!r)throw new Error("User not authenticated");console.log("Adding food review:",{foodId:e,kitchenId:t,reviewData:n,userId:r,userName:s}),await new Promise(f=>setTimeout(f,500));const l={id:`review-${Date.now()}`,userId:r,userName:s,rating:n.rating,comment:n.comment,timestamp:new Date().toISOString(),foodId:e,kitchenId:t,verified:!0};return{foodId:e,kitchenId:t,review:l}}),Bf=J("reviews/updateFoodReview",async({foodId:e,kitchenId:t,reviewId:n,updates:i},{getState:a})=>{var l;const{auth:r}=a(),s=(l=r.user)==null?void 0:l.id;if(!s)throw new Error("User not authenticated");return console.log("Updating food review:",{foodId:e,kitchenId:t,reviewId:n,updates:i,userId:s}),await new Promise(c=>setTimeout(c,300)),{foodId:e,kitchenId:t,reviewId:n,updates:i}}),qf=J("reviews/deleteFoodReview",async({foodId:e,kitchenId:t,reviewId:n},{getState:i})=>{var s;const{auth:a}=i(),r=(s=a.user)==null?void 0:s.id;if(!r)throw new Error("User not authenticated");return console.log("Deleting food review:",{foodId:e,kitchenId:t,reviewId:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{foodId:e,kitchenId:t,reviewId:n}}),ai=J("reviews/fetchUserReviews",async({limit:e=20},{getState:t})=>{var r;const{auth:n}=t(),i=(r=n.user)==null?void 0:r.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching user reviews:",{userId:i,limit:e}),await new Promise(s=>setTimeout(s,300)),[{id:"user-review-1",userId:i,userName:n.user.name,rating:5,comment:"Loved this dish! Perfect for dinner.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:"food-001",foodName:"Kung Pao Chicken",kitchenId:"kitchen-001",kitchenName:"Mary's Kitchen",verified:!0},{id:"user-review-2",userId:i,userName:n.user.name,rating:4,comment:"Good value for money. Quick delivery.",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:"food-002",foodName:"Beef Noodle Soup",kitchenId:"kitchen-002",kitchenName:"Tom's Noodles",verified:!0}]}),Yo=Ut({name:"reviews",initialState:{foodReviews:{},userReviews:[],foodReviewsLoading:{},userReviewsLoading:!1,foodReviewsError:{},userReviewsError:null,foodReviewsLastUpdated:{},userReviewsLastUpdated:null,submissionLoading:!1,submissionError:null},reducers:{clearFoodReviews:(e,t)=>{const n=t.payload;delete e.foodReviews[n],delete e.foodReviewsLoading[n],delete e.foodReviewsError[n],delete e.foodReviewsLastUpdated[n]},clearAllReviews:e=>{e.foodReviews={},e.userReviews=[],e.foodReviewsLoading={},e.userReviewsLoading=!1,e.foodReviewsError={},e.userReviewsError=null,e.foodReviewsLastUpdated={},e.userReviewsLastUpdated=null},clearReviewErrors:(e,t)=>{if(t.payload){const n=t.payload;delete e.foodReviewsError[n]}else e.foodReviewsError={},e.userReviewsError=null,e.submissionError=null},clearSubmissionError:e=>{e.submissionError=null}},extraReducers:e=>{e.addCase(sn.pending,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!0,delete t.foodReviewsError[i]}).addCase(sn.fulfilled,(t,n)=>{const{foodId:i,reviews:a}=n.payload;t.foodReviewsLoading[i]=!1,t.foodReviews[i]=a,t.foodReviewsLastUpdated[i]=new Date().toISOString()}).addCase(sn.rejected,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!1,t.foodReviewsError[i]=n.error.message}).addCase(ln.pending,t=>{t.submissionLoading=!0,t.submissionError=null}).addCase(ln.fulfilled,(t,n)=>{t.submissionLoading=!1;const{foodId:i,review:a}=n.payload;t.foodReviews[i]||(t.foodReviews[i]=[]),t.foodReviews[i].unshift(a),t.userReviews.unshift({...a,foodName:"Unknown Food",kitchenName:"Unknown Kitchen"})}).addCase(ln.rejected,(t,n)=>{t.submissionLoading=!1,t.submissionError=n.error.message}).addCase(Bf.fulfilled,(t,n)=>{const{foodId:i,reviewId:a,updates:r}=n.payload;if(t.foodReviews[i]){const l=t.foodReviews[i].findIndex(c=>c.id===a);l!==-1&&(t.foodReviews[i][l]={...t.foodReviews[i][l],...r,updatedAt:new Date().toISOString()})}const s=t.userReviews.findIndex(l=>l.id===a);s!==-1&&(t.userReviews[s]={...t.userReviews[s],...r,updatedAt:new Date().toISOString()})}).addCase(qf.fulfilled,(t,n)=>{const{foodId:i,reviewId:a}=n.payload;t.foodReviews[i]&&(t.foodReviews[i]=t.foodReviews[i].filter(r=>r.id!==a)),t.userReviews=t.userReviews.filter(r=>r.id!==a)}).addCase(ai.pending,t=>{t.userReviewsLoading=!0,t.userReviewsError=null}).addCase(ai.fulfilled,(t,n)=>{t.userReviewsLoading=!1,t.userReviews=n.payload,t.userReviewsLastUpdated=new Date().toISOString()}).addCase(ai.rejected,(t,n)=>{t.userReviewsLoading=!1,t.userReviewsError=n.error.message})}}),{clearFoodReviews:Gh,clearAllReviews:Kh,clearReviewErrors:Hh,clearSubmissionError:Yh}=Yo.actions,Wf=Yo.reducer,Gf={key:"root",storage:_n,whitelist:["auth","cart"],blacklist:["food","kitchen","reviews"]},Kf={key:"auth",storage:_n,whitelist:["user","isAuthenticated","isDevelopmentMode"],blacklist:["loading","error","wechatAuthUrl"]},Hf={key:"cart",storage:_n,whitelist:["items","totalItems","totalAmount"],blacklist:["loading","error"]},Yf=Ar({auth:vi(Kf,Fd),food:Of,cart:vi(Hf,Go),kitchen:zf,reviews:Wf}),Vf=vi(Gf,Yf),Vo=zc({reducer:Vf,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})}),Qo=Cd(Vo),Zo=J("app/performCompleteLogout",async(e,{dispatch:t})=>{try{return console.log(" Starting complete logout process..."),t(Nd()),t(Tn()),await Qo.purge(),localStorage.removeItem("persist:root"),localStorage.removeItem("persist:auth"),localStorage.removeItem("persist:cart"),sessionStorage.clear(),console.log(" Complete logout successful"),{success:!0}}catch(n){throw console.error(" Logout error:",n),n}}),Zi=h.createContext(null),me=Ye?mr(Ye):null;function Qf({children:e}){const[t,n]=h.useState(null),[i,a]=h.useState(!0),r=Ge();h.useEffect(()=>{if(pe||!me){const g=localStorage.getItem("test_user_session");if(g)try{const w=JSON.parse(g);n(w),r(Sa(w)),console.log(" Restored test user session:",w)}catch(w){console.warn("Failed to restore test session:",w),localStorage.removeItem("test_user_session")}a(!1);return}const v=Ws(me,g=>{n(g||null),a(!1)});return()=>v()},[me,r]);const s=h.useCallback(async()=>{if(pe||!me){console.info("Auth disabled: anonymous sign-in skipped");return}await Gs(me)},[me]),l=h.useCallback(()=>{const v="wx4a71fe09bb125182",g=encodeURIComponent("https://master.d5tekh3anrrmn.amplifyapp.com/wechat/callback"),w="snsapi_base",C="we_"+Math.random().toString(36).slice(2);window.location.href=`https://open.weixin.qq.com/connect/oauth2/authorize?appid=${v}&redirect_uri=${g}&response_type=code&scope=${w}&state=${C}#wechat_redirect`},[]),c=h.useCallback(async v=>{console.log("WeChat code obtained:",v);const w=new Ks("wechat").credential({accessToken:"placeholder_access_token"});!pe&&me?await Hs(me,w).catch(C=>{console.warn("WeChat credential sign-in failed (expected in placeholder):",C.message)}):console.info("Auth disabled: skipping credential sign-in (placeholder)")},[me]),d=h.useCallback(async()=>{console.log(" Using test user bypass");const v={id:`test_user_${Date.now()}`,uid:`test_user_${Date.now()}`,openid:`test_openid_${Date.now()}`,name:"Test User",displayName:"Test User",avatar:null,photoURL:null,email:null,country:"Test Country",province:"Test Province",city:"Test City",sex:0,language:"en",isAuthenticated:!0,authMethod:"test",wechatOpenId:`test_openid_${Date.now()}`,accessToken:"test_access_token",providerId:"test",isAnonymous:!1,createdAt:new Date().toISOString()};return n(v),r(Sa(v)),localStorage.setItem("test_user_session",JSON.stringify(v)),console.log(" Test user signed in:",v),v},[r]),f=h.useCallback(async()=>{try{!pe&&me&&await na(me),localStorage.removeItem("test_user_session"),n(null),await r(Zo()).unwrap(),console.log(" Complete logout successful")}catch(v){console.error(" Logout error:",v),!pe&&me&&await na(me),localStorage.removeItem("test_user_session"),n(null)}},[me,r]),p={user:t,initializing:i,authDisabled:pe,signInAnonymously:s,signInWithWeChatPopup:l,signInWithTestUser:d,handleWeChatCallback:c,signOut:f};return o.jsx(Zi.Provider,{value:p,children:e})}function Ji(){const e=h.useContext(Zi);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Zf(){const{user:e,signOut:t,authDisabled:n}=Ji();return o.jsxs("div",{className:"container py-3",children:[o.jsxs("h1",{className:"h4 mb-3",children:["Welcome ",(e==null?void 0:e.displayName)||"User"]}),o.jsx("p",{className:"text-secondary small mb-4",children:"This is a mobile-first boilerplate."}),n&&o.jsx("div",{className:"alert alert-warning p-2 small",role:"alert",children:"Firebase auth disabled (placeholder config). Add real env values to enable."}),o.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:t,children:"Sign out"})]})}const ji="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3ccircle%20cx='9'%20cy='10'%20r='1'/%3e%3ccircle%20cx='15'%20cy='10'%20r='1'/%3e%3cpath%20d='M5%2015c-1.143-1.012-2-2.547-2-4.25C3%207.798%205.91%205%209.5%205s6.5%202.798%206.5%205.75S13.09%2016.5%209.5%2016.5c-.517%200-1.02-.057-1.5-.165L5%2018l.8-2.4'/%3e%3cpath%20d='M16.5%208.5c2.485%200%204.5%201.79%204.5%204s-2.015%204-4.5%204c-.275%200-.544-.02-.805-.06L14%2018l.6-1.8'/%3e%3c/svg%3e";function Jf(){const{signInWithWeChatPopup:e,signInAnonymously:t}=Ji();return o.jsxs("div",{className:"container py-5",children:[o.jsx("h1",{className:"h5 mb-4 text-center",children:"Sign In"}),o.jsxs("div",{className:"d-grid gap-3",children:[o.jsxs("button",{className:"btn btn-success d-flex align-items-center justify-content-center gap-2",onClick:e,children:[o.jsx("img",{src:ji,alt:"WeChat",style:{width:20,height:20}}),o.jsx("span",{children:"Continue with WeChat"})]}),o.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Continue as Guest"})]})]})}const Q={success:(e,t={})=>ft.success(e,{icon:"",duration:3e3,style:{background:"#F0FDF4",color:"#15803D",border:"1px solid #22C55E",borderRadius:"12px",padding:"16px"},...t}),error:(e,t={})=>ft.error(e,{icon:"",duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #EF4444",borderRadius:"12px",padding:"16px"},...t}),info:(e,t={})=>ft(e,{icon:"",duration:3500,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #3B82F6",borderRadius:"12px",padding:"16px"},...t}),warning:(e,t={})=>ft(e,{icon:"",duration:4e3,style:{background:"#FEF3C7",color:"#92400E",border:"1px solid #F59E0B",borderRadius:"12px",padding:"16px"},...t}),cart:(e,t={})=>ft.success(e,{icon:"",duration:3e3,style:{background:"#F0F9FF",color:"#0C4A6E",border:"1px solid #0EA5E9",borderRadius:"12px",padding:"16px"},...t}),loading:(e,t={})=>ft.loading(e,{style:{background:"#F9FAFB",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"12px",padding:"16px"},...t})},Xf=()=>{const[e]=or(),t=Ge(),n=vt(),[i,a]=h.useState("processing");return h.useEffect(()=>{(async()=>{try{const s=e.get("code"),l=e.get("state"),c=e.get("error");if(console.log("WeChat callback received:",{code:s,state:l,error:c}),c)throw new Error(`WeChat OAuth error: ${c}`);if(!s)throw new Error("Authorization code not received from WeChat");if(s==="dev_mock_code"){console.log(" Processing development mode authentication");const p=localStorage.getItem("wechat_auth_user");if(p){const v=JSON.parse(p);console.log(" Dev authentication successful:",v),t({type:"auth/authenticateWithWeChat/fulfilled",payload:v}),a("success"),Q.success(`Welcome ${v.name}! (Dev Mode)`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),Q.info("You can now add items to your cart"),setTimeout(()=>n("/foods",{replace:!0}),1500)):setTimeout(()=>n("/foods",{replace:!0}),1500);return}}a("processing");const d=await t(an(s)).unwrap();console.log(" WeChat authentication successful:",d),a("success"),Q.success(`Welcome ${d.name||"User"}!`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),Q.info("You can now add items to your cart!"),setTimeout(()=>{window.history.back()||n("/foods")},1500)):setTimeout(()=>{n("/")},1500)}catch(s){console.error(" WeChat authentication failed:",s),a("error"),Q.error(s.message||"Authentication failed"),setTimeout(()=>{n("/")},3e3)}})()},[e,t,n]),o.jsx("div",{className:"wechat-callback-page",children:o.jsx("div",{className:"container py-5",children:o.jsxs("div",{className:"text-center",children:[i==="processing"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"spinner-border text-success mb-3",role:"status",children:o.jsx("span",{className:"visually-hidden",children:"Loading..."})}),o.jsx("h2",{children:"Processing WeChat Authentication..."}),o.jsx("p",{className:"text-muted",children:"Please wait while we sign you in."})]}),i==="success"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-success mb-3",children:o.jsx("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:o.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.061L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),o.jsx("h2",{children:"Authentication Successful!"}),o.jsx("p",{className:"text-muted",children:"Redirecting you now..."})]}),i==="error"&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"text-danger mb-3",children:o.jsxs("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:[o.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),o.jsx("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]})}),o.jsx("h2",{children:"Authentication Failed"}),o.jsx("p",{className:"text-muted",children:"Something went wrong. Redirecting to home..."})]})]})})})},em="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='1024'%20height='1024'%20viewBox='0%200%20500%20500'%3e%3crect%20x='0'%20y='0'%20width='500'%20height='500'%20fill='%23ffffff'/%3e%3cg%20transform='scale(18.519)'%3e%3cg%20transform='translate(1,1)'%3e%3cg%3e%3cg%20transform='translate(3.5,3.5)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(21.5,3.5)'%3e%3cg%20transform='rotate(90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(3.5,21.5)'%3e%3cg%20transform='rotate(-90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20fill-rule='evenodd'%20d='M9%200L9%202L8%202L8%208L10%208L10%209L9%209L9%2011L8%2011L8%2013L7%2013L7%2012L5%2012L5%2013L4%2013L4%2012L2%2012L2%2013L3%2013L3%2014L4%2014L4%2015L5%2015L5%2016L6%2016L6%2017L7%2017L7%2016L8%2016L8%2018L9%2018L9%2012L10%2012L10%2013L12%2013L12%2017L10%2017L10%2018L12%2018L12%2019L11%2019L11%2020L12%2020L12%2022L13%2022L13%2023L11%2023L11%2024L12%2024L12%2025L13%2025L13%2023L14%2023L14%2024L15%2024L15%2021L16%2021L16%2022L17%2022L17%2024L22%2024L22%2025L25%2025L25%2024L24%2024L24%2023L25%2023L25%2021L23%2021L23%2022L22%2022L22%2023L21%2023L21%2021L22%2021L22%2019L25%2019L25%2015L23%2015L23%2014L22%2014L22%2015L23%2015L23%2016L24%2016L24%2018L22%2018L22%2019L21%2019L21%2017L22%2017L22%2016L15%2016L15%2013L16%2013L16%2014L17%2014L17%2015L19%2015L19%2014L20%2014L20%2015L21%2015L21%2013L22%2013L22%2012L18%2012L18%2011L19%2011L19%2010L20%2010L20%2011L21%2011L21%209L23%209L23%208L18%208L18%209L17%209L17%2010L16%2010L16%208L17%208L17%206L16%206L16%204L17%204L17%202L16%202L16%201L17%201L17%200L16%200L16%201L15%201L15%200L14%200L14%201L13%201L13%200L12%200L12%202L16%202L16%203L14%203L14%205L13%205L13%203L9%203L9%202L11%202L11%201L10%201L10%200ZM9%204L9%207L10%207L10%208L12%208L12%209L13%209L13%2011L12%2011L12%2010L11%2010L11%2011L12%2011L12%2012L13%2012L13%2014L14%2014L14%2013L15%2013L15%2012L16%2012L16%2013L17%2013L17%2014L19%2014L19%2013L17%2013L17%2012L16%2012L16%2011L15%2011L15%2012L13%2012L13%2011L14%2011L14%209L13%209L13%207L14%207L14%208L16%208L16%206L15%206L15%205L14%205L14%206L13%206L13%205L12%205L12%204L11%204L11%207L10%207L10%204ZM12%206L12%207L13%207L13%206ZM14%206L14%207L15%207L15%206ZM0%208L0%209L1%209L1%2010L0%2010L0%2017L1%2017L1%2010L2%2010L2%2011L5%2011L5%2010L3%2010L3%209L7%209L7%2010L6%2010L6%2011L7%2011L7%2010L8%2010L8%209L7%209L7%208L2%208L2%209L1%209L1%208ZM18%209L18%2010L19%2010L19%209ZM24%209L24%2010L25%2010L25%209ZM22%2010L22%2011L23%2011L23%2010ZM23%2012L23%2013L24%2013L24%2014L25%2014L25%2012ZM5%2013L5%2015L6%2015L6%2016L7%2016L7%2015L8%2015L8%2014L7%2014L7%2013ZM6%2014L6%2015L7%2015L7%2014ZM10%2014L10%2016L11%2016L11%2014ZM2%2015L2%2017L3%2017L3%2015ZM13%2015L13%2016L14%2016L14%2015ZM12%2017L12%2018L13%2018L13%2019L12%2019L12%2020L14%2020L14%2021L13%2021L13%2022L14%2022L14%2021L15%2021L15%2020L16%2020L16%2017ZM17%2017L17%2020L20%2020L20%2017ZM14%2018L14%2019L15%2019L15%2018ZM18%2018L18%2019L19%2019L19%2018ZM8%2019L8%2023L9%2023L9%2024L8%2024L8%2025L10%2025L10%2022L11%2022L11%2021L10%2021L10%2022L9%2022L9%2020L10%2020L10%2019ZM17%2021L17%2022L19%2022L19%2023L20%2023L20%2021ZM23%2022L23%2023L22%2023L22%2024L23%2024L23%2023L24%2023L24%2022Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";var Jo={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ds,function(){var n=1e3,i=6e4,a=36e5,r="millisecond",s="second",l="minute",c="hour",d="day",f="week",p="month",v="quarter",g="year",w="date",C="Invalid Date",I=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(u){var y=["th","st","nd","rd"],x=u%100;return"["+u+(y[(x-20)%10]||y[x]||y[0])+"]"}},F=function(u,y,x){var b=String(u);return!b||b.length>=y?u:""+Array(y+1-b.length).join(x)+u},A={s:F,z:function(u){var y=-u.utcOffset(),x=Math.abs(y),b=Math.floor(x/60),k=x%60;return(y<=0?"+":"-")+F(b,2,"0")+":"+F(k,2,"0")},m:function u(y,x){if(y.date()<x.date())return-u(x,y);var b=12*(x.year()-y.year())+(x.month()-y.month()),k=y.clone().add(b,p),E=x-k<0,D=y.clone().add(b+(E?-1:1),p);return+(-(b+(x-k)/(E?k-D:D-k))||0)},a:function(u){return u<0?Math.ceil(u)||0:Math.floor(u)},p:function(u){return{M:p,y:g,w:f,d,D:w,h:c,m:l,s,ms:r,Q:v}[u]||String(u||"").toLowerCase().replace(/s$/,"")},u:function(u){return u===void 0}},R="en",_={};_[R]=z;var N="$isDayjsObject",B=function(u){return u instanceof m||!(!u||!u[N])},T=function u(y,x,b){var k;if(!y)return R;if(typeof y=="string"){var E=y.toLowerCase();_[E]&&(k=E),x&&(_[E]=x,k=E);var D=y.split("-");if(!k&&D.length>1)return u(D[0])}else{var $=y.name;_[$]=y,k=$}return!b&&k&&(R=k),k||!b&&R},S=function(u,y){if(B(u))return u.clone();var x=typeof y=="object"?y:{};return x.date=u,x.args=arguments,new m(x)},O=A;O.l=T,O.i=B,O.w=function(u,y){return S(u,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var m=function(){function u(x){this.$L=T(x.locale,null,!0),this.parse(x),this.$x=this.$x||x.x||{},this[N]=!0}var y=u.prototype;return y.parse=function(x){this.$d=function(b){var k=b.date,E=b.utc;if(k===null)return new Date(NaN);if(O.u(k))return new Date;if(k instanceof Date)return new Date(k);if(typeof k=="string"&&!/Z$/i.test(k)){var D=k.match(I);if(D){var $=D[2]-1||0,M=(D[7]||"0").substring(0,3);return E?new Date(Date.UTC(D[1],$,D[3]||1,D[4]||0,D[5]||0,D[6]||0,M)):new Date(D[1],$,D[3]||1,D[4]||0,D[5]||0,D[6]||0,M)}}return new Date(k)}(x),this.init()},y.init=function(){var x=this.$d;this.$y=x.getFullYear(),this.$M=x.getMonth(),this.$D=x.getDate(),this.$W=x.getDay(),this.$H=x.getHours(),this.$m=x.getMinutes(),this.$s=x.getSeconds(),this.$ms=x.getMilliseconds()},y.$utils=function(){return O},y.isValid=function(){return this.$d.toString()!==C},y.isSame=function(x,b){var k=S(x);return this.startOf(b)<=k&&k<=this.endOf(b)},y.isAfter=function(x,b){return S(x)<this.startOf(b)},y.isBefore=function(x,b){return this.endOf(b)<S(x)},y.$g=function(x,b,k){return O.u(x)?this[b]:this.set(k,x)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(x,b){var k=this,E=!!O.u(b)||b,D=O.p(x),$=function(xe,q){var P=O.w(k.$u?Date.UTC(k.$y,q,xe):new Date(k.$y,q,xe),k);return E?P:P.endOf(d)},M=function(xe,q){return O.w(k.toDate()[xe].apply(k.toDate("s"),(E?[0,0,0,0]:[23,59,59,999]).slice(q)),k)},H=this.$W,G=this.$M,le=this.$D,re="set"+(this.$u?"UTC":"");switch(D){case g:return E?$(1,0):$(31,11);case p:return E?$(1,G):$(0,G+1);case f:var ve=this.$locale().weekStart||0,Re=(H<ve?H+7:H)-ve;return $(E?le-Re:le+(6-Re),G);case d:case w:return M(re+"Hours",0);case c:return M(re+"Minutes",1);case l:return M(re+"Seconds",2);case s:return M(re+"Milliseconds",3);default:return this.clone()}},y.endOf=function(x){return this.startOf(x,!1)},y.$set=function(x,b){var k,E=O.p(x),D="set"+(this.$u?"UTC":""),$=(k={},k[d]=D+"Date",k[w]=D+"Date",k[p]=D+"Month",k[g]=D+"FullYear",k[c]=D+"Hours",k[l]=D+"Minutes",k[s]=D+"Seconds",k[r]=D+"Milliseconds",k)[E],M=E===d?this.$D+(b-this.$W):b;if(E===p||E===g){var H=this.clone().set(w,1);H.$d[$](M),H.init(),this.$d=H.set(w,Math.min(this.$D,H.daysInMonth())).$d}else $&&this.$d[$](M);return this.init(),this},y.set=function(x,b){return this.clone().$set(x,b)},y.get=function(x){return this[O.p(x)]()},y.add=function(x,b){var k,E=this;x=Number(x);var D=O.p(b),$=function(G){var le=S(E);return O.w(le.date(le.date()+Math.round(G*x)),E)};if(D===p)return this.set(p,this.$M+x);if(D===g)return this.set(g,this.$y+x);if(D===d)return $(1);if(D===f)return $(7);var M=(k={},k[l]=i,k[c]=a,k[s]=n,k)[D]||1,H=this.$d.getTime()+x*M;return O.w(H,this)},y.subtract=function(x,b){return this.add(-1*x,b)},y.format=function(x){var b=this,k=this.$locale();if(!this.isValid())return k.invalidDate||C;var E=x||"YYYY-MM-DDTHH:mm:ssZ",D=O.z(this),$=this.$H,M=this.$m,H=this.$M,G=k.weekdays,le=k.months,re=k.meridiem,ve=function(q,P,K,ee){return q&&(q[P]||q(b,E))||K[P].slice(0,ee)},Re=function(q){return O.s($%12||12,q,"0")},xe=re||function(q,P,K){var ee=q<12?"AM":"PM";return K?ee.toLowerCase():ee};return E.replace(L,function(q,P){return P||function(K){switch(K){case"YY":return String(b.$y).slice(-2);case"YYYY":return O.s(b.$y,4,"0");case"M":return H+1;case"MM":return O.s(H+1,2,"0");case"MMM":return ve(k.monthsShort,H,le,3);case"MMMM":return ve(le,H);case"D":return b.$D;case"DD":return O.s(b.$D,2,"0");case"d":return String(b.$W);case"dd":return ve(k.weekdaysMin,b.$W,G,2);case"ddd":return ve(k.weekdaysShort,b.$W,G,3);case"dddd":return G[b.$W];case"H":return String($);case"HH":return O.s($,2,"0");case"h":return Re(1);case"hh":return Re(2);case"a":return xe($,M,!0);case"A":return xe($,M,!1);case"m":return String(M);case"mm":return O.s(M,2,"0");case"s":return String(b.$s);case"ss":return O.s(b.$s,2,"0");case"SSS":return O.s(b.$ms,3,"0");case"Z":return D}return null}(q)||D.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(x,b,k){var E,D=this,$=O.p(b),M=S(x),H=(M.utcOffset()-this.utcOffset())*i,G=this-M,le=function(){return O.m(D,M)};switch($){case g:E=le()/12;break;case p:E=le();break;case v:E=le()/3;break;case f:E=(G-H)/6048e5;break;case d:E=(G-H)/864e5;break;case c:E=G/a;break;case l:E=G/i;break;case s:E=G/n;break;default:E=G}return k?E:O.a(E)},y.daysInMonth=function(){return this.endOf(p).$D},y.$locale=function(){return _[this.$L]},y.locale=function(x,b){if(!x)return this.$L;var k=this.clone(),E=T(x,b,!0);return E&&(k.$L=E),k},y.clone=function(){return O.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},u}(),j=m.prototype;return S.prototype=j,[["$ms",r],["$s",s],["$m",l],["$H",c],["$W",d],["$M",p],["$y",g],["$D",w]].forEach(function(u){j[u[1]]=function(y){return this.$g(y,u[0],u[1])}}),S.extend=function(u,y){return u.$i||(u(y,m,S),u.$i=!0),S},S.locale=T,S.isDayjs=B,S.unix=function(u){return S(1e3*u)},S.en=_[R],S.Ls=_,S.p={},S})})(Jo);var tm=Jo.exports;const Y=sr(tm);function Xo(e){const[t,n]=h.useState(null),[i,a]=h.useState([]),[r,s]=h.useState(!0),[l,c]=h.useState(null);return h.useEffect(()=>{async function d(){if(!e){s(!1);return}console.log(`[useKitchenWithFoods] Fetching kitchen: ${e}`);try{s(!0),c(null);const{kitchen:f,foods:p}=await Df(e);n(f),a(p),console.log(`[useKitchenWithFoods] Loaded kitchen with ${p.length} foods`)}catch(f){console.error("[useKitchenWithFoods] Error:",f),c(f.message)}finally{s(!1)}}d()},[e]),{kitchen:t,foods:i,loading:r,error:l,hasData:!!t&&i.length>0}}function nm(e=10){const[t,n]=h.useState([]),[i,a]=h.useState(!0),[r,s]=h.useState(null);h.useEffect(()=>{async function d(){console.log(`[useAllKitchensWithFoods] Fetching up to ${e} kitchens`);try{a(!0),s(null);const f=await Ef(e);n(f);const p=f.reduce((v,g)=>v+g.foods.length,0);console.log(`[useAllKitchensWithFoods] Loaded ${f.length} kitchens with ${p} total foods`)}catch(f){console.error("[useAllKitchensWithFoods] Error:",f),s(f.message)}finally{a(!1)}}d()},[e]);const l=t.reduce((d,f)=>[...d,...f.foods],[]),c=t.length>0?t[0].kitchen:null;return{kitchensData:t,allFoods:l,primaryKitchen:c,loading:i,error:r,hasData:t.length>0,totalKitchens:t.length,totalFoods:l.length}}const im="modulepreload",am=function(e){return"/"+e},qa={},es=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=am(c),c in qa)return;qa[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${f}`))return;const p=document.createElement("link");if(p.rel=d?"stylesheet":im,d||(p.as="script"),p.crossOrigin="",p.href=c,l&&p.setAttribute("nonce",l),document.head.appendChild(p),d)return new Promise((v,g)=>{p.addEventListener("load",v),p.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},ts=(e,{foodId:t,selectedDate:n,specialInstructions:i=""})=>e.find(a=>a.foodId===t&&a.selectedDate===n&&(a.specialInstructions||"").trim()===i.trim()),rm=(e,t,n=null)=>e.filter(i=>i.foodId===t&&(!n||i.selectedDate===n)).reduce((i,a)=>i+a.quantity,0),ns=async({food:e,kitchen:t,quantity:n=1,selectedDate:i=null,selectedTime:a=null,specialInstructions:r="",isPreOrder:s=!1,pickupDetails:l=null},c,d,f,p=null)=>{try{const v=ts(f,{foodId:e.id,selectedDate:i,specialInstructions:r});if(v){const I=v.quantity+n,L=`Updated ${e.name} in cart (quantity: ${v.quantity}  ${I})`;try{if(p)await c(p({cartItemId:v.id,quantity:I,specialInstructions:r.trim()}));else{const{updateCartItem:z}=await es(async()=>{const{updateCartItem:F}=await Promise.resolve().then(()=>Ko);return{updateCartItem:F}},void 0);await c(z({cartItemId:v.id,quantity:I,specialInstructions:r.trim()}))}return Q.success(L),{success:!0,isExisting:!0,existingQuantity:v.quantity,newQuantity:I,message:L}}catch(z){console.warn("Failed to update existing item, adding as new item:",z)}}const g=l||om(i,s,a),w={foodId:e.id,kitchenId:e.kitchenId||(t==null?void 0:t.id),quantity:n,selectedDate:i,specialInstructions:r.trim(),orderType:s?"PRE_ORDER":"GO_GRAB",food:{id:e.id,name:e.name,cost:e.cost,price:e.price||e.cost,imageUrl:e.imageUrl,description:e.description||"This dish features tender, juicy flavors",...e},kitchen:{id:(t==null?void 0:t.id)||e.kitchenId,name:(t==null?void 0:t.name)||e.kitchenName||"Unknown Kitchen",address:t==null?void 0:t.address,...t},pickupDetails:g},C=await c(d(w));return Q.cart(`Added ${e.name} to cart!`),{success:!0,isExisting:!1,message:`Added ${e.name} to cart!`,result:C}}catch(v){console.error("Error adding to cart:",v);const g=v.message||"Failed to add item to cart";return Q.error(g),{success:!1,isExisting:!1,message:g,error:v}}},is=async({food:e,selectedDate:t=null,specialInstructions:n="",quantity:i=1},a,r,s)=>{try{const l=ts(s,{foodId:e.id,selectedDate:t,specialInstructions:n});if(!l)throw new Error("Item not found in cart");if(i>0&&l.quantity>i){const{updateCartItem:c}=await es(async()=>{const{updateCartItem:f}=await Promise.resolve().then(()=>Ko);return{updateCartItem:f}},void 0),d=l.quantity-i;return await a(c({cartItemId:l.id,quantity:d,specialInstructions:l.specialInstructions})),Q.info(`Removed ${i} ${e.name} from cart`),{success:!0,message:`Removed ${i} ${e.name} from cart`}}else return await a(r(l.id)),Q.info(`Removed ${e.name} from cart`),{success:!0,message:`Removed ${e.name} from cart`}}catch(l){console.error("Error removing from cart:",l);const c=l.message||"Failed to remove item from cart";return Q.error(c),{success:!1,message:c,error:l}}},om=(e=null,t=!1,n=null)=>{if(!t||!e){const i=new Date,a=n||new Date(i.getTime()+30*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{date:i.toISOString().split("T")[0],time:a,display:`Today at ${a}`,orderType:"Go&Grab"}}else{const i=new Date(e),a=n||"6:30 PM",r=new Date;r.setHours(0,0,0,0),i.setHours(0,0,0,0);const l=i.getTime()===r.getTime()?"Go&Grab":"Pre-Order";return{date:e,time:a,display:`${i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} at ${a}`,orderType:l}}},sm=async({food:e,kitchen:t,newQuantity:n,currentQuantity:i,selectedDate:a=null,selectedTime:r=null,specialInstructions:s="",isPreOrder:l=!1},c,d,f,p,v=null)=>{try{if(n>i){const g=n-i;return await ns({food:e,kitchen:t,quantity:g,selectedDate:a,selectedTime:r,specialInstructions:s,isPreOrder:l},c,d,p,v)}else if(n<i){const g=i-n;return await is({food:e,selectedDate:a,specialInstructions:s,quantity:g},c,f,p)}return{success:!0,message:"Quantity unchanged"}}catch(g){return console.error("Error changing quantity:",g),{success:!1,message:g.message||"Failed to update quantity",error:g}}},as=()=>{const e=Ge(),t=he(l=>l.cart.items),n=he(l=>l.auth.isAuthenticated);return{cartItems:t,isAuthenticated:n,getCartQuantity:(l,c=null)=>rm(t,l,c),addToCartWithCheck:async l=>n?await ns(l,e,qe,t,vn):{success:!1,message:"Please sign in with WeChat to add items to cart",requiresAuth:!0},removeFromCartGeneric:async l=>await is(l,e,nt,t),handleQuantityChange:async l=>n?await sm(l,e,qe,nt,t,vn):{success:!1,message:"Please sign in with WeChat to modify cart",requiresAuth:!0},dispatch:e,addToCart:qe,removeFromCart:nt}},xn="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16675%201.66699H7.50008C3.33341%201.66699%201.66675%203.33366%201.66675%207.50033V12.5003C1.66675%2016.667%203.33341%2018.3337%207.50008%2018.3337H12.5001C16.6667%2018.3337%2018.3334%2016.667%2018.3334%2012.5003V10.8337'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.3668%202.51639L6.80014%209.08306C6.55014%209.33306%206.30014%209.82472%206.25014%2010.1831L5.89181%2012.6914C5.75848%2013.5997%206.40014%2014.2331%207.30848%2014.1081L9.81681%2013.7497C10.1668%2013.6997%2010.6585%2013.4497%2010.9168%2013.1997L17.4835%206.63306C18.6168%205.49972%2019.1501%204.18306%2017.4835%202.51639C15.8168%200.849722%2014.5001%201.38306%2013.3668%202.51639Z'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.425%203.45801C12.9834%205.44967%2014.5417%207.00801%2016.5417%207.57467'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e",Tt=({food:e=null,kitchen:t=null,selectedDate:n=null,initialQuantity:i=1,maxQuantity:a=99,minQuantity:r=1,onQuantityChange:s=()=>{},onAvailabilityChange:l=()=>{},onError:c=()=>{},onWarning:d=()=>{},showAvailabilityInfo:f=!0,showErrorMessages:p=!0,size:v="medium",className:g="",disabled:w=!1})=>{console.log("QuantitySelector render params:",{showAvailabilityInfo:f,showErrorMessages:p});const[C,I]=h.useState(i),[L,z]=h.useState({isAvailable:!0,maxAvailable:a,orderType:n?"PRE_ORDER":"GO_GRAB",message:null,warning:null,actualCheckingDate:n}),F=h.useCallback(()=>{var S,O,m,j,u,y;if(console.log(" AVAILABILITY CALCULATION START"),console.log("DEBUG - Availability calculation:",{foodId:e==null?void 0:e.id,foodName:e==null?void 0:e.name,kitchenId:t==null?void 0:t.id,kitchenName:t==null?void 0:t.name,selectedDate:n,hasFood:!!e,hasKitchen:!!t,hasPreorderSchedule:!!((S=t==null?void 0:t.preorderSchedule)!=null&&S.dates)}),!e)return console.log("DEBUG - No food object"),{isAvailable:!1,maxAvailable:0,orderType:n?"PRE_ORDER":"GO_GRAB",message:"Food item not found",warning:null,actualCheckingDate:n};const T=Y().startOf("day");if(n){console.log(" ~ QuantitySelector ~ selectedDate received:",n),console.log(" ~ QuantitySelector ~ selectedDate type:",typeof n);const x=Y(n).startOf("day");if(console.log(" ~ QuantitySelector ~ orderDate:",x.format()),console.log(" ~ QuantitySelector ~ today:",T.format()),console.log(" ~ QuantitySelector ~ orderDate > today:",x.isAfter(T)),console.log(" ~ QuantitySelector ~ orderDate === today:",x.isSame(T,"day")),console.log(" ~ QuantitySelector ~ orderDate < today (isPast):",x.isBefore(T,"day")),x.isAfter(T)){const b="PRE_ORDER";if(console.log("DEBUG - Future date PRE_ORDER case"),!((O=t==null?void 0:t.preorderSchedule)!=null&&O.dates))return console.log("DEBUG - No preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Pre-orders not available for this kitchen",warning:null,actualCheckingDate:n};const k=n.includes("-")?n:Y(n).format("YYYY-MM-DD");console.log(" ~ QuantitySelector ~ dateKey:",k),console.log(" ~ QuantitySelector ~ selectedDate:",n),console.log(" ~ QuantitySelector ~ kitchen.preorderSchedule.dates:",t.preorderSchedule.dates),console.log(" ~ QuantitySelector ~ Available dates:",Object.keys(t.preorderSchedule.dates));const E=t.preorderSchedule.dates[k];if(console.log("DEBUG - Date lookup:",{dateKey:k,hasScheduleForDate:!!E,scheduleForDate:E,availableDates:Object.keys(t.preorderSchedule.dates)}),!E||!Array.isArray(E))return console.log("DEBUG - No schedule found for date"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Not available for pre-order on selected date",warning:null};const D=E.find($=>$.foodItemId===e.id);if(console.log(" ~ QuantitySelector ~ foodSchedule:",D),console.log(" ~ QuantitySelector ~ food.id:",e.id),console.log(" ~ QuantitySelector ~ food object:",e),console.log("DEBUG - Food schedule lookup:",{foodId:e.id,foodSchedule:D,allItemsInSchedule:E.map($=>({id:$.foodItemId,name:$.nameOfFood}))}),!D)return console.log("DEBUG - Food not found in schedule"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"This item is not available for pre-order on selected date",warning:null};if(console.log("DEBUG - Food schedule details:",{isLimitedOrder:D.isLimitedOrder,numOfAvailableItems:D.numOfAvailableItems,availableTimes:D.availableTimes}),D.isLimitedOrder===!1){const $=D.numOfAvailableItems||0;return console.log("DEBUG - Limited order case:",{availableItems:$}),$<=0?{isAvailable:!1,maxAvailable:0,orderType:b,message:"Sold out for pre-order on selected date",warning:null}:(console.log("Math.min(availableItems, maxQuantity)",Math.min($,a)),{isAvailable:!0,maxAvailable:Math.min($,a),orderType:b,message:null,warning:$<5?`Only ${$} left for pre-order`:null})}else return console.log("DEBUG - Unlimited order case"),{isAvailable:!0,maxAvailable:a,orderType:b,message:null,warning:null}}else if(x.isSame(T,"day")){if(console.log("DEBUG - Today's date - checking both GO_GRAB and PRE_ORDER"),(m=t==null?void 0:t.preorderSchedule)!=null&&m.dates){const E=n.includes("-")?n:Y(n).format("YYYY-MM-DD");console.log("DEBUG - Today's date - dateKey:",E);const D=t.preorderSchedule.dates[E];if(D&&Array.isArray(D)){const $=D.find(M=>M.foodItemId===e.id);if(console.log("DEBUG - Today's date - foodSchedule found:",!!$,$),$){console.log("DEBUG - Today's date found in preorder schedule - using PRE_ORDER logic");const M="PRE_ORDER";if($.isLimitedOrder===!1){const H=$.numOfAvailableItems||0;return console.log("DEBUG - Today PRE_ORDER limited case:",{availableItems:H}),H<=0?{isAvailable:!1,maxAvailable:0,orderType:M,message:"Sold out for today",warning:null}:{isAvailable:!0,maxAvailable:Math.min(H,a),orderType:M,message:null,warning:H<5?`Only ${H} left`:null}}else return console.log("DEBUG - Today PRE_ORDER unlimited case"),{isAvailable:!0,maxAvailable:a,orderType:M,message:null,warning:null}}}}console.log("DEBUG - Today's date - no preorder schedule, falling back to GO_GRAB");const b="GO_GRAB",k=((j=e.availability)==null?void 0:j.numAvailable)||e.numAvailable||0;return console.log("DEBUG - Today's date GO_GRAB fallback:",{numAvailable:k}),k<=0?{isAvailable:!1,maxAvailable:0,orderType:b,message:"Not available",warning:null}:{isAvailable:!0,maxAvailable:Math.min(k,a),orderType:b,message:null,warning:k<5?`Only ${k} left`:null}}else{console.log(" PAST PRE-ORDER DATE DETECTED! "),console.log("DEBUG - Past pre-order date, checking current date in preorder schedule"),console.log("DEBUG - Selected date was:",n,"which is",x.format()),console.log("DEBUG - Current date is:",T.format()),console.log("DEBUG - Days difference:",T.diff(x,"day"),"days in the past"),console.log("DEBUG - Since selectedDate provided, maintaining PRE_ORDER type and checking today's preorder schedule");const b="PRE_ORDER",k=T.format("YYYY-MM-DD");if(console.log("DEBUG - Looking for today's date in preorder schedule:",k),!((u=t==null?void 0:t.preorderSchedule)!=null&&u.dates))return console.log(" DEBUG - No preorder schedule available"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Sold Out",warning:null,actualCheckingDate:k};const E=t.preorderSchedule.dates[k];if(console.log("DEBUG - Today's preorder schedule:",E),!E||!Array.isArray(E))return console.log(" DEBUG - No preorder schedule for today, item sold out"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Sold Out",warning:null,actualCheckingDate:k};const D=E.find($=>$.foodItemId===e.id);if(console.log("DEBUG - Food found in today's preorder schedule:",!!D,D),!D)return console.log(" DEBUG - Food not available in today's preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Sold Out",warning:null,actualCheckingDate:k};if(D.isLimitedOrder===!1){const $=D.numOfAvailableItems||0;return console.log("DEBUG - Past date, today's limited preorder case:",{availableItems:$}),$<=0?(console.log(" DEBUG - Past pre-order date: Item SOLD OUT for current date in preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:b,message:"Sold Out",warning:null,actualCheckingDate:k}):(console.log(" DEBUG - Past pre-order date: Item AVAILABLE for current date in preorder schedule, quantity:",$),{isAvailable:!0,maxAvailable:Math.min($,a),orderType:b,message:null,warning:$<5?`Only ${$} left`:null,actualCheckingDate:k})}else return console.log(" DEBUG - Past pre-order date: Item AVAILABLE (unlimited) for current date in preorder schedule"),{isAvailable:!0,maxAvailable:a,orderType:b,message:null,warning:null,actualCheckingDate:k}}}else{const x="GO_GRAB",b=((y=e.availability)==null?void 0:y.numAvailable)||e.numAvailable||0;return console.log("DEBUG - No date GO_GRAB:",{numAvailable:b}),b<=0?{isAvailable:!1,maxAvailable:0,orderType:x,message:"Sold Out",warning:null,actualCheckingDate:null}:{isAvailable:!0,maxAvailable:Math.min(b,a),orderType:x,message:null,warning:b<5?`Only ${b} left`:null,actualCheckingDate:null}}},[e,t,n,a]),A=h.useMemo(()=>F(),[F]);console.log("DEBUG - Current availability:",A),h.useEffect(()=>{(A.isAvailable!==L.isAvailable||A.maxAvailable!==L.maxAvailable||A.orderType!==L.orderType||A.message!==L.message||A.warning!==L.warning||A.actualCheckingDate!==L.actualCheckingDate)&&z(A)},[A,L]);const R=h.useCallback(T=>{console.log(" QuantitySelector handleQuantityChange called with:",T),console.log(" Current state:",{quantity:C,minQuantity:r,maxAvailable:L.maxAvailable});const S=Math.max(r,Math.min(T,L.maxAvailable));if(console.log(" Valid quantity calculated:",S),S!==C){if(console.log(" Setting new quantity:",S),I(S),console.log(" Calling parent onQuantityChange with:",S),s(S),T>L.maxAvailable){const O=`Maximum available quantity is ${L.maxAvailable}`;c(O)}else if(T<r){const O=`Minimum quantity is ${r}`;c(O)}}else console.log(" Quantity unchanged, skipping update")},[C,L.maxAvailable,r,s,c]);h.useEffect(()=>{l(L),L.warning&&d(L.warning),L.message&&!L.isAvailable&&c(L.message)},[L,l,d,c]),h.useEffect(()=>{i!==C&&i>=r&&C===1&&(console.log(" INITIAL QUANTITY EFFECT: Setting quantity to:",i),I(i))},[i,r]);const _=h.useCallback(()=>{console.log(" INCREMENT CLICKED!",{disabled:w,availabilityStatus:L.isAvailable,quantity:C}),!w&&L.isAvailable?(console.log(" INCREMENT: Calling handleQuantityChange with:",C+1),R(C+1)):console.log(" INCREMENT BLOCKED:",{disabled:w,isAvailable:L.isAvailable})},[w,L.isAvailable,C,R]),N=h.useCallback(()=>{console.log(" DECREMENT CLICKED!",{disabled:w,quantity:C,minQuantity:r}),!w&&C>r?(console.log(" DECREMENT: Calling handleQuantityChange with:",C-1),R(C-1)):console.log(" DECREMENT BLOCKED:",{disabled:w,quantity:C,minQuantity:r})},[w,C,r,R]),B=["quantity-selector",`quantity-selector--${v}`,g,w&&"quantity-selector--disabled",!L.isAvailable&&"quantity-selector--unavailable"].filter(Boolean).join(" ");return o.jsx("div",{className:B,children:o.jsxs("div",{className:"quantity-selector__controls",children:[o.jsx("div",{className:"quantity-selector__display",children:o.jsx("span",{className:"quantity-number",children:C})}),o.jsxs("div",{className:"quantity-selector__buttons",children:[o.jsx("button",{type:"button",className:"quantity-btn quantity-btn--decrement",onClick:N,disabled:w||C<=r,"aria-label":"Decrease quantity",children:o.jsx("svg",{width:"13",height:"2",viewBox:"0 0 13 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("rect",{x:"0.887695",width:"11.6854",height:"1.46067",fill:"currentColor"})})}),o.jsx("button",{type:"button",className:"quantity-btn quantity-btn--increment",onClick:_,disabled:w||!L.isAvailable||C>=L.maxAvailable,"aria-label":"Increase quantity",children:o.jsxs("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M0.707673 5.27007H12.3931V6.73075H0.707673V5.27007Z",fill:"currentColor"}),o.jsx("path",{d:"M7.28071 0.157715L7.28071 11.8431H5.82003L5.82003 0.157715L7.28071 0.157715Z",fill:"currentColor"})]})})]})]})})};function rs({isLoading:e=!0,text:t="Loading...",overlay:n=!0,size:i="medium"}){if(!e)return null;const a={small:"spinner-sm",medium:"spinner-md",large:"spinner-lg"},r=()=>o.jsx("div",{className:`mobile-loader-content ${n?"overlay":"inline"}`,children:o.jsxs("div",{className:"loader-spinner-wrapper",children:[o.jsxs("div",{className:`custom-spinner ${a[i]}`,children:[o.jsx("div",{className:"spinner-ring"}),o.jsx("div",{className:"spinner-ring"}),o.jsx("div",{className:"spinner-ring"})]}),t&&o.jsx("p",{className:"loader-text",children:t})]})});return n?o.jsx("div",{className:"mobile-loader-overlay",children:o.jsx(r,{})}):o.jsx(r,{})}const Ot=({food:e,kitchen:t,orderType:n="GO_GRAB",selectedDate:i=null,selectedTime:a=null,onDateChange:r=()=>{},onTimeChange:s=()=>{},disabled:l=!1,showTimeFirst:c=!1,className:d="",dateLabel:f="Pick up date:",timeLabel:p="Pick up time:",style:v={}})=>{const[g,w]=h.useState(i),[C,I]=h.useState(a);h.useEffect(()=>{w(i)},[i]),h.useEffect(()=>{I(a)},[a]);const L=h.useMemo(()=>{var B;const N=Y().startOf("day");if(console.log(" DateTimePicker - Calculating available dates:",{orderType:n,today:N.format("YYYY-MM-DD"),foodId:e==null?void 0:e.id}),n==="GO_GRAB")return[{date:N.format("YYYY-MM-DD"),display:`${N.format("MMM D, YYYY")} (Today)`,dayjs:N,isToday:!0,isAvailable:!0}];if(n==="PRE_ORDER"){if(!((B=t==null?void 0:t.preorderSchedule)!=null&&B.dates))return[];const T=Object.entries(t.preorderSchedule.dates),S=[];T.forEach(([m,j])=>{const u=Y(m);if(u.isBefore(N,"day"))return;if(j.some(x=>x.foodItemId===(e==null?void 0:e.id))){const x=u.format("dddd"),b=u.isSame(N,"day"),k=u.isSame(N.add(1,"day"),"day");let E;b?E=`${u.format("MMM D, YYYY")} (Today)`:k?E=`${u.format("MMM D, YYYY")} (Tomorrow)`:E=`${x}, ${u.format("MMM D, YYYY")}`,S.push({date:m,display:E,dayjs:u,isToday:b,isAvailable:!0,scheduleItems:j.filter(D=>D.foodItemId===(e==null?void 0:e.id))})}});const O=S.sort((m,j)=>m.dayjs.diff(j.dayjs));return console.log(" DateTimePicker - Pre-order dates found:",O.map(m=>({date:m.date,display:m.display,isToday:m.isToday}))),O}return[]},[n,t,e]),z=h.useMemo(()=>{var N;if(!g)return[];if(n==="GO_GRAB"){const B=Y(),T=Y(g),S=9,O=21,m=[];let j;if(T.isSame(B,"day")){j=B.add(30,"minutes");const y=j.minute(),x=Math.ceil(y/15)*15;j=j.minute(x).second(0),j.minute()===60&&(j=j.add(1,"hour").minute(0))}else j=T.hour(S).minute(0).second(0);let u=j;for(;u.hour()<O||u.hour()===O&&u.minute()===0;)m.push({value:u.format("h:mm A"),display:u.format("h:mm A"),dayjs:u,isAvailable:!0}),u=u.add(15,"minutes");return m}else if(n==="PRE_ORDER"){const B=L.find(O=>O.date===g);if(!((N=B==null?void 0:B.scheduleItems)!=null&&N.length))return[];const T=[];B.scheduleItems.forEach(O=>{O.availableTimes&&Array.isArray(O.availableTimes)&&O.availableTimes.forEach(m=>{const j=Y(`2000-01-01 ${m}`,"YYYY-MM-DD h:mm A"),u=[];for(let y=-30;y<=30;y+=15){const x=j.add(y,"minutes"),b=x.format("h:mm A"),k=x.hour();k>=8&&k<=22&&!T.find(E=>E.value===b)&&u.push({value:b,display:b+(y===0?" (Recommended)":""),isAvailable:!0,scheduleItem:O,isRecommended:y===0})}T.push(...u)})});const S=T.sort((O,m)=>{const j=Y(`2000-01-01 ${O.value}`,"YYYY-MM-DD h:mm A"),u=Y(`2000-01-01 ${m.value}`,"YYYY-MM-DD h:mm A");return j.diff(u)});return console.log(" DateTimePicker - Pre-order time slots:",S.map(O=>({value:O.value,display:O.display,isRecommended:O.isRecommended}))),S}return[]},[g,n,L,t]),F=h.useCallback(N=>{w(N),I(null),r(N),s(null)},[r,s]),A=h.useCallback(N=>{I(N),s(N)},[s]);if(h.useEffect(()=>{if(n==="GO_GRAB"&&!g&&L.length>0){const N=L[0].date;F(N)}},[n,g,L,F]),h.useEffect(()=>{if(g&&!C&&z.length>0){const N=z[0].value;A(N)}},[g,C,z,A]),l)return o.jsxs("div",{className:`date-time-picker disabled ${d}`,style:v,children:[o.jsxs("div",{className:"picker-field",children:[o.jsx("label",{className:"picker-label",children:f}),o.jsx("div",{className:"picker-value disabled",children:"Not available"})]}),o.jsxs("div",{className:"picker-field",children:[o.jsx("label",{className:"picker-label",children:p}),o.jsx("div",{className:"picker-value disabled",children:"Not available"})]})]});if(L.length===0)return o.jsxs("div",{className:`date-time-picker no-dates ${d}`,style:v,children:[o.jsxs("div",{className:"picker-field",children:[o.jsx("label",{className:"picker-label",children:f}),o.jsx("div",{className:"picker-value error",children:"No dates available"})]}),o.jsxs("div",{className:"picker-field",children:[o.jsx("label",{className:"picker-label",children:p}),o.jsx("div",{className:"picker-value error",children:"No times available"})]})]});const R=c?{}:{"data-first":!0},_=c?{"data-first":!0}:{};return o.jsxs("div",{className:`date-time-picker ${d}`,style:v,children:[o.jsxs("div",{className:"picker-field",...R,children:[o.jsx("label",{className:"picker-label",children:f}),o.jsxs("select",{className:"picker-select date-select",value:g||"",onChange:N=>F(N.target.value),disabled:l||L.length===0,children:[o.jsx("option",{value:"",disabled:!0,children:"Select date"}),L.map(N=>o.jsx("option",{value:N.date,disabled:!N.isAvailable,children:N.display},N.date))]})]}),o.jsxs("div",{className:"picker-field",..._,children:[o.jsx("label",{className:"picker-label",children:p}),o.jsxs("select",{className:"picker-select time-select",value:C||"",onChange:N=>A(N.target.value),disabled:l||!g||z.length===0,children:[o.jsx("option",{value:"",disabled:!0,children:"Select time"}),z.map(N=>o.jsx("option",{value:N.value,disabled:!N.isAvailable,"data-recommended":N.isRecommended||!1,style:N.isRecommended?{backgroundColor:"#e8f5e8",fontWeight:"600",color:"#2e7d2e"}:{},children:N.display},N.value))]})]})]})};function Wa(){var B,T;const e=vt(),t=Nt(),{kitchenId:n}=Es(),i=((T=(B=t.state)==null?void 0:B.from)==null?void 0:T.pathname)||"/",{cartItems:a,getCartQuantity:r,handleQuantityChange:s}=as(),[l,c]=h.useState({}),[d,f]=h.useState({}),{allFoods:p}=nm(10),v=n||(p.length>0?p[0].kitchenId:null),{kitchen:g,foods:w,loading:C,error:I}=Xo(v);console.log(" ~ ListingPage ~ foods:",w),h.useEffect(()=>{g&&w.length>0&&(console.log("[ListingPage] Kitchen data:",g),console.log("[ListingPage] Foods data:",w),console.log("[ListingPage] Preorder schedule:",g.preorderSchedule))},[g,w]);const L=()=>{var y;if(!((y=g==null?void 0:g.preorderSchedule)!=null&&y.dates))return[];const S=Y(),O=S.format("YYYY-MM-DD");console.log(" [PREORDER DATES DEBUG] Using dayjs - Current date (today):",O),console.log(" [PREORDER DATES DEBUG] Raw dayjs object:",S.toString());const m=[];for(let x=1;x<=2;x++){const k=S.add(x,"day").format("YYYY-MM-DD");m.push(k)}console.log(" [PREORDER DATES DEBUG] Next 2 days after today (should be 2025-08-23, 2025-08-24):",m),console.log(" [PREORDER DATES DEBUG] All dates in preorder schedule:",Object.keys(g.preorderSchedule.dates));const j=m.filter(x=>{const b=g.preorderSchedule.dates[x],k=x!==O;return console.log(` [PREORDER DATES DEBUG] Date ${x}: has schedule=${!!b}, is not today=${k}, today is=${O}`),b&&k});console.log(" [PREORDER DATES DEBUG] Final available preorder dates (should only be 23 & 24):",j);const u=j.map(x=>{const k=Y(x).format("ddd, MMM D");return console.log(` [PREORDER DATES DEBUG] Mapping ${x} to display: ${k}`),{dateString:x,displayDate:k}});return console.log(" [PREORDER DATES DEBUG] Final result returned:",u),u},{goGrabItems:z,preOrderItems:F}=h.useMemo(()=>{var j;if(!w.length)return{goGrabItems:[],preOrderItems:[]};const S=w.filter(u=>u.kitchenId===v);console.log("[ListingPage] All foods for current kitchen:",S);const O=S.filter(u=>{var x,b;const y=((x=u.availability)==null?void 0:x.numAvailable)||u.numAvailable||0;return console.log(`[ListingPage] ${u.name} - numAvailable: ${y} (from ${(b=u.availability)!=null&&b.numAvailable?"availability":"direct"})`),y>0});let m=[];if((j=g==null?void 0:g.preorderSchedule)!=null&&j.dates){const u=g.preorderSchedule.dates,y=new Set;Object.values(u).flat().forEach(x=>{y.add(x.foodItemId)}),console.log("[ListingPage] Preorder food IDs from schedule:",Array.from(y)),m=S.filter(x=>{const b=y.has(x.id);return console.log(`[ListingPage] ${x.name} (${x.id}) - in preorder: ${b}`),b})}return console.log(`[ListingPage] Kitchen: ${v}, Total Foods: ${S.length}, Go&Grab: ${O.length}, Pre-order: ${m.length}`),console.log("[ListingPage] Go&Grab items:",O.map(u=>{var y;return{id:u.id,name:u.name,numAvailable:((y=u.availability)==null?void 0:y.numAvailable)||u.numAvailable}})),console.log("[ListingPage] Pre-order items:",m.map(u=>({id:u.id,name:u.name}))),{goGrabItems:O,preOrderItems:m}},[w,g,v]);console.log(" ~ ListingPage ~ goGrabItems:",z),console.log(" ~ ListingPage ~ preOrderItems:",F);const A=h.useCallback((S,O,m=!1)=>{const j=m?`${S}_preorder`:S;c(u=>({...u,[j]:O})),console.log(" [ListingPage] Date changed:",{foodId:S,newDate:O,isPreOrder:m})},[]),R=h.useCallback((S,O,m=!1)=>{const j=m?`${S}_preorder`:S;f(u=>({...u,[j]:O})),console.log(" [ListingPage] Time changed:",{foodId:S,newTime:O,isPreOrder:m})},[]),_=S=>{var m,j;return(j=(m=g==null?void 0:g.preorderSchedule)==null?void 0:m.dates)!=null&&j[S]?g.preorderSchedule.dates[S].map(u=>{const y=F.find(x=>x.id===u.foodItemId);return y?{...y,scheduleItem:u}:null}).filter(Boolean):[]},N=L();return C?o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsx(rs,{isLoading:C,text:"Loading food details...",overlay:!0,size:"medium"})})}):I?o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsx("div",{className:"padding-20",children:o.jsxs("div",{className:"text-center py-5 text-danger",children:["Error: ",I]})})})}):o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsxs("div",{className:"padding-20",children:[o.jsxs("div",{className:"back-link-title",children:[o.jsx(Be,{className:"back-link",to:i,children:o.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),o.jsx("div",{className:"title",children:"More offers from HomeFresh"})]}),o.jsx("h2",{className:"small-title mb-2",children:(g==null?void 0:g.name)||"Coco&apos;s Kitchen"}),z.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"small-title mb-20",children:"Grab & Go"}),o.jsx("div",{className:"menu-listing",children:z.map(S=>{const O=r(S.id);return o.jsxs("div",{className:"menu-list",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"image",children:o.jsx("img",{src:S.imageUrl||"/src/assets/images/product.png",alt:S.name,onError:m=>{m.target.src="/src/assets/images/product.png"}})}),o.jsxs("div",{className:"data",children:[o.jsx("div",{className:"title",children:S.name}),o.jsx("div",{className:"text",children:S.description||"This dish features tender, juicy flavors"}),o.jsxs("div",{className:"price",children:["$ ",S.cost]})]})]}),o.jsxs("div",{className:"quantity-warpper",children:[o.jsx("div",{className:"right mb-1",children:o.jsx(Tt,{food:S,kitchen:g,selectedDate:null,size:"small",initialQuantity:O,onQuantityChange:async m=>{const j=r(S.id),u=l[S.id],y=d[S.id],x=u?Y(u).isSame(Y(),"day"):!0;await s({food:S,kitchen:g,newQuantity:m,currentQuantity:j,selectedDate:u,selectedTime:y,specialInstructions:"",isPreOrder:!x})}})}),o.jsx("div",{className:"pickup-time-section",children:o.jsx(Ot,{food:S,kitchen:g,orderType:"GO_GRAB",selectedDate:l[S.id],selectedTime:d[S.id],onDateChange:m=>A(S.id,m,!1),onTimeChange:m=>R(S.id,m,!1),disabled:!S||!g,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},S.id)})})]}),N.map(S=>{const O=_(S.dateString);return O.length===0?null:o.jsxs("div",{children:[o.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",S.displayDate]}),o.jsx("div",{className:"menu-listing",children:O.map(m=>{var u;const j=r(m.id,S.dateString);return(u=m.scheduleItem)!=null&&u.availableTimes,o.jsxs("div",{className:"menu-list",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"image",children:o.jsx("img",{src:m.imageUrl||"/src/assets/images/product.png",alt:m.name,onError:y=>{y.target.src="/src/assets/images/product.png"}})}),o.jsxs("div",{className:"data",children:[o.jsx("div",{className:"title",children:m.name}),o.jsx("div",{className:"text",children:m.description||"This dish features tender, juicy flavors"}),o.jsxs("div",{className:"price",children:["$ ",m.cost]})]})]}),o.jsxs("div",{className:"quantity-warpper",children:[o.jsx("div",{className:"right mb-1",children:o.jsx(Tt,{food:m,kitchen:g,selectedDate:S.dateString,size:"small",initialQuantity:j,onQuantityChange:async y=>{const x=r(m.id,S.dateString),b=d[`${m.id}_preorder`];await s({food:m,kitchen:g,newQuantity:y,currentQuantity:x,selectedDate:S.dateString,selectedTime:b,specialInstructions:"",isPreOrder:!0})}})}),o.jsx("div",{className:"pickup-time-section",children:o.jsx(Ot,{food:m,kitchen:g,orderType:"PRE_ORDER",selectedDate:l[`${m.id}_preorder`]||S.dateString,selectedTime:d[`${m.id}_preorder`],onDateChange:y=>A(m.id,y,!0),onTimeChange:y=>R(m.id,y,!0),disabled:!m||!g,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},`${m.id}-${S.dateString}`)})})]},S.dateString)}),a.length>0&&o.jsx("button",{className:"action-button mb-16",onClick:()=>e("/order"),children:"Continue to View Cart"}),o.jsxs("div",{className:"scanner-bottom mb-16",children:[o.jsx("div",{className:"text",children:"Full menus from your local home kitchens can be found in the HomeFresh app, available in the iOS App Store."}),o.jsx("div",{className:"qr",children:o.jsx("img",{src:em,alt:"QR Code"})})]})]})})})}const lm=()=>{const e=Ge(),t=vt();return{logout:h.useCallback(async()=>{try{const i=Q.loading("Logging out...");await e(Zo()).unwrap(),Q.success("Successfully logged out!"),t("/login",{replace:!0})}catch(i){console.error(" Logout failed:",i),Q.error("Logout failed, but redirecting anyway"),t("/login",{replace:!0})}},[e,t])}};function cm(){const[e,t]=h.useState(new Date),[n,i]=h.useState(""),a="Enjoy delicious meal from your favorite chef.";console.log("Deployed Version 4");const{user:r,isAuthenticated:s}=he(p=>p.auth),{items:l,totalItems:c}=he(p=>p.cart),{logout:d}=lm();h.useEffect(()=>{const p=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(p)},[]),h.useEffect(()=>{let p=0;const v=setInterval(()=>{p<a.length?(i(a.slice(0,p+1)),p++):clearInterval(v)},50);return()=>clearInterval(v)},[]);const f=p=>p.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"});return o.jsxs("div",{className:"landing-page",children:[o.jsxs("div",{className:"background-animation",children:[o.jsx("div",{className:"floating-food food-1",children:""}),o.jsx("div",{className:"floating-food food-2",children:""}),o.jsx("div",{className:"floating-food food-3",children:""}),o.jsx("div",{className:"floating-food food-4",children:""}),o.jsx("div",{className:"floating-food food-5",children:""}),o.jsx("div",{className:"floating-food food-6",children:""})]}),o.jsxs("div",{className:"landing-content",children:[o.jsxs("div",{className:"logo-section",children:[o.jsx("div",{className:"logo-circle",children:o.jsx("span",{className:"logo-icon",children:""})}),o.jsxs("h1",{className:"brand-name",children:["Home",o.jsx("span",{className:"accent-text",children:"Fresh"})]})]}),o.jsxs("div",{className:"coming-soon-section",children:[o.jsxs("h2",{className:"coming-soon-title",children:["Welcome to ",o.jsx("span",{className:"gradient-text",children:"HomeFresh!"})]}),o.jsxs("p",{className:"subtitle",children:[n,o.jsx("span",{className:"cursor",children:"|"})]}),o.jsxs("div",{className:"feature-grid",children:[o.jsxs("div",{className:"feature-card",children:[o.jsx("div",{className:"feature-icon",children:""}),o.jsx("h3",{children:"Home Chefs"}),o.jsx("p",{children:"Local talented chefs cooking with love"})]}),o.jsxs("div",{className:"feature-card",children:[o.jsx("div",{className:"feature-icon",children:""}),o.jsx("h3",{children:"Fresh Experience"}),o.jsx("p",{children:"Fast and reliable taste you can trust"})]}),o.jsxs("div",{className:"feature-card",children:[o.jsx("div",{className:"feature-icon",children:""}),o.jsx("h3",{children:"Made with Love"}),o.jsx("p",{children:"Every meal crafted with care and passion"})]})]}),o.jsxs("div",{className:"live-clock",children:[o.jsx("span",{className:"clock-icon",children:""}),o.jsx("span",{className:"time-display",children:f(e)})]}),o.jsxs("div",{className:"cta-section",children:[o.jsx("p",{className:"launch-text",children:"We're putting the finishing touches on something special!"}),o.jsxs(Be,{to:"/foods",className:"explore-btn",children:[o.jsx("span",{children:"Explore Preview"}),o.jsx("div",{className:"btn-arrow",children:""})]})]}),o.jsxs("div",{className:"progress-container",children:[o.jsx("div",{className:"progress-label",children:"Launch Progress"}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"progress-fill"})}),o.jsx("div",{className:"progress-text",children:"95% Complete"})]})]}),o.jsxs("footer",{className:"landing-footer",children:[o.jsx("p",{children:"Get ready for a culinary revolution "}),o.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,0,0,0.1)",borderRadius:"8px",fontSize:"12px"},children:[o.jsx("h4",{children:" Debug Panel (Persistence Test)"}),o.jsxs("p",{children:[o.jsx("strong",{children:"User:"})," ",s?(r==null?void 0:r.name)||"Authenticated":"Not logged in"]}),o.jsxs("p",{children:[o.jsx("strong",{children:"Cart Items:"})," ",c," items"]}),o.jsxs("div",{style:{marginTop:"10px"},children:[o.jsx("button",{onClick:d,style:{padding:"8px 16px",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:" Test Logout (Clear All Data)"}),o.jsx(Be,{to:"/foods",style:{padding:"8px 16px",backgroundColor:"#44ff44",color:"white",textDecoration:"none",borderRadius:"4px"},children:" Go to Foods (Test Cart)"})]})]})]})]})]})}const os="/assets/product-BvDHopBm.png",dm="/assets/user1-DLLHbfvd.svg",um=(e,t)=>{const n=Ge(),[i,a]=h.useState(!1),{user:r,isAuthenticated:s}=he(q=>q.auth),{currentFood:l,currentKitchen:c,currentReviews:d,currentReviewStats:f,currentLikes:p,loading:v,error:g,likedFoods:w}=he(q=>q.food),{kitchenStats:C,kitchenReviews:I,statsLoading:L,reviewsLoading:z}=he(q=>q.kitchen),{foodReviews:F,foodReviewsLoading:A,submissionLoading:R}=he(q=>q.reviews),{items:_,loading:N}=he(q=>q.cart),B=C[t],T=I[t],S=F[e],O=A[e],m=L[t],j=z[t],u=w.includes(e),y=_.filter(q=>q.foodId===e&&q.kitchenId===t).reduce((q,P)=>q+P.quantity,0),x=h.useCallback(q=>_.find(P=>P.foodId===e&&P.kitchenId===t&&P.selectedDate===q.selectedDate&&P.specialInstructions===(q.specialInstructions||"")),[_,e,t]),b=h.useCallback(()=>{e&&t&&n(Lt({foodId:e,kitchenId:t}))},[n,e,t]),k=h.useCallback(()=>{t&&!B&&!m&&n(rn(t))},[n,t,B,m]),E=h.useCallback(()=>{t&&!T&&!j&&n(on({kitchenId:t,limit:10}))},[n,t,T,j]),D=h.useCallback(()=>{e&&!S&&!O&&n(sn({foodId:e,kitchenId:t,limit:10}))},[n,e,t,S,O]),$=h.useCallback(()=>{if(!s){console.warn("User must be logged in to like food");return}if(!t){console.warn("Kitchen ID is required to like food");return}if(!i){console.warn("Like status not yet checked, preventing toggle");return}console.log(" Toggle like called:",{foodId:e,kitchenId:t,userId:r==null?void 0:r.id,currentlyLiked:u,likedFoodsArray:w,likeStatusChecked:i}),n(ki(e))},[n,e,t,s,u,w,r==null?void 0:r.id,i]),M=h.useCallback((q=null,P=null)=>{const K=Y();if(q){const ee=Y(q),ct=P||"6:30 PM",dt=ee.isSame(K,"day")?"Go&Grab":"Pre-Order";return{date:ee.format("YYYY-MM-DD"),time:ct,display:`${ee.format("MMM DD, YYYY")} at ${ct}`,orderType:dt}}else{const ee=P||K.add(30,"minutes").format("h:mm A");return{date:K.format("YYYY-MM-DD"),time:ee,display:`Today at ${ee}`,orderType:"Go&Grab"}}},[]),H=h.useCallback(q=>{if(!s)return console.warn("User must be logged in to add to cart"),{success:!1,message:"User must be logged in to add to cart",requiresAuth:!0};const P=x(q);if(P)return console.log("Item already exists with same quantity:",P.quantity),n(Dt({cartItemId:P.id,quantity:q.quantity})),{success:!1,message:"This item already exists in the cart with the same quantity and specifications",existingQuantity:P.quantity};const K=M(q.selectedDate,q.selectedTime),ee={foodId:e,kitchenId:t,quantity:q.quantity,orderType:q.orderType,selectedDate:q.selectedDate,specialInstructions:q.specialInstructions||"",pickupDetails:K,food:l?{id:l.id,name:l.name,cost:l.cost,price:l.price||l.cost,imageUrl:l.imageUrl,image:l.image||l.imageUrl,description:l.description,category:l.category,isAvailable:l.isAvailable,kitchenName:l.kitchenName,maxQuantity:l.maxQuantity,totalQuantity:l.totalQuantity,availableQuantity:l.availableQuantity,isPreOrder:l.isPreOrder,...l}:null,kitchen:c?{id:c.id,name:c.name,address:c.address,rating:c.rating,ratingCount:c.ratingCount,...c}:null};return console.log("Adding new item to cart:",ee),n(qe(ee)),{success:!0,message:"Item added to cart successfully"}},[n,e,t,s,x,Dt,l,c,M]),G=h.useCallback(q=>{if(!s){console.warn("User must be logged in to update cart");return}const P=_.find(K=>K.foodId===e&&K.kitchenId===t);P&&(console.log("Updating cart item quantity:",{cartItemId:P.id,quantity:q}),n(Dt({cartItemId:P.id,quantity:q})))},[n,e,t,s,_]),le=h.useCallback(q=>{if(!s){console.warn("User must be logged in to add review");return}return n(ln({foodId:e,kitchenId:t,reviewData:q}))},[n,e,t,s]),re=h.useCallback(()=>{n(Tf())},[n]);return h.useEffect(()=>(b(),k(),D(),()=>{}),[b,k,D]),h.useEffect(()=>{e&&t&&s&&l?(console.log(" Checking like status for food:",{foodId:e,kitchenId:t,userId:r==null?void 0:r.id}),n(Uo({foodId:e,kitchenId:t})).then(q=>{console.log(" Like status checked:",q),a(!0)})):s||(console.log(" Not authenticated, setting like status as checked"),a(!0))},[n,e,t,s,l,r==null?void 0:r.id]),{food:l,kitchen:c,reviews:d||[],reviewStats:f||B,kitchenStats:B,likes:p,isLiked:u,cartQuantity:y,loading:v||m,reviewsLoading:O,kitchenStatsLoading:m,kitchenReviewsLoading:j,reviewSubmissionLoading:R,cartLoading:N,error:g,user:r,isAuthenticated:s,toggleLike:$,addToCartAction:H,updateCartItemQuantity:G,addReview:le,loadFoodDetail:b,loadKitchenStats:k,loadKitchenReviews:E,loadFoodReviews:D,clearData:re}},pm=({src:e,alt:t,fallbackSrc:n=os,className:i=""})=>{const[a,r]=h.useState(null),[s,l]=h.useState(),[c,d]=h.useState(!1),[f,p]=h.useState(!1),v=h.useRef(),g=h.useCallback(I=>{v.current&&v.current.disconnect(),v.current=new IntersectionObserver(L=>{L.forEach(z=>{z.isIntersecting&&(r(e),v.current.disconnect())})},{threshold:.1,rootMargin:"50px"}),I&&v.current.observe(I),l(I)},[e]),w=()=>{d(!0)},C=()=>{p(!0),r(n),d(!0)};return o.jsxs("div",{className:"lazy-image-container",style:{position:"relative"},children:[!c&&o.jsx("div",{className:"image-placeholder",children:o.jsx("div",{className:"image-skeleton"})}),o.jsx("img",{ref:g,src:a||n,alt:t,className:`${i} ${c?"loaded":"loading"}`,onLoad:w,onError:C,loading:"lazy",style:{opacity:c?1:0,transition:"opacity 0.3s ease-in-out"}}),f&&o.jsx("div",{className:"image-error-indicator",children:o.jsx("small",{children:"Using fallback image"})})]})},Ga=({rating:e=0,maxStars:t=5,size:n="small",showRating:i=!1,reviewCount:a=null,className:r=""})=>{const s=Math.max(0,Math.min(e,t)),l={small:{width:12,height:12,gap:"2px"},medium:{width:16,height:17,gap:"3px"},large:{width:20,height:21,gap:"4px"}},{width:c,height:d,gap:f}=l[n]||l.small,p=()=>{const v=[];for(let g=1;g<=t;g++){const w=Math.max(0,Math.min(1,s-(g-1)));v.push(o.jsxs("div",{className:"star-container",style:{position:"relative"},children:[o.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"star-empty",children:o.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8542 1.20117C5.80112 1.20117 5.67045 1.21576 5.60103 1.35459L4.53587 3.48434C4.36728 3.82092 4.04237 4.05484 3.6667 4.10851L1.28203 4.45209C1.12453 4.47484 1.07087 4.59151 1.05453 4.6405C1.03995 4.68776 1.01662 4.80792 1.12512 4.91176L2.84945 6.56842C3.1242 6.83267 3.24903 7.21359 3.1837 7.58634L2.7777 9.9255C2.75262 10.0719 2.8442 10.1571 2.88503 10.1863C2.9282 10.2189 3.0437 10.2837 3.18662 10.209L5.3187 9.10359C5.6547 8.93034 6.05487 8.93034 6.3897 9.10359L8.5212 10.2084C8.6647 10.2825 8.7802 10.2178 8.82395 10.1863C8.86478 10.1571 8.95637 10.0719 8.93128 9.9255L8.52412 7.58634C8.45878 7.21359 8.58362 6.83267 8.85837 6.56842L10.5827 4.91176C10.6918 4.80792 10.6684 4.68717 10.6533 4.6405C10.6375 4.59151 10.5839 4.47484 10.4264 4.45209L8.0417 4.10851C7.66662 4.05484 7.3417 3.82092 7.17312 3.48376L6.10678 1.35459C6.03795 1.21576 5.90728 1.20117 5.8542 1.20117Z",fill:"#E5E7EB",stroke:"#E5E7EB",strokeWidth:"0.2"})}),w>0&&o.jsx("div",{className:"star-filled",style:{position:"absolute",top:0,left:0,width:`${w*100}%`,overflow:"hidden"},children:o.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M9.45251 6.92967C9.30143 7.07609 9.23201 7.28784 9.26643 7.4955L9.78502 10.3655C9.82876 10.6088 9.7261 10.8549 9.52251 10.9955C9.32301 11.1413 9.0576 11.1588 8.84001 11.0422L6.25643 9.69467C6.1666 9.64684 6.06685 9.62117 5.96476 9.61825H5.80668C5.75185 9.62642 5.69818 9.64392 5.64918 9.67075L3.06501 11.0247C2.93726 11.0888 2.7926 11.1116 2.65085 11.0888C2.30551 11.0235 2.0751 10.6945 2.13168 10.3474L2.65085 7.47742C2.68526 7.268 2.61585 7.05509 2.46476 6.90633L0.358348 4.86467C0.182181 4.69375 0.120931 4.43709 0.201431 4.2055C0.279598 3.9745 0.479098 3.80592 0.720015 3.768L3.61918 3.34742C3.83968 3.32467 4.03335 3.1905 4.13251 2.99217L5.41001 0.373001C5.44035 0.314668 5.47943 0.261001 5.52668 0.215501L5.57918 0.174668C5.6066 0.144335 5.6381 0.119251 5.6731 0.0988346L5.73668 0.0755013L5.83585 0.034668H6.08143C6.30076 0.057418 6.49385 0.188668 6.59476 0.384668L7.88918 2.99217C7.98251 3.18292 8.16393 3.31533 8.37335 3.34742L11.2725 3.768C11.5175 3.803 11.7223 3.97217 11.8033 4.2055C11.8798 4.43942 11.8138 4.69608 11.6342 4.86467L9.45251 6.92967Z",fill:"#FF981F"})})})]},g))}return v};return o.jsxs("div",{className:`star-rating ${n} ${r}`,children:[o.jsx("div",{className:"stars-container",style:{gap:f},children:p()}),(i||a)&&o.jsxs("div",{className:"rating-info",children:[i&&o.jsx("span",{className:"rating-value",children:o.jsx("strong",{children:s.toFixed(1)})}),a&&o.jsxs("span",{className:"review-count",children:["(",a>1e3?`${(a/1e3).toFixed(1)}k`:a,"+ reviews)"]})]})]})},fm=({onClose:e})=>{console.log(" WeChatAuthDialog rendered!");const{signInWithTestUser:t}=h.useContext(Zi),n=async()=>{try{console.log(" Using test user bypass"),await t(),sessionStorage.removeItem("wechat_pending_cart_action"),e()}catch(r){console.error(" Error with test user bypass:",r)}},i=async()=>{try{const r=wa(),s=ba();console.log(" Auth context:",{isMobile:r,isWeChat:s}),sessionStorage.setItem("wechat_pending_cart_action","true");const l=ka();console.log(" Generated auth URL:",l),s?(console.log(" WeChat browser detected - direct redirect"),window.location.href=l):r?(console.log(" Mobile device - attempting WeChat authentication"),window.location.href=l):(console.log(" Desktop - direct redirect"),window.location.href=l)}catch(r){console.error(" Error in WeChat authentication:",r);const s=ka();window.location.href=s}},a=r=>{r.target===r.currentTarget&&e()};return o.jsx("div",{className:"wechat-auth-dialog-overlay",onClick:a,children:o.jsxs("div",{className:"wechat-auth-dialog",children:[o.jsxs("div",{className:"wechat-auth-header",children:[o.jsx("h3",{children:"Sign in to Continue"}),o.jsx("button",{className:"wechat-auth-close",onClick:e,"aria-label":"Close dialog",children:""})]}),o.jsxs("div",{className:"wechat-auth-content",children:[o.jsx("div",{className:"wechat-auth-icon",children:o.jsx("img",{src:ji,alt:"WeChat"})}),o.jsx("p",{className:"wechat-auth-message",children:"Please sign in with WeChat to add items to your cart"}),o.jsxs("button",{className:"wechat-auth-button",onClick:i,children:[o.jsx("img",{src:ji,alt:"WeChat"}),"Continue with WeChat"]}),o.jsx("button",{className:"wechat-auth-button",onClick:n,style:{backgroundColor:"#ff6b35",marginTop:"10px",fontSize:"14px"},children:" Skip for Testing (Temporary)"}),o.jsx("p",{className:"wechat-auth-note",children:wa()&&!ba()?"This will open WeChat app for secure authentication":"We'll redirect you to WeChat for secure authentication"})]})]})})};function Ka(){const[e]=or(),t=Nt(),n=vt(),i=()=>{if(console.log(" [FoodDetailPage] Current pathname:",t.pathname),console.log(" [FoodDetailPage] Search params:",e.toString()),t.pathname==="/share"||t.pathname==="/share/"){const P={kitchenId:e.get("kitchenId"),foodId:e.get("foodId"),selectedDate:e.get("date")};return console.log(" [FoodDetailPage] Extracted params:",P),P}return console.log(" [FoodDetailPage] Using fallback params (pathname not /share)"),{kitchenId:null,foodId:null,selectedDate:null}},{kitchenId:a,foodId:r,selectedDate:s}=i();if(!a||!r)return o.jsx("div",{className:"mobile-container",children:o.jsx("div",{className:"padding-20",children:o.jsxs("div",{className:"alert alert-danger",role:"alert",children:[o.jsx("h4",{children:"Invalid URL"}),o.jsx("p",{children:"Missing required parameters. Please check your link and try again."}),o.jsxs("small",{className:"text-muted",children:["Expected: kitchenId and foodId"," ",t.pathname==="/share"?"as query parameters":"as URL parameters"]})]})})});const[l,c]=h.useState("reviews"),[d,f]=h.useState(1),[p,v]=h.useState(""),[g,w]=h.useState(!1),[C,I]=h.useState(s),[L,z]=h.useState(null);h.useEffect(()=>{console.log(" showWeChatDialog state changed to:",g)},[g]);const[F,A]=h.useState({isAvailable:!0,quantity:1,orderType:"GO_GRAB"}),{food:R,kitchen:_,likes:N,reviews:B,reviewStats:T,loading:S,error:O,isLiked:m,cartQuantity:j,toggleLike:u,addToCartAction:y,updateCartItemQuantity:x}=um(r,a),b=Ei.useMemo(()=>{var K,ee;return s?"PRE_ORDER":(((K=R==null?void 0:R.availability)==null?void 0:K.numAvailable)||(R==null?void 0:R.numAvailable)||0)>0?"GO_GRAB":(ee=_==null?void 0:_.preorderSchedule)!=null&&ee.dates&&Object.values(_.preorderSchedule.dates).flat().some(dt=>dt.foodItemId===(R==null?void 0:R.id))?"PRE_ORDER":"GO_GRAB"},[s,R,_]);console.log("FoodDetailPage data:",{food:R,kitchen:_,likes:N,reviews:B,reviewStats:T,loading:S,error:O,selectedDate:s,orderType:b,pickupDate:C,pickupTime:L,urlPattern:t.pathname,extractedParams:{kitchenId:a,foodId:r,selectedDate:s},kitchenPreorderSchedule:_==null?void 0:_.preorderSchedule});const k=h.useCallback(P=>{I(P),console.log(" Date changed to:",P)},[]),E=h.useCallback(P=>{z(P),console.log(" Time changed to:",P)},[]),D=h.useCallback(P=>{console.log(`[FoodDetailPage] Quantity changed to: ${P}`),f(P),j>0&&(console.log(`[FoodDetailPage] Updating cart quantity to: ${P}`),x(P))},[j,x]),$=h.useCallback(P=>{A(P)},[]),M=h.useCallback(P=>{console.error(`[FoodDetailPage] Quantity error: ${P}`),Q.error(P)},[]),H=h.useCallback(P=>{console.warn(`[FoodDetailPage] Quantity warning: ${P}`),Q.warning(P)},[]),G=h.useCallback(()=>{if(console.log("[FoodDetailPage] Add to Cart button clicked!"),console.log("[FoodDetailPage] Availability status:",F),console.log("[FoodDetailPage] Selected quantity:",d),console.log("[FoodDetailPage] Special instructions:",p),!F.isAvailable){Q.error("This item is currently unavailable");return}const P={quantity:d,orderType:F.orderType,selectedDate:C||s,selectedTime:L,specialInstructions:p.trim()};console.log(`Adding ${d} items to cart`,{foodId:r,kitchenId:a,selectedDate:C||s,selectedTime:L,orderType:F.orderType,quantity:d,specialInstructions:p.trim()}),console.log("[FoodDetailPage] Calling addToCartAction with:",P);const K=y(P);if(K){if(K.requiresAuth){console.log(" Authentication required - showing WeChat dialog"),console.log(" Setting showWeChatDialog to true"),w(!0),console.log(" showWeChatDialog state should now be true");return}K.success?(console.log(" Success:",K.message),Q.cart(K.message),n("/foods",{replace:!0})):(console.log(" Info:",K.message),Q.warning(K.message))}},[F,d,p,r,a,C,L,y,n,w]),le=h.useCallback(()=>{w(!1)},[]);h.useEffect(()=>{j>0&&f(j)},[j]),h.useEffect(()=>{s&&!C&&I(s)},[s,C]),h.useEffect(()=>{(async()=>{console.log("=== DEBUGGING REVIEWS ==="),console.log("URL params - foodId:",r,"kitchenId:",a,"selectedDate:",s);const K=await jf();if(console.log("Connection test:",K),r){const ee=await bf(r);console.log("Debug reviews result:",ee)}})()},[r,a,s]),console.log(" ~ FoodDetailPage ~ reviewStats:",T);const re=(T==null?void 0:T.averageRating)||4.5,ve=(T==null?void 0:T.totalReviews)||0,Re=(T==null?void 0:T.ratingPercentages)||{5:90,4:70,3:40,2:20,1:8},xe=(B==null?void 0:B.length)>0?B.map(P=>({id:P.id,image:P.userProfile||dm,date:P.timeStamp?(()=>{try{let K;return typeof P.timeStamp=="string"?P.timeStamp.includes(" at ")?K=new Date(P.timeStamp.replace(" at "," ").replace(" UTC+5","")):K=new Date(P.timeStamp):P.timeStamp.seconds?K=new Date(P.timeStamp.seconds*1e3):K=new Date(P.timeStamp),K.toLocaleDateString()}catch(K){return console.warn("Error parsing timestamp:",P.timeStamp),"Unknown date"}})():"Unknown date",name:P.userName||"Anonymous User",rating:P.rating||5,description:P.message||"No comment provided"})):[],q=h.useCallback(()=>{u(),console.log(`[FoodDetailPage] Food ${m?"unliked":"liked"}`)},[u,m]);return S?o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsx(rs,{isLoading:S,text:"Loading food details...",overlay:!0,size:"medium"})})}):o.jsxs("div",{className:"container",children:[o.jsx("div",{className:"mobile-container",children:o.jsxs("div",{className:"product-detail",children:[o.jsxs("div",{className:"padding-20",children:[o.jsx("h2",{className:"title text-center",children:R==null?void 0:R.name}),o.jsxs("h2",{className:"text text-center",children:["By ",R==null?void 0:R.kitchenName]}),o.jsxs("div",{className:"review-info",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{children:o.jsx("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M13.7499 4.80322L9.97336 4.26881L8.28761 0.940677C8.12458 0.667862 7.82468 0.5 7.50028 0.5C7.17588 0.5 6.87597 0.667862 6.71295 0.940677L5.02719 4.26966L1.25064 4.80322C0.920725 4.84924 0.64636 5.07363 0.543084 5.38188C0.439808 5.69013 0.525567 6.02868 0.764246 6.25497L3.49628 8.84616L2.85154 12.5053C2.79531 12.8246 2.93026 13.1472 3.19965 13.3375C3.46905 13.5279 3.82617 13.553 4.12089 13.4022L7.50028 11.6739L10.8779 13.4005C11.1726 13.5513 11.5298 13.5262 11.7992 13.3358C12.0685 13.1455 12.2035 12.8229 12.1473 12.5036L11.5025 8.84446L14.2363 6.25497C14.4744 6.02885 14.56 5.69094 14.4572 5.38312C14.3543 5.0753 14.0809 4.85087 13.7517 4.80407L13.7499 4.80322Z",fill:"#FBBC04"})})}),o.jsxs("div",{className:"text",children:[o.jsx("strong",{children:_!=null&&_.rating&&(_!=null&&_.ratingCount)?parseFloat(parseInt(_==null?void 0:_.rating)/parseInt(_==null?void 0:_.ratingCount)).toFixed(1):"No ratings yet"}),` ${_==null?void 0:_.ratingCount}+ reviews`]})]}),o.jsx("div",{className:"line"}),o.jsxs("div",{className:"left",children:[o.jsx("div",{children:o.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o.jsx("path",{d:"M10.1667 6.00016C10.1667 6.92063 9.42051 7.66683 8.50004 7.66683C7.57957 7.66683 6.83337 6.92063 6.83337 6.00016C6.83337 5.07969 7.57957 4.3335 8.50004 4.3335C9.42051 4.3335 10.1667 5.07969 10.1667 6.00016Z",stroke:"#3FC045"}),o.jsx("path",{d:"M12.6481 11.3335C13.5778 12.6592 14.0225 13.3652 13.7576 13.9334C13.731 13.9904 13.6999 14.0454 13.6646 14.098C13.2816 14.6668 12.2916 14.6668 10.3118 14.6668H6.68811C4.7083 14.6668 3.71839 14.6668 3.33536 14.098C3.29999 14.0454 3.26888 13.9904 3.24232 13.9334C2.97742 13.3652 3.42213 12.6592 4.35181 11.3335",stroke:"#3FC045","stroke-linecap":"round","stroke-linejoin":"round"}),o.jsx("path",{d:"M9.33831 11.6626C9.11344 11.8791 8.81291 12.0002 8.50017 12.0002C8.18737 12.0002 7.88684 11.8791 7.66197 11.6626C5.60291 9.66736 2.8435 7.4385 4.18918 4.20265C4.91677 2.45304 6.66333 1.3335 8.50017 1.3335C10.337 1.3335 12.0835 2.45305 12.8111 4.20265C14.1551 7.43443 11.4024 9.67423 9.33831 11.6626Z",stroke:"#3FC045"})]})}),o.jsx("div",{className:"text",children:(_==null?void 0:_.address)||"Unknown location"})]})]}),o.jsxs("div",{className:"product-image",children:[o.jsx("div",{className:`icon heart-icon ${m?"liked":""}`,onClick:q,children:o.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M9.80568 16.3852C9.53252 16.4816 9.08261 16.4816 8.80945 16.3852C6.47955 15.5898 1.27344 12.2717 1.27344 6.64781C1.27344 4.16527 3.27393 2.15674 5.74041 2.15674C7.20262 2.15674 8.49612 2.86374 9.30756 3.95638C10.119 2.86374 11.4205 2.15674 12.8747 2.15674C15.3412 2.15674 17.3417 4.16527 17.3417 6.64781C17.3417 12.2717 12.1356 15.5898 9.80568 16.3852Z",stroke:"#FF5555",fill:m?"#FF5555":"transparent",strokeWidth:"1.20512",strokeLinecap:"round",strokeLinejoin:"round"})})}),o.jsx(pm,{src:R==null?void 0:R.imageUrl,alt:(R==null?void 0:R.name)||"Product",fallbackSrc:os,className:""})]}),o.jsxs("div",{className:"quantity-warpper",children:[o.jsxs("div",{className:"price",children:[o.jsx("sup",{children:"$"}),(R==null?void 0:R.cost)&&parseFloat(R==null?void 0:R.cost).toFixed(2)]}),o.jsx(Tt,{food:R,kitchen:_,selectedDate:C||s,initialQuantity:Math.max(j,1),onQuantityChange:D,onAvailabilityChange:$,onError:M,onWarning:H,showAvailabilityInfo:!1,showErrorMessages:!0,size:"large",className:"food-detail-quantity"})]}),o.jsx("div",{className:"pickup-details",children:o.jsx(Ot,{food:R,kitchen:_,orderType:b,selectedDate:C,selectedTime:L,onDateChange:k,onTimeChange:E,disabled:!R||!_,className:"food-detail-picker"})})]}),o.jsx("div",{className:"hr"}),o.jsxs("div",{className:"padding-20",children:[o.jsx("h3",{className:"small-title mb-8",children:"Special Instruction"}),o.jsx("p",{className:"body-text mb-16",children:"Please let us know if you are allergic to anything or if we need to avoid anything."}),o.jsx("textarea",{className:"special-instructions-input",placeholder:"Enter your special instructions here...",value:p,onChange:P=>v(P.target.value),rows:3,style:{width:"100%",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",marginBottom:"16px"}}),o.jsxs("div",{className:"add-to-cart-action mt-2",children:[o.jsx("button",{className:`button ${F.isAvailable?"":"sold-out"}`,onClick:P=>{console.log(" BUTTON CLICKED! Event:",P),console.log(" handleAddToCart type:",typeof G),G(P)},disabled:!F.isAvailable,style:{pointerEvents:"auto",zIndex:1e3},children:F.isAvailable?"Add to Cart":"Sold Out"}),o.jsx("div",{className:"icon",children:o.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>n("/foods",{replace:!0}),children:[o.jsx("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),o.jsx("path",{d:"M3 6H21",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),o.jsx("path",{d:"M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})]})})]}),o.jsxs("div",{className:"custom-accordian",children:[o.jsx("button",{className:`button${l==="description"?" active":""}`,onClick:()=>c("description"),children:"Description"}),o.jsx("button",{className:`button${l==="reviews"?" active":""}`,onClick:()=>c("reviews"),children:"Reviews"})]}),o.jsxs("div",{className:"accordian-content",children:[l==="description"&&o.jsx("div",{className:"description-content",children:(R==null?void 0:R.description)||"No description available."}),l==="reviews"&&o.jsxs("div",{className:"reviews-content",children:[o.jsxs("div",{className:"overall-reviews",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"bold",children:re>0?re.toFixed(1):"No ratings yet"}),o.jsx(Ga,{rating:re,size:"small",showRating:!1}),o.jsxs("div",{className:"body-text",children:["(",ve,"+ reviews)"]})]}),o.jsx("div",{className:"line"}),o.jsx("div",{className:"right",children:[5,4,3,2,1].map(P=>o.jsxs("div",{className:"review",children:[o.jsx("div",{className:"text",children:P}),o.jsx("div",{className:"progress-bar",children:o.jsx("div",{className:"fill",style:{width:`${Re[P]}%`}})})]},P))})]}),o.jsx("div",{className:"reviews-list",children:xe.map((P,K)=>o.jsxs("div",{className:"review-item",children:[o.jsxs("div",{className:"header",children:[o.jsxs("div",{className:"profile",children:[o.jsx("img",{src:P.image,alt:P.name,className:"image"}),o.jsxs("div",{className:"data",children:[o.jsx("div",{className:"name",children:P.name}),o.jsx("div",{className:"rating",children:o.jsx(Ga,{rating:P.rating||5,size:"small",showRating:!1})}),o.jsx("div",{className:"date",children:P.date})]})]}),o.jsx("div",{className:"icon"})]}),o.jsx("div",{className:"description",children:P.description})]},P.id||K))})]})]})]})]})}),g&&o.jsx(fm,{onClose:le})]})}function mm(){const e=vt(),t=Ge(),n=Nt(),i=he(m=>m.cart.items),{handleQuantityChange:a}=as(),[r,s]=h.useState(new Set),[l,c]=h.useState({}),[d,f]=h.useState({});h.useEffect(()=>{var m;if((m=n.state)!=null&&m.editItem){const j=n.state.editItem;s(new Set([j])),window.history.replaceState({},document.title)}},[n.state]);const p=i.length>0?i[0].kitchenId:null,{kitchen:v,foods:g,loading:w}=Xo(p);console.log("OrderPage - Kitchen data:",{kitchenId:p,hasKitchen:!!v,foodsCount:g.length,kitchenLoading:w});const C=h.useMemo(()=>{const m=new Map;return g.forEach(j=>{m.set(j.id,j)}),m},[g]),I=m=>{var y,x,b,k;const j=C.get(m.foodId);if(console.log(`OrderPage - Getting food data for ${m.foodId}:`,{hasFullData:!!j,fullFoodData:j?{id:j.id,name:j.name,availability:j.availability,numAvailable:j.numAvailable}:null}),j)return j;const u={id:m.foodId,name:(y=m.food)==null?void 0:y.name,cost:(x=m.food)==null?void 0:x.cost,imageUrl:(b=m.food)==null?void 0:b.imageUrl,kitchenId:m.kitchenId,description:(k=m.food)==null?void 0:k.description,availability:{numAvailable:99},numAvailable:99};return console.log(`OrderPage - Using fallback data for ${m.foodId}:`,u),u},L=h.useMemo(()=>{const m={grabAndGo:[],preOrders:{}};i.forEach(u=>{var x,b,k,E,D,$,M,H;const y=((x=u.pickupDetails)==null?void 0:x.orderType)||u.orderType||(u.isPreOrder?"PRE_ORDER":"GO_GRAB");if(y==="GO_GRAB")m.grabAndGo.push({...u,displayPickupTime:((b=u.pickupDetails)==null?void 0:b.display)||"Pick up today",displayPickupClock:((k=u.pickupDetails)==null?void 0:k.time)||Y().add(30,"minutes").format("h:mm A")});else if(y==="PRE_ORDER"||u.isPreOrder||u.selectedDate){const G=u.selectedDate||((E=u.pickupDetails)==null?void 0:E.date);G&&(m.preOrders[G]||(m.preOrders[G]=[]),m.preOrders[G].push({...u,displayPickupTime:((D=u.pickupDetails)==null?void 0:D.display)||`Pick up ${Y(G).format("MMM D ddd")}`,displayPickupClock:(($=u.pickupDetails)==null?void 0:$.time)||"6:30 PM"}))}else m.grabAndGo.push({...u,displayPickupTime:((M=u.pickupDetails)==null?void 0:M.display)||"Pick up today",displayPickupClock:((H=u.pickupDetails)==null?void 0:H.time)||Y().add(30,"minutes").format("h:mm A")})});const j={};return Object.keys(m.preOrders).sort((u,y)=>Y(u).diff(Y(y))).forEach(u=>{j[u]=m.preOrders[u]}),m.preOrders=j,m},[i]),z=h.useMemo(()=>{const m=i.reduce((y,x)=>{var D,$,M;const b=C.get(x.foodId),k=(b==null?void 0:b.cost)||((D=x.food)==null?void 0:D.cost)||0,E=typeof k=="string"?parseFloat(k):k;return console.log(`OrderPage - Pricing calculation for ${x.foodId}:`,{itemName:($=x.food)==null?void 0:$.name,quantity:x.quantity,originalCost:(M=x.food)==null?void 0:M.cost,enrichedCost:b==null?void 0:b.cost,finalCost:E,lineTotal:E*x.quantity}),y+E*x.quantity},0),j=m*.0725,u=m+j;return console.log("OrderPage - Total calculation:",{subtotal:m.toFixed(2),tax:j.toFixed(2),total:u.toFixed(2),cartItemsCount:i.length}),{subtotal:m.toFixed(2),tax:j.toFixed(2),total:u.toFixed(2)}},[i,C]),F=(m,j=null)=>i.filter(u=>u.foodId===m&&(!j||u.selectedDate===j)).reduce((u,y)=>u+y.quantity,0),A=()=>{t(Tn()),Q.info("Cart cleared successfully")},R=m=>Y(m).format("MMM D ddd"),_=h.useCallback(m=>{s(u=>new Set([...u,m]));const j=i.find(u=>`${u.foodId}-${u.selectedDate||"grab"}`===m);j&&(c(u=>({...u,[m]:j.selectedDate||Y().format("YYYY-MM-DD")})),f(u=>{var y;return{...u,[m]:((y=j.pickupDetails)==null?void 0:y.time)||Y().add(30,"minute").format("HH:mm")}}))},[i]),N=h.useCallback(m=>{s(j=>{const u=new Set(j);return u.delete(m),u}),c(j=>{const u={...j};return delete u[m],u}),f(j=>{const u={...j};return delete u[m],u})},[]),B=h.useCallback(m=>{var y;const j=l[m],u=d[m];if(j&&u){const b=Y(j).isSame(Y(),"day")?"Go&Grab":"Pre-Order";t(Wo({cartItemId:m,pickupDetails:{date:j,time:u,display:`${Y(j).format("MMM DD, YYYY")} at ${u}`,orderType:b}})),console.log("Saving pickup details for item:",m,{date:j,time:u,orderType:b})}s(x=>{const b=new Set(x);return b.delete(m),b}),Q.success("Pickup time updated successfully"),((y=n.state)==null?void 0:y.returnTo)==="/payment"&&setTimeout(()=>{e("/payment")},1e3)},[l,d,t,n.state,e]),T=h.useCallback((m,j)=>{c(u=>({...u,[m]:j}))},[]),S=h.useCallback((m,j)=>{f(u=>({...u,[m]:j}))},[]),O=i.reduce((m,j)=>m+j.quantity,0);return o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsxs("div",{className:"padding-20",children:[o.jsxs("div",{className:"back-link-title",children:[o.jsx(Be,{className:"back-link",to:"/foods",children:o.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),o.jsxs("div",{className:"title",children:["Order (",O," Item",O!==1?"s":"",")"]})]}),i.length>0&&i[0].kitchen&&o.jsx("h2",{className:"small-title mb-2",children:i[0].kitchen.name}),i.length===0?o.jsxs("div",{className:"text-center py-5",children:[o.jsx("p",{children:"Your cart is empty"}),o.jsx(Be,{to:"/foods",className:"action-button",style:{textDecoration:"none",display:"inline-block",padding:"12px 24px",marginTop:"16px"},children:"Continue Shopping"})]}):o.jsxs(o.Fragment,{children:[L.grabAndGo.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("h2",{className:"small-title mb-20",children:"Go&Grab"}),o.jsx("div",{className:"menu-listing",children:L.grabAndGo.map((m,j)=>{var y,x,b,k,E;const u=F(m.foodId);return o.jsxs("div",{className:"menu-list",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"image",children:o.jsx("img",{src:((y=m.food)==null?void 0:y.imageUrl)||"/src/assets/images/product.png",alt:((x=m.food)==null?void 0:x.name)||"Food item",onError:D=>{D.target.src="/src/assets/images/product.png"}})}),o.jsxs("div",{className:"data",children:[o.jsx("div",{className:"title",children:((b=m.food)==null?void 0:b.name)||"Unknown Item"}),o.jsx("div",{className:"text",children:((k=m.food)==null?void 0:k.description)||"This dish features tender, juicy flavors"}),o.jsxs("div",{className:"price",children:["$ ",((E=m.food)==null?void 0:E.cost)||"0.00"]})]})]}),o.jsxs("div",{className:"quantity-warpper",children:[o.jsx("div",{className:"right mb-1",children:o.jsx(Tt,{food:I(m),kitchen:v||m.kitchen,selectedDate:null,size:"small",initialQuantity:u,onQuantityChange:async D=>{const $=F(m.foodId),M=I(m);await a({food:M,kitchen:v||m.kitchen,newQuantity:D,currentQuantity:$,selectedDate:null,specialInstructions:m.specialInstructions||"",isPreOrder:!1})}})}),(()=>{const D=`${m.foodId}-grab`;return r.has(D)?o.jsxs("div",{className:"pickup-edit-section",children:[o.jsx(Ot,{food:I(m),kitchen:v||m.kitchen,orderType:"GO_GRAB",selectedDate:l[D]||Y().format("YYYY-MM-DD"),selectedTime:d[D]||Y().add(30,"minute").format("HH:mm"),onDateChange:M=>T(D,M),onTimeChange:M=>S(D,M),className:"listing-page-picker",dateLabel:"Pick up date:",timeLabel:"Pick up time:"}),o.jsxs("div",{className:"edit-actions",style:{display:"flex",gap:"8px",marginTop:"8px"},children:[o.jsx("button",{onClick:()=>B(D),style:{flex:1,padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Save"}),o.jsx("button",{onClick:()=>N(D),style:{flex:1,padding:"6px 12px",backgroundColor:"#f8f9fa",color:"#6c757d",border:"1px solid #dee2e6",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"title",children:m.displayPickupTime}),o.jsxs("div",{className:"bottom",children:[o.jsx("div",{className:"time",children:m.displayPickupClock}),o.jsx("div",{className:"icon",onClick:()=>_(D),style:{cursor:"pointer"},children:o.jsx("img",{src:xn,alt:"Edit pickup time"})})]})]})})()]})]},`grab-${m.foodId}-${j}`)})})]}),Object.entries(L.preOrders).map(([m,j])=>o.jsxs("div",{children:[o.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",R(m)]}),o.jsx("div",{className:"menu-listing",children:j.map((u,y)=>{var b,k,E,D,$;const x=F(u.foodId,m);return o.jsxs("div",{className:"menu-list",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"image",children:o.jsx("img",{src:((b=u.food)==null?void 0:b.imageUrl)||"/src/assets/images/product.png",alt:((k=u.food)==null?void 0:k.name)||"Food item",onError:M=>{M.target.src="/src/assets/images/product.png"}})}),o.jsxs("div",{className:"data",children:[o.jsx("div",{className:"title",children:((E=u.food)==null?void 0:E.name)||"Unknown Item"}),o.jsx("div",{className:"text",children:((D=u.food)==null?void 0:D.description)||"This dish features tender, juicy flavors"}),o.jsxs("div",{className:"price",children:["$ ",(($=u.food)==null?void 0:$.cost)||"0.00"]})]})]}),o.jsxs("div",{className:"quantity-warpper",children:[o.jsx("div",{className:"right mb-1",children:o.jsx(Tt,{food:I(u),kitchen:v||u.kitchen,selectedDate:m,size:"small",initialQuantity:x,onQuantityChange:async M=>{const H=F(u.foodId,m),G=I(u);await a({food:G,kitchen:v||u.kitchen,newQuantity:M,currentQuantity:H,selectedDate:m,specialInstructions:u.specialInstructions||"",isPreOrder:!0})}})}),(()=>{const M=`${u.foodId}-${m}`;return r.has(M)?o.jsxs("div",{className:"pickup-edit-section",children:[o.jsx(Ot,{food:I(u),kitchen:v||u.kitchen,orderType:"PRE_ORDER",selectedDate:l[M]||m,selectedTime:d[M]||"18:30",onDateChange:G=>T(M,G),onTimeChange:G=>S(M,G),className:"listing-page-picker",dateLabel:"Pick up date:",timeLabel:"Pick up time:"}),o.jsxs("div",{className:"edit-actions",style:{display:"flex",gap:"8px",marginTop:"8px"},children:[o.jsx("button",{onClick:()=>B(M),style:{flex:1,padding:"6px 12px",backgroundColor:"#4CAF50",color:"white",border:"none",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Save"}),o.jsx("button",{onClick:()=>N(M),style:{flex:1,padding:"6px 12px",backgroundColor:"#f8f9fa",color:"#6c757d",border:"1px solid #dee2e6",borderRadius:"4px",fontSize:"12px",cursor:"pointer"},children:"Cancel"})]})]}):o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"title",children:u.displayPickupTime}),o.jsxs("div",{className:"bottom",children:[o.jsx("div",{className:"time",children:u.displayPickupClock}),o.jsx("div",{className:"icon",onClick:()=>_(M),style:{cursor:"pointer"},children:o.jsx("img",{src:xn,alt:"Edit pickup time"})})]})]})})()]})]},`preorder-${u.foodId}-${m}-${y}`)})})]},m)),o.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[o.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsxs("span",{children:["Subtotal (",O," item",O!==1?"s":"","):"]}),o.jsxs("span",{children:["$",z.subtotal]})]}),o.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[o.jsx("span",{children:"Tax (7.25%):"}),o.jsxs("span",{children:["$",z.tax]})]}),o.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[o.jsx("span",{children:"Total:"}),o.jsxs("span",{children:["$",z.total]})]})]}),o.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[o.jsx("button",{onClick:A,style:{flex:"1",padding:"12px 16px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",color:"#6c757d",cursor:"pointer"},children:"Clear Cart"}),o.jsx("button",{className:"action-button",onClick:()=>e("/checkout"),style:{flex:"2"},children:"Check Out"})]})]})]})})})}var ss={exports:{}},hm="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",gm=hm,vm=gm;function ls(){}function cs(){}cs.resetWarningCache=ls;var xm=function(){function e(i,a,r,s,l,c){if(c!==vm){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:cs,resetWarningCache:ls};return n.PropTypes=n,n};ss.exports=xm();var ym=ss.exports;const Z=sr(ym),wm=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function gt(e,t,n){const i=bm(e),{webkitRelativePath:a}=e,r=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof i.path!="string"&&Ha(i,"path",r),Ha(i,"relativePath",r),i}function bm(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const i=t.split(".").pop().toLowerCase(),a=wm.get(i);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function Ha(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const km=[".DS_Store","Thumbs.db"];function jm(e){return lt(this,void 0,void 0,function*(){return yn(e)&&Sm(e.dataTransfer)?Dm(e.dataTransfer,e.type):Rm(e)?Cm(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Lm(e):[]})}function Sm(e){return yn(e)}function Rm(e){return yn(e)&&yn(e.target)}function yn(e){return typeof e=="object"&&e!==null}function Cm(e){return Si(e.target.files).map(t=>gt(t))}function Lm(e){return lt(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>gt(n))})}function Dm(e,t){return lt(this,void 0,void 0,function*(){if(e.items){const n=Si(e.items).filter(a=>a.kind==="file");if(t!=="drop")return n;const i=yield Promise.all(n.map(Em));return Ya(ds(i))}return Ya(Si(e.files).map(n=>gt(n)))})}function Ya(e){return e.filter(t=>km.indexOf(t.name)===-1)}function Si(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(i)}return t}function Em(e){if(typeof e.webkitGetAsEntry!="function")return Va(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?us(t):Va(e,t)}function ds(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?ds(n):[n]],[])}function Va(e,t){return lt(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const r=yield e.getAsFileSystemHandle();if(r===null)throw new Error(`${e} is not a File`);if(r!==void 0){const s=yield r.getFile();return s.handle=r,gt(s)}}const i=e.getAsFile();if(!i)throw new Error(`${e} is not a File`);return gt(i,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function _m(e){return lt(this,void 0,void 0,function*(){return e.isDirectory?us(e):Am(e)})}function us(e){const t=e.createReader();return new Promise((n,i)=>{const a=[];function r(){t.readEntries(s=>lt(this,void 0,void 0,function*(){if(s.length){const l=Promise.all(s.map(_m));a.push(l),r()}else try{const l=yield Promise.all(a);n(l)}catch(l){i(l)}}),s=>{i(s)})}r()})}function Am(e){return lt(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(i=>{const a=gt(i,e.fullPath);t(a)},i=>{n(i)})})})}var ri=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var i=e.name||"",a=(e.type||"").toLowerCase(),r=a.replace(/\/.*$/,"");return n.some(function(s){var l=s.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?r===l.replace(/\/.*$/,""):a===l})}return!0};function Qa(e){return Om(e)||Tm(e)||fs(e)||Im()}function Im(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Tm(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Om(e){if(Array.isArray(e))return Ri(e)}function Za(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ja(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Za(Object(n),!0).forEach(function(i){ps(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Za(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ps(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Pt(e,t){return Fm(e)||Nm(e,t)||fs(e,t)||Pm()}function Pm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function fs(e,t){if(e){if(typeof e=="string")return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(e,t)}}function Ri(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Nm(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,r=!1,s,l;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(i.push(s.value),!(t&&i.length===t));a=!0);}catch(c){r=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(r)throw l}}return i}}function Fm(e){if(Array.isArray(e))return e}var $m=typeof ri=="function"?ri:ri.default,Mm="file-invalid-type",Um="file-too-large",zm="file-too-small",Bm="too-many-files",qm=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Mm,message:"File type must be ".concat(i)}},Xa=function(t){return{code:Um,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},er=function(t){return{code:zm,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Wm={code:Bm,message:"Too many files"};function ms(e,t){var n=e.type==="application/x-moz-file"||$m(e,t);return[n,n?null:qm(t)]}function hs(e,t,n){if(Ve(e.size))if(Ve(t)&&Ve(n)){if(e.size>n)return[!1,Xa(n)];if(e.size<t)return[!1,er(t)]}else{if(Ve(t)&&e.size<t)return[!1,er(t)];if(Ve(n)&&e.size>n)return[!1,Xa(n)]}return[!0,null]}function Ve(e){return e!=null}function Gm(e){var t=e.files,n=e.accept,i=e.minSize,a=e.maxSize,r=e.multiple,s=e.maxFiles,l=e.validator;return!r&&t.length>1||r&&s>=1&&t.length>s?!1:t.every(function(c){var d=ms(c,n),f=Pt(d,1),p=f[0],v=hs(c,i,a),g=Pt(v,1),w=g[0],C=l?l(c):null;return p&&w&&!C})}function wn(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Qt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function tr(e){e.preventDefault()}function Km(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Hm(e){return e.indexOf("Edge/")!==-1}function Ym(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Km(e)||Hm(e)}function De(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){for(var a=arguments.length,r=new Array(a>1?a-1:0),s=1;s<a;s++)r[s-1]=arguments[s];return t.some(function(l){return!wn(i)&&l&&l.apply(void 0,[i].concat(r)),wn(i)})}}function Vm(){return"showOpenFilePicker"in window}function Qm(e){if(Ve(e)){var t=Object.entries(e).filter(function(n){var i=Pt(n,2),a=i[0],r=i[1],s=!0;return gs(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(r)||!r.every(vs))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(n,i){var a=Pt(i,2),r=a[0],s=a[1];return Ja(Ja({},n),{},ps({},r,s))},{});return[{description:"Files",accept:t}]}return e}function Zm(e){if(Ve(e))return Object.entries(e).reduce(function(t,n){var i=Pt(n,2),a=i[0],r=i[1];return[].concat(Qa(t),[a],Qa(r))},[]).filter(function(t){return gs(t)||vs(t)}).join(",")}function Jm(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Xm(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function gs(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function vs(e){return/^.*\.[\w]+$/.test(e)}var eh=["children"],th=["open"],nh=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],ih=["refKey","onChange","onClick"];function ah(e){return sh(e)||oh(e)||xs(e)||rh()}function rh(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oh(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sh(e){if(Array.isArray(e))return Ci(e)}function oi(e,t){return dh(e)||ch(e,t)||xs(e,t)||lh()}function lh(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xs(e,t){if(e){if(typeof e=="string")return Ci(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ci(e,t)}}function Ci(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function ch(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,r=!1,s,l;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(i.push(s.value),!(t&&i.length===t));a=!0);}catch(c){r=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(r)throw l}}return i}}function dh(e){if(Array.isArray(e))return e}function nr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function X(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?nr(Object(n),!0).forEach(function(i){Li(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nr(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Li(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bn(e,t){if(e==null)return{};var n=uh(e,t),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function uh(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,r;for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Xi=h.forwardRef(function(e,t){var n=e.children,i=bn(e,eh),a=ws(i),r=a.open,s=bn(a,th);return h.useImperativeHandle(t,function(){return{open:r}},[r]),Ei.createElement(h.Fragment,null,n(X(X({},s),{},{open:r})))});Xi.displayName="Dropzone";var ys={disabled:!1,getFilesFromEvent:jm,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Xi.defaultProps=ys;Xi.propTypes={children:Z.func,accept:Z.objectOf(Z.arrayOf(Z.string)),multiple:Z.bool,preventDropOnDocument:Z.bool,noClick:Z.bool,noKeyboard:Z.bool,noDrag:Z.bool,noDragEventsBubbling:Z.bool,minSize:Z.number,maxSize:Z.number,maxFiles:Z.number,disabled:Z.bool,getFilesFromEvent:Z.func,onFileDialogCancel:Z.func,onFileDialogOpen:Z.func,useFsAccessApi:Z.bool,autoFocus:Z.bool,onDragEnter:Z.func,onDragLeave:Z.func,onDragOver:Z.func,onDrop:Z.func,onDropAccepted:Z.func,onDropRejected:Z.func,onError:Z.func,validator:Z.func};var Di={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ws(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=X(X({},ys),e),n=t.accept,i=t.disabled,a=t.getFilesFromEvent,r=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,f=t.onDragLeave,p=t.onDragOver,v=t.onDrop,g=t.onDropAccepted,w=t.onDropRejected,C=t.onFileDialogCancel,I=t.onFileDialogOpen,L=t.useFsAccessApi,z=t.autoFocus,F=t.preventDropOnDocument,A=t.noClick,R=t.noKeyboard,_=t.noDrag,N=t.noDragEventsBubbling,B=t.onError,T=t.validator,S=h.useMemo(function(){return Zm(n)},[n]),O=h.useMemo(function(){return Qm(n)},[n]),m=h.useMemo(function(){return typeof I=="function"?I:ir},[I]),j=h.useMemo(function(){return typeof C=="function"?C:ir},[C]),u=h.useRef(null),y=h.useRef(null),x=h.useReducer(ph,Di),b=oi(x,2),k=b[0],E=b[1],D=k.isFocused,$=k.isFileDialogActive,M=h.useRef(typeof window!="undefined"&&window.isSecureContext&&L&&Vm()),H=function(){!M.current&&$&&setTimeout(function(){if(y.current){var W=y.current.files;W.length||(E({type:"closeDialog"}),j())}},300)};h.useEffect(function(){return window.addEventListener("focus",H,!1),function(){window.removeEventListener("focus",H,!1)}},[y,$,j,M]);var G=h.useRef([]),le=function(W){u.current&&u.current.contains(W.target)||(W.preventDefault(),G.current=[])};h.useEffect(function(){return F&&(document.addEventListener("dragover",tr,!1),document.addEventListener("drop",le,!1)),function(){F&&(document.removeEventListener("dragover",tr),document.removeEventListener("drop",le))}},[u,F]),h.useEffect(function(){return!i&&z&&u.current&&u.current.focus(),function(){}},[u,z,i]);var re=h.useCallback(function(U){B?B(U):console.error(U)},[B]),ve=h.useCallback(function(U){U.preventDefault(),U.persist(),qt(U),G.current=[].concat(ah(G.current),[U.target]),Qt(U)&&Promise.resolve(a(U)).then(function(W){if(!(wn(U)&&!N)){var oe=W.length,de=oe>0&&Gm({files:W,accept:S,minSize:s,maxSize:r,multiple:l,maxFiles:c,validator:T}),ye=oe>0&&!de;E({isDragAccept:de,isDragReject:ye,isDragActive:!0,type:"setDraggedFiles"}),d&&d(U)}}).catch(function(W){return re(W)})},[a,d,re,N,S,s,r,l,c,T]),Re=h.useCallback(function(U){U.preventDefault(),U.persist(),qt(U);var W=Qt(U);if(W&&U.dataTransfer)try{U.dataTransfer.dropEffect="copy"}catch(oe){}return W&&p&&p(U),!1},[p,N]),xe=h.useCallback(function(U){U.preventDefault(),U.persist(),qt(U);var W=G.current.filter(function(de){return u.current&&u.current.contains(de)}),oe=W.indexOf(U.target);oe!==-1&&W.splice(oe,1),G.current=W,!(W.length>0)&&(E({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Qt(U)&&f&&f(U))},[u,f,N]),q=h.useCallback(function(U,W){var oe=[],de=[];U.forEach(function(ye){var wt=ms(ye,S),pt=oi(wt,2),Pn=pt[0],Nn=pt[1],Fn=hs(ye,s,r),Wt=oi(Fn,2),$n=Wt[0],Mn=Wt[1],Un=T?T(ye):null;if(Pn&&$n&&!Un)oe.push(ye);else{var zn=[Nn,Mn];Un&&(zn=zn.concat(Un)),de.push({file:ye,errors:zn.filter(function(Ss){return Ss})})}}),(!l&&oe.length>1||l&&c>=1&&oe.length>c)&&(oe.forEach(function(ye){de.push({file:ye,errors:[Wm]})}),oe.splice(0)),E({acceptedFiles:oe,fileRejections:de,isDragReject:de.length>0,type:"setFiles"}),v&&v(oe,de,W),de.length>0&&w&&w(de,W),oe.length>0&&g&&g(oe,W)},[E,l,S,s,r,c,v,g,w,T]),P=h.useCallback(function(U){U.preventDefault(),U.persist(),qt(U),G.current=[],Qt(U)&&Promise.resolve(a(U)).then(function(W){wn(U)&&!N||q(W,U)}).catch(function(W){return re(W)}),E({type:"reset"})},[a,q,re,N]),K=h.useCallback(function(){if(M.current){E({type:"openDialog"}),m();var U={multiple:l,types:O};window.showOpenFilePicker(U).then(function(W){return a(W)}).then(function(W){q(W,null),E({type:"closeDialog"})}).catch(function(W){Jm(W)?(j(W),E({type:"closeDialog"})):Xm(W)?(M.current=!1,y.current?(y.current.value=null,y.current.click()):re(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):re(W)});return}y.current&&(E({type:"openDialog"}),m(),y.current.value=null,y.current.click())},[E,m,j,L,q,re,O,l]),ee=h.useCallback(function(U){!u.current||!u.current.isEqualNode(U.target)||(U.key===" "||U.key==="Enter"||U.keyCode===32||U.keyCode===13)&&(U.preventDefault(),K())},[u,K]),ct=h.useCallback(function(){E({type:"focus"})},[]),zt=h.useCallback(function(){E({type:"blur"})},[]),dt=h.useCallback(function(){A||(Ym()?setTimeout(K,0):K())},[A,K]),ut=function(W){return i?null:W},On=function(W){return R?null:ut(W)},Bt=function(W){return _?null:ut(W)},qt=function(W){N&&W.stopPropagation()},bs=h.useMemo(function(){return function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=U.refKey,oe=W===void 0?"ref":W,de=U.role,ye=U.onKeyDown,wt=U.onFocus,pt=U.onBlur,Pn=U.onClick,Nn=U.onDragEnter,Fn=U.onDragOver,Wt=U.onDragLeave,$n=U.onDrop,Mn=bn(U,nh);return X(X(Li({onKeyDown:On(De(ye,ee)),onFocus:On(De(wt,ct)),onBlur:On(De(pt,zt)),onClick:ut(De(Pn,dt)),onDragEnter:Bt(De(Nn,ve)),onDragOver:Bt(De(Fn,Re)),onDragLeave:Bt(De(Wt,xe)),onDrop:Bt(De($n,P)),role:typeof de=="string"&&de!==""?de:"presentation"},oe,u),!i&&!R?{tabIndex:0}:{}),Mn)}},[u,ee,ct,zt,dt,ve,Re,xe,P,R,_,i]),ks=h.useCallback(function(U){U.stopPropagation()},[]),js=h.useMemo(function(){return function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},W=U.refKey,oe=W===void 0?"ref":W,de=U.onChange,ye=U.onClick,wt=bn(U,ih),pt=Li({accept:S,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ut(De(de,P)),onClick:ut(De(ye,ks)),tabIndex:-1},oe,y);return X(X({},pt),wt)}},[y,n,l,P,i]);return X(X({},k),{},{isFocused:D&&!i,getRootProps:bs,getInputProps:js,rootRef:u,inputRef:y,open:ut(K)})}function ph(e,t){switch(t.type){case"focus":return X(X({},e),{},{isFocused:!0});case"blur":return X(X({},e),{},{isFocused:!1});case"openDialog":return X(X({},Di),{},{isFileDialogActive:!0});case"closeDialog":return X(X({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return X(X({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return X(X({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return X({},Di);default:return e}}function ir(){}const fh="/assets/map-D7B-IPhe.png";var mh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const hh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),gh=(e,t)=>{const n=h.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:s,children:l,...c},d)=>h.createElement("svg",{ref:d,...mh,width:a,height:a,stroke:i,strokeWidth:s?Number(r)*24/Number(a):r,className:`lucide lucide-${hh(e)}`,...c},[...t.map(([f,p])=>h.createElement(f,p)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var yt=gh;const vh=yt("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),xh=yt("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),ar=yt("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),yh=yt("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),wh=yt("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),bh=yt("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),kh=async(e,t="payment-screenshots",n="anonymous")=>{try{if(!e)throw new Error("No file provided");if(!e.type.startsWith("image/"))throw new Error("File must be an image");const i=10*1024*1024;if(e.size>i)throw new Error("File size must be less than 10MB");const a=new Date().getTime(),r=e.name.split(".").pop()||"jpg",s=`${n}_${a}.${r}`,l=Hu(Po,`${t}/${s}`);console.log("Uploading file to Firebase Storage...");const c=await Gu(l,e),d=await Ku(c.ref);return console.log("File uploaded successfully:",d),d}catch(i){throw console.error("Error uploading file to Firebase Storage:",i),i}},jh=async e=>{try{console.log("Placing order with data:",e);const t=await hr(te(V,"orders"),e);if(console.log("Order placed successfully with ID:",t.id),await qn(t,{orderIDKey:t.id}),e.kitchenId)try{const n=Je(V,"kitchens",e.kitchenId);await qn(n,{totalOrders:Wn(1),lastOrderDate:new Date})}catch(n){console.warn("Could not update kitchen statistics:",n)}for(const n of e.orderedFoodItems)try{const i=Je(V,"foods",n.foodItemId);await qn(i,{numOfSoldItem:Wn(n.quantity),numberOfAvailableItem:Wn(-n.quantity)})}catch(i){console.warn(`Could not update food item ${n.foodItemId} statistics:`,i)}return t.id}catch(t){throw console.error("Error placing order:",t),t}},Sh=()=>Math.floor(1e5+Math.random()*9e5).toString(),Rh=({cartItems:e,kitchenInfo:t,firebaseImageUrl:n,currentUser:i,paymentCalculation:a,groupedCartItems:r})=>{const s=new Date().toISOString(),l=Sh(),c=Object.keys(r.preOrders).length>0,d=r.grabAndGo.length>0;let f="grabAndGo";c&&!d?f="preOrder":c&&d&&(f="mixed");let p=s;if(c){const w=Object.keys(r.preOrders);if(w.length>0){const C=w.sort()[0];p=new Date(C).toISOString()}}const v=e.map(w=>{var C,I,L,z,F,A,R,_,N,B,T,S;return{countRating:0,foodItemId:w.foodId||w.id,id:rr(),imageUrl:((C=w.food)==null?void 0:C.imageUrl)||((I=w.food)==null?void 0:I.image)||"",isFromPreorder:((L=w.pickupDetails)==null?void 0:L.orderType)==="PRE_ORDER"||w.isPreOrder||!1,name:((z=w.food)==null?void 0:z.name)||"Unknown Item",numOfLike:((F=w.food)==null?void 0:F.numOfLike)||0,numOfSoldItem:((A=w.food)==null?void 0:A.numOfSoldItem)||0,numberOfAvailableItem:((R=w.food)==null?void 0:R.numberOfAvailableItem)||0,quantity:parseInt(w.quantity||1),rating:0,specialInstructions:w.specialInstructions||"",...((_=w.food)==null?void 0:_.preOrder)&&{preOrder:{availableTimes:w.food.preOrder.availableTimes||[],foodItemId:w.foodId||w.id,id:rr(),nameOfFood:((N=w.food)==null?void 0:N.name)||"Unknown Item",numOfAvailableItems:((B=w.food)==null?void 0:B.numberOfAvailableItem)||0,price:parseFloat(((T=w.food)==null?void 0:T.cost)||((S=w.food)==null?void 0:S.price)||0)}},pickupDetails:w.pickupDetails||{}}});return{datePickedUp:p,datePlaced:s,kitchenId:(t==null?void 0:t.id)||(t==null?void 0:t.kitchenId)||"unknown",kitchenName:(t==null?void 0:t.name)||"Unknown Kitchen",orderID:l,orderIDKey:"",orderPaymentImage:n||"",orderStatus:"pending",orderTotalCoast:parseFloat(a.totalPayment),orderType:f,orderedFoodItems:v,paymentVia:{other:{method:"manual_upload",uploadedAt:n?s:null}},pickUpAddress:(t==null?void 0:t.address)||"Address not available",userId:(i==null?void 0:i.uid)||"mzqXlFHOJXNVA0BUvtvbbhgF78x1",subtotal:parseFloat(a.subtotal),salesTax:parseFloat(a.salesTax),taxRate:.0725,createdAt:s,updatedAt:s}},rr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16).toUpperCase()});function Ch(){const[e,t]=h.useState(null),[n,i]=h.useState(null),[a,r]=h.useState(null),[s,l]=h.useState(!1),[c,d]=h.useState(null),[f,p]=h.useState(!1),v=vt(),g=Ge(),w=he(m=>m.cart.items),C=he(m=>m.food.currentKitchen),I=he(m=>m.auth.user),L=h.useMemo(()=>{var m,j;if(C){const u=C;if(console.log("kitchen",u),u)return{id:u.id||u.ownerId||"PKcWQYMxEZQxnKSLp4de",name:u.name||"James Kitchen",address:u.address||"120 Lane San Francisco, East Falmouth MA",latitude:((m=u.location)==null?void 0:m.lat)||u.latitude||41.5742,longitude:((j=u.location)==null?void 0:j.lng)||u.longitude||-70.6109}}return{id:"PKcWQYMxEZQxnKSLp4de",name:"James Kitchen",address:"120 Lane San Francisco, East Falmouth MA",latitude:41.5742,longitude:-70.6109}},[C]),z=m=>{v("/order",{state:{editItem:m.id||m.foodId,returnTo:"/payment"}})},F=h.useMemo(()=>{const m={grabAndGo:[],preOrders:{}};w.forEach(u=>{var x,b,k,E,D,$,M,H;const y=((x=u.pickupDetails)==null?void 0:x.orderType)||u.orderType||(u.isPreOrder?"PRE_ORDER":"GO_GRAB");if(y==="GO_GRAB")m.grabAndGo.push({...u,displayPickupTime:((b=u.pickupDetails)==null?void 0:b.display)||"Pick up today",displayPickupClock:((k=u.pickupDetails)==null?void 0:k.time)||Y().add(30,"minutes").format("h:mm A")});else if(y==="PRE_ORDER"||u.isPreOrder||u.selectedDate){const G=u.selectedDate||((E=u.pickupDetails)==null?void 0:E.date);G&&(m.preOrders[G]||(m.preOrders[G]=[]),m.preOrders[G].push({...u,displayPickupTime:((D=u.pickupDetails)==null?void 0:D.display)||`Pick up ${Y(G).format("MMM D ddd")}`,displayPickupClock:(($=u.pickupDetails)==null?void 0:$.time)||"6:30 PM"}))}else m.grabAndGo.push({...u,displayPickupTime:((M=u.pickupDetails)==null?void 0:M.display)||"Pick up today",displayPickupClock:((H=u.pickupDetails)==null?void 0:H.time)||Y().add(30,"minutes").format("h:mm A")})});const j={};return Object.keys(m.preOrders).sort((u,y)=>Y(u).diff(Y(y))).forEach(u=>{j[u]=m.preOrders[u]}),m.preOrders=j,m},[w]),A=m=>Y(m).format("MMM D ddd");h.useMemo(()=>{const m=[];if(F.grabAndGo.length>0){const j=F.grabAndGo[0];m.push({type:"Go&Grab",date:"Today",time:j.displayPickupClock,count:F.grabAndGo.length})}return Object.entries(F.preOrders).forEach(([j,u])=>{const y=u[0];m.push({type:"Pre-Order",date:A(j),time:y.displayPickupClock,count:u.length})}),m},[F,A]);const R=h.useMemo(()=>{const m=w.reduce((x,b)=>{var D,$;const k=parseFloat(((D=b.food)==null?void 0:D.cost)||(($=b.food)==null?void 0:$.price)||0),E=parseInt(b.quantity||1);return x+k*E},0),u=m*.0725,y=m+u;return{subtotal:m.toFixed(2),salesTax:u.toFixed(2),totalPayment:y.toFixed(2)}},[w]),_=async m=>{if(m.length>0){const j=m[0];i(j),d(null),e&&URL.revokeObjectURL(e);const u=URL.createObjectURL(j);t(u);try{l(!0);const y=(I==null?void 0:I.uid)||"anonymous",x=await kh(j,"payment-screenshots",y);r(x),Q.success("Payment screenshot uploaded successfully!"),console.log("Firebase Storage URL:",x)}catch(y){console.error("Error uploading to Firebase:",y),d(y.message),Q.error(`Upload failed: ${y.message}`)}finally{l(!1)}}},{getRootProps:N,getInputProps:B,isDragActive:T}=ws({onDrop:_,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".bmp",".webp"]},multiple:!1,maxSize:10*1024*1024}),S=()=>{e&&URL.revokeObjectURL(e),t(null),i(null),r(null),d(null)},O=async()=>{try{if(w.length===0){Q.error("Your cart is empty. Please add items before placing an order.");return}if(!a){Q.error("Please upload a payment confirmation screenshot before placing your order.");return}if(!I){Q.error("Please log in to place an order.");return}p(!0);const m=Rh({cartItems:w,kitchenInfo:L,firebaseImageUrl:a,currentUser:I,paymentCalculation:R,groupedCartItems:F});console.log("Order data to be placed:",m);const j=await jh(m);g(Tn()),Q.success("Order placed successfully! Redirecting to success page..."),setTimeout(()=>{v("/success",{state:{orderID:m.orderID,orderDocId:j,totalAmount:R.totalPayment,kitchenName:L.name,pickupAddress:L.address}})},2e3)}catch(m){console.error("Error placing order:",m),Q.error(`Failed to place order: ${m.message}`)}finally{p(!1)}};return o.jsx(o.Fragment,{children:o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsxs("div",{className:"padding-20 order-page",children:[o.jsx("h4",{className:"medium-title mb-12",children:"Pickup Address"}),o.jsx("p",{className:"body-text-med mb-20",children:L.address}),o.jsx("div",{className:"map-container",children:o.jsx("div",{className:"interactive-map",children:o.jsxs("div",{className:"map-fallback",children:[o.jsx("img",{src:fh,alt:"Kitchen location map",style:{width:"100%",height:"200px",objectFit:"cover",borderRadius:"12px"}}),o.jsx("div",{className:"map-overlay",children:o.jsxs("div",{className:"map-pin",children:[o.jsx("div",{className:"pin-icon",children:""}),o.jsx("span",{className:"pin-label",children:L.name})]})})]})})}),o.jsx("div",{className:"hr mb-18"}),o.jsxs("div",{className:"other-payments-wrapper mb-20",children:[o.jsx("h2",{className:"title",children:"Other Payments acceptable to James Kitchen Kitchen"}),o.jsxs("div",{className:"item-flex",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"text",children:"PayPal to"}),o.jsx("a",{className:"email",children:"jamesPayPal00@gmail.com"})]}),o.jsxs("div",{className:"copy",children:[o.jsx(ar,{})," Copy"]})]}),o.jsxs("div",{className:"item-flex",children:[o.jsxs("div",{className:"left",children:[o.jsx("div",{className:"text",children:"Venmo to"}),o.jsx("a",{className:"email",children:"jamesVenmo00@gmail.com"})]}),o.jsxs("div",{className:"copy",children:[o.jsx(ar,{})," Copy"]})]})]}),o.jsxs("div",{className:"payment-method mb-20",children:[o.jsx("h5",{className:"medium-title mb-20",children:"Payment Details"}),o.jsx("div",{className:"hr mb-20"}),o.jsxs("div",{className:"item-flex",children:[o.jsx("span",{children:"Subtotal"}),o.jsxs("span",{children:["$",R.subtotal]})]}),o.jsxs("div",{className:"item-flex",children:[o.jsx("span",{children:"Sales Tax (7.25%)"}),o.jsxs("span",{children:["$",R.salesTax]})]}),o.jsx("div",{className:"hr mb-12"}),o.jsxs("div",{className:"item-flex bold",children:[o.jsx("span",{children:"Total Payment"}),o.jsxs("span",{children:["$",R.totalPayment]})]})]}),o.jsxs("div",{className:"order-items-section mb-20",children:[o.jsx("h3",{className:"order-items-title",children:"Select Pickup Date & Time"}),w.length===0?o.jsx("div",{className:"empty-cart-message",children:o.jsx("p",{className:"body-text-med",children:"No items in cart"})}):o.jsxs("div",{className:"pickup-items-list",children:[F.grabAndGo.length>0&&F.grabAndGo.map((m,j)=>{var u,y,x,b,k,E;return o.jsxs("div",{className:"pickup-item-row",children:[o.jsxs("div",{className:"item-info",children:[o.jsx("div",{className:"food-image",children:o.jsx("img",{src:((u=m.food)==null?void 0:u.imageUrl)||((y=m.food)==null?void 0:y.image),alt:(x=m.food)==null?void 0:x.name,onError:D=>{D.target.style.display="none"}})}),o.jsxs("div",{className:"food-details",children:[o.jsx("h5",{className:"food-name",children:((b=m.food)==null?void 0:b.name)||"Unknown Item"}),o.jsxs("div",{className:"pickup-time",children:["Today, ",m.displayPickupClock]}),o.jsxs("div",{className:"item-quantity",children:["Qty: ",m.quantity,"  $",((k=m.food)==null?void 0:k.cost)||((E=m.food)==null?void 0:E.price)||"0.00"]})]})]}),o.jsx("div",{className:"edit-icon",onClick:()=>z(m),role:"button",tabIndex:0,onKeyDown:D=>{(D.key==="Enter"||D.key===" ")&&z(m)},children:o.jsx("img",{src:xn,alt:"Edit pickup time"})})]},`grab-${m.foodId}-${j}`)}),Object.keys(F.preOrders).length>0&&Object.entries(F.preOrders).map(([m,j])=>j.map((u,y)=>{var x,b,k,E,D,$;return o.jsxs("div",{className:"pickup-item-row",children:[o.jsxs("div",{className:"item-info",children:[o.jsx("div",{className:"food-image",children:o.jsx("img",{src:((x=u.food)==null?void 0:x.imageUrl)||((b=u.food)==null?void 0:b.image),alt:(k=u.food)==null?void 0:k.name,onError:M=>{M.target.style.display="none"}})}),o.jsxs("div",{className:"food-details",children:[o.jsx("h5",{className:"food-name",children:((E=u.food)==null?void 0:E.name)||"Unknown Item"}),o.jsxs("div",{className:"pickup-time",children:[A(m),", ",u.displayPickupClock]}),o.jsxs("div",{className:"item-quantity",children:["Qty: ",u.quantity,"  $",((D=u.food)==null?void 0:D.cost)||(($=u.food)==null?void 0:$.price)||"0.00"]})]})]}),o.jsx("div",{className:"edit-icon",onClick:()=>z(u),role:"button",tabIndex:0,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&z(u)},children:o.jsx("img",{src:xn,alt:"Edit pickup time"})})]},`preorder-${u.foodId}-${m}-${y}`)}))]})]}),o.jsxs("div",{className:"upload-section mb-20",children:[o.jsx("h5",{className:"medium-title mb-12",children:"Payment Confirmation"}),o.jsx("p",{className:"body-text-med mb-16",children:"Upload payment confirmation screenshot"}),e?o.jsxs("div",{className:"upload-preview-container",children:[o.jsxs("div",{className:"upload-preview",children:[o.jsx("img",{src:e,alt:"Payment confirmation preview",className:"preview-image"}),o.jsx("button",{type:"button",className:"remove-image-btn",onClick:S,"aria-label":"Remove image",disabled:s,children:o.jsx(bh,{size:16})}),s&&o.jsxs("div",{className:"upload-status-overlay",children:[o.jsx("div",{className:"upload-spinner"}),o.jsx("p",{children:"Uploading to Firebase..."})]})]}),o.jsxs("div",{className:"file-info",children:[o.jsxs("div",{className:"file-details",children:[o.jsx("p",{className:"file-name",children:n==null?void 0:n.name}),o.jsxs("p",{className:"file-size",children:[n&&(n.size/1024/1024).toFixed(2)," ","MB"]})]}),o.jsxs("div",{className:"upload-status",children:[s&&o.jsxs("div",{className:"status-item uploading",children:[o.jsx(wh,{size:16}),o.jsx("span",{children:"Uploading..."})]}),a&&!s&&o.jsxs("div",{className:"status-item success",children:[o.jsx(xh,{size:16}),o.jsx("span",{children:"Uploaded to Firebase"})]}),c&&o.jsxs("div",{className:"status-item error",children:[o.jsx(vh,{size:16}),o.jsx("span",{children:"Upload failed"})]})]}),a&&o.jsxs("div",{className:"firebase-url",children:[o.jsx("p",{className:"url-label",children:"Firebase Storage URL:"}),o.jsx("a",{href:a,target:"_blank",rel:"noopener noreferrer",className:"url-link",children:"View uploaded image"})]})]})]}):o.jsxs("div",{...N(),className:`upload-dropzone ${T?"active":""}`,children:[o.jsx("input",{...B()}),o.jsxs("div",{className:"upload-content",children:[o.jsx("div",{className:"upload-icon",children:o.jsx(yh,{size:32})}),o.jsx("h6",{className:"upload-title",children:T?"Drop image here":"Upload Screenshot"}),o.jsxs("p",{className:"upload-description",children:["Drag & drop your payment confirmation or"," ",o.jsx("span",{className:"upload-link",children:"browse files"})]}),o.jsx("p",{className:"upload-formats",children:"Supports: JPG, PNG, GIF, WebP (Max 10MB)"})]})]})]}),o.jsx("button",{className:"action-button",onClick:O,disabled:f||s||w.length===0,children:f?"Placing Order...":"Place My Order"})]})})})})}const Lh="data:image/svg+xml,%3csvg%20width='173'%20height='162'%20viewBox='0%200%20173%20162'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='85.5'%20cy='93'%20r='67'%20fill='%23829F35'/%3e%3ccircle%20cx='166'%20cy='32.5'%20r='6.5'%20fill='%23829F35'/%3e%3cellipse%20cx='11'%20cy='10'%20rx='10.5'%20ry='10'%20fill='%23829F35'/%3e%3cellipse%20cx='5.5'%20cy='136.5'%20rx='5'%20ry='5.5'%20fill='%23829F35'/%3e%3cellipse%20cx='154'%20cy='160'%20rx='2.5'%20ry='2'%20fill='%23829F35'/%3e%3cpath%20d='M82.1976%20111C80.5838%20111%2078.9701%20110.393%2078.048%20109.179L65.138%2094.6121C63.2937%2092.5889%2063.7548%2089.7565%2066.0602%2088.1379C68.3655%2086.5193%2071.593%2086.924%2073.4373%2088.9472L82.1976%2098.8609L101.563%2076.808C103.407%2074.7848%20106.635%2074.3801%20108.94%2075.9987C111.245%2077.6173%20111.706%2080.4498%20109.862%2082.4729L86.3473%20109.179C85.1946%20110.191%2083.8114%20111%2082.1976%20111Z'%20fill='white'/%3e%3ccircle%20cx='114'%20cy='103.5'%20r='2.5'%20fill='white'/%3e%3ccircle%20cx='48.5'%20cy='76'%20r='4'%20fill='white'/%3e%3ccircle%20cx='107'%20cy='54.5'%20r='1.5'%20fill='white'/%3e%3ccircle%20cx='65.5'%20cy='125'%20r='2'%20fill='white'/%3e%3ccircle%20cx='87.5'%20cy='77'%20r='1'%20fill='white'/%3e%3c/svg%3e";function Dh(){const t=Nt().state||{},{orderID:n,totalAmount:i,kitchenName:a,pickupAddress:r}=t;return o.jsx("div",{className:"container",children:o.jsx("div",{className:"mobile-container",children:o.jsxs("div",{className:"padding-20 order-page",children:[o.jsxs("div",{className:"back-link-title",children:[o.jsx(Be,{className:"back-link",to:"/",children:o.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:o.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),o.jsx("div",{className:"title",children:"Payment Success"})]}),o.jsxs("div",{className:"success-image-wrapper",children:[o.jsx("img",{src:Lh,alt:"Success"}),o.jsx("h2",{className:"title",children:"Your order has been successfully placed"}),o.jsx("p",{className:"text mb-20",children:"Your order is being worked on. It will take 20-30 min to get ready for pick up."}),n&&o.jsxs("div",{className:"order-summary-card",children:[o.jsx("h4",{className:"order-summary-title",children:"Order Summary"}),o.jsxs("div",{className:"order-detail-row",children:[o.jsx("span",{className:"detail-label",children:"Order ID:"}),o.jsxs("span",{className:"detail-value",children:["#",n]})]}),i&&o.jsxs("div",{className:"order-detail-row",children:[o.jsx("span",{className:"detail-label",children:"Total Amount:"}),o.jsxs("span",{className:"detail-value",children:["$",i]})]}),a&&o.jsxs("div",{className:"order-detail-row",children:[o.jsx("span",{className:"detail-label",children:"Kitchen:"}),o.jsx("span",{className:"detail-value",children:a})]}),r&&o.jsxs("div",{className:"order-detail-row",children:[o.jsx("span",{className:"detail-label",children:"Pickup Address:"}),o.jsx("span",{className:"detail-value",children:r})]})]})]}),o.jsxs("div",{className:"success-actions",children:[o.jsx(Be,{to:"/order",className:"action-button secondary mb-12",children:"View Order Details"}),o.jsx(Be,{to:"/",className:"action-button",children:"Back to Home"})]})]})})})}function Eh(){const{user:e,initializing:t}=Ji(),n=Nt();return t?o.jsx("div",{className:"d-flex vh-100 align-items-center justify-content-center",children:"Loading..."}):e?o.jsx(As,{}):o.jsx(_s,{to:"/login",replace:!0,state:{from:n}})}function _h(){return o.jsxs(Is,{children:[o.jsx(Se,{path:"/",element:o.jsx(cm,{})}),o.jsx(Se,{path:"/foods",element:o.jsx(Wa,{})}),o.jsx(Se,{path:"/foods/:kitchenId",element:o.jsx(Wa,{})}),o.jsx(Se,{path:"/share",element:o.jsx(Ka,{})}),o.jsx(Se,{path:"/share/",element:o.jsx(Ka,{})}),o.jsx(Se,{path:"/order",element:o.jsx(mm,{})}),o.jsx(Se,{path:"/checkout",element:o.jsx(Ch,{})}),o.jsx(Se,{path:"/success",element:o.jsx(Dh,{})}),o.jsx(Se,{path:"/login",element:o.jsx(Jf,{})}),o.jsx(Se,{path:"/wechat/callback",element:o.jsx(Xf,{})}),o.jsx(Se,{element:o.jsx(Eh,{}),children:o.jsx(Se,{path:"/home",element:o.jsx(Zf,{})})})]})}const Ah=()=>{const e=Ge(),t=he(r=>r.auth),[n,i]=h.useState(window.innerWidth<768);h.useEffect(()=>{const r=()=>{i(window.innerWidth<768)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const a=()=>{e(Hr())};return n?null:o.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#f8f9fa",padding:"15px",border:"2px solid #dee2e6",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",zIndex:9999,maxWidth:"300px"},children:[o.jsx("h6",{style:{margin:"0 0 10px 0",fontSize:"14px"},children:" Auth Debug Panel"}),o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("strong",{children:"Is Authenticated:"})," ",o.jsx("span",{style:{color:t.isAuthenticated?"green":"red"},children:t.isAuthenticated?" YES":" NO"})]}),o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("strong",{children:"Auth Status:"})," ",o.jsx("span",{style:{color:t.loading?"orange":"gray"},children:t.loading?" LOADING":"READY"})]}),o.jsxs("div",{style:{marginBottom:"10px"},children:[o.jsx("strong",{children:"User:"})," ",t.user?o.jsx("span",{style:{color:"green"},children:t.user.nickname||t.user.openid||"WeChat User"}):o.jsx("span",{style:{color:"red"},children:"None"})]}),t.error&&o.jsxs("div",{style:{marginBottom:"10px",color:"red"},children:[o.jsx("strong",{children:"Error:"})," ",t.error]}),t.isAuthenticated&&o.jsx("button",{onClick:a,style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:" Logout"}),o.jsx("div",{style:{marginTop:"10px",fontSize:"10px",color:"#6c757d"},children:"WeChat Authentication System"})]})};xr(document.getElementById("root")).render(o.jsx(Ei.StrictMode,{children:o.jsx(yl,{store:Vo,children:o.jsx(jr,{loading:o.jsx("div",{children:"Loading..."}),persistor:Qo,children:o.jsx(Ts,{children:o.jsxs(Qf,{children:[o.jsx(_h,{}),o.jsx(Ah,{}),o.jsx(gc,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:4e3,style:{background:"#fff",color:"#333",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #e0e0e0"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})})}));
