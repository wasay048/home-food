var Ls=Object.defineProperty;var Cs=(e,t,n)=>t in e?Ls(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Mn=(e,t,n)=>Cs(e,typeof t!="symbol"?t+"":t,n);import{r as m,a as Es,u as dr,b as wt,c as _s,g as ur,d as $t,e as As,L as At,R as Ci,N as Is,O as Ts,f as Ps,h as Ee,B as Os}from"./vendor-Ctg7QK9K.js";import{_ as It,C as Tt,r as vt,S as Ns,F as Ei,g as pr,a as bt,b as Mt,c as Fs,d as $s,E as fr,o as Ms,L as Us,i as mr,e as hr,v as gr,f as ea,h as vr,j as zs,k as ta,l as Bs,m as xr,n as qs,p as Rt,q as it,s as ue,t as oe,u as se,w as Oe,x as Ie,y as Ws,z as Gs,A as yr,B as Ks,D as Ys,O as Hs,G as Qs,H as na,I as ft,J as Un,K as zn}from"./firebase-BmPdqLyL.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const r of a)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const r={};return a.integrity&&(r.integrity=a.integrity),a.referrerPolicy&&(r.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?r.credentials="include":a.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(a){if(a.ep)return;a.ep=!0;const r=n(a);fetch(a.href,r)}})();var wr={exports:{}},wn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Vs=m,Zs=Symbol.for("react.element"),Js=Symbol.for("react.fragment"),Xs=Object.prototype.hasOwnProperty,el=Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,tl={key:!0,ref:!0,__self:!0,__source:!0};function br(e,t,n){var i,a={},r=null,o=null;n!==void 0&&(r=""+n),t.key!==void 0&&(r=""+t.key),t.ref!==void 0&&(o=t.ref);for(i in t)Xs.call(t,i)&&!tl.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Zs,type:e,key:r,ref:o,props:a,_owner:el.current}}wn.Fragment=Js;wn.jsx=br;wn.jsxs=br;wr.exports=wn;var s=wr.exports,kr,ia=Es;kr=ia.createRoot,ia.hydrateRoot;var jr={exports:{}},Sr={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ut=m;function nl(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var il=typeof Object.is=="function"?Object.is:nl,al=Ut.useSyncExternalStore,rl=Ut.useRef,ol=Ut.useEffect,sl=Ut.useMemo,ll=Ut.useDebugValue;Sr.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var r=rl(null);if(r.current===null){var o={hasValue:!1,value:null};r.current=o}else o=r.current;r=sl(function(){function c(f){if(!d){if(d=!0,p=f,f=i(f),a!==void 0&&o.hasValue){var v=o.value;if(a(v,f))return u=v}return u=f}if(v=u,il(p,f))return v;var D=i(f);return a!==void 0&&a(v,D)?(p=f,v):(p=f,u=D)}var d=!1,p,u,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,i,a]);var l=al(e,r[0],r[1]);return ol(function(){o.hasValue=!0,o.value=l},[l]),ll(l),l};jr.exports=Sr;var cl=jr.exports;function dl(e){e()}function ul(){let e=null,t=null;return{clear(){e=null,t=null},notify(){dl(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var aa={notify(){},get:()=>[]};function pl(e,t){let n,i=aa,a=0,r=!1;function o(D){p();const T=i.subscribe(D);let _=!1;return()=>{_||(_=!0,T(),u())}}function l(){i.notify()}function c(){v.onStateChange&&v.onStateChange()}function d(){return r}function p(){a++,n||(n=e.subscribe(c),i=ul())}function u(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=aa)}function h(){r||(r=!0,p())}function f(){r&&(r=!1,u())}const v={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>i};return v}var fl=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",ml=fl(),hl=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",gl=hl(),vl=()=>ml||gl?m.useLayoutEffect:m.useEffect,xl=vl(),Bn=Symbol.for("react-redux-context"),qn=typeof globalThis!="undefined"?globalThis:{};function yl(){var n;if(!m.createContext)return{};const e=(n=qn[Bn])!=null?n:qn[Bn]=new Map;let t=e.get(m.createContext);return t||(t=m.createContext(null),e.set(m.createContext,t)),t}var Ye=yl();function wl(e){const{children:t,context:n,serverState:i,store:a}=e,r=m.useMemo(()=>{const c=pl(a);return{store:a,subscription:c,getServerState:i?()=>i:void 0}},[a,i]),o=m.useMemo(()=>a.getState(),[a]);xl(()=>{const{subscription:c}=r;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[r,o]);const l=n||Ye;return m.createElement(l.Provider,{value:r},t)}var bl=wl;function _i(e=Ye){return function(){return m.useContext(e)}}var Rr=_i();function Dr(e=Ye){const t=e===Ye?Rr:_i(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var kl=Dr();function jl(e=Ye){const t=e===Ye?kl:Dr(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var He=jl(),Sl=(e,t)=>e===t;function Rl(e=Ye){const t=e===Ye?Rr:_i(e),n=(i,a={})=>{const{equalityFn:r=Sl}=typeof a=="function"?{equalityFn:a}:a,o=t(),{store:l,subscription:c,getServerState:d}=o;m.useRef(!0);const p=m.useCallback({[i.name](h){return i(h)}}[i.name],[i]),u=cl.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,p,r);return m.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var we=Rl();function Vt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Vt=function(n){return typeof n}:Vt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Vt(e)}function Dl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ll(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function Cl(e,t,n){return t&&Ll(e.prototype,t),e}function El(e,t){return t&&(Vt(t)==="object"||typeof t=="function")?t:Zt(e)}function ai(e){return ai=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},ai(e)}function Zt(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _l(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ri(e,t)}function ri(e,t){return ri=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},ri(e,t)}function Jt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Lr=function(e){_l(t,e);function t(){var n,i;Dl(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return i=El(this,(n=ai(t)).call.apply(n,[this].concat(r))),Jt(Zt(i),"state",{bootstrapped:!1}),Jt(Zt(i),"_unsubscribe",void 0),Jt(Zt(i),"handlePersistorState",function(){var l=i.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return Cl(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(m.PureComponent);Jt(Lr,"defaultProps",{children:null,loading:null});let Al={data:""},Il=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Al,Tl=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Pl=/\/\*[^]*?\*\/|  +/g,ra=/\n+/g,We=(e,t)=>{let n="",i="",a="";for(let r in e){let o=e[r];r[0]=="@"?r[1]=="i"?n=r+" "+o+";":i+=r[1]=="f"?We(o,r):r+"{"+We(o,r[1]=="k"?"":t)+"}":typeof o=="object"?i+=We(o,t?t.replace(/([^,])+/g,l=>r.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):r):o!=null&&(r=/^--/.test(r)?r:r.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=We.p?We.p(r,o):r+":"+o+";")}return n+(t&&a?t+"{"+a+"}":a)+i},$e={},Cr=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Cr(e[n]);return t}return e},Ol=(e,t,n,i,a)=>{let r=Cr(e),o=$e[r]||($e[r]=(c=>{let d=0,p=11;for(;d<c.length;)p=101*p+c.charCodeAt(d++)>>>0;return"go"+p})(r));if(!$e[o]){let c=r!==e?e:(d=>{let p,u,h=[{}];for(;p=Tl.exec(d.replace(Pl,""));)p[4]?h.shift():p[3]?(u=p[3].replace(ra," ").trim(),h.unshift(h[0][u]=h[0][u]||{})):h[0][p[1]]=p[2].replace(ra," ").trim();return h[0]})(e);$e[o]=We(a?{["@keyframes "+o]:c}:c,n?"":"."+o)}let l=n&&$e.g?$e.g:null;return n&&($e.g=$e[o]),((c,d,p,u)=>{u?d.data=d.data.replace(u,c):d.data.indexOf(c)===-1&&(d.data=p?c+d.data:d.data+c)})($e[o],t,i,l),o},Nl=(e,t,n)=>e.reduce((i,a,r)=>{let o=t[r];if(o&&o.call){let l=o(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;o=c?"."+c:l&&typeof l=="object"?l.props?"":We(l,""):l===!1?"":l}return i+a+(o==null?"":o)},"");function bn(e){let t=this||{},n=e.call?e(t.p):e;return Ol(n.unshift?n.raw?Nl(n,[].slice.call(arguments,1),t.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):n,Il(t.target),t.g,t.o,t.k)}let Er,oi,si;bn.bind({g:1});let Be=bn.bind({k:1});function Fl(e,t,n,i){We.p=t,Er=e,oi=n,si=i}function Qe(e,t){let n=this||{};return function(){let i=arguments;function a(r,o){let l=Object.assign({},r),c=l.className||a.className;n.p=Object.assign({theme:oi&&oi()},l),n.o=/ *go\d+/.test(c),l.className=bn.apply(n,i)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),si&&d[0]&&si(l),Er(d,l)}return a}}var $l=e=>typeof e=="function",ln=(e,t)=>$l(e)?e(t):e,Ml=(()=>{let e=0;return()=>(++e).toString()})(),_r=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Ul=20,Ai="default",Ar=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(o=>o.id===t.toast.id?{...o,...t.toast}:o)};case 2:let{toast:i}=t;return Ar(e,{type:e.toasts.find(o=>o.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(o=>o.id===a||a===void 0?{...o,dismissed:!0,visible:!1}:o)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(o=>o.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let r=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(o=>({...o,pauseDuration:o.pauseDuration+r}))}}},Xt=[],Ir={toasts:[],pausedAt:void 0,settings:{toastLimit:Ul}},Ne={},Tr=(e,t=Ai)=>{Ne[t]=Ar(Ne[t]||Ir,e),Xt.forEach(([n,i])=>{n===t&&i(Ne[t])})},Pr=e=>Object.keys(Ne).forEach(t=>Tr(e,t)),zl=e=>Object.keys(Ne).find(t=>Ne[t].toasts.some(n=>n.id===e)),kn=(e=Ai)=>t=>{Tr(t,e)},Bl={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},ql=(e={},t=Ai)=>{let[n,i]=m.useState(Ne[t]||Ir),a=m.useRef(Ne[t]);m.useEffect(()=>(a.current!==Ne[t]&&i(Ne[t]),Xt.push([t,i]),()=>{let o=Xt.findIndex(([l])=>l===t);o>-1&&Xt.splice(o,1)}),[t]);let r=n.toasts.map(o=>{var l,c,d;return{...e,...e[o.type],...o,removeDelay:o.removeDelay||((l=e[o.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:o.duration||((c=e[o.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Bl[o.type],style:{...e.style,...(d=e[o.type])==null?void 0:d.style,...o.style}}});return{...n,toasts:r}},Wl=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Ml()}),zt=e=>(t,n)=>{let i=Wl(t,e,n);return kn(i.toasterId||zl(i.id))({type:2,toast:i}),i.id},pe=(e,t)=>zt("blank")(e,t);pe.error=zt("error");pe.success=zt("success");pe.loading=zt("loading");pe.custom=zt("custom");pe.dismiss=(e,t)=>{let n={type:3,toastId:e};t?kn(t)(n):Pr(n)};pe.dismissAll=e=>pe.dismiss(void 0,e);pe.remove=(e,t)=>{let n={type:4,toastId:e};t?kn(t)(n):Pr(n)};pe.removeAll=e=>pe.remove(void 0,e);pe.promise=(e,t,n)=>{let i=pe.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let r=t.success?ln(t.success,a):void 0;return r?pe.success(r,{id:i,...n,...n==null?void 0:n.success}):pe.dismiss(i),a}).catch(a=>{let r=t.error?ln(t.error,a):void 0;r?pe.error(r,{id:i,...n,...n==null?void 0:n.error}):pe.dismiss(i)}),e};var Gl=1e3,Kl=(e,t="default")=>{let{toasts:n,pausedAt:i}=ql(e,t),a=m.useRef(new Map).current,r=m.useCallback((u,h=Gl)=>{if(a.has(u))return;let f=setTimeout(()=>{a.delete(u),o({type:4,toastId:u})},h);a.set(u,f)},[]);m.useEffect(()=>{if(i)return;let u=Date.now(),h=n.map(f=>{if(f.duration===1/0)return;let v=(f.duration||0)+f.pauseDuration-(u-f.createdAt);if(v<0){f.visible&&pe.dismiss(f.id);return}return setTimeout(()=>pe.dismiss(f.id,t),v)});return()=>{h.forEach(f=>f&&clearTimeout(f))}},[n,i,t]);let o=m.useCallback(kn(t),[t]),l=m.useCallback(()=>{o({type:5,time:Date.now()})},[o]),c=m.useCallback((u,h)=>{o({type:1,toast:{id:u,height:h}})},[o]),d=m.useCallback(()=>{i&&o({type:6,time:Date.now()})},[i,o]),p=m.useCallback((u,h)=>{let{reverseOrder:f=!1,gutter:v=8,defaultPosition:D}=h||{},T=n.filter(w=>(w.position||D)===(u.position||D)&&w.height),_=T.findIndex(w=>w.id===u.id),q=T.filter((w,k)=>k<_&&w.visible).length;return T.filter(w=>w.visible).slice(...f?[q+1]:[0,q]).reduce((w,k)=>w+(k.height||0)+v,0)},[n]);return m.useEffect(()=>{n.forEach(u=>{if(u.dismissed)r(u.id,u.removeDelay);else{let h=a.get(u.id);h&&(clearTimeout(h),a.delete(u.id))}})},[n,r]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:p}}},Yl=Be`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hl=Be`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Ql=Be`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Vl=Qe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Yl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hl} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Ql} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Zl=Be`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Jl=Qe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Zl} 1s linear infinite;
`,Xl=Be`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,ec=Be`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,tc=Qe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Xl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${ec} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,nc=Qe("div")`
  position: absolute;
`,ic=Qe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,ac=Be`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,rc=Qe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${ac} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,oc=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?m.createElement(rc,null,t):t:n==="blank"?null:m.createElement(ic,null,m.createElement(Jl,{...i}),n!=="loading"&&m.createElement(nc,null,n==="error"?m.createElement(Vl,{...i}):m.createElement(tc,{...i})))},sc=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,lc=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,cc="0%{opacity:0;} 100%{opacity:1;}",dc="0%{opacity:1;} 100%{opacity:0;}",uc=Qe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,pc=Qe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,fc=(e,t)=>{let n=e.includes("top")?1:-1,[i,a]=_r()?[cc,dc]:[sc(n),lc(n)];return{animation:t?`${Be(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Be(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},mc=m.memo(({toast:e,position:t,style:n,children:i})=>{let a=e.height?fc(e.position||t||"top-center",e.visible):{opacity:0},r=m.createElement(oc,{toast:e}),o=m.createElement(pc,{...e.ariaProps},ln(e.message,e));return m.createElement(uc,{className:e.className,style:{...a,...n,...e.style}},typeof i=="function"?i({icon:r,message:o}):m.createElement(m.Fragment,null,r,o))});Fl(m.createElement);var hc=({id:e,className:t,style:n,onHeightUpdate:i,children:a})=>{let r=m.useCallback(o=>{if(o){let l=()=>{let c=o.getBoundingClientRect().height;i(e,c)};l(),new MutationObserver(l).observe(o,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return m.createElement("div",{ref:r,className:t,style:n},a)},gc=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:_r()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...a}},vc=bn`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Wt=16,xc=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:a,toasterId:r,containerStyle:o,containerClassName:l})=>{let{toasts:c,handlers:d}=Kl(n,r);return m.createElement("div",{"data-rht-toaster":r||"",style:{position:"fixed",zIndex:9999,top:Wt,left:Wt,right:Wt,bottom:Wt,pointerEvents:"none",...o},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(p=>{let u=p.position||t,h=d.calculateOffset(p,{reverseOrder:e,gutter:i,defaultPosition:t}),f=gc(u,h);return m.createElement(hc,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?vc:"",style:f},p.type==="custom"?ln(p.message,p):a?a(p):m.createElement(mc,{toast:p,position:u}))}))},gt=pe;function he(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var yc=typeof Symbol=="function"&&Symbol.observable||"@@observable",oa=yc,Wn=()=>Math.random().toString(36).substring(7).split("").join("."),wc={INIT:`@@redux/INIT${Wn()}`,REPLACE:`@@redux/REPLACE${Wn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Wn()}`},cn=wc;function Ii(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function Ti(e,t,n){if(typeof e!="function")throw new Error(he(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(he(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(he(1));return n(Ti)(e,t)}let i=e,a=t,r=new Map,o=r,l=0,c=!1;function d(){o===r&&(o=new Map,r.forEach((T,_)=>{o.set(_,T)}))}function p(){if(c)throw new Error(he(3));return a}function u(T){if(typeof T!="function")throw new Error(he(4));if(c)throw new Error(he(5));let _=!0;d();const q=l++;return o.set(q,T),function(){if(_){if(c)throw new Error(he(6));_=!1,d(),o.delete(q),r=null}}}function h(T){if(!Ii(T))throw new Error(he(7));if(typeof T.type=="undefined")throw new Error(he(8));if(typeof T.type!="string")throw new Error(he(17));if(c)throw new Error(he(9));try{c=!0,a=i(a,T)}finally{c=!1}return(r=o).forEach(q=>{q()}),T}function f(T){if(typeof T!="function")throw new Error(he(10));i=T,h({type:cn.REPLACE})}function v(){const T=u;return{subscribe(_){if(typeof _!="object"||_===null)throw new Error(he(11));function q(){const k=_;k.next&&k.next(p())}return q(),{unsubscribe:T(q)}},[oa](){return this}}}return h({type:cn.INIT}),{dispatch:h,subscribe:u,getState:p,replaceReducer:f,[oa]:v}}function bc(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:cn.INIT})=="undefined")throw new Error(he(12));if(typeof n(void 0,{type:cn.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(he(13))})}function Or(e){const t=Object.keys(e),n={};for(let r=0;r<t.length;r++){const o=t[r];typeof e[o]=="function"&&(n[o]=e[o])}const i=Object.keys(n);let a;try{bc(n)}catch(r){a=r}return function(o={},l){if(a)throw a;let c=!1;const d={};for(let p=0;p<i.length;p++){const u=i[p],h=n[u],f=o[u],v=h(f,l);if(typeof v=="undefined")throw l&&l.type,new Error(he(14));d[u]=v,c=c||v!==f}return c=c||i.length!==Object.keys(o).length,c?d:o}}function dn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function kc(...e){return t=>(n,i)=>{const a=t(n,i);let r=()=>{throw new Error(he(15))};const o={getState:a.getState,dispatch:(c,...d)=>r(c,...d)},l=e.map(c=>c(o));return r=dn(...l)(a.dispatch),{...a,dispatch:r}}}function jc(e){return Ii(e)&&"type"in e&&typeof e.type=="string"}var Nr=Symbol.for("immer-nothing"),sa=Symbol.for("immer-draftable"),Re=Symbol.for("immer-state");function Ae(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var xt=Object.getPrototypeOf;function lt(e){return!!e&&!!e[Re]}function qe(e){var t;return e?Fr(e)||Array.isArray(e)||!!e[sa]||!!((t=e.constructor)!=null&&t[sa])||Sn(e)||Rn(e):!1}var Sc=Object.prototype.constructor.toString();function Fr(e){if(!e||typeof e!="object")return!1;const t=xt(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===Sc}function un(e,t){jn(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function jn(e){const t=e[Re];return t?t.type_:Array.isArray(e)?1:Sn(e)?2:Rn(e)?3:0}function li(e,t){return jn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function $r(e,t,n){const i=jn(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function Rc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function Sn(e){return e instanceof Map}function Rn(e){return e instanceof Set}function Je(e){return e.copy_||e.base_}function ci(e,t){if(Sn(e))return new Map(e);if(Rn(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Fr(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Re];let a=Reflect.ownKeys(i);for(let r=0;r<a.length;r++){const o=a[r],l=i[o];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[o]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[o]})}return Object.create(xt(e),i)}else{const i=xt(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function Pi(e,t=!1){return Dn(e)||lt(e)||!qe(e)||(jn(e)>1&&(e.set=e.add=e.clear=e.delete=Dc),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>Pi(i,!0))),e}function Dc(){Ae(2)}function Dn(e){return Object.isFrozen(e)}var Lc={};function ct(e){const t=Lc[e];return t||Ae(0,e),t}var Pt;function Mr(){return Pt}function Cc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function la(e,t){t&&(ct("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function di(e){ui(e),e.drafts_.forEach(Ec),e.drafts_=null}function ui(e){e===Pt&&(Pt=e.parent_)}function ca(e){return Pt=Cc(Pt,e)}function Ec(e){const t=e[Re];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function da(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Re].modified_&&(di(t),Ae(4)),qe(e)&&(e=pn(t,e),t.parent_||fn(t,e)),t.patches_&&ct("Patches").generateReplacementPatches_(n[Re].base_,e,t.patches_,t.inversePatches_)):e=pn(t,n,[]),di(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Nr?e:void 0}function pn(e,t,n){if(Dn(t))return t;const i=t[Re];if(!i)return un(t,(a,r)=>ua(e,i,t,a,r,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return fn(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let r=a,o=!1;i.type_===3&&(r=new Set(a),a.clear(),o=!0),un(r,(l,c)=>ua(e,i,a,l,c,n,o)),fn(e,a,!1),n&&e.patches_&&ct("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function ua(e,t,n,i,a,r,o){if(lt(a)){const l=r&&t&&t.type_!==3&&!li(t.assigned_,i)?r.concat(i):void 0,c=pn(e,a,l);if($r(n,i,c),lt(c))e.canAutoFreeze_=!1;else return}else o&&n.add(a);if(qe(a)&&!Dn(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;pn(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&fn(e,a)}}function fn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&Pi(t,n)}function _c(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:Mr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,r=Oi;n&&(a=[i],r=Ot);const{revoke:o,proxy:l}=Proxy.revocable(a,r);return i.draft_=l,i.revoke_=o,l}var Oi={get(e,t){if(t===Re)return e;const n=Je(e);if(!li(n,t))return Ac(e,n,t);const i=n[t];return e.finalized_||!qe(i)?i:i===Gn(e.base_,t)?(Kn(e),e.copy_[t]=fi(i,e)):i},has(e,t){return t in Je(e)},ownKeys(e){return Reflect.ownKeys(Je(e))},set(e,t,n){const i=Ur(Je(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=Gn(Je(e),t),r=a==null?void 0:a[Re];if(r&&r.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(Rc(n,a)&&(n!==void 0||li(e.base_,t)))return!0;Kn(e),pi(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Gn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Kn(e),pi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=Je(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Ae(11)},getPrototypeOf(e){return xt(e.base_)},setPrototypeOf(){Ae(12)}},Ot={};un(Oi,(e,t)=>{Ot[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ot.deleteProperty=function(e,t){return Ot.set.call(this,e,t,void 0)};Ot.set=function(e,t,n){return Oi.set.call(this,e[0],t,n,e[0])};function Gn(e,t){const n=e[Re];return(n?Je(n):e)[t]}function Ac(e,t,n){var a;const i=Ur(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function Ur(e,t){if(!(t in e))return;let n=xt(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=xt(n)}}function pi(e){e.modified_||(e.modified_=!0,e.parent_&&pi(e.parent_))}function Kn(e){e.copy_||(e.copy_=ci(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Ic=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const r=n;n=t;const o=this;return function(c=r,...d){return o.produce(c,p=>n.call(this,p,...d))}}typeof n!="function"&&Ae(6),i!==void 0&&typeof i!="function"&&Ae(7);let a;if(qe(t)){const r=ca(this),o=fi(t,void 0);let l=!0;try{a=n(o),l=!1}finally{l?di(r):ui(r)}return la(r,i),da(a,r)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===Nr&&(a=void 0),this.autoFreeze_&&Pi(a,!0),i){const r=[],o=[];ct("Patches").generateReplacementPatches_(t,a,r,o),i(r,o)}return a}else Ae(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(o,...l)=>this.produceWithPatches(o,c=>t(c,...l));let i,a;return[this.produce(t,n,(o,l)=>{i=o,a=l}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){qe(e)||Ae(8),lt(e)&&(e=Tc(e));const t=ca(this),n=fi(e,void 0);return n[Re].isManual_=!0,ui(t),n}finishDraft(e,t){const n=e&&e[Re];(!n||!n.isManual_)&&Ae(9);const{scope_:i}=n;return la(i,t),da(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=ct("Patches").applyPatches_;return lt(e)?i(e,t):this.produce(e,a=>i(a,t))}};function fi(e,t){const n=Sn(e)?ct("MapSet").proxyMap_(e,t):Rn(e)?ct("MapSet").proxySet_(e,t):_c(e,t);return(t?t.scope_:Mr()).drafts_.push(n),n}function Tc(e){return lt(e)||Ae(10,e),zr(e)}function zr(e){if(!qe(e)||Dn(e))return e;const t=e[Re];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=ci(e,t.scope_.immer_.useStrictShallowCopy_)}else n=ci(e,!0);return un(n,(i,a)=>{$r(n,i,zr(a))}),t&&(t.finalized_=!1),n}var De=new Ic,Br=De.produce;De.produceWithPatches.bind(De);De.setAutoFreeze.bind(De);De.setUseStrictShallowCopy.bind(De);De.applyPatches.bind(De);De.createDraft.bind(De);De.finishDraft.bind(De);function qr(e){return({dispatch:n,getState:i})=>a=>r=>typeof r=="function"?r(n,i,e):a(r)}var Pc=qr(),Oc=qr,Nc=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?dn:dn.apply(null,arguments)},Fc=e=>e&&typeof e.match=="function";function Dt(e,t){function n(...i){if(t){let a=t(...i);if(!a)throw new Error(ze(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>jc(i)&&i.type===e,n}var Wr=class St extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,St.prototype)}static get[Symbol.species](){return St}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new St(...t[0].concat(this)):new St(...t.concat(this))}};function pa(e){return qe(e)?Br(e,()=>{}):e}function Gt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function $c(e){return typeof e=="boolean"}var Mc=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:r=!0}=t!=null?t:{};let o=new Wr;return n&&($c(n)?o.push(Pc):o.push(Oc(n.extraArgument))),o},Uc="RTK_autoBatch",fa=e=>t=>{setTimeout(t,e)},zc=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let a=!0,r=!1,o=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:fa(10):e.type==="callback"?e.queueNotification:fa(e.timeout),d=()=>{o=!1,r&&(r=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const u=()=>a&&p(),h=i.subscribe(u);return l.add(p),()=>{h(),l.delete(p)}},dispatch(p){var u;try{return a=!((u=p==null?void 0:p.meta)!=null&&u[Uc]),r=!a,r&&(o||(o=!0,c(d))),i.dispatch(p)}finally{a=!0}}})},Bc=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let a=new Wr(e);return i&&a.push(zc(typeof i=="object"?i:void 0)),a};function qc(e){const t=Mc(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:r=void 0,enhancers:o=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Ii(n))l=Or(n);else throw new Error(ze(1));let c;typeof i=="function"?c=i(t):c=t();let d=dn;a&&(d=Nc({trace:!1,...typeof a=="object"&&a}));const p=kc(...c),u=Bc(p);let h=typeof o=="function"?o(u):u();const f=d(...h);return Ti(l,r,f)}function Gr(e){const t={},n=[];let i;const a={addCase(r,o){const l=typeof r=="string"?r:r.type;if(!l)throw new Error(ze(28));if(l in t)throw new Error(ze(29));return t[l]=o,a},addMatcher(r,o){return n.push({matcher:r,reducer:o}),a},addDefaultCase(r){return i=r,a}};return e(a),[t,n,i]}function Wc(e){return typeof e=="function"}function Gc(e,t){let[n,i,a]=Gr(t),r;if(Wc(e))r=()=>pa(e());else{const l=pa(e);r=()=>l}function o(l=r(),c){let d=[n[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[a]),d.reduce((p,u)=>{if(u)if(lt(p)){const f=u(p,c);return f===void 0?p:f}else{if(qe(p))return Br(p,h=>u(h,c));{const h=u(p,c);if(h===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return p},l)}return o.getInitialState=r,o}var Kc=(e,t)=>Fc(e)?e.match(t):e(t);function Yc(...e){return t=>e.some(n=>Kc(n,t))}var Hc="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Qc=(e=21)=>{let t="",n=e;for(;n--;)t+=Hc[Math.random()*64|0];return t},Vc=["name","message","stack","code"],Yn=class{constructor(e,t){Mn(this,"_type");this.payload=e,this.meta=t}},ma=class{constructor(e,t){Mn(this,"_type");this.payload=e,this.meta=t}},Zc=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Vc)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},ha="External signal was aborted",ae=(()=>{function e(t,n,i){const a=Dt(t+"/fulfilled",(c,d,p,u)=>({payload:c,meta:{...u||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),r=Dt(t+"/pending",(c,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:c,requestStatus:"pending"}})),o=Dt(t+"/rejected",(c,d,p,u,h)=>({payload:u,error:(i&&i.serializeError||Zc)(c||"Rejected"),meta:{...h||{},arg:p,requestId:d,rejectedWithValue:!!u,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(p,u,h)=>{const f=i!=null&&i.idGenerator?i.idGenerator(c):Qc(),v=new AbortController;let D,T;function _(w){T=w,v.abort()}d&&(d.aborted?_(ha):d.addEventListener("abort",()=>_(ha),{once:!0}));const q=async function(){var x,j;let w;try{let L=(x=i==null?void 0:i.condition)==null?void 0:x.call(i,c,{getState:u,extra:h});if(Xc(L)&&(L=await L),L===!1||v.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const $=new Promise((g,I)=>{D=()=>{I({name:"AbortError",message:T||"Aborted"})},v.signal.addEventListener("abort",D)});p(r(f,c,(j=i==null?void 0:i.getPendingMeta)==null?void 0:j.call(i,{requestId:f,arg:c},{getState:u,extra:h}))),w=await Promise.race([$,Promise.resolve(n(c,{dispatch:p,getState:u,extra:h,requestId:f,signal:v.signal,abort:_,rejectWithValue:(g,I)=>new Yn(g,I),fulfillWithValue:(g,I)=>new ma(g,I)})).then(g=>{if(g instanceof Yn)throw g;return g instanceof ma?a(g.payload,f,c,g.meta):a(g,f,c)})])}catch(L){w=L instanceof Yn?o(null,f,c,L.payload,L.meta):o(L,f,c)}finally{D&&v.signal.removeEventListener("abort",D)}return i&&!i.dispatchConditionRejection&&o.match(w)&&w.meta.condition||p(w),w}();return Object.assign(q,{abort:_,requestId:f,arg:c,unwrap(){return q.then(Jc)}})}}return Object.assign(l,{pending:r,rejected:o,fulfilled:a,settled:Yc(o,a),typePrefix:t})}return e.withTypes=()=>e,e})();function Jc(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Xc(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var ed=Symbol.for("rtk-slice-createasyncthunk");function td(e,t){return`${e}/${t}`}function nd({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[ed];return function(a){const{name:r,reducerPath:o=r}=a;if(!r)throw new Error(ze(11));const l=(typeof a.reducers=="function"?a.reducers(ad()):a.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(k,x){const j=typeof k=="string"?k:k.type;if(!j)throw new Error(ze(12));if(j in d.sliceCaseReducersByType)throw new Error(ze(13));return d.sliceCaseReducersByType[j]=x,p},addMatcher(k,x){return d.sliceMatchers.push({matcher:k,reducer:x}),p},exposeAction(k,x){return d.actionCreators[k]=x,p},exposeCaseReducer(k,x){return d.sliceCaseReducersByName[k]=x,p}};c.forEach(k=>{const x=l[k],j={reducerName:k,type:td(r,k),createNotation:typeof a.reducers=="function"};od(x)?ld(j,x,p,t):rd(j,x,p)});function u(){const[k={},x=[],j=void 0]=typeof a.extraReducers=="function"?Gr(a.extraReducers):[a.extraReducers],L={...k,...d.sliceCaseReducersByType};return Gc(a.initialState,$=>{for(let g in L)$.addCase(g,L[g]);for(let g of d.sliceMatchers)$.addMatcher(g.matcher,g.reducer);for(let g of x)$.addMatcher(g.matcher,g.reducer);j&&$.addDefaultCase(j)})}const h=k=>k,f=new Map,v=new WeakMap;let D;function T(k,x){return D||(D=u()),D(k,x)}function _(){return D||(D=u()),D.getInitialState()}function q(k,x=!1){function j($){let g=$[k];return typeof g=="undefined"&&x&&(g=Gt(v,j,_)),g}function L($=h){const g=Gt(f,x,()=>new WeakMap);return Gt(g,$,()=>{var b;const I={};for(const[z,P]of Object.entries((b=a.selectors)!=null?b:{}))I[z]=id(P,$,()=>Gt(v,$,_),x);return I})}return{reducerPath:k,getSelectors:L,get selectors(){return L(j)},selectSlice:j}}const w={name:r,reducer:T,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:_,...q(o),injectInto(k,{reducerPath:x,...j}={}){const L=x!=null?x:o;return k.inject({reducerPath:L,reducer:T},j),{...w,...q(L,!0)}}};return w}}function id(e,t,n,i){function a(r,...o){let l=t(r);return typeof l=="undefined"&&i&&(l=n()),e(l,...o)}return a.unwrapped=e,a}var Bt=nd();function ad(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function rd({type:e,reducerName:t,createNotation:n},i,a){let r,o;if("reducer"in i){if(n&&!sd(i))throw new Error(ze(17));r=i.reducer,o=i.prepare}else r=i;a.addCase(e,r).exposeCaseReducer(t,r).exposeAction(t,o?Dt(e,o):Dt(e))}function od(e){return e._reducerDefinitionType==="asyncThunk"}function sd(e){return e._reducerDefinitionType==="reducerWithPrepare"}function ld({type:e,reducerName:t},n,i,a){if(!a)throw new Error(ze(18));const{payloadCreator:r,fulfilled:o,pending:l,rejected:c,settled:d,options:p}=n,u=a(e,r,p);i.exposeAction(t,u),o&&i.addCase(u.fulfilled,o),l&&i.addCase(u.pending,l),c&&i.addCase(u.rejected,c),d&&i.addMatcher(u.settled,d),i.exposeCaseReducer(t,{fulfilled:o||Kt,pending:l||Kt,rejected:c||Kt,settled:d||Kt})}function Kt(){}function ze(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Ni="persist:",Kr="persist/FLUSH",Ln="persist/REHYDRATE",Yr="persist/PAUSE",Hr="persist/PERSIST",Fi="persist/PURGE",Qr="persist/REGISTER",cd=-1;function en(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?en=function(n){return typeof n}:en=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},en(e)}function ga(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ga(n,!0).forEach(function(i){ud(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ga(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ud(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pd(e,t,n,i){i.debug;var a=dd({},n);return e&&en(e)==="object"&&Object.keys(e).forEach(function(r){r!=="_persist"&&t[r]===n[r]&&(a[r]=e[r])}),a}function fd(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,r="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ni).concat(e.key),o=e.storage,l;e.serialize===!1?l=function(x){return x}:typeof e.serialize=="function"?l=e.serialize:l=md;var c=e.writeFailHandler||null,d={},p={},u=[],h=null,f=null,v=function(x){Object.keys(x).forEach(function(j){_(j)&&d[j]!==x[j]&&u.indexOf(j)===-1&&u.push(j)}),Object.keys(d).forEach(function(j){x[j]===void 0&&_(j)&&u.indexOf(j)===-1&&d[j]!==void 0&&u.push(j)}),h===null&&(h=setInterval(D,a)),d=x};function D(){if(u.length===0){h&&clearInterval(h),h=null;return}var k=u.shift(),x=i.reduce(function(j,L){return L.in(j,k,d)},d[k]);if(x!==void 0)try{p[k]=l(x)}catch(j){console.error("redux-persist/createPersistoid: error serializing state",j)}else delete p[k];u.length===0&&T()}function T(){Object.keys(p).forEach(function(k){d[k]===void 0&&delete p[k]}),f=o.setItem(r,l(p)).catch(q)}function _(k){return!(n&&n.indexOf(k)===-1&&k!=="_persist"||t&&t.indexOf(k)!==-1)}function q(k){c&&c(k)}var w=function(){for(;u.length!==0;)D();return f||Promise.resolve()};return{update:v,flush:w}}function md(e){return JSON.stringify(e)}function hd(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ni).concat(e.key),i=e.storage;e.debug;var a;return e.deserialize===!1?a=function(o){return o}:typeof e.deserialize=="function"?a=e.deserialize:a=gd,i.getItem(n).then(function(r){if(r)try{var o={},l=a(r);return Object.keys(l).forEach(function(c){o[c]=t.reduceRight(function(d,p){return p.out(d,c,l)},a(l[c]))}),o}catch(c){throw c}else return})}function gd(e){return JSON.parse(e)}function vd(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Ni).concat(e.key);return t.removeItem(n,xd)}function xd(e){}function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Me(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?va(n,!0).forEach(function(i){yd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function yd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wd(e,t){if(e==null)return{};var n=bd(e,t),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function bd(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,r;for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var kd=5e3;function mi(e,t){var n=e.version!==void 0?e.version:cd;e.debug;var i=e.stateReconciler===void 0?pd:e.stateReconciler,a=e.getStoredState||hd,r=e.timeout!==void 0?e.timeout:kd,o=null,l=!1,c=!0,d=function(u){return u._persist.rehydrated&&o&&!c&&o.update(u),u};return function(p,u){var h=p||{},f=h._persist,v=wd(h,["_persist"]),D=v;if(u.type===Hr){var T=!1,_=function($,g){T||(u.rehydrate(e.key,$,g),T=!0)};if(r&&setTimeout(function(){!T&&_(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},r),c=!1,o||(o=fd(e)),f)return Me({},t(D,u),{_persist:f});if(typeof u.rehydrate!="function"||typeof u.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),a(e).then(function(L){var $=e.migrate||function(g,I){return Promise.resolve(g)};$(L,n).then(function(g){_(g)},function(g){_(void 0,g)})},function(L){_(void 0,L)}),Me({},t(D,u),{_persist:{version:n,rehydrated:!1}})}else{if(u.type===Fi)return l=!0,u.result(vd(e)),Me({},t(D,u),{_persist:f});if(u.type===Kr)return u.result(o&&o.flush()),Me({},t(D,u),{_persist:f});if(u.type===Yr)c=!0;else if(u.type===Ln){if(l)return Me({},D,{_persist:Me({},f,{rehydrated:!0})});if(u.key===e.key){var q=t(D,u),w=u.payload,k=i!==!1&&w!==void 0?i(w,p,q,e):q,x=Me({},k,{_persist:Me({},f,{rehydrated:!0})});return d(x)}}}if(!f)return t(p,u);var j=t(D,u);return j===D?p:d(Me({},j,{_persist:f}))}}function xa(e){return Rd(e)||Sd(e)||jd()}function jd(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function Sd(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function Rd(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function ya(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function hi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ya(n,!0).forEach(function(i){Dd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ya(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Dd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Vr={registry:[],bootstrapped:!1},Ld=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vr,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Qr:return hi({},t,{registry:[].concat(xa(t.registry),[n.key])});case Ln:var i=t.registry.indexOf(n.key),a=xa(t.registry);return a.splice(i,1),hi({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function Cd(e,t,n){var i=Ti(Ld,Vr,void 0),a=function(c){i.dispatch({type:Qr,key:c})},r=function(c,d,p){var u={type:Ln,payload:d,err:p,key:c};e.dispatch(u),i.dispatch(u)},o=hi({},i,{purge:function(){var c=[];return e.dispatch({type:Fi,result:function(p){c.push(p)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:Kr,result:function(p){c.push(p)}}),Promise.all(c)},pause:function(){e.dispatch({type:Yr})},persist:function(){e.dispatch({type:Hr,register:a,rehydrate:r})}});return o.persist(),o}var $i={},Mi={};Mi.__esModule=!0;Mi.default=Ad;function tn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?tn=function(n){return typeof n}:tn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},tn(e)}function Hn(){}var Ed={getItem:Hn,setItem:Hn,removeItem:Hn};function _d(e){if((typeof self=="undefined"?"undefined":tn(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(i){return!1}return!0}function Ad(e){var t="".concat(e,"Storage");return _d(t)?self[t]:Ed}$i.__esModule=!0;$i.default=Pd;var Id=Td(Mi);function Td(e){return e&&e.__esModule?e:{default:e}}function Pd(e){var t=(0,Id.default)(e);return{getItem:function(i){return new Promise(function(a,r){a(t.getItem(i))})},setItem:function(i,a){return new Promise(function(r,o){r(t.setItem(i,a))})},removeItem:function(i){return new Promise(function(a,r){a(t.removeItem(i))})}}}var Cn=void 0,Od=Nd($i);function Nd(e){return e&&e.__esModule?e:{default:e}}var Fd=(0,Od.default)("local");Cn=Fd;const _e={APP_ID:"wx4a71fe09bb125182",APP_SECRET:"e8a88b5e0271b89a1dc71261d9063fad",REDIRECT_URI:"https://homefreshfoods.ai/wechat/callback",SCOPE:"snsapi_base",WEB_AUTHORIZE_URL:"https://open.weixin.qq.com/connect/oauth2/authorize",ACCESS_TOKEN_URL:"https://api.weixin.qq.com/sns/oauth2/access_token",USER_INFO_URL:"https://api.weixin.qq.com/sns/userinfo"},gi=()=>(console.log("� Redirect URI:",_e.REDIRECT_URI),_e.REDIRECT_URI),wa=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ba=()=>/micromessenger/i.test(navigator.userAgent),ka=(e=null)=>{const t=e||Math.random().toString(36).substring(7);console.log("🔗 Generating WeChat OAuth URL");const n=gi();console.log("🔍 Using redirect URI:",n);const i=new URLSearchParams({appid:_e.APP_ID,redirect_uri:n,response_type:"code",scope:_e.SCOPE,state:t}),r=`${_e.WEB_AUTHORIZE_URL}?${i.toString()}#wechat_redirect`;return console.log("🔗 Final WeChat OAuth URL:",r),console.log("📋 OAuth parameters:",Object.fromEntries(i)),r},ja={getAccessToken:async e=>{const t=new URLSearchParams({appid:_e.APP_ID,secret:_e.APP_SECRET,code:e,grant_type:"authorization_code"});return await(await fetch(`${_e.ACCESS_TOKEN_URL}?${t.toString()}`)).json()},getUserInfo:async(e,t)=>{const n=new URLSearchParams({access_token:e,openid:t,lang:"en"});return await(await fetch(`${_e.USER_INFO_URL}?${n.toString()}`)).json()}},nn=ae("auth/authenticateWithWeChat",async(e,{rejectWithValue:t})=>{try{console.log("Starting WeChat authentication with code:",e);const n=await ja.getAccessToken(e);if(console.log("WeChat token response:",n),n.errcode)throw new Error(n.errmsg||"Failed to get WeChat access token");const{access_token:i,openid:a}=n,r=await ja.getUserInfo(i,a);if(console.log("WeChat user response:",r),r.errcode)throw new Error(r.errmsg||"Failed to get WeChat user info");const o={id:`wechat_${a}`,openid:a,name:r.nickname,displayName:r.nickname,avatar:r.headimgurl,country:r.country,province:r.province,city:r.city,sex:r.sex,language:r.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:a,accessToken:i,createdAt:new Date().toISOString()};return console.log("✅ WeChat authentication successful:",o),o}catch(n){return console.error("❌ WeChat authentication failed:",n),t(n.message||"WeChat authentication failed")}}),Zr=ae("auth/logout",async(e,{rejectWithValue:t})=>{try{return console.log("User logged out"),sessionStorage.removeItem("wechat_access_token"),sessionStorage.removeItem("wechat_pending_cart_action"),{clearData:!0}}catch(n){return t(n.message)}}),Jr=Bt({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null,wechatAuthUrl:null},reducers:{clearError:e=>{e.error=null},updateUserProfile:(e,t)=>{e.user&&(e.user={...e.user,...t.payload})},setWeChatAuthUrl:(e,t)=>{e.wechatAuthUrl=t.payload},setTestUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,e.loading=!1,e.error=null},clearAllData:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.wechatAuthUrl=null}},extraReducers:e=>{e.addCase(nn.pending,t=>{t.loading=!0,t.error=null}).addCase(nn.fulfilled,(t,n)=>{t.loading=!1,t.user=n.payload,t.isAuthenticated=!0,t.error=null}).addCase(nn.rejected,(t,n)=>{t.loading=!1,t.error=n.payload,t.isAuthenticated=!1,t.user=null}).addCase(Zr.fulfilled,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null}).addCase(Fi,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null})}}),{clearError:Ph,updateUserProfile:Oh,setWeChatAuthUrl:Nh,clearAllData:$d,setTestUser:Sa}=Jr.actions,Md=Jr.reducer;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xr="firebasestorage.googleapis.com",eo="storageBucket",Ud=2*60*1e3,zd=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ce extends Ei{constructor(t,n,i=0){super(Qn(t),`Firebase Storage: ${n} (${Qn(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ce.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return Qn(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var le;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(le||(le={}));function Qn(e){return"storage/"+e}function Ui(){const e="An unknown error occurred, please check the error payload for server response.";return new ce(le.UNKNOWN,e)}function Bd(e){return new ce(le.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function qd(e){return new ce(le.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Wd(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new ce(le.UNAUTHENTICATED,e)}function Gd(){return new ce(le.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function Kd(e){return new ce(le.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function Yd(){return new ce(le.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Hd(){return new ce(le.CANCELED,"User canceled the upload/download.")}function Qd(e){return new ce(le.INVALID_URL,"Invalid URL '"+e+"'.")}function Vd(e){return new ce(le.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Zd(){return new ce(le.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+eo+"' property when initializing the app?")}function Jd(){return new ce(le.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Xd(){return new ce(le.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function eu(e){return new ce(le.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function vi(e){return new ce(le.INVALID_ARGUMENT,e)}function to(){return new ce(le.APP_DELETED,"The Firebase app was deleted.")}function tu(e){return new ce(le.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Lt(e,t){return new ce(le.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function jt(e){throw new ce(le.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=je.makeFromUrl(t,n)}catch(a){return new je(t,"")}if(i.path==="")return i;throw Vd(t)}static makeFromUrl(t,n){let i=null;const a="([A-Za-z0-9.\\-_]+)";function r(k){k.path.charAt(k.path.length-1)==="/"&&(k.path_=k.path_.slice(0,-1))}const o="(/(.*))?$",l=new RegExp("^gs://"+a+o,"i"),c={bucket:1,path:3};function d(k){k.path_=decodeURIComponent(k.path)}const p="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",f=new RegExp(`^https?://${u}/${p}/b/${a}/o${h}`,"i"),v={bucket:1,path:3},D=n===Xr?"(?:storage.googleapis.com|storage.cloud.google.com)":n,T="([^?#]*)",_=new RegExp(`^https?://${D}/${a}/${T}`,"i"),w=[{regex:l,indices:c,postModify:r},{regex:f,indices:v,postModify:d},{regex:_,indices:{bucket:1,path:2},postModify:d}];for(let k=0;k<w.length;k++){const x=w[k],j=x.regex.exec(t);if(j){const L=j[x.indices.bucket];let $=j[x.indices.path];$||($=""),i=new je(L,$),x.postModify(i);break}}if(i==null)throw Qd(t);return i}}class nu{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e,t,n){let i=1,a=null,r=null,o=!1,l=0;function c(){return l===2}let d=!1;function p(...T){d||(d=!0,t.apply(null,T))}function u(T){a=setTimeout(()=>{a=null,e(f,c())},T)}function h(){r&&clearTimeout(r)}function f(T,..._){if(d){h();return}if(T){h(),p.call(null,T,..._);return}if(c()||o){h(),p.call(null,T,..._);return}i<64&&(i*=2);let w;l===1?(l=2,w=0):w=(i+Math.random())*1e3,u(w)}let v=!1;function D(T){v||(v=!0,h(),!d&&(a!==null?(T||(l=2),clearTimeout(a),u(0)):T||(l=1)))}return u(0),r=setTimeout(()=>{o=!0,D(!0)},n),D}function au(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ru(e){return e!==void 0}function ou(e){return typeof e=="object"&&!Array.isArray(e)}function zi(e){return typeof e=="string"||e instanceof String}function Ra(e){return Bi()&&e instanceof Blob}function Bi(){return typeof Blob!="undefined"}function Da(e,t,n,i){if(i<t)throw vi(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw vi(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qi(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function no(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const a=t(i)+"="+t(e[i]);n=n+a+"&"}return n=n.slice(0,-1),n}var at;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(at||(at={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function su(e,t){const n=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,r=t.indexOf(e)!==-1;return n||a||r}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(t,n,i,a,r,o,l,c,d,p,u,h=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=a,this.successCodes_=r,this.additionalRetryCodes_=o,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((f,v)=>{this.resolve_=f,this.reject_=v,this.start_()})}start_(){const t=(i,a)=>{if(a){i(!1,new Yt(!1,null,!0));return}const r=this.connectionFactory_();this.pendingConnection_=r;const o=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&r.addUploadProgressListener(o),r.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&r.removeUploadProgressListener(o),this.pendingConnection_=null;const l=r.getErrorCode()===at.NO_ERROR,c=r.getStatus();if(!l||su(c,this.additionalRetryCodes_)&&this.retry){const p=r.getErrorCode()===at.ABORT;i(!1,new Yt(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Yt(d,r))})},n=(i,a)=>{const r=this.resolve_,o=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());ru(c)?r(c):r()}catch(c){o(c)}else if(l!==null){const c=Ui();c.serverResponse=l.getErrorText(),this.errorCallback_?o(this.errorCallback_(l,c)):o(c)}else if(a.canceled){const c=this.appDelete_?to():Hd();o(c)}else{const c=Yd();o(c)}};this.canceled_?n(!1,new Yt(!1,null,!0)):this.backoffId_=iu(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&au(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Yt{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function cu(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function du(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function uu(e,t){t&&(e["X-Firebase-GMPID"]=t)}function pu(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function fu(e,t,n,i,a,r,o=!0){const l=no(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return uu(d,t),cu(d,n),du(d,r),pu(d,i),new lu(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,o)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function hu(...e){const t=mu();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Bi())return new Blob(e);throw new ce(le.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function gu(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vu(e){if(typeof atob=="undefined")throw eu("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Vn{constructor(t,n){this.data=t,this.contentType=n||null}}function xu(e,t){switch(e){case Fe.RAW:return new Vn(io(t));case Fe.BASE64:case Fe.BASE64URL:return new Vn(ao(e,t));case Fe.DATA_URL:return new Vn(wu(t),bu(t))}throw Ui()}function io(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const r=i,o=e.charCodeAt(++n);i=65536|(r&1023)<<10|o&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function yu(e){let t;try{t=decodeURIComponent(e)}catch(n){throw Lt(Fe.DATA_URL,"Malformed data URL.")}return io(t)}function ao(e,t){switch(e){case Fe.BASE64:{const a=t.indexOf("-")!==-1,r=t.indexOf("_")!==-1;if(a||r)throw Lt(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case Fe.BASE64URL:{const a=t.indexOf("+")!==-1,r=t.indexOf("/")!==-1;if(a||r)throw Lt(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=vu(t)}catch(a){throw a.message.includes("polyfill")?a:Lt(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}class ro{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw Lt(Fe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=ku(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function wu(e){const t=new ro(e);return t.base64?ao(Fe.BASE64,t.rest):yu(t.rest)}function bu(e){return new ro(e).contentType}function ku(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(t,n){let i=0,a="";Ra(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,n){if(Ra(this.data_)){const i=this.data_,a=gu(i,t,n);return a===null?null:new Ge(a)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Ge(i,!0)}}static getBlob(...t){if(Bi()){const n=t.map(i=>i instanceof Ge?i.data_:i);return new Ge(hu.apply(null,n))}else{const n=t.map(o=>zi(o)?xu(Fe.RAW,o).data:o.data_);let i=0;n.forEach(o=>{i+=o.byteLength});const a=new Uint8Array(i);let r=0;return n.forEach(o=>{for(let l=0;l<o.length;l++)a[r++]=o[l]}),new Ge(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oo(e){let t;try{t=JSON.parse(e)}catch(n){return null}return ou(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ju(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function Su(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function so(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ru(e,t){return t}class xe{constructor(t,n,i,a){this.server=t,this.local=n||t,this.writable=!!i,this.xform=a||Ru}}let Ht=null;function Du(e){return!zi(e)||e.length<2?e:so(e)}function lo(){if(Ht)return Ht;const e=[];e.push(new xe("bucket")),e.push(new xe("generation")),e.push(new xe("metageneration")),e.push(new xe("name","fullPath",!0));function t(r,o){return Du(o)}const n=new xe("name");n.xform=t,e.push(n);function i(r,o){return o!==void 0?Number(o):o}const a=new xe("size");return a.xform=i,e.push(a),e.push(new xe("timeCreated")),e.push(new xe("updated")),e.push(new xe("md5Hash",null,!0)),e.push(new xe("cacheControl",null,!0)),e.push(new xe("contentDisposition",null,!0)),e.push(new xe("contentEncoding",null,!0)),e.push(new xe("contentLanguage",null,!0)),e.push(new xe("contentType",null,!0)),e.push(new xe("metadata","customMetadata",!0)),Ht=e,Ht}function Lu(e,t){function n(){const i=e.bucket,a=e.fullPath,r=new je(i,a);return t._makeStorageReference(r)}Object.defineProperty(e,"ref",{get:n})}function Cu(e,t,n){const i={};i.type="file";const a=n.length;for(let r=0;r<a;r++){const o=n[r];i[o.local]=o.xform(i,t[o.server])}return Lu(i,e),i}function co(e,t,n){const i=oo(t);return i===null?null:Cu(e,i,n)}function Eu(e,t,n,i){const a=oo(t);if(a===null||!zi(a.downloadTokens))return null;const r=a.downloadTokens;if(r.length===0)return null;const o=encodeURIComponent;return r.split(",").map(d=>{const p=e.bucket,u=e.fullPath,h="/b/"+o(p)+"/o/"+o(u),f=qi(h,n,i),v=no({alt:"media",token:d});return f+v})[0]}function _u(e,t){const n={},i=t.length;for(let a=0;a<i;a++){const r=t[a];r.writable&&(n[r.server]=e[r.local])}return JSON.stringify(n)}class uo{constructor(t,n,i,a){this.url=t,this.method=n,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function po(e){if(!e)throw Ui()}function Au(e,t){function n(i,a){const r=co(e,a,t);return po(r!==null),r}return n}function Iu(e,t){function n(i,a){const r=co(e,a,t);return po(r!==null),Eu(r,a,e.host,e._protocol)}return n}function fo(e){function t(n,i){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=Gd():a=Wd():n.getStatus()===402?a=qd(e.bucket):n.getStatus()===403?a=Kd(e.path):a=i,a.status=n.getStatus(),a.serverResponse=i.serverResponse,a}return t}function Tu(e){const t=fo(e);function n(i,a){let r=t(i,a);return i.getStatus()===404&&(r=Bd(e.path)),r.serverResponse=a.serverResponse,r}return n}function Pu(e,t,n){const i=t.fullServerUrl(),a=qi(i,e.host,e._protocol),r="GET",o=e.maxOperationRetryTime,l=new uo(a,r,Iu(e,n),o);return l.errorHandler=Tu(t),l}function Ou(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Nu(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=Ou(null,t)),i}function Fu(e,t,n,i,a){const r=t.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function l(){let w="";for(let k=0;k<2;k++)w=w+Math.random().toString().slice(2);return w}const c=l();o["Content-Type"]="multipart/related; boundary="+c;const d=Nu(t,i,a),p=_u(d,n),u="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",f=Ge.getBlob(u,i,h);if(f===null)throw Jd();const v={name:d.fullPath},D=qi(r,e.host,e._protocol),T="POST",_=e.maxUploadRetryTime,q=new uo(D,T,Au(e,n),_);return q.urlParams=v,q.headers=o,q.body=f.uploadData(),q.errorHandler=fo(t),q}class $u{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=at.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=at.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=at.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,a){if(this.sent_)throw jt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),a!==void 0)for(const r in a)a.hasOwnProperty(r)&&this.xhr_.setRequestHeader(r,a[r].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw jt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw jt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw jt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw jt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Mu extends $u{initXhr(){this.xhr_.responseType="text"}}function mo(){return new Mu}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(t,n){this._service=t,n instanceof je?this._location=n:this._location=je.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new dt(t,n)}get root(){const t=new je(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return so(this._location.path)}get storage(){return this._service}get parent(){const t=ju(this._location.path);if(t===null)return null;const n=new je(this._location.bucket,t);return new dt(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw tu(t)}}function Uu(e,t,n){e._throwIfRoot("uploadBytes");const i=Fu(e.storage,e._location,lo(),new Ge(t,!0),n);return e.storage.makeRequestWithTokens(i,mo).then(a=>({metadata:a,ref:e}))}function zu(e){e._throwIfRoot("getDownloadURL");const t=Pu(e.storage,e._location,lo());return e.storage.makeRequestWithTokens(t,mo).then(n=>{if(n===null)throw Xd();return n})}function Bu(e,t){const n=Su(e._location.path,t),i=new je(e._location.bucket,n);return new dt(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qu(e){return/^[A-Za-z]+:\/\//.test(e)}function Wu(e,t){return new dt(e,t)}function ho(e,t){if(e instanceof Wi){const n=e;if(n._bucket==null)throw Zd();const i=new dt(n,n._bucket);return t!=null?ho(i,t):i}else return t!==void 0?Bu(e,t):e}function Gu(e,t){if(t&&qu(t)){if(e instanceof Wi)return Wu(e,t);throw vi("To use ref(service, url), the first argument must be a Storage instance.")}else return ho(e,t)}function La(e,t){const n=t==null?void 0:t[eo];return n==null?null:je.makeFromBucketSpec(n,e)}function Ku(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:a}=i;a&&(e._overrideAuthToken=typeof a=="string"?a:$s(a,e.app.options.projectId))}class Wi{constructor(t,n,i,a,r){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=a,this._firebaseVersion=r,this._bucket=null,this._host=Xr,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Ud,this._maxUploadRetryTime=zd,this._requests=new Set,a!=null?this._bucket=je.makeFromBucketSpec(a,this._host):this._bucket=La(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=je.makeFromBucketSpec(this._url,t):this._bucket=La(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Da("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Da("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new dt(this,t)}_makeRequest(t,n,i,a,r=!0){if(this._deleted)return new nu(to());{const o=fu(t,this._appId,i,a,n,this._firebaseVersion,r);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(t,n){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,a).getPromise()}}const Ca="@firebase/storage",Ea="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go="storage";function Yu(e,t,n){return e=bt(e),Uu(e,t,n)}function Hu(e){return e=bt(e),zu(e)}function Qu(e,t){return e=bt(e),Gu(e,t)}function Vu(e=pr(),t){e=bt(e);const i=Mt(e,go).getImmediate({identifier:t}),a=Fs("storage");return a&&Zu(i,...a),i}function Zu(e,t,n,i={}){Ku(e,t,n,i)}function Ju(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Wi(n,i,a,t,Ns)}function Xu(){It(new Tt(go,Ju,"PUBLIC").setMultipleInstances(!0)),vt(Ca,Ea,""),vt(Ca,Ea,"esm2017")}Xu();const vo="@firebase/installations",Gi="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xo=1e4,yo=`w:${Gi}`,wo="FIS_v2",ep="https://firebaseinstallations.googleapis.com/v1",tp=60*60*1e3,np="installations",ip="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ap={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},ut=new fr(np,ip,ap);function bo(e){return e instanceof Ei&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ko({projectId:e}){return`${ep}/projects/${e}/installations`}function jo(e){return{token:e.token,requestStatus:2,expiresIn:op(e.expiresIn),creationTime:Date.now()}}async function So(e,t){const i=(await t.json()).error;return ut.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Ro({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function rp(e,{refreshToken:t}){const n=Ro(e);return n.append("Authorization",sp(t)),n}async function Do(e){const t=await e();return t.status>=500&&t.status<600?e():t}function op(e){return Number(e.replace("s","000"))}function sp(e){return`${wo} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lp({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=ko(e),a=Ro(e),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={fid:n,authVersion:wo,appId:e.appId,sdkVersion:yo},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await Do(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:jo(d.authToken)}}else throw await So("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lo(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cp(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dp=/^[cdef][\w-]{21}$/,xi="";function up(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=pp(e);return dp.test(n)?n:xi}catch(e){return xi}}function pp(e){return cp(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function En(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Co=new Map;function Eo(e,t){const n=En(e);_o(n,t),fp(n,t)}function _o(e,t){const n=Co.get(e);if(n)for(const i of n)i(t)}function fp(e,t){const n=mp();n&&n.postMessage({key:e,fid:t}),hp()}let tt=null;function mp(){return!tt&&"BroadcastChannel"in self&&(tt=new BroadcastChannel("[Firebase] FID Change"),tt.onmessage=e=>{_o(e.data.key,e.data.fid)}),tt}function hp(){Co.size===0&&tt&&(tt.close(),tt=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gp="firebase-installations-database",vp=1,pt="firebase-installations-store";let Zn=null;function Ki(){return Zn||(Zn=Ms(gp,vp,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(pt)}}})),Zn}async function mn(e,t){const n=En(e),a=(await Ki()).transaction(pt,"readwrite"),r=a.objectStore(pt),o=await r.get(n);return await r.put(t,n),await a.done,(!o||o.fid!==t.fid)&&Eo(e,t.fid),t}async function Ao(e){const t=En(e),i=(await Ki()).transaction(pt,"readwrite");await i.objectStore(pt).delete(t),await i.done}async function _n(e,t){const n=En(e),a=(await Ki()).transaction(pt,"readwrite"),r=a.objectStore(pt),o=await r.get(n),l=t(o);return l===void 0?await r.delete(n):await r.put(l,n),await a.done,l&&(!o||o.fid!==l.fid)&&Eo(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yi(e){let t;const n=await _n(e.appConfig,i=>{const a=xp(i),r=yp(e,a);return t=r.registrationPromise,r.installationEntry});return n.fid===xi?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function xp(e){const t=e||{fid:up(),registrationStatus:0};return Io(t)}function yp(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(ut.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=wp(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:bp(e)}:{installationEntry:t}}async function wp(e,t){try{const n=await lp(e,t);return mn(e.appConfig,n)}catch(n){throw bo(n)&&n.customData.serverCode===409?await Ao(e.appConfig):await mn(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function bp(e){let t=await _a(e.appConfig);for(;t.registrationStatus===1;)await Lo(100),t=await _a(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await Yi(e);return i||n}return t}function _a(e){return _n(e,t=>{if(!t)throw ut.create("installation-not-found");return Io(t)})}function Io(e){return kp(e)?{fid:e.fid,registrationStatus:0}:e}function kp(e){return e.registrationStatus===1&&e.registrationTime+xo<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jp({appConfig:e,heartbeatServiceProvider:t},n){const i=Sp(e,n),a=rp(e,n),r=t.getImmediate({optional:!0});if(r){const d=await r.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const o={installation:{sdkVersion:yo,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(o)},c=await Do(()=>fetch(i,l));if(c.ok){const d=await c.json();return jo(d)}else throw await So("Generate Auth Token",c)}function Sp(e,{fid:t}){return`${ko(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Hi(e,t=!1){let n;const i=await _n(e.appConfig,r=>{if(!To(r))throw ut.create("not-registered");const o=r.authToken;if(!t&&Lp(o))return r;if(o.requestStatus===1)return n=Rp(e,t),r;{if(!navigator.onLine)throw ut.create("app-offline");const l=Ep(r);return n=Dp(e,l),l}});return n?await n:i.authToken}async function Rp(e,t){let n=await Aa(e.appConfig);for(;n.authToken.requestStatus===1;)await Lo(100),n=await Aa(e.appConfig);const i=n.authToken;return i.requestStatus===0?Hi(e,t):i}function Aa(e){return _n(e,t=>{if(!To(t))throw ut.create("not-registered");const n=t.authToken;return _p(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function Dp(e,t){try{const n=await jp(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await mn(e.appConfig,i),n}catch(n){if(bo(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Ao(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await mn(e.appConfig,i)}throw n}}function To(e){return e!==void 0&&e.registrationStatus===2}function Lp(e){return e.requestStatus===2&&!Cp(e)}function Cp(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+tp}function Ep(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function _p(e){return e.requestStatus===1&&e.requestTime+xo<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ap(e){const t=e,{installationEntry:n,registrationPromise:i}=await Yi(t);return i?i.catch(console.error):Hi(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ip(e,t=!1){const n=e;return await Tp(n),(await Hi(n,t)).token}async function Tp(e){const{registrationPromise:t}=await Yi(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pp(e){if(!e||!e.options)throw Jn("App Configuration");if(!e.name)throw Jn("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw Jn(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function Jn(e){return ut.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Po="installations",Op="installations-internal",Np=e=>{const t=e.getProvider("app").getImmediate(),n=Pp(t),i=Mt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Fp=e=>{const t=e.getProvider("app").getImmediate(),n=Mt(t,Po).getImmediate();return{getId:()=>Ap(n),getToken:a=>Ip(n,a)}};function $p(){It(new Tt(Po,Np,"PUBLIC")),It(new Tt(Op,Fp,"PRIVATE"))}$p();vt(vo,Gi);vt(vo,Gi,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hn="analytics",Mp="firebase_id",Up="origin",zp=60*1e3,Bp="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qi="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const be=new Us("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qp={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Se=new fr("analytics","Analytics",qp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wp(e){if(!e.startsWith(Qi)){const t=Se.create("invalid-gtag-resource",{gtagURL:e});return be.warn(t.message),""}return e}function Oo(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Gp(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function Kp(e,t){const n=Gp("firebase-js-sdk-policy",{createScriptURL:Wp}),i=document.createElement("script"),a=`${Qi}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function Yp(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Hp(e,t,n,i,a,r){const o=i[a];try{if(o)await t[o];else{const c=(await Oo(n)).find(d=>d.measurementId===a);c&&await t[c.appId]}}catch(l){be.error(l)}e("config",a,r)}async function Qp(e,t,n,i,a){try{let r=[];if(a&&a.send_to){let o=a.send_to;Array.isArray(o)||(o=[o]);const l=await Oo(n);for(const c of o){const d=l.find(u=>u.measurementId===c),p=d&&t[d.appId];if(p)r.push(p);else{r=[];break}}}r.length===0&&(r=Object.values(t)),await Promise.all(r),e("event",i,a||{})}catch(r){be.error(r)}}function Vp(e,t,n,i){async function a(r,...o){try{if(r==="event"){const[l,c]=o;await Qp(e,t,n,l,c)}else if(r==="config"){const[l,c]=o;await Hp(e,t,n,i,l,c)}else if(r==="consent"){const[l,c]=o;e("consent",l,c)}else if(r==="get"){const[l,c,d]=o;e("get",l,c,d)}else if(r==="set"){const[l]=o;e("set",l)}else e(r,...o)}catch(l){be.error(l)}}return a}function Zp(e,t,n,i,a){let r=function(...o){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(r=window[a]),window[a]=Vp(r,e,t,n),{gtagCore:r,wrappedGtag:window[a]}}function Jp(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(Qi)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xp=30,ef=1e3;class tf{constructor(t={},n=ef){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const No=new tf;function nf(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function af(e){var t;const{appId:n,apiKey:i}=e,a={method:"GET",headers:nf(i)},r=Bp.replace("{app-id}",n),o=await fetch(r,a);if(o.status!==200&&o.status!==304){let l="";try{const c=await o.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch(c){}throw Se.create("config-fetch-failed",{httpStatus:o.status,responseMessage:l})}return o.json()}async function rf(e,t=No,n){const{appId:i,apiKey:a,measurementId:r}=e.options;if(!i)throw Se.create("no-app-id");if(!a){if(r)return{measurementId:r,appId:i};throw Se.create("no-api-key")}const o=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new lf;return setTimeout(async()=>{l.abort()},zp),Fo({appId:i,apiKey:a,measurementId:r},o,l,t)}async function Fo(e,{throttleEndTimeMillis:t,backoffCount:n},i,a=No){var r;const{appId:o,measurementId:l}=e;try{await of(i,t)}catch(c){if(l)return be.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:o,measurementId:l};throw c}try{const c=await af(e);return a.deleteThrottleMetadata(o),c}catch(c){const d=c;if(!sf(d)){if(a.deleteThrottleMetadata(o),l)return be.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:o,measurementId:l};throw c}const p=Number((r=d==null?void 0:d.customData)===null||r===void 0?void 0:r.httpStatus)===503?ea(n,a.intervalMillis,Xp):ea(n,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return a.setThrottleMetadata(o,u),be.debug(`Calling attemptFetch again in ${p} millis`),Fo(e,u,i,a)}}function of(e,t){return new Promise((n,i)=>{const a=Math.max(t-Date.now(),0),r=setTimeout(n,a);e.addEventListener(()=>{clearTimeout(r),i(Se.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function sf(e){if(!(e instanceof Ei)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class lf{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function cf(e,t,n,i,a){if(a&&a.global){e("event",n,i);return}else{const r=await t,o=Object.assign(Object.assign({},i),{send_to:r});e("event",n,o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function df(){if(hr())try{await gr()}catch(e){return be.warn(Se.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return be.warn(Se.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function uf(e,t,n,i,a,r,o){var l;const c=rf(e);c.then(f=>{n[f.measurementId]=f.appId,e.options.measurementId&&f.measurementId!==e.options.measurementId&&be.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${f.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(f=>be.error(f)),t.push(c);const d=df().then(f=>{if(f)return i.getId()}),[p,u]=await Promise.all([c,d]);Jp(r)||Kp(r,p.measurementId),a("js",new Date);const h=(l=o==null?void 0:o.config)!==null&&l!==void 0?l:{};return h[Up]="firebase",h.update=!0,u!=null&&(h[Mp]=u),a("config",p.measurementId,h),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pf{constructor(t){this.app=t}_delete(){return delete Ct[this.app.options.appId],Promise.resolve()}}let Ct={},Ia=[];const Ta={};let Xn="dataLayer",ff="gtag",Pa,$o,Oa=!1;function mf(){const e=[];if(mr()&&e.push("This is a browser extension environment."),vr()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=Se.create("invalid-analytics-context",{errorInfo:t});be.warn(n.message)}}function hf(e,t,n){mf();const i=e.options.appId;if(!i)throw Se.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)be.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Se.create("no-api-key");if(Ct[i]!=null)throw Se.create("already-exists",{id:i});if(!Oa){Yp(Xn);const{wrappedGtag:r,gtagCore:o}=Zp(Ct,Ia,Ta,Xn,ff);$o=r,Pa=o,Oa=!0}return Ct[i]=uf(e,Ia,Ta,t,Pa,Xn,n),new pf(e)}function gf(e=pr()){e=bt(e);const t=Mt(e,hn);return t.isInitialized()?t.getImmediate():vf(e)}function vf(e,t={}){const n=Mt(e,hn);if(n.isInitialized()){const a=n.getImmediate();if(zs(t,n.getOptions()))return a;throw Se.create("already-initialized")}return n.initialize({options:t})}async function xf(){if(mr()||!vr()||!hr())return!1;try{return await gr()}catch(e){return!1}}function yf(e,t,n,i){e=bt(e),cf($o,Ct[e.app.options.appId],t,n,i).catch(a=>be.error(a))}const Na="@firebase/analytics",Fa="0.10.8";function wf(){It(new Tt(hn,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return hf(i,a,n)},"PUBLIC")),It(new Tt("analytics-internal",e,"PRIVATE")),vt(Na,Fa),vt(Na,Fa,"esm2017");function e(t){try{const n=t.getProvider(hn).getImmediate();return{logEvent:(i,a,r)=>yf(n,i,a,r)}}catch(n){throw Se.create("interop-component-reg-failed",{reason:n})}}}wf();const yi={apiKey:"AIzaSyD1TjtSC-Mukd2EdNtiuQq-u3l3gdMP0dc",authDomain:"homefoods-16e56.firebaseapp.com",projectId:"homefoods-16e56",storageBucket:"homefoods-16e56.firebasestorage.app",messagingSenderId:"495709118320",appId:"1:495709118320:web:6fe3b7ec2b7c19d66cf9b5",measurementId:"G-6MR0ED1C3E"},bf=["apiKey","authDomain","projectId","appId"],ge=bf.some(e=>!yi[e]);let Xe,te,Mo,$a;ge?Promise.resolve(null):(Xe=ta().length?ta()[0]:Bs(yi),xr(Xe),te=qs(Xe),Mo=Vu(Xe),yi.measurementId?xf().then(e=>e?($a=gf(Xe),$a):null):Promise.resolve(null));async function kf(e,t=null,n=20){if(console.log(`[getFoodReviews] Starting fetch for foodId: "${e}", kitchenId: "${t}", limit: ${n}`),ge)return console.warn("[getFoodReviews] Firebase disabled, returning mock data"),za(e);if(!e||e.trim()==="")return console.log("[getFoodReviews] No foodId provided, returning empty array"),[];const i=e.trim();console.log(`[getFoodReviews] Cleaned foodId: "${i}"`);try{let a=[];if(t){console.log(`[getFoodReviews] Searching reviews in kitchen: ${t}`);const r=oe(te,"kitchens",t,"reviews"),o=ue(r,Ie("foodId","==",i),Oe(n));a=(await se(o)).docs.map(c=>({id:c.id,kitchenId:t,...c.data()})),console.log(`[getFoodReviews] Found ${a.length} reviews in kitchen ${t}`)}else{console.log("[getFoodReviews] Searching reviews across all kitchens...");const r=ue(oe(te,"kitchens")),o=await se(r);console.log(`[getFoodReviews] Found ${o.size} kitchens to search`);for(const l of o.docs)try{const c=oe(te,"kitchens",l.id,"reviews"),d=ue(c,Ie("foodId","==",i),Oe(n)),u=(await se(d)).docs.map(h=>({id:h.id,kitchenId:l.id,...h.data()}));if(a.push(...u),console.log(`[getFoodReviews] Found ${u.length} reviews in kitchen ${l.id}`),a.length>=n)break}catch(c){console.warn(`[getFoodReviews] Error searching kitchen ${l.id}:`,c);continue}}return a.length>0&&(a=a.sort((r,o)=>{const l=p=>p?typeof p=="string"?p.includes(" at ")?new Date(p.replace(" at "," ").replace(" UTC+5","")):new Date(p):p.seconds?new Date(p.seconds*1e3):new Date(p):new Date(0),c=l(r.timeStamp);return l(o.timeStamp)-c}),a=a.slice(0,n)),console.log(`[getFoodReviews] Final result - Found ${a.length} reviews for food '${i}':`,a),a}catch(a){return console.error("[getFoodReviews] Error fetching food reviews:",a),console.log("[getFoodReviews] Returning mock data due to error"),za(i)}}async function jf(e,t=null){if(console.log(`[debugReviewsQuery] Testing query for foodId: ${e}, kitchenId: ${t}`),ge)return console.warn("[debugReviewsQuery] Firebase disabled"),{status:"disabled"};try{let n=[],i=[];const a=ue(oe(te,"kitchens")),r=await se(a);console.log(`[debugReviewsQuery] Found ${r.size} kitchens`);for(const l of r.docs)try{i.push(l.id);const c=oe(te,"kitchens",l.id,"reviews"),p=(await se(ue(c,Oe(50)))).docs.map(u=>({id:u.id,kitchenId:l.id,...u.data()}));if(console.log(`[debugReviewsQuery] Kitchen ${l.id} has ${p.length} total reviews`),p.length>0&&console.log(`[debugReviewsQuery] Sample reviews from kitchen ${l.id}:`,p.slice(0,2)),e){const u=ue(c,Ie("foodId","==",e)),f=(await se(u)).docs.map(v=>({id:v.id,kitchenId:l.id,...v.data()}));f.length>0&&(console.log(`[debugReviewsQuery] Found ${f.length} reviews for foodId '${e}' in kitchen ${l.id}:`,f),n.push(...f))}n.push(...p)}catch(c){console.warn(`[debugReviewsQuery] Error checking kitchen ${l.id}:`,c);continue}const o=[...new Set(n.map(l=>l.foodId))];return console.log("[debugReviewsQuery] All unique foodIds in reviews:",o),{status:"success",requestedFoodId:e,kitchensSearched:i,allReviewsCount:n.length,matchingReviewsCount:n.filter(l=>l.foodId===e).length,uniqueFoodIds:o,sampleReviews:n.slice(0,5)}}catch(n){return console.error("[debugReviewsQuery] Error:",n),{status:"error",error:n.message}}}async function Sf(e,t=null){if(console.log(`[getFoodLikes] Starting fetch for foodId: ${e}, kitchenId: ${t}`),ge)return console.warn("[getFoodLikes] Firebase disabled, returning mock data"),Ua(e);if(!e||e.trim()==="")return console.log("[getFoodLikes] No foodId provided, returning empty array"),[];try{let n=[];if(t)try{console.log(`[getFoodLikes] Searching likes in kitchen ${t} subcollection`);const l=oe(te,"kitchens",t,"Likes");let c=ue(l,Ie("foodId","==",e)),d=await se(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}));p.length===0&&(c=ue(l,Ie("productId","==",e)),d=await se(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}))),n.push(...p),console.log(`[getFoodLikes] Found ${p.length} likes in kitchen subcollection`)}catch(l){console.warn("[getFoodLikes] Error searching kitchen subcollection:",l)}console.log("[getFoodLikes] Querying top-level Likes collection");let i=ue(oe(te,"Likes"),Ie("foodId","==",e)),a=await se(i),r=a.docs.map(l=>({id:l.id,...l.data()}));r.length===0&&(console.log("[getFoodLikes] No results with foodId, trying productId in top-level..."),i=ue(oe(te,"Likes"),Ie("productId","==",e)),a=await se(i),r=a.docs.map(l=>({id:l.id,...l.data()}))),n.push(...r),console.log(`[getFoodLikes] Found ${r.length} likes in top-level collection`);const o=n.filter((l,c,d)=>d.findIndex(p=>p.id===l.id)===c);return console.log(`[getFoodLikes] Total unique likes: ${o.length}`),o}catch(n){return console.error("[getFoodLikes] Error fetching food likes:",n),console.log("[getFoodLikes] Returning mock data due to error"),Ua(e)}}async function Rf(){if(ge)return console.log("Firebase is disabled - check your .env file"),{status:"disabled"};try{console.log("Testing Firestore connection...");const e=oe(te,"kitchens"),t=await se(ue(e,Oe(5))),n=t.docs.map(d=>({id:d.id,...d.data()}));let i=[],a=[];for(const d of n)try{const p=oe(te,"kitchens",d.id,"reviews"),h=(await se(ue(p,Oe(5)))).docs.map(T=>({id:T.id,kitchenId:d.id,...T.data()}));i.push(...h);const f=oe(te,"kitchens",d.id,"Likes"),D=(await se(ue(f,Oe(5)))).docs.map(T=>({id:T.id,kitchenId:d.id,...T.data()}));a.push(...D),console.log(`Kitchen ${d.id}: ${h.length} reviews, ${D.length} likes`)}catch(p){console.warn(`Error testing kitchen ${d.id} subcollections:`,p)}const r=oe(te,"Likes"),l=(await se(ue(r,Oe(10)))).docs.map(d=>({id:d.id,...d.data()}));console.log("Reviews found in kitchen subcollections:",i),console.log("Likes found in kitchen subcollections:",a),console.log("Likes found in top-level collection:",l);const c={status:"connected",collections:{kitchens:{count:t.size,samples:n,sampleIds:n.map(d=>d.id)},reviews:{source:"kitchen_subcollections",count:i.length,samples:i,sampleIds:i.map(d=>d.id),foodIds:i.map(d=>d.foodId)},likes:{subcollectionCount:a.length,topLevelCount:l.length,samples:[...a,...l],foodIds:[...a,...l].map(d=>d.foodId||d.productId)}}};return console.log("Firestore Test Results:",c),c}catch(e){return console.error("Firestore connection test failed:",e),{status:"error",error:e.message}}}async function Df(e,t=null){console.log(`[getFoodDetailWithKitchenAndReviews] Fetching food: ${e}, kitchen: ${t}`);try{const n=await Uo(e,t),i=t||n.kitchenId;console.log(`[getFoodDetailWithKitchenAndReviews] Using kitchenId: ${i}`);const[a,r,o]=await Promise.all([i?Lf(i):Promise.resolve(null),Sf(e,i),kf(e,i)]),l=zo(o);console.log("🚀 ~ getFoodDetailWithKitchenAndReviews ~ reviewStats:",l);const c={food:n,kitchen:a,likes:r,reviews:o,totalLikes:r.length,reviewStats:l};return console.log("[getFoodDetailWithKitchenAndReviews] Complete result:",c),c}catch(n){throw console.error("[getFoodDetailWithKitchenAndReviews] Error fetching food detail:",n),n}}async function Uo(e,t=null){if(console.log(`[getFoodById] Starting fetch for foodId: ${e}, kitchenId: ${t}`),ge)return console.warn("[getFoodById] Firebase disabled, returning mock data"),nt(e);if(!e||e.trim()==="")throw console.error("[getFoodById] Invalid foodId provided:",e),new Error("Food ID is required and cannot be empty");try{let n,i=null,a=null;if(t&&(console.log(`[getFoodById] Querying kitchens/${t}/foodItems/${e}`),n=await Rt(it(te,"kitchens",t,"foodItems",e)),n.exists()))return i={id:n.id,...n.data()},a=t,console.log("[getFoodById] Found in specific kitchen subcollection:",i),{...i,kitchenId:a};if(!i){console.log("[getFoodById] Searching across all kitchen subcollections...");const r=ue(oe(te,"kitchens")),o=await se(r);for(const l of o.docs)try{const c=it(te,"kitchens",l.id,"foodItems",e),d=await Rt(c);if(d.exists())return i={id:d.id,...d.data()},a=l.id,console.log(`[getFoodById] Found in kitchen ${l.id}:`,i),{...i,kitchenId:a}}catch(c){console.warn(`[getFoodById] Error checking kitchen ${l.id}:`,c);continue}}if(console.log(`[getFoodById] Trying top-level foodItems/${e}`),n=await Rt(it(te,"foodItems",e)),n.exists()){const r={id:n.id,...n.data()};return console.log("[getFoodById] Found in top-level collection:",r),r}return console.warn(`[getFoodById] Food item with ID '${e}' not found anywhere`),nt(e)}catch(n){return console.error("[getFoodById] Error fetching food item:",n),nt(e)}}async function Lf(e){if(console.log(`[getKitchenById] Starting fetch for kitchenId: ${e}`),ge)return console.warn("[getKitchenById] Firebase disabled, returning mock data"),rt(e);if(!e||e.trim()==="")throw console.error("[getKitchenById] Invalid kitchenId provided:",e),new Error("Kitchen ID is required and cannot be empty");try{console.log(`[getKitchenById] Querying Firestore collection 'kitchens' for document: ${e}`);const t=await Rt(it(te,"kitchens",e));if(console.log(`[getKitchenById] Document exists: ${t.exists()}`),!t.exists())return console.warn(`[getKitchenById] Kitchen with ID '${e}' not found in Firestore`),console.log("[getKitchenById] Returning mock data as fallback"),rt(e);const n={id:t.id,...t.data()};return console.log("[getKitchenById] Successfully fetched kitchen data:",n),n}catch(t){return console.error("[getKitchenById] Error fetching kitchen:",t),console.log("[getKitchenById] Returning mock data due to error"),rt(e)}}function zo(e){if(!e||e.length===0)return{totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0}};const t=e.length;console.log("🚀 ~ calculateReviewStats ~ totalReviews:",t);const n={5:0,4:0,3:0,2:0,1:0};let i=0;e.forEach(o=>{const l=Math.floor(o.rating||0);l>=1&&l<=5&&(n[l]++,i+=o.rating)});const a=t>0?i/t:0,r={};for(let o=1;o<=5;o++)r[o]=t>0?n[o]/t*100:0;return{totalReviews:t,averageRating:parseFloat(a.toFixed(1)),ratingBreakdown:n,ratingPercentages:r}}async function Cf(e=20){if(console.log(`[getAllFoods] Starting fetch with limit: ${e}`),ge)return ot();try{const t=ue(oe(te,"foodItems"),Oe(e)),i=(await se(t)).docs.map(a=>({id:a.id,...a.data()}));return i.length>0?i:ot()}catch(t){return console.error("[getAllFoods] Error:",t),ot()}}async function Bo(e,t=1e3){if(console.log(`[getKitchenAllReviews] Fetching all reviews for kitchen: ${e}`),ge)return console.warn("[getKitchenAllReviews] Firebase disabled, returning mock data"),Ma(e);if(!e||e.trim()==="")return console.log("[getKitchenAllReviews] No kitchenId provided, returning empty array"),[];try{console.log(`[getKitchenAllReviews] Querying reviews subcollection for kitchen: ${e}`);const n=oe(te,"kitchens",e,"reviews"),i=ue(n,Oe(t)),r=(await se(i)).docs.map(o=>({id:o.id,kitchenId:e,...o.data()}));return console.log(`[getKitchenAllReviews] Found ${r.length} total reviews for kitchen ${e}`),r.length>0&&r.sort((o,l)=>{const c=u=>u?typeof u=="string"?u.includes(" at ")?new Date(u.replace(" at "," ").replace(" UTC+5","")):new Date(u):u.seconds?new Date(u.seconds*1e3):new Date(u):new Date(0),d=c(o.timeStamp);return c(l.timeStamp)-d}),console.log(`[getKitchenAllReviews] Returning ${r.length} reviews for kitchen ${e}`),r}catch(n){return console.error("[getKitchenAllReviews] Error fetching kitchen reviews:",n),console.log("[getKitchenAllReviews] Returning mock data due to error"),Ma(e)}}async function Ef(e){console.log(`[getKitchenReviewStats] Getting review stats for kitchen: ${e}`);try{const t=await Bo(e),i={...zo(t),kitchenId:e,reviewsList:t,uniqueFoodIds:[...new Set(t.map(a=>a.foodId).filter(Boolean))],lastUpdated:new Date().toISOString()};return console.log(`[getKitchenReviewStats] Kitchen ${e} stats:`,i),i}catch(t){return console.error("[getKitchenReviewStats] Error calculating kitchen stats:",t),{kitchenId:e,totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0},reviewsList:[],uniqueFoodIds:[],lastUpdated:new Date().toISOString(),error:t.message}}}function Ma(e){return[{id:"kitchen-review-1",kitchenId:e,foodId:"food-1",userId:"user-1",userName:"Alice Johnson",userProfile:"",rating:5,message:"Amazing food from this kitchen! The Dim Sum was perfect.",timeStamp:"July 10, 2025 at 2:30:00 PM UTC+5",orderId:"order-1"},{id:"kitchen-review-2",kitchenId:e,foodId:"food-2",userId:"user-2",userName:"Bob Smith",userProfile:"",rating:4,message:"Great kitchen, fast delivery and tasty food.",timeStamp:"July 9, 2025 at 7:15:00 PM UTC+5",orderId:"order-2"},{id:"kitchen-review-3",kitchenId:e,foodId:"food-1",userId:"user-3",userName:"Carol Davis",userProfile:"",rating:5,message:"Best kitchen in the area! Highly recommend.",timeStamp:"July 8, 2025 at 12:45:00 PM UTC+5",orderId:"order-3"}]}function nt(e){return{id:e,name:"Dim Sum (Dumplings)",description:"A timeless delicacy from Chinese cuisine, Dim Sum dumplings are handcrafted pockets of flavor, delicately wrapped in thin, translucent dough. Each dumpling is steamed to perfection, preserving the juicy, savory filling inside.",cost:150,foodCategory:"1, 2",foodType:"Chinese",imageUrl:"/src/assets/images/product.png",kitchenId:"mock-kitchen-1",kitchenName:"Resto Parmato Bapo",isFeatured:!0,availability:{numAvailable:15,numOfSoldItem:85},engagement:{numOfLike:127,rating:4.9,numRatings:1247,countRating:1247}}}function rt(e){const t=new Date,n=new Date(t);n.setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()+2);const a=r=>r.toISOString().split("T")[0];return{id:e,name:"Coco's Kitchen",address:"Lahore-Sialkot Motorway",city:"San Francisco",cuisine:"Thai",description:"This is the kitchen of James done. This is the kitchen of James done, This is the kitchen of James done.This is the kitchen of James done",ownerId:"mock-owner-1",location:{latitude:37.5485,longitude:-121.9886},rating:4.9,ratingCount:1247,preorderSchedule:{dates:{[a(n)]:[{id:"schedule-1",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["6:22 PM","7:30 PM"],numOfAvailableItems:10,isLimitedOrder:!1},{id:"schedule-2",foodItemId:"food-4",nameOfFood:"Margherita Pizza",availableTimes:["6:22 PM","8:00 PM"],numOfAvailableItems:8,isLimitedOrder:!1}],[a(i)]:[{id:"schedule-3",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["5:30 PM","7:00 PM"],numOfAvailableItems:12,isLimitedOrder:!1}]}}}}function ot(){return[nt("food-1"),{...nt("food-2"),id:"food-2",name:"Margherita Pizza",cost:12.45,availability:{numAvailable:5,numOfSoldItem:2},imageUrl:"/src/assets/images/order2.png"},{...nt("food-3"),id:"food-3",name:"Dim Sum (Dumplings)",cost:22.45,availability:{numAvailable:0,numOfSoldItem:15},imageUrl:"/src/assets/images/order1.png"},{...nt("food-4"),id:"food-4",name:"Margherita Pizza (Pre-order)",cost:12.45,availability:{numAvailable:0,numOfSoldItem:8},imageUrl:"/src/assets/images/order2.png"}]}function Ua(e){return[{id:"like-1",userID:"user-1",foodId:e,status:"liked",timestamp:"2025-08-01T10:00:00Z"},{id:"like-2",userID:"user-2",foodId:e,status:"liked",timestamp:"2025-08-02T15:30:00Z"}]}function za(e){return[{id:"review-1",foodId:e,userId:"z6HJ9L3KS3XR9yLZ9rexp7K4Eo43",userName:"Testing55",userProfile:"",rating:4,message:"Testing",timeStamp:"July 7, 2025 at 6:06:01 PM UTC+5",orderId:"PrH8qFuHeHDlpfAw6c9"},{id:"review-2",foodId:e,userId:"user-456",userName:"John Doe",userProfile:"",rating:5,message:"Great food, would definitely order again!",timeStamp:"2025-07-07T15:30:00Z",orderId:"order-456"},{id:"review-3",foodId:e,userId:"user-789",userName:"Jane Smith",userProfile:"",rating:5,message:"Perfect! Exceeded my expectations.",timeStamp:"2025-07-06T10:15:30Z",orderId:"order-789"}]}async function _f(e){if(console.log(`[getKitchenWithFoodItems] Fetching kitchen: ${e}`),ge)return console.warn("[getKitchenWithFoodItems] Firebase disabled, returning mock data"),{kitchen:rt(e),foods:ot()};try{const t=await Rt(it(te,"kitchens",e));if(!t.exists())return console.warn(`[getKitchenWithFoodItems] Kitchen ${e} not found`),{kitchen:null,foods:[]};const n={id:t.id,...t.data()},i=oe(te,"kitchens",e,"foodItems"),r=(await se(i)).docs.map(o=>({id:o.id,kitchenId:e,...o.data()}));return console.log(`[getKitchenWithFoodItems] Found ${r.length} food items for kitchen ${e}`),{kitchen:n,foods:r}}catch(t){return console.error("[getKitchenWithFoodItems] Error:",t),{kitchen:rt(e),foods:ot()}}}async function Af(e=10){if(console.log(`[getAllKitchensWithFoodItems] Fetching up to ${e} kitchens`),ge)return console.warn("[getAllKitchensWithFoodItems] Firebase disabled, returning mock data"),[{kitchen:rt("mock-kitchen-1"),foods:ot()}];try{const t=ue(oe(te,"kitchens"),Oe(e)),n=await se(t),i=[];for(const a of n.docs){const r={id:a.id,...a.data()},o=oe(te,"kitchens",a.id,"foodItems"),c=(await se(o)).docs.map(d=>({id:d.id,kitchenId:a.id,...d.data()}));i.push({kitchen:r,foods:c}),console.log(`[getAllKitchensWithFoodItems] Kitchen ${a.id}: ${c.length} food items`)}return console.log(`[getAllKitchensWithFoodItems] Loaded ${i.length} kitchens with food data`),i}catch(t){return console.error("[getAllKitchensWithFoodItems] Error:",t),[{kitchen:rt("mock-kitchen-1"),foods:ot()}]}}const If=async(e,t,n)=>{try{console.log("🔥 Adding like to Firestore:",{kitchenId:e,productId:t,userId:n});const i=oe(te,"kitchens",e,"likes"),a={productId:t,userId:n,timestamp:Gs()},r=await yr(i,a);return console.log("✅ Like added successfully with ID:",r.id),{id:r.id,...a}}catch(i){throw console.error("❌ Error adding like:",i),i}},Tf=async(e,t,n)=>{try{console.log("🔥 Removing like from Firestore:",{kitchenId:e,productId:t,userId:n});const i=oe(te,"kitchens",e,"likes"),a=ue(i,Ie("productId","==",t),Ie("userId","==",n)),r=await se(a);if(r.empty)return console.warn("⚠️ No like found to remove"),!1;const o=r.docs.map(l=>Ws(l.ref));return await Promise.all(o),console.log("✅ Like(s) removed successfully"),!0}catch(i){throw console.error("❌ Error removing like:",i),i}},qo=async(e,t,n)=>{try{const i=oe(te,"kitchens",e,"likes"),a=ue(i,Ie("productId","==",t),Ie("userId","==",n));return!(await se(a)).empty}catch(i){return console.error("❌ Error checking user like:",i),!1}},Ba=e=>!e||!e._lat||!e._long?null:{lat:e._lat,lng:e._long},Pf=e=>!e||!e.seconds?null:new Date(e.seconds*1e3+(e.nanoseconds||0)/1e6).toISOString(),Pe=e=>{if(!e||typeof e!="object")return e;const t={...e};return t.location&&t.location._lat!==void 0&&(t.location=Ba(t.location)),Object.keys(t).forEach(n=>{const i=t[n];i&&typeof i=="object"&&(i._lat!==void 0&&i._long!==void 0?t[n]=Ba(i):i.seconds!==void 0&&(i.nanoseconds!==void 0||i.nanoseconds===0)?t[n]=Pf(i):Array.isArray(i)?t[n]=i.map(a=>Pe(a)):t[n]=Pe(i))}),t},Et=ae("food/fetchDetail",async({foodId:e,kitchenId:t})=>{try{return{...await Df(e,t),foodId:e,kitchenId:t}}catch(n){return{food:await Uo(e),kitchen:null,likes:[],reviews:[],reviewStats:null,foodId:e,kitchenId:t}}}),ei=ae("food/fetchAll",async(e=20)=>await Cf(e)),Wo=ae("food/checkLikeStatus",async({foodId:e,kitchenId:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(console.log("🔍 Checking like status:",{foodId:e,kitchenId:t,userId:a}),!a||!t)return console.log("❌ Missing userId or kitchenId for like status check"),{foodId:e,liked:!1};try{const o=await qo(t,e,a);return console.log("✅ Like status check result:",{foodId:e,isLiked:o}),{foodId:e,liked:o}}catch(o){return console.error("❌ Error checking like status:",o),{foodId:e,liked:!1}}}),wi=ae("food/toggleLike",async(e,{getState:t})=>{var c,d;const{auth:n,food:i}=t(),a=(c=n.user)==null?void 0:c.id,r=(d=i.currentKitchen)==null?void 0:d.id;if(console.log("🔄 Toggle like action:",{foodId:e,userId:a,kitchenId:r,currentLikedFoods:i.likedFoods}),!a)throw new Error("User not authenticated");if(!r)throw new Error("Kitchen information not available");const o=i.likedFoods.includes(e);console.log("🔍 Current like state from Redux:",{foodId:e,isCurrentlyLiked:o}),console.log("🔍 Checking actual Firestore like state before toggle");const l=await qo(r,e,a);console.log("🔍 Actual Firestore like state:",{foodId:e,actualFirestoreState:l});try{return l?(console.log("🔥 Attempting to remove like from Firestore"),await Tf(r,e,a),console.log("✅ Like removed from Firestore")):(console.log("🔥 Attempting to add like to Firestore"),await If(r,e,a),console.log("✅ Like added to Firestore")),{foodId:e,userId:a,kitchenId:r,liked:!l}}catch(p){throw console.error("❌ Error toggling like in Firestore:",p),p}});ae("food/refresh",async({foodId:e,kitchenId:t},{dispatch:n})=>n(Et({foodId:e,kitchenId:t})));const Go=Bt({name:"food",initialState:{currentFood:null,currentKitchen:null,currentReviews:[],currentReviewStats:null,currentLikes:[],allFoods:[],likedFoods:[],loading:!1,allFoodsLoading:!1,error:null,allFoodsError:null,lastUpdated:null,allFoodsLastUpdated:null},reducers:{clearCurrentFood:e=>{e.currentFood=null,e.currentKitchen=null,e.currentReviews=[],e.currentReviewStats=null,e.currentLikes=[],e.error=null},clearError:e=>{e.error=null},clearAllFoodsError:e=>{e.allFoodsError=null},updateFoodInList:(e,t)=>{var r;const{foodId:n,updates:i}=t.payload,a=e.allFoods.findIndex(o=>o.id===n);a!==-1&&(e.allFoods[a]={...e.allFoods[a],...i}),((r=e.currentFood)==null?void 0:r.id)===n&&(e.currentFood={...e.currentFood,...i})},toggleLikeLocally:(e,t)=>{const n=t.payload,i=e.likedFoods.includes(n);console.log("🔄 toggleLikeLocally called:",{foodId:n,currentlyLiked:i,likedFoods:e.likedFoods}),i?(e.likedFoods=e.likedFoods.filter(a=>a!==n),console.log("➖ Locally removed like for:",n)):(e.likedFoods.push(n),console.log("➕ Locally added like for:",n)),console.log("🔍 Updated likedFoods locally:",e.likedFoods)}},extraReducers:e=>{e.addCase(Et.pending,t=>{t.loading=!0,t.error=null}).addCase(Et.fulfilled,(t,n)=>{t.loading=!1;const{food:i,kitchen:a,likes:r,reviews:o,reviewStats:l}=n.payload;t.currentFood=Pe(i),t.currentKitchen=Pe(a),t.currentReviews=o?o.map(c=>Pe(c)):[],t.currentReviewStats=Pe(l),t.currentLikes=r?r.map(c=>Pe(c)):[],t.lastUpdated=new Date().toISOString()}).addCase(Et.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(ei.pending,t=>{t.allFoodsLoading=!0,t.allFoodsError=null}).addCase(ei.fulfilled,(t,n)=>{t.allFoodsLoading=!1,t.allFoods=n.payload,t.allFoodsLastUpdated=new Date().toISOString()}).addCase(ei.rejected,(t,n)=>{t.allFoodsLoading=!1,t.allFoodsError=n.error.message}).addCase(wi.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;a&&!t.likedFoods.includes(i)?t.likedFoods.push(i):a||(t.likedFoods=t.likedFoods.filter(r=>r!==i))}).addCase(wi.rejected,(t,n)=>{const i=n.meta.arg;t.likedFoods.includes(i)?t.likedFoods=t.likedFoods.filter(r=>r!==i):t.likedFoods.push(i)}).addCase(Wo.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;console.log("✅ Like status check fulfilled:",{foodId:i,liked:a,currentLikedFoods:t.likedFoods}),a&&!t.likedFoods.includes(i)?(t.likedFoods.push(i),console.log("➕ Added foodId to likedFoods:",i)):a||(t.likedFoods=t.likedFoods.filter(r=>r!==i),console.log("➖ Removed foodId from likedFoods:",i)),console.log("🔍 Updated likedFoods:",t.likedFoods)})}}),{clearCurrentFood:Of,clearError:Fh,clearAllFoodsError:$h,updateFoodInList:Mh,toggleLikeLocally:Uh}=Go.actions,Nf=Go.reducer,Ke=ae("cart/addToCart",async({foodId:e,kitchenId:t,quantity:n,selectedDate:i,orderType:a,food:r,specialInstructions:o,pickupDetails:l},{getState:c})=>{var u;const{auth:d}=c(),p=(u=d.user)==null?void 0:u.id;if(!p)throw new Error("User not authenticated");return console.log("Adding to cart:",{foodId:e,kitchenId:t,quantity:n,selectedDate:i,orderType:a,specialInstructions:o,pickupDetails:l,userId:p}),await new Promise(h=>setTimeout(h,500)),{id:`cart-item-${Date.now()}`,foodId:e,kitchenId:t,userId:p,quantity:n,selectedDate:i,orderType:a,specialInstructions:o||"",food:r||null,pickupDetails:l||{date:i,time:null,display:a==="GO_GRAB"?"Pick up today":`Pick up ${i}`,orderType:a},addedAt:new Date().toISOString()}}),st=ae("cart/removeFromCart",async(e,{getState:t})=>{var a;const{auth:n}=t(),i=(a=n.user)==null?void 0:a.id;if(!i)throw new Error("User not authenticated");return console.log("Removing from cart:",{cartItemId:e,userId:i}),await new Promise(r=>setTimeout(r,300)),e}),_t=ae("cart/updateQuantity",async({cartItemId:e,quantity:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");return console.log("Updating cart quantity:",{cartItemId:e,quantity:t,userId:a}),await new Promise(o=>setTimeout(o,300)),{cartItemId:e,quantity:t}}),gn=ae("cart/updateItem",async({cartItemId:e,quantity:t,specialInstructions:n},{getState:i})=>{var o;const{auth:a}=i(),r=(o=a.user)==null?void 0:o.id;if(!r)throw new Error("User not authenticated");return console.log("Updating cart item:",{cartItemId:e,quantity:t,specialInstructions:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{cartItemId:e,quantity:t,specialInstructions:n}}),Ko=ae("cart/updatePickupDetails",async({cartItemId:e,pickupDate:t,pickupTime:n,orderType:i},{getState:a})=>{var l;const{auth:r}=a(),o=(l=r.user)==null?void 0:l.id;if(!o)throw new Error("User not authenticated");return console.log("Updating pickup details:",{cartItemId:e,pickupDate:t,pickupTime:n,orderType:i,userId:o}),await new Promise(c=>setTimeout(c,300)),{cartItemId:e,pickupDate:t,pickupTime:n,orderType:i}}),Yo=ae("cart/fetchCart",async(e,{getState:t})=>{var a;const{auth:n}=t(),i=(a=n.user)==null?void 0:a.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching cart for user:",i),[]}),Ue=Bt({name:"cart",initialState:{items:[],totalItems:0,totalAmount:0,loading:!1,error:null,lastUpdated:null},reducers:{clearCart:e=>{e.items=[],e.totalItems=0,e.totalAmount=0,e.lastUpdated=new Date().toISOString()},clearError:e=>{e.error=null},calculateTotals:e=>{e.totalItems=e.items.reduce((t,n)=>t+n.quantity,0),e.totalAmount=e.items.reduce((t,n)=>{var a;const i=((a=n.food)==null?void 0:a.cost)||0;return t+parseFloat(i)*n.quantity},0),e.lastUpdated=new Date().toISOString()},addItemLocally:(e,t)=>{const{foodId:n,quantity:i,selectedDate:a}=t.payload,r=e.items.find(o=>o.foodId===n&&o.selectedDate===a);r?r.quantity+=i:e.items.push(t.payload),Ue.caseReducers.calculateTotals(e)},updatePickupDetailsLocally:(e,t)=>{const{cartItemId:n,pickupDate:i,pickupTime:a,orderType:r}=t.payload,o=e.items.find(l=>l.id===n);o&&(i!==void 0&&(o.selectedDate=i),r!==void 0&&(o.orderType=r),o.pickupDetails||(o.pickupDetails={}),i!==void 0&&(o.pickupDetails.date=i,o.pickupDetails.display=r==="GO_GRAB"?"Pick up today":`Pick up ${i}`),a!==void 0&&(o.pickupDetails.time=a),r!==void 0&&(o.pickupDetails.orderType=r),e.lastUpdated=new Date().toISOString())}},extraReducers:e=>{e.addCase(Ke.pending,t=>{t.loading=!0,t.error=null}).addCase(Ke.fulfilled,(t,n)=>{t.loading=!1;const i=n.payload,a=t.items.find(r=>r.foodId===i.foodId&&r.selectedDate===i.selectedDate&&r.specialInstructions===i.specialInstructions);a?a.quantity+=i.quantity:t.items.push(i),Ue.caseReducers.calculateTotals(t)}).addCase(Ke.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(st.pending,t=>{t.loading=!0}).addCase(st.fulfilled,(t,n)=>{t.loading=!1,t.items=t.items.filter(i=>i.id!==n.payload),Ue.caseReducers.calculateTotals(t)}).addCase(st.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(_t.fulfilled,(t,n)=>{const{cartItemId:i,quantity:a}=n.payload,r=t.items.find(o=>o.id===i);r&&(r.quantity=a),Ue.caseReducers.calculateTotals(t)}).addCase(gn.fulfilled,(t,n)=>{const{cartItemId:i,quantity:a,specialInstructions:r}=n.payload,o=t.items.find(l=>l.id===i);o&&(o.quantity=a,r!==void 0&&(o.specialInstructions=r)),Ue.caseReducers.calculateTotals(t)}).addCase(Ko.fulfilled,(t,n)=>{const{cartItemId:i,pickupDate:a,pickupTime:r,orderType:o}=n.payload,l=t.items.find(c=>c.id===i);l&&(a!==void 0&&(l.selectedDate=a),o!==void 0&&(l.orderType=o),l.pickupDetails||(l.pickupDetails={}),a!==void 0&&(l.pickupDetails.date=a,l.pickupDetails.display=o==="GO_GRAB"?"Pick up today":`Pick up ${a}`),r!==void 0&&(l.pickupDetails.time=r),o!==void 0&&(l.pickupDetails.orderType=o)),Ue.caseReducers.calculateTotals(t)}).addCase(Yo.fulfilled,(t,n)=>{t.items=n.payload,Ue.caseReducers.calculateTotals(t)}).addCase(Ln,(t,n)=>{var i;if((i=n.payload)!=null&&i.cart)return{...t,...n.payload.cart,loading:!1,error:null}})}}),{clearCart:An,clearError:Ff,calculateTotals:$f,addItemLocally:Mf,updatePickupDetailsLocally:Uf}=Ue.actions,Ho=Ue.reducer,Qo=Object.freeze(Object.defineProperty({__proto__:null,addItemLocally:Mf,addToCart:Ke,calculateTotals:$f,clearCart:An,clearError:Ff,default:Ho,fetchCart:Yo,removeFromCart:st,updateCartItem:gn,updateCartQuantity:_t,updatePickupDetails:Ko,updatePickupDetailsLocally:Uf},Symbol.toStringTag,{value:"Module"})),an=ae("kitchen/fetchStats",async e=>{try{const t=await Ef(e);return{kitchenId:e,stats:t}}catch(t){throw console.error("Error fetching kitchen stats:",t),t}}),rn=ae("kitchen/fetchReviews",async({kitchenId:e,limit:t=10})=>{try{const n=await Bo(e,t);return{kitchenId:e,reviews:n}}catch(n){throw console.error("Error fetching kitchen reviews:",n),n}}),zf=ae("kitchen/addReview",async({kitchenId:e,reviewData:t},{getState:n})=>{var l,c;const{auth:i}=n(),a=(l=i.user)==null?void 0:l.id,r=((c=i.user)==null?void 0:c.name)||"Anonymous";if(!a)throw new Error("User not authenticated");console.log("Adding kitchen review:",{kitchenId:e,reviewData:t,userId:a,userName:r}),await new Promise(d=>setTimeout(d,500));const o={id:`review-${Date.now()}`,userId:a,userName:r,rating:t.rating,comment:t.comment,timestamp:new Date().toISOString(),kitchenId:e};return{kitchenId:e,review:o}}),Bf=ae("kitchen/updateReview",async({kitchenId:e,reviewId:t,updates:n},{getState:i})=>{var o;const{auth:a}=i(),r=(o=a.user)==null?void 0:o.id;if(!r)throw new Error("User not authenticated");return console.log("Updating kitchen review:",{kitchenId:e,reviewId:t,updates:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{kitchenId:e,reviewId:t,updates:n}}),qf=ae("kitchen/deleteReview",async({kitchenId:e,reviewId:t},{getState:n})=>{var r;const{auth:i}=n(),a=(r=i.user)==null?void 0:r.id;if(!a)throw new Error("User not authenticated");return console.log("Deleting kitchen review:",{kitchenId:e,reviewId:t,userId:a}),await new Promise(o=>setTimeout(o,300)),{kitchenId:e,reviewId:t}}),Vo=Bt({name:"kitchen",initialState:{kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}},reducers:{clearKitchenData:(e,t)=>{const n=t.payload;delete e.kitchenStats[n],delete e.kitchenReviews[n],delete e.statsLoading[n],delete e.reviewsLoading[n],delete e.statsError[n],delete e.reviewsError[n],delete e.statsLastUpdated[n],delete e.reviewsLastUpdated[n]},clearAllKitchenData:()=>({kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}}),clearKitchenErrors:(e,t)=>{const n=t.payload;delete e.statsError[n],delete e.reviewsError[n]}},extraReducers:e=>{e.addCase(an.pending,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!0,delete t.statsError[i]}).addCase(an.fulfilled,(t,n)=>{const{kitchenId:i,stats:a}=n.payload;t.statsLoading[i]=!1,t.kitchenStats[i]=Pe(a),t.statsLastUpdated[i]=new Date().toISOString()}).addCase(an.rejected,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!1,t.statsError[i]=n.error.message}).addCase(rn.pending,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!0,delete t.reviewsError[i]}).addCase(rn.fulfilled,(t,n)=>{const{kitchenId:i,reviews:a}=n.payload;t.reviewsLoading[i]=!1,t.kitchenReviews[i]=a?a.map(r=>Pe(r)):[],t.reviewsLastUpdated[i]=new Date().toISOString()}).addCase(rn.rejected,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!1,t.reviewsError[i]=n.error.message}).addCase(zf.fulfilled,(t,n)=>{const{kitchenId:i,review:a}=n.payload;t.kitchenReviews[i]||(t.kitchenReviews[i]=[]);const r=Pe(a);if(t.kitchenReviews[i].unshift(r),t.kitchenStats[i]){const o=t.kitchenStats[i],l=o.totalReviews||0,c=(o.averageRating||0)*l,d=l+1,p=c+a.rating;t.kitchenStats[i]={...o,totalReviews:d,averageRating:p/d}}}).addCase(Bf.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a,updates:r}=n.payload;if(t.kitchenReviews[i]){const o=t.kitchenReviews[i].findIndex(l=>l.id===a);if(o!==-1){const l=t.kitchenReviews[i][o].rating;if(t.kitchenReviews[i][o]={...t.kitchenReviews[i][o],...r,updatedAt:new Date().toISOString()},r.rating&&r.rating!==l&&t.kitchenStats[i]){const c=t.kitchenStats[i],d=c.totalReviews||0,u=(c.averageRating||0)*d-l+r.rating;t.kitchenStats[i]={...c,averageRating:u/d}}}}}).addCase(qf.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a}=n.payload;if(t.kitchenReviews[i]){const r=t.kitchenReviews[i].findIndex(o=>o.id===a);if(r!==-1){const o=t.kitchenReviews[i][r].rating;if(t.kitchenReviews[i].splice(r,1),t.kitchenStats[i]){const l=t.kitchenStats[i],c=l.totalReviews||0;if(c>1){const d=(l.averageRating||0)*c,p=c-1,u=d-o;t.kitchenStats[i]={...l,totalReviews:p,averageRating:u/p}}else t.kitchenStats[i]={...l,totalReviews:0,averageRating:0}}}}})}}),{clearKitchenData:zh,clearAllKitchenData:Bh,clearKitchenErrors:qh}=Vo.actions,Wf=Vo.reducer,on=ae("reviews/fetchFoodReviews",async({foodId:e,kitchenId:t,limit:n=10})=>{try{console.log("Fetching food reviews:",{foodId:e,kitchenId:t,limit:n}),await new Promise(a=>setTimeout(a,300));const i=[{id:`review-1-${e}`,userId:"user-001",userName:"Alice Chen",rating:5,comment:"Absolutely delicious! Perfect taste and portion size.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-2-${e}`,userId:"user-002",userName:"Bob Wilson",rating:4,comment:"Great food, fast delivery. Will order again!",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-3-${e}`,userId:"user-003",userName:"Carol Davis",rating:5,comment:"Outstanding quality! Fresh ingredients and amazing flavors.",timestamp:new Date(Date.now()-2592e5).toISOString(),foodId:e,kitchenId:t,verified:!0}].slice(0,n);return{foodId:e,kitchenId:t,reviews:i}}catch(i){throw console.error("Error fetching food reviews:",i),i}}),sn=ae("reviews/addFoodReview",async({foodId:e,kitchenId:t,reviewData:n},{getState:i})=>{var c,d;const{auth:a}=i(),r=(c=a.user)==null?void 0:c.id,o=((d=a.user)==null?void 0:d.name)||"Anonymous";if(!r)throw new Error("User not authenticated");console.log("Adding food review:",{foodId:e,kitchenId:t,reviewData:n,userId:r,userName:o}),await new Promise(p=>setTimeout(p,500));const l={id:`review-${Date.now()}`,userId:r,userName:o,rating:n.rating,comment:n.comment,timestamp:new Date().toISOString(),foodId:e,kitchenId:t,verified:!0};return{foodId:e,kitchenId:t,review:l}}),Gf=ae("reviews/updateFoodReview",async({foodId:e,kitchenId:t,reviewId:n,updates:i},{getState:a})=>{var l;const{auth:r}=a(),o=(l=r.user)==null?void 0:l.id;if(!o)throw new Error("User not authenticated");return console.log("Updating food review:",{foodId:e,kitchenId:t,reviewId:n,updates:i,userId:o}),await new Promise(c=>setTimeout(c,300)),{foodId:e,kitchenId:t,reviewId:n,updates:i}}),Kf=ae("reviews/deleteFoodReview",async({foodId:e,kitchenId:t,reviewId:n},{getState:i})=>{var o;const{auth:a}=i(),r=(o=a.user)==null?void 0:o.id;if(!r)throw new Error("User not authenticated");return console.log("Deleting food review:",{foodId:e,kitchenId:t,reviewId:n,userId:r}),await new Promise(l=>setTimeout(l,300)),{foodId:e,kitchenId:t,reviewId:n}}),ti=ae("reviews/fetchUserReviews",async({limit:e=20},{getState:t})=>{var r;const{auth:n}=t(),i=(r=n.user)==null?void 0:r.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching user reviews:",{userId:i,limit:e}),await new Promise(o=>setTimeout(o,300)),[{id:"user-review-1",userId:i,userName:n.user.name,rating:5,comment:"Loved this dish! Perfect for dinner.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:"food-001",foodName:"Kung Pao Chicken",kitchenId:"kitchen-001",kitchenName:"Mary's Kitchen",verified:!0},{id:"user-review-2",userId:i,userName:n.user.name,rating:4,comment:"Good value for money. Quick delivery.",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:"food-002",foodName:"Beef Noodle Soup",kitchenId:"kitchen-002",kitchenName:"Tom's Noodles",verified:!0}]}),Zo=Bt({name:"reviews",initialState:{foodReviews:{},userReviews:[],foodReviewsLoading:{},userReviewsLoading:!1,foodReviewsError:{},userReviewsError:null,foodReviewsLastUpdated:{},userReviewsLastUpdated:null,submissionLoading:!1,submissionError:null},reducers:{clearFoodReviews:(e,t)=>{const n=t.payload;delete e.foodReviews[n],delete e.foodReviewsLoading[n],delete e.foodReviewsError[n],delete e.foodReviewsLastUpdated[n]},clearAllReviews:e=>{e.foodReviews={},e.userReviews=[],e.foodReviewsLoading={},e.userReviewsLoading=!1,e.foodReviewsError={},e.userReviewsError=null,e.foodReviewsLastUpdated={},e.userReviewsLastUpdated=null},clearReviewErrors:(e,t)=>{if(t.payload){const n=t.payload;delete e.foodReviewsError[n]}else e.foodReviewsError={},e.userReviewsError=null,e.submissionError=null},clearSubmissionError:e=>{e.submissionError=null}},extraReducers:e=>{e.addCase(on.pending,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!0,delete t.foodReviewsError[i]}).addCase(on.fulfilled,(t,n)=>{const{foodId:i,reviews:a}=n.payload;t.foodReviewsLoading[i]=!1,t.foodReviews[i]=a,t.foodReviewsLastUpdated[i]=new Date().toISOString()}).addCase(on.rejected,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!1,t.foodReviewsError[i]=n.error.message}).addCase(sn.pending,t=>{t.submissionLoading=!0,t.submissionError=null}).addCase(sn.fulfilled,(t,n)=>{t.submissionLoading=!1;const{foodId:i,review:a}=n.payload;t.foodReviews[i]||(t.foodReviews[i]=[]),t.foodReviews[i].unshift(a),t.userReviews.unshift({...a,foodName:"Unknown Food",kitchenName:"Unknown Kitchen"})}).addCase(sn.rejected,(t,n)=>{t.submissionLoading=!1,t.submissionError=n.error.message}).addCase(Gf.fulfilled,(t,n)=>{const{foodId:i,reviewId:a,updates:r}=n.payload;if(t.foodReviews[i]){const l=t.foodReviews[i].findIndex(c=>c.id===a);l!==-1&&(t.foodReviews[i][l]={...t.foodReviews[i][l],...r,updatedAt:new Date().toISOString()})}const o=t.userReviews.findIndex(l=>l.id===a);o!==-1&&(t.userReviews[o]={...t.userReviews[o],...r,updatedAt:new Date().toISOString()})}).addCase(Kf.fulfilled,(t,n)=>{const{foodId:i,reviewId:a}=n.payload;t.foodReviews[i]&&(t.foodReviews[i]=t.foodReviews[i].filter(r=>r.id!==a)),t.userReviews=t.userReviews.filter(r=>r.id!==a)}).addCase(ti.pending,t=>{t.userReviewsLoading=!0,t.userReviewsError=null}).addCase(ti.fulfilled,(t,n)=>{t.userReviewsLoading=!1,t.userReviews=n.payload,t.userReviewsLastUpdated=new Date().toISOString()}).addCase(ti.rejected,(t,n)=>{t.userReviewsLoading=!1,t.userReviewsError=n.error.message})}}),{clearFoodReviews:Wh,clearAllReviews:Gh,clearReviewErrors:Kh,clearSubmissionError:Yh}=Zo.actions,Yf=Zo.reducer,Hf={key:"root",storage:Cn,whitelist:["auth","cart"],blacklist:["food","kitchen","reviews"]},Qf={key:"auth",storage:Cn,whitelist:["user","isAuthenticated","isDevelopmentMode"],blacklist:["loading","error","wechatAuthUrl"]},Vf={key:"cart",storage:Cn,whitelist:["items","totalItems","totalAmount"],blacklist:["loading","error"]},Zf=Or({auth:mi(Qf,Md),food:Nf,cart:mi(Vf,Ho),kitchen:Wf,reviews:Yf}),Jf=mi(Hf,Zf),Jo=qc({reducer:Jf,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})}),Xo=Cd(Jo),es=ae("app/performCompleteLogout",async(e,{dispatch:t})=>{try{return console.log("🚪 Starting complete logout process..."),t($d()),t(An()),await Xo.purge(),localStorage.removeItem("persist:root"),localStorage.removeItem("persist:auth"),localStorage.removeItem("persist:cart"),sessionStorage.clear(),console.log("✅ Complete logout successful"),{success:!0}}catch(n){throw console.error("❌ Logout error:",n),n}}),Vi=m.createContext(null),ye=Xe?xr(Xe):null;function Xf({children:e}){const[t,n]=m.useState(null),[i,a]=m.useState(!0),r=He();m.useEffect(()=>{if(ge||!ye){const f=localStorage.getItem("test_user_session");if(f)try{const v=JSON.parse(f);n(v),r(Sa(v)),console.log("🧪 Restored test user session:",v)}catch(v){console.warn("Failed to restore test session:",v),localStorage.removeItem("test_user_session")}a(!1);return}const h=Ks(ye,f=>{n(f||null),a(!1)});return()=>h()},[ye,r]);const o=m.useCallback(async()=>{if(ge||!ye){console.info("Auth disabled: anonymous sign-in skipped");return}await Ys(ye)},[ye]),l=m.useCallback(()=>{const h=_e.APP_ID,f=encodeURIComponent(gi()),v=_e.SCOPE,D="we_"+Math.random().toString(36).slice(2),T=`${_e.WEB_AUTHORIZE_URL}?appid=${h}&redirect_uri=${f}&response_type=code&scope=${v}&state=${D}#wechat_redirect`;console.log("🔗 [AuthContext] WeChat OAuth URL:",T),console.log("🔍 [AuthContext] Using redirect URI:",gi()),window.location.href=T},[]),c=m.useCallback(async h=>{console.log("WeChat code obtained:",h);const v=new Hs("wechat").credential({accessToken:"placeholder_access_token"});!ge&&ye?await Qs(ye,v).catch(D=>{console.warn("WeChat credential sign-in failed (expected in placeholder):",D.message)}):console.info("Auth disabled: skipping credential sign-in (placeholder)")},[ye]),d=m.useCallback(async()=>{console.log("🧪 Using test user bypass");const h={id:`test_user_${Date.now()}`,uid:`test_user_${Date.now()}`,openid:`test_openid_${Date.now()}`,name:"Test User",displayName:"Test User",avatar:null,photoURL:null,email:null,country:"Test Country",province:"Test Province",city:"Test City",sex:0,language:"en",isAuthenticated:!0,authMethod:"test",wechatOpenId:`test_openid_${Date.now()}`,accessToken:"test_access_token",providerId:"test",isAnonymous:!1,createdAt:new Date().toISOString()};return n(h),r(Sa(h)),localStorage.setItem("test_user_session",JSON.stringify(h)),console.log("✅ Test user signed in:",h),h},[r]),p=m.useCallback(async()=>{try{!ge&&ye&&await na(ye),localStorage.removeItem("test_user_session"),n(null),await r(es()).unwrap(),console.log("✅ Complete logout successful")}catch(h){console.error("❌ Logout error:",h),!ge&&ye&&await na(ye),localStorage.removeItem("test_user_session"),n(null)}},[ye,r]),u={user:t,initializing:i,authDisabled:ge,signInAnonymously:o,signInWithWeChatPopup:l,signInWithTestUser:d,handleWeChatCallback:c,signOut:p};return s.jsx(Vi.Provider,{value:u,children:e})}function Zi(){const e=m.useContext(Vi);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function em(){const{user:e,signOut:t,authDisabled:n}=Zi();return s.jsxs("div",{className:"container py-3",children:[s.jsxs("h1",{className:"h4 mb-3",children:["Welcome ",(e==null?void 0:e.displayName)||"User"]}),s.jsx("p",{className:"text-secondary small mb-4",children:"This is a mobile-first boilerplate."}),n&&s.jsx("div",{className:"alert alert-warning p-2 small",role:"alert",children:"Firebase auth disabled (placeholder config). Add real env values to enable."}),s.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:t,children:"Sign out"})]})}const bi="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3ccircle%20cx='9'%20cy='10'%20r='1'/%3e%3ccircle%20cx='15'%20cy='10'%20r='1'/%3e%3cpath%20d='M5%2015c-1.143-1.012-2-2.547-2-4.25C3%207.798%205.91%205%209.5%205s6.5%202.798%206.5%205.75S13.09%2016.5%209.5%2016.5c-.517%200-1.02-.057-1.5-.165L5%2018l.8-2.4'/%3e%3cpath%20d='M16.5%208.5c2.485%200%204.5%201.79%204.5%204s-2.015%204-4.5%204c-.275%200-.544-.02-.805-.06L14%2018l.6-1.8'/%3e%3c/svg%3e";function tm(){const{signInWithWeChatPopup:e,signInAnonymously:t}=Zi();return s.jsxs("div",{className:"container py-5",children:[s.jsx("h1",{className:"h5 mb-4 text-center",children:"Sign In"}),s.jsxs("div",{className:"d-grid gap-3",children:[s.jsxs("button",{className:"btn btn-success d-flex align-items-center justify-content-center gap-2",onClick:e,children:[s.jsx("img",{src:bi,alt:"WeChat",style:{width:20,height:20}}),s.jsx("span",{children:"Continue with WeChat"})]}),s.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Continue as Guest"})]})]})}const ne={success:(e,t={})=>gt.success(e,{icon:"✅",duration:3e3,style:{background:"#F0FDF4",color:"#15803D",border:"1px solid #22C55E",borderRadius:"12px",padding:"16px"},...t}),error:(e,t={})=>gt.error(e,{icon:"❌",duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #EF4444",borderRadius:"12px",padding:"16px"},...t}),info:(e,t={})=>gt(e,{icon:"ℹ️",duration:3500,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #3B82F6",borderRadius:"12px",padding:"16px"},...t}),warning:(e,t={})=>gt(e,{icon:"⚠️",duration:4e3,style:{background:"#FEF3C7",color:"#92400E",border:"1px solid #F59E0B",borderRadius:"12px",padding:"16px"},...t}),cart:(e,t={})=>gt.success(e,{icon:"🛒",duration:3e3,style:{background:"#F0F9FF",color:"#0C4A6E",border:"1px solid #0EA5E9",borderRadius:"12px",padding:"16px"},...t}),loading:(e,t={})=>gt.loading(e,{style:{background:"#F9FAFB",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"12px",padding:"16px"},...t})},nm=()=>{const[e]=dr(),t=He(),n=wt(),[i,a]=m.useState("processing");return m.useEffect(()=>{(async()=>{try{const o=e.get("code"),l=e.get("state"),c=e.get("error");if(console.log("WeChat callback received:",{code:o,state:l,error:c}),c)throw new Error(`WeChat OAuth error: ${c}`);if(!o)throw new Error("Authorization code not received from WeChat");if(o==="dev_mock_code"){console.log("🧪 Processing development mode authentication");const u=localStorage.getItem("wechat_auth_user");if(u){const h=JSON.parse(u);console.log("✅ Dev authentication successful:",h),t({type:"auth/authenticateWithWeChat/fulfilled",payload:h}),a("success"),ne.success(`Welcome ${h.name}! (Dev Mode)`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),ne.info("You can now add items to your cart"),setTimeout(()=>n("/foods",{replace:!0}),1500)):setTimeout(()=>n("/foods",{replace:!0}),1500);return}}a("processing");const d=await t(nn(o)).unwrap();console.log("✅ WeChat authentication successful:",d),a("success"),ne.success(`Welcome ${d.name||"User"}!`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),ne.info("You can now add items to your cart!"),setTimeout(()=>{window.history.back()||n("/foods")},1500)):setTimeout(()=>{n("/")},1500)}catch(o){console.error("❌ WeChat authentication failed:",o),a("error"),ne.error(o.message||"Authentication failed"),setTimeout(()=>{n("/")},3e3)}})()},[e,t,n]),s.jsx("div",{className:"wechat-callback-page",children:s.jsx("div",{className:"container py-5",children:s.jsxs("div",{className:"text-center",children:[i==="processing"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"spinner-border text-success mb-3",role:"status",children:s.jsx("span",{className:"visually-hidden",children:"Loading..."})}),s.jsx("h2",{children:"Processing WeChat Authentication..."}),s.jsx("p",{className:"text-muted",children:"Please wait while we sign you in."})]}),i==="success"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-success mb-3",children:s.jsx("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:s.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.061L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),s.jsx("h2",{children:"Authentication Successful!"}),s.jsx("p",{className:"text-muted",children:"Redirecting you now..."})]}),i==="error"&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"text-danger mb-3",children:s.jsxs("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:[s.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),s.jsx("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]})}),s.jsx("h2",{children:"Authentication Failed"}),s.jsx("p",{className:"text-muted",children:"Something went wrong. Redirecting to home..."})]})]})})})},im="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='1024'%20height='1024'%20viewBox='0%200%20500%20500'%3e%3crect%20x='0'%20y='0'%20width='500'%20height='500'%20fill='%23ffffff'/%3e%3cg%20transform='scale(18.519)'%3e%3cg%20transform='translate(1,1)'%3e%3cg%3e%3cg%20transform='translate(3.5,3.5)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(21.5,3.5)'%3e%3cg%20transform='rotate(90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(3.5,21.5)'%3e%3cg%20transform='rotate(-90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20fill-rule='evenodd'%20d='M9%200L9%202L8%202L8%208L10%208L10%209L9%209L9%2011L8%2011L8%2013L7%2013L7%2012L5%2012L5%2013L4%2013L4%2012L2%2012L2%2013L3%2013L3%2014L4%2014L4%2015L5%2015L5%2016L6%2016L6%2017L7%2017L7%2016L8%2016L8%2018L9%2018L9%2012L10%2012L10%2013L12%2013L12%2017L10%2017L10%2018L12%2018L12%2019L11%2019L11%2020L12%2020L12%2022L13%2022L13%2023L11%2023L11%2024L12%2024L12%2025L13%2025L13%2023L14%2023L14%2024L15%2024L15%2021L16%2021L16%2022L17%2022L17%2024L22%2024L22%2025L25%2025L25%2024L24%2024L24%2023L25%2023L25%2021L23%2021L23%2022L22%2022L22%2023L21%2023L21%2021L22%2021L22%2019L25%2019L25%2015L23%2015L23%2014L22%2014L22%2015L23%2015L23%2016L24%2016L24%2018L22%2018L22%2019L21%2019L21%2017L22%2017L22%2016L15%2016L15%2013L16%2013L16%2014L17%2014L17%2015L19%2015L19%2014L20%2014L20%2015L21%2015L21%2013L22%2013L22%2012L18%2012L18%2011L19%2011L19%2010L20%2010L20%2011L21%2011L21%209L23%209L23%208L18%208L18%209L17%209L17%2010L16%2010L16%208L17%208L17%206L16%206L16%204L17%204L17%202L16%202L16%201L17%201L17%200L16%200L16%201L15%201L15%200L14%200L14%201L13%201L13%200L12%200L12%202L16%202L16%203L14%203L14%205L13%205L13%203L9%203L9%202L11%202L11%201L10%201L10%200ZM9%204L9%207L10%207L10%208L12%208L12%209L13%209L13%2011L12%2011L12%2010L11%2010L11%2011L12%2011L12%2012L13%2012L13%2014L14%2014L14%2013L15%2013L15%2012L16%2012L16%2013L17%2013L17%2014L19%2014L19%2013L17%2013L17%2012L16%2012L16%2011L15%2011L15%2012L13%2012L13%2011L14%2011L14%209L13%209L13%207L14%207L14%208L16%208L16%206L15%206L15%205L14%205L14%206L13%206L13%205L12%205L12%204L11%204L11%207L10%207L10%204ZM12%206L12%207L13%207L13%206ZM14%206L14%207L15%207L15%206ZM0%208L0%209L1%209L1%2010L0%2010L0%2017L1%2017L1%2010L2%2010L2%2011L5%2011L5%2010L3%2010L3%209L7%209L7%2010L6%2010L6%2011L7%2011L7%2010L8%2010L8%209L7%209L7%208L2%208L2%209L1%209L1%208ZM18%209L18%2010L19%2010L19%209ZM24%209L24%2010L25%2010L25%209ZM22%2010L22%2011L23%2011L23%2010ZM23%2012L23%2013L24%2013L24%2014L25%2014L25%2012ZM5%2013L5%2015L6%2015L6%2016L7%2016L7%2015L8%2015L8%2014L7%2014L7%2013ZM6%2014L6%2015L7%2015L7%2014ZM10%2014L10%2016L11%2016L11%2014ZM2%2015L2%2017L3%2017L3%2015ZM13%2015L13%2016L14%2016L14%2015ZM12%2017L12%2018L13%2018L13%2019L12%2019L12%2020L14%2020L14%2021L13%2021L13%2022L14%2022L14%2021L15%2021L15%2020L16%2020L16%2017ZM17%2017L17%2020L20%2020L20%2017ZM14%2018L14%2019L15%2019L15%2018ZM18%2018L18%2019L19%2019L19%2018ZM8%2019L8%2023L9%2023L9%2024L8%2024L8%2025L10%2025L10%2022L11%2022L11%2021L10%2021L10%2022L9%2022L9%2020L10%2020L10%2019ZM17%2021L17%2022L19%2022L19%2023L20%2023L20%2021ZM23%2022L23%2023L22%2023L22%2024L23%2024L23%2023L24%2023L24%2022Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";var ts={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(_s,function(){var n=1e3,i=6e4,a=36e5,r="millisecond",o="second",l="minute",c="hour",d="day",p="week",u="month",h="quarter",f="year",v="date",D="Invalid Date",T=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,_=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(S){var y=["th","st","nd","rd"],R=S%100;return"["+S+(y[(R-20)%10]||y[R]||y[0])+"]"}},w=function(S,y,R){var E=String(S);return!E||E.length>=y?S:""+Array(y+1-E.length).join(R)+S},k={s:w,z:function(S){var y=-S.utcOffset(),R=Math.abs(y),E=Math.floor(R/60),A=R%60;return(y<=0?"+":"-")+w(E,2,"0")+":"+w(A,2,"0")},m:function S(y,R){if(y.date()<R.date())return-S(R,y);var E=12*(R.year()-y.year())+(R.month()-y.month()),A=y.clone().add(E,u),F=R-A<0,U=y.clone().add(E+(F?-1:1),u);return+(-(E+(R-A)/(F?A-U:U-A))||0)},a:function(S){return S<0?Math.ceil(S)||0:Math.floor(S)},p:function(S){return{M:u,y:f,w:p,d,D:v,h:c,m:l,s:o,ms:r,Q:h}[S]||String(S||"").toLowerCase().replace(/s$/,"")},u:function(S){return S===void 0}},x="en",j={};j[x]=q;var L="$isDayjsObject",$=function(S){return S instanceof z||!(!S||!S[L])},g=function S(y,R,E){var A;if(!y)return x;if(typeof y=="string"){var F=y.toLowerCase();j[F]&&(A=F),R&&(j[F]=R,A=F);var U=y.split("-");if(!A&&U.length>1)return S(U[0])}else{var W=y.name;j[W]=y,A=W}return!E&&A&&(x=A),A||!E&&x},I=function(S,y){if($(S))return S.clone();var R=typeof y=="object"?y:{};return R.date=S,R.args=arguments,new z(R)},b=k;b.l=g,b.i=$,b.w=function(S,y){return I(S,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var z=function(){function S(R){this.$L=g(R.locale,null,!0),this.parse(R),this.$x=this.$x||R.x||{},this[L]=!0}var y=S.prototype;return y.parse=function(R){this.$d=function(E){var A=E.date,F=E.utc;if(A===null)return new Date(NaN);if(b.u(A))return new Date;if(A instanceof Date)return new Date(A);if(typeof A=="string"&&!/Z$/i.test(A)){var U=A.match(T);if(U){var W=U[2]-1||0,H=(U[7]||"0").substring(0,3);return F?new Date(Date.UTC(U[1],W,U[3]||1,U[4]||0,U[5]||0,U[6]||0,H)):new Date(U[1],W,U[3]||1,U[4]||0,U[5]||0,U[6]||0,H)}}return new Date(A)}(R),this.init()},y.init=function(){var R=this.$d;this.$y=R.getFullYear(),this.$M=R.getMonth(),this.$D=R.getDate(),this.$W=R.getDay(),this.$H=R.getHours(),this.$m=R.getMinutes(),this.$s=R.getSeconds(),this.$ms=R.getMilliseconds()},y.$utils=function(){return b},y.isValid=function(){return this.$d.toString()!==D},y.isSame=function(R,E){var A=I(R);return this.startOf(E)<=A&&A<=this.endOf(E)},y.isAfter=function(R,E){return I(R)<this.startOf(E)},y.isBefore=function(R,E){return this.endOf(E)<I(R)},y.$g=function(R,E,A){return b.u(R)?this[E]:this.set(A,R)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(R,E){var A=this,F=!!b.u(E)||E,U=b.p(R),W=function(ee,M){var C=b.w(A.$u?Date.UTC(A.$y,M,ee):new Date(A.$y,M,ee),A);return F?C:C.endOf(d)},H=function(ee,M){return b.w(A.toDate()[ee].apply(A.toDate("s"),(F?[0,0,0,0]:[23,59,59,999]).slice(M)),A)},J=this.$W,X=this.$M,O=this.$D,Y="set"+(this.$u?"UTC":"");switch(U){case f:return F?W(1,0):W(31,11);case u:return F?W(1,X):W(0,X+1);case p:var N=this.$locale().weekStart||0,V=(J<N?J+7:J)-N;return W(F?O-V:O+(6-V),X);case d:case v:return H(Y+"Hours",0);case c:return H(Y+"Minutes",1);case l:return H(Y+"Seconds",2);case o:return H(Y+"Milliseconds",3);default:return this.clone()}},y.endOf=function(R){return this.startOf(R,!1)},y.$set=function(R,E){var A,F=b.p(R),U="set"+(this.$u?"UTC":""),W=(A={},A[d]=U+"Date",A[v]=U+"Date",A[u]=U+"Month",A[f]=U+"FullYear",A[c]=U+"Hours",A[l]=U+"Minutes",A[o]=U+"Seconds",A[r]=U+"Milliseconds",A)[F],H=F===d?this.$D+(E-this.$W):E;if(F===u||F===f){var J=this.clone().set(v,1);J.$d[W](H),J.init(),this.$d=J.set(v,Math.min(this.$D,J.daysInMonth())).$d}else W&&this.$d[W](H);return this.init(),this},y.set=function(R,E){return this.clone().$set(R,E)},y.get=function(R){return this[b.p(R)]()},y.add=function(R,E){var A,F=this;R=Number(R);var U=b.p(E),W=function(X){var O=I(F);return b.w(O.date(O.date()+Math.round(X*R)),F)};if(U===u)return this.set(u,this.$M+R);if(U===f)return this.set(f,this.$y+R);if(U===d)return W(1);if(U===p)return W(7);var H=(A={},A[l]=i,A[c]=a,A[o]=n,A)[U]||1,J=this.$d.getTime()+R*H;return b.w(J,this)},y.subtract=function(R,E){return this.add(-1*R,E)},y.format=function(R){var E=this,A=this.$locale();if(!this.isValid())return A.invalidDate||D;var F=R||"YYYY-MM-DDTHH:mm:ssZ",U=b.z(this),W=this.$H,H=this.$m,J=this.$M,X=A.weekdays,O=A.months,Y=A.meridiem,N=function(M,C,G,Q){return M&&(M[C]||M(E,F))||G[C].slice(0,Q)},V=function(M){return b.s(W%12||12,M,"0")},ee=Y||function(M,C,G){var Q=M<12?"AM":"PM";return G?Q.toLowerCase():Q};return F.replace(_,function(M,C){return C||function(G){switch(G){case"YY":return String(E.$y).slice(-2);case"YYYY":return b.s(E.$y,4,"0");case"M":return J+1;case"MM":return b.s(J+1,2,"0");case"MMM":return N(A.monthsShort,J,O,3);case"MMMM":return N(O,J);case"D":return E.$D;case"DD":return b.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return N(A.weekdaysMin,E.$W,X,2);case"ddd":return N(A.weekdaysShort,E.$W,X,3);case"dddd":return X[E.$W];case"H":return String(W);case"HH":return b.s(W,2,"0");case"h":return V(1);case"hh":return V(2);case"a":return ee(W,H,!0);case"A":return ee(W,H,!1);case"m":return String(H);case"mm":return b.s(H,2,"0");case"s":return String(E.$s);case"ss":return b.s(E.$s,2,"0");case"SSS":return b.s(E.$ms,3,"0");case"Z":return U}return null}(M)||U.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(R,E,A){var F,U=this,W=b.p(E),H=I(R),J=(H.utcOffset()-this.utcOffset())*i,X=this-H,O=function(){return b.m(U,H)};switch(W){case f:F=O()/12;break;case u:F=O();break;case h:F=O()/3;break;case p:F=(X-J)/6048e5;break;case d:F=(X-J)/864e5;break;case c:F=X/a;break;case l:F=X/i;break;case o:F=X/n;break;default:F=X}return A?F:b.a(F)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return j[this.$L]},y.locale=function(R,E){if(!R)return this.$L;var A=this.clone(),F=g(R,E,!0);return F&&(A.$L=F),A},y.clone=function(){return b.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},S}(),P=z.prototype;return I.prototype=P,[["$ms",r],["$s",o],["$m",l],["$H",c],["$W",d],["$M",u],["$y",f],["$D",v]].forEach(function(S){P[S[1]]=function(y){return this.$g(y,S[0],S[1])}}),I.extend=function(S,y){return S.$i||(S(y,z,I),S.$i=!0),I},I.locale=g,I.isDayjs=$,I.unix=function(S){return I(1e3*S)},I.en=j[x],I.Ls=j,I.p={},I})})(ts);var am=ts.exports;const Z=ur(am);function ns(e){const[t,n]=m.useState(null),[i,a]=m.useState([]),[r,o]=m.useState(!0),[l,c]=m.useState(null);return m.useEffect(()=>{async function d(){if(!e){o(!1);return}console.log(`[useKitchenWithFoods] Fetching kitchen: ${e}`);try{o(!0),c(null);const{kitchen:p,foods:u}=await _f(e);n(p),a(u),console.log(`[useKitchenWithFoods] Loaded kitchen with ${u.length} foods`)}catch(p){console.error("[useKitchenWithFoods] Error:",p),c(p.message)}finally{o(!1)}}d()},[e]),{kitchen:t,foods:i,loading:r,error:l,hasData:!!t&&i.length>0}}function rm(e=10){const[t,n]=m.useState([]),[i,a]=m.useState(!0),[r,o]=m.useState(null);m.useEffect(()=>{async function d(){console.log(`[useAllKitchensWithFoods] Fetching up to ${e} kitchens`);try{a(!0),o(null);const p=await Af(e);n(p);const u=p.reduce((h,f)=>h+f.foods.length,0);console.log(`[useAllKitchensWithFoods] Loaded ${p.length} kitchens with ${u} total foods`)}catch(p){console.error("[useAllKitchensWithFoods] Error:",p),o(p.message)}finally{a(!1)}}d()},[e]);const l=t.reduce((d,p)=>[...d,...p.foods],[]),c=t.length>0?t[0].kitchen:null;return{kitchensData:t,allFoods:l,primaryKitchen:c,loading:i,error:r,hasData:t.length>0,totalKitchens:t.length,totalFoods:l.length}}const om="modulepreload",sm=function(e){return"/"+e},qa={},is=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),l=(o==null?void 0:o.nonce)||(o==null?void 0:o.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=sm(c),c in qa)return;qa[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":om,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((h,f)=>{u.addEventListener("load",h),u.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${c}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return a.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},as=(e,{foodId:t,selectedDate:n,specialInstructions:i=""})=>e.find(a=>a.foodId===t&&a.selectedDate===n&&(a.specialInstructions||"").trim()===i.trim()),lm=(e,t,n=null)=>e.filter(i=>i.foodId===t&&(!n||i.selectedDate===n)).reduce((i,a)=>i+a.quantity,0),rs=async({food:e,kitchen:t,quantity:n=1,selectedDate:i=null,selectedTime:a=null,specialInstructions:r="",isPreOrder:o=!1,pickupDetails:l=null},c,d,p,u=null)=>{try{const h=as(p,{foodId:e.id,selectedDate:i,specialInstructions:r});if(h){const T=h.quantity+n,_=`Updated ${e.name} in cart (quantity: ${h.quantity} → ${T})`;try{if(u)await c(u({cartItemId:h.id,quantity:T,specialInstructions:r.trim()}));else{const{updateCartItem:q}=await is(async()=>{const{updateCartItem:w}=await Promise.resolve().then(()=>Qo);return{updateCartItem:w}},void 0);await c(q({cartItemId:h.id,quantity:T,specialInstructions:r.trim()}))}return ne.success(_),{success:!0,isExisting:!0,existingQuantity:h.quantity,newQuantity:T,message:_}}catch(q){console.warn("Failed to update existing item, adding as new item:",q)}}const f=l||cm(i,o,a),v={foodId:e.id,kitchenId:e.kitchenId||(t==null?void 0:t.id),quantity:n,selectedDate:i,specialInstructions:r.trim(),orderType:o?"PRE_ORDER":"GO_GRAB",food:{id:e.id,name:e.name,cost:e.cost,price:e.price||e.cost,imageUrl:e.imageUrl,description:e.description||"This dish features tender, juicy flavors",...e},kitchen:{id:(t==null?void 0:t.id)||e.kitchenId,name:(t==null?void 0:t.name)||e.kitchenName||"Unknown Kitchen",address:t==null?void 0:t.address,...t},pickupDetails:f},D=await c(d(v));return ne.cart(`Added ${e.name} to cart!`),{success:!0,isExisting:!1,message:`Added ${e.name} to cart!`,result:D}}catch(h){console.error("Error adding to cart:",h);const f=h.message||"Failed to add item to cart";return ne.error(f),{success:!1,isExisting:!1,message:f,error:h}}},os=async({food:e,selectedDate:t=null,specialInstructions:n="",quantity:i=1},a,r,o)=>{try{const l=as(o,{foodId:e.id,selectedDate:t,specialInstructions:n});if(!l)throw new Error("Item not found in cart");if(i>0&&l.quantity>i){const{updateCartItem:c}=await is(async()=>{const{updateCartItem:p}=await Promise.resolve().then(()=>Qo);return{updateCartItem:p}},void 0),d=l.quantity-i;return await a(c({cartItemId:l.id,quantity:d,specialInstructions:l.specialInstructions})),ne.info(`Removed ${i} ${e.name} from cart`),{success:!0,message:`Removed ${i} ${e.name} from cart`}}else return await a(r(l.id)),ne.info(`Removed ${e.name} from cart`),{success:!0,message:`Removed ${e.name} from cart`}}catch(l){console.error("Error removing from cart:",l);const c=l.message||"Failed to remove item from cart";return ne.error(c),{success:!1,message:c,error:l}}},cm=(e=null,t=!1,n=null)=>{if(!t||!e){const i=new Date,a=n||new Date(i.getTime()+30*60*1e3).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0});return{date:i.toISOString().split("T")[0],time:a,display:`Today at ${a}`,orderType:"Go&Grab"}}else{const i=new Date(e),a=n||"6:30 PM",r=new Date;r.setHours(0,0,0,0),i.setHours(0,0,0,0);const l=i.getTime()===r.getTime()?"Go&Grab":"Pre-Order";return{date:e,time:a,display:`${i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})} at ${a}`,orderType:l}}},dm=async({food:e,kitchen:t,newQuantity:n,currentQuantity:i,selectedDate:a=null,selectedTime:r=null,specialInstructions:o="",isPreOrder:l=!1},c,d,p,u,h=null)=>{try{if(n>i){const f=n-i;return await rs({food:e,kitchen:t,quantity:f,selectedDate:a,selectedTime:r,specialInstructions:o,isPreOrder:l},c,d,u,h)}else if(n<i){const f=i-n;return await os({food:e,selectedDate:a,specialInstructions:o,quantity:f},c,p,u)}return{success:!0,message:"Quantity unchanged"}}catch(f){return console.error("Error changing quantity:",f),{success:!1,message:f.message||"Failed to update quantity",error:f}}},ss=()=>{const e=He(),t=we(l=>l.cart.items),n=we(l=>l.auth.isAuthenticated);return{cartItems:t,isAuthenticated:n,getCartQuantity:(l,c=null)=>lm(t,l,c),addToCartWithCheck:async l=>n?await rs(l,e,Ke,t,gn):{success:!1,message:"Please sign in with WeChat to add items to cart",requiresAuth:!0},removeFromCartGeneric:async l=>await os(l,e,st,t),handleQuantityChange:async l=>n?await dm(l,e,Ke,st,t,gn):{success:!1,message:"Please sign in with WeChat to modify cart",requiresAuth:!0},dispatch:e,addToCart:Ke,removeFromCart:st}},Nt=({food:e=null,kitchen:t=null,selectedDate:n=null,initialQuantity:i=1,maxQuantity:a=99,minQuantity:r=1,onQuantityChange:o=()=>{},onAvailabilityChange:l=()=>{},onError:c=()=>{},onWarning:d=()=>{},showAvailabilityInfo:p=!0,showErrorMessages:u=!0,size:h="medium",className:f="",disabled:v=!1})=>{console.log("QuantitySelector render params:",{showAvailabilityInfo:p,showErrorMessages:u});const[D,T]=m.useState(i),[_,q]=m.useState({isAvailable:!0,maxAvailable:a,orderType:n?"PRE_ORDER":"GO_GRAB",message:null,warning:null,actualCheckingDate:n}),w=m.useCallback(()=>{var I,b,z,P,S,y;if(console.log("🔍 AVAILABILITY CALCULATION START"),console.log("DEBUG - Availability calculation:",{foodId:e==null?void 0:e.id,foodName:e==null?void 0:e.name,kitchenId:t==null?void 0:t.id,kitchenName:t==null?void 0:t.name,selectedDate:n,hasFood:!!e,hasKitchen:!!t,hasPreorderSchedule:!!((I=t==null?void 0:t.preorderSchedule)!=null&&I.dates)}),!e)return console.log("DEBUG - No food object"),{isAvailable:!1,maxAvailable:0,orderType:n?"PRE_ORDER":"GO_GRAB",message:"Food item not found",warning:null,actualCheckingDate:n};const g=Z().startOf("day");if(n){console.log("🚀 ~ QuantitySelector ~ selectedDate received:",n),console.log("🚀 ~ QuantitySelector ~ selectedDate type:",typeof n);const R=Z(n).startOf("day");if(console.log("🚀 ~ QuantitySelector ~ orderDate:",R.format()),console.log("🚀 ~ QuantitySelector ~ today:",g.format()),console.log("🚀 ~ QuantitySelector ~ orderDate > today:",R.isAfter(g)),console.log("🚀 ~ QuantitySelector ~ orderDate === today:",R.isSame(g,"day")),console.log("🚀 ~ QuantitySelector ~ orderDate < today (isPast):",R.isBefore(g,"day")),R.isAfter(g)){const E="PRE_ORDER";if(console.log("DEBUG - Future date PRE_ORDER case"),!((b=t==null?void 0:t.preorderSchedule)!=null&&b.dates))return console.log("DEBUG - No preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Pre-orders not available for this kitchen",warning:null,actualCheckingDate:n};const A=n.includes("-")?n:Z(n).format("YYYY-MM-DD");console.log("🚀 ~ QuantitySelector ~ dateKey:",A),console.log("🚀 ~ QuantitySelector ~ selectedDate:",n),console.log("🚀 ~ QuantitySelector ~ kitchen.preorderSchedule.dates:",t.preorderSchedule.dates),console.log("🚀 ~ QuantitySelector ~ Available dates:",Object.keys(t.preorderSchedule.dates));const F=t.preorderSchedule.dates[A];if(console.log("DEBUG - Date lookup:",{dateKey:A,hasScheduleForDate:!!F,scheduleForDate:F,availableDates:Object.keys(t.preorderSchedule.dates)}),!F||!Array.isArray(F))return console.log("DEBUG - No schedule found for date"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Not available for pre-order on selected date",warning:null};const U=F.find(W=>W.foodItemId===e.id);if(console.log("🚀 ~ QuantitySelector ~ foodSchedule:",U),console.log("🚀 ~ QuantitySelector ~ food.id:",e.id),console.log("🚀 ~ QuantitySelector ~ food object:",e),console.log("DEBUG - Food schedule lookup:",{foodId:e.id,foodSchedule:U,allItemsInSchedule:F.map(W=>({id:W.foodItemId,name:W.nameOfFood}))}),!U)return console.log("DEBUG - Food not found in schedule"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"This item is not available for pre-order on selected date",warning:null};if(console.log("DEBUG - Food schedule details:",{isLimitedOrder:U.isLimitedOrder,numOfAvailableItems:U.numOfAvailableItems,availableTimes:U.availableTimes}),U.isLimitedOrder===!1){const W=U.numOfAvailableItems||0;return console.log("DEBUG - Limited order case:",{availableItems:W}),W<=0?{isAvailable:!1,maxAvailable:0,orderType:E,message:"Sold out for pre-order on selected date",warning:null}:(console.log("Math.min(availableItems, maxQuantity)",Math.min(W,a)),{isAvailable:!0,maxAvailable:Math.min(W,a),orderType:E,message:null,warning:W<5?`Only ${W} left for pre-order`:null})}else return console.log("DEBUG - Unlimited order case"),{isAvailable:!0,maxAvailable:a,orderType:E,message:null,warning:null}}else if(R.isSame(g,"day")){if(console.log("DEBUG - Today's date - checking both GO_GRAB and PRE_ORDER"),(z=t==null?void 0:t.preorderSchedule)!=null&&z.dates){const F=n.includes("-")?n:Z(n).format("YYYY-MM-DD");console.log("DEBUG - Today's date - dateKey:",F);const U=t.preorderSchedule.dates[F];if(U&&Array.isArray(U)){const W=U.find(H=>H.foodItemId===e.id);if(console.log("DEBUG - Today's date - foodSchedule found:",!!W,W),W){console.log("DEBUG - Today's date found in preorder schedule - using PRE_ORDER logic");const H="PRE_ORDER";if(W.isLimitedOrder===!1){const J=W.numOfAvailableItems||0;return console.log("DEBUG - Today PRE_ORDER limited case:",{availableItems:J}),J<=0?{isAvailable:!1,maxAvailable:0,orderType:H,message:"Sold out for today",warning:null}:{isAvailable:!0,maxAvailable:Math.min(J,a),orderType:H,message:null,warning:J<5?`Only ${J} left`:null}}else return console.log("DEBUG - Today PRE_ORDER unlimited case"),{isAvailable:!0,maxAvailable:a,orderType:H,message:null,warning:null}}}}console.log("DEBUG - Today's date - no preorder schedule, falling back to GO_GRAB");const E="GO_GRAB",A=((P=e.availability)==null?void 0:P.numAvailable)||e.numAvailable||0;return console.log("DEBUG - Today's date GO_GRAB fallback:",{numAvailable:A}),A<=0?{isAvailable:!1,maxAvailable:0,orderType:E,message:"Not available",warning:null}:{isAvailable:!0,maxAvailable:Math.min(A,a),orderType:E,message:null,warning:A<5?`Only ${A} left`:null}}else{console.log("🚨 PAST PRE-ORDER DATE DETECTED! 🚨"),console.log("DEBUG - Past pre-order date, checking current date in preorder schedule"),console.log("DEBUG - Selected date was:",n,"which is",R.format()),console.log("DEBUG - Current date is:",g.format()),console.log("DEBUG - Days difference:",g.diff(R,"day"),"days in the past"),console.log("DEBUG - Since selectedDate provided, maintaining PRE_ORDER type and checking today's preorder schedule");const E="PRE_ORDER",A=g.format("YYYY-MM-DD");if(console.log("DEBUG - Looking for today's date in preorder schedule:",A),!((S=t==null?void 0:t.preorderSchedule)!=null&&S.dates))return console.log("❌ DEBUG - No preorder schedule available"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Sold Out",warning:null,actualCheckingDate:A};const F=t.preorderSchedule.dates[A];if(console.log("DEBUG - Today's preorder schedule:",F),!F||!Array.isArray(F))return console.log("❌ DEBUG - No preorder schedule for today, item sold out"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Sold Out",warning:null,actualCheckingDate:A};const U=F.find(W=>W.foodItemId===e.id);if(console.log("DEBUG - Food found in today's preorder schedule:",!!U,U),!U)return console.log("❌ DEBUG - Food not available in today's preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Sold Out",warning:null,actualCheckingDate:A};if(U.isLimitedOrder===!1){const W=U.numOfAvailableItems||0;return console.log("DEBUG - Past date, today's limited preorder case:",{availableItems:W}),W<=0?(console.log("❌ DEBUG - Past pre-order date: Item SOLD OUT for current date in preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:E,message:"Sold Out",warning:null,actualCheckingDate:A}):(console.log("✅ DEBUG - Past pre-order date: Item AVAILABLE for current date in preorder schedule, quantity:",W),{isAvailable:!0,maxAvailable:Math.min(W,a),orderType:E,message:null,warning:W<5?`Only ${W} left`:null,actualCheckingDate:A})}else return console.log("✅ DEBUG - Past pre-order date: Item AVAILABLE (unlimited) for current date in preorder schedule"),{isAvailable:!0,maxAvailable:a,orderType:E,message:null,warning:null,actualCheckingDate:A}}}else{const R="GO_GRAB",E=((y=e.availability)==null?void 0:y.numAvailable)||e.numAvailable||0;return console.log("DEBUG - No date GO_GRAB:",{numAvailable:E}),E<=0?{isAvailable:!1,maxAvailable:0,orderType:R,message:"Sold Out",warning:null,actualCheckingDate:null}:{isAvailable:!0,maxAvailable:Math.min(E,a),orderType:R,message:null,warning:E<5?`Only ${E} left`:null,actualCheckingDate:null}}},[e,t,n,a]),k=m.useMemo(()=>w(),[w]);console.log("DEBUG - Current availability:",k),m.useEffect(()=>{(k.isAvailable!==_.isAvailable||k.maxAvailable!==_.maxAvailable||k.orderType!==_.orderType||k.message!==_.message||k.warning!==_.warning||k.actualCheckingDate!==_.actualCheckingDate)&&q(k)},[k,_]);const x=m.useCallback(g=>{console.log("🔥 QuantitySelector handleQuantityChange called with:",g),console.log("🔥 Current state:",{quantity:D,minQuantity:r,maxAvailable:_.maxAvailable});const I=Math.max(r,Math.min(g,_.maxAvailable));if(console.log("🔥 Valid quantity calculated:",I),I!==D){if(console.log("🔥 Setting new quantity:",I),T(I),console.log("🔥 Calling parent onQuantityChange with:",I),o(I),g>_.maxAvailable){const b=`Maximum available quantity is ${_.maxAvailable}`;c(b)}else if(g<r){const b=`Minimum quantity is ${r}`;c(b)}}else console.log("🔥 Quantity unchanged, skipping update")},[D,_.maxAvailable,r,o,c]);m.useEffect(()=>{l(_),_.warning&&d(_.warning),_.message&&!_.isAvailable&&c(_.message)},[_,l,d,c]),m.useEffect(()=>{i!==D&&i>=r&&D===1&&(console.log("🔥 INITIAL QUANTITY EFFECT: Setting quantity to:",i),T(i))},[i,r]);const j=m.useCallback(()=>{console.log("🔥 INCREMENT CLICKED!",{disabled:v,availabilityStatus:_.isAvailable,quantity:D}),!v&&_.isAvailable?(console.log("🔥 INCREMENT: Calling handleQuantityChange with:",D+1),x(D+1)):console.log("🔥 INCREMENT BLOCKED:",{disabled:v,isAvailable:_.isAvailable})},[v,_.isAvailable,D,x]),L=m.useCallback(()=>{console.log("🔥 DECREMENT CLICKED!",{disabled:v,quantity:D,minQuantity:r}),!v&&D>r?(console.log("🔥 DECREMENT: Calling handleQuantityChange with:",D-1),x(D-1)):console.log("🔥 DECREMENT BLOCKED:",{disabled:v,quantity:D,minQuantity:r})},[v,D,r,x]),$=["quantity-selector",`quantity-selector--${h}`,f,v&&"quantity-selector--disabled",!_.isAvailable&&"quantity-selector--unavailable"].filter(Boolean).join(" ");return s.jsx("div",{className:$,children:s.jsxs("div",{className:"quantity-selector__controls",children:[s.jsx("div",{className:"quantity-selector__display",children:s.jsx("span",{className:"quantity-number",children:D})}),s.jsxs("div",{className:"quantity-selector__buttons",children:[s.jsx("button",{type:"button",className:"quantity-btn quantity-btn--decrement",onClick:L,disabled:v||D<=r,"aria-label":"Decrease quantity",children:s.jsx("svg",{width:"13",height:"2",viewBox:"0 0 13 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("rect",{x:"0.887695",width:"11.6854",height:"1.46067",fill:"currentColor"})})}),s.jsx("button",{type:"button",className:"quantity-btn quantity-btn--increment",onClick:j,disabled:v||!_.isAvailable||D>=_.maxAvailable,"aria-label":"Increase quantity",children:s.jsxs("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M0.707673 5.27007H12.3931V6.73075H0.707673V5.27007Z",fill:"currentColor"}),s.jsx("path",{d:"M7.28071 0.157715L7.28071 11.8431H5.82003L5.82003 0.157715L7.28071 0.157715Z",fill:"currentColor"})]})})]})]})})};function ls({isLoading:e=!0,text:t="Loading...",overlay:n=!0,size:i="medium"}){if(!e)return null;const a={small:"spinner-sm",medium:"spinner-md",large:"spinner-lg"},r=()=>s.jsx("div",{className:`mobile-loader-content ${n?"overlay":"inline"}`,children:s.jsxs("div",{className:"loader-spinner-wrapper",children:[s.jsxs("div",{className:`custom-spinner ${a[i]}`,children:[s.jsx("div",{className:"spinner-ring"}),s.jsx("div",{className:"spinner-ring"}),s.jsx("div",{className:"spinner-ring"})]}),t&&s.jsx("p",{className:"loader-text",children:t})]})});return n?s.jsx("div",{className:"mobile-loader-overlay",children:s.jsx(r,{})}):s.jsx(r,{})}const ki=({food:e,kitchen:t,orderType:n="GO_GRAB",selectedDate:i=null,selectedTime:a=null,onDateChange:r=()=>{},onTimeChange:o=()=>{},disabled:l=!1,showTimeFirst:c=!1,className:d="",dateLabel:p="Pick up date:",timeLabel:u="Pick up time:",style:h={}})=>{const[f,v]=m.useState(i),[D,T]=m.useState(a);m.useEffect(()=>{v(i)},[i]),m.useEffect(()=>{T(a)},[a]);const _=m.useMemo(()=>{var $;const L=Z().startOf("day");if(console.log("🗓️ DateTimePicker - Calculating available dates:",{orderType:n,today:L.format("YYYY-MM-DD"),foodId:e==null?void 0:e.id}),n==="GO_GRAB")return[{date:L.format("YYYY-MM-DD"),display:`${L.format("MMM D, YYYY")} (Today)`,dayjs:L,isToday:!0,isAvailable:!0}];if(n==="PRE_ORDER"){if(!(($=t==null?void 0:t.preorderSchedule)!=null&&$.dates))return[];const g=Object.entries(t.preorderSchedule.dates),I=[];g.forEach(([z,P])=>{const S=Z(z);if(S.isBefore(L,"day"))return;if(P.some(R=>R.foodItemId===(e==null?void 0:e.id))){const R=S.format("dddd"),E=S.isSame(L,"day"),A=S.isSame(L.add(1,"day"),"day");let F;E?F=`${S.format("MMM D, YYYY")} (Today)`:A?F=`${S.format("MMM D, YYYY")} (Tomorrow)`:F=`${R}, ${S.format("MMM D, YYYY")}`,I.push({date:z,display:F,dayjs:S,isToday:E,isAvailable:!0,scheduleItems:P.filter(U=>U.foodItemId===(e==null?void 0:e.id))})}});const b=I.sort((z,P)=>z.dayjs.diff(P.dayjs));return console.log("🗓️ DateTimePicker - Pre-order dates found:",b.map(z=>({date:z.date,display:z.display,isToday:z.isToday}))),b}return[]},[n,t,e]),q=m.useMemo(()=>{var L;if(!f)return[];if(n==="GO_GRAB"){const $=Z(),g=Z(f),I=9,b=21,z=[];let P;if(g.isSame($,"day")){P=$.add(30,"minutes");const y=P.minute(),R=Math.ceil(y/15)*15;P=P.minute(R).second(0),P.minute()===60&&(P=P.add(1,"hour").minute(0))}else P=g.hour(I).minute(0).second(0);let S=P;for(;S.hour()<b||S.hour()===b&&S.minute()===0;)z.push({value:S.format("h:mm A"),display:S.format("h:mm A"),dayjs:S,isAvailable:!0}),S=S.add(15,"minutes");return z}else if(n==="PRE_ORDER"){const $=_.find(b=>b.date===f);if(!((L=$==null?void 0:$.scheduleItems)!=null&&L.length))return[];const g=[];$.scheduleItems.forEach(b=>{b.availableTimes&&Array.isArray(b.availableTimes)&&b.availableTimes.forEach(z=>{const P=Z(`2000-01-01 ${z}`,"YYYY-MM-DD h:mm A"),S=[];for(let y=-30;y<=30;y+=15){const R=P.add(y,"minutes"),E=R.format("h:mm A"),A=R.hour();A>=8&&A<=22&&!g.find(F=>F.value===E)&&S.push({value:E,display:E+(y===0?" (Recommended)":""),isAvailable:!0,scheduleItem:b,isRecommended:y===0})}g.push(...S)})});const I=g.sort((b,z)=>{const P=Z(`2000-01-01 ${b.value}`,"YYYY-MM-DD h:mm A"),S=Z(`2000-01-01 ${z.value}`,"YYYY-MM-DD h:mm A");return P.diff(S)});return console.log("⏰ DateTimePicker - Pre-order time slots:",I.map(b=>({value:b.value,display:b.display,isRecommended:b.isRecommended}))),I}return[]},[f,n,_,t]),w=m.useCallback(L=>{v(L),T(null),r(L),o(null)},[r,o]),k=m.useCallback(L=>{T(L),o(L)},[o]);if(m.useEffect(()=>{if(n==="GO_GRAB"&&!f&&_.length>0){const L=_[0].date;w(L)}},[n,f,_,w]),m.useEffect(()=>{if(f&&!D&&q.length>0){const L=q[0].value;k(L)}},[f,D,q,k]),l)return s.jsxs("div",{className:`date-time-picker disabled ${d}`,style:h,children:[s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:p}),s.jsx("div",{className:"picker-value disabled",children:"Not available"})]}),s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:u}),s.jsx("div",{className:"picker-value disabled",children:"Not available"})]})]});if(_.length===0)return s.jsxs("div",{className:`date-time-picker no-dates ${d}`,style:h,children:[s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:p}),s.jsx("div",{className:"picker-value error",children:"No dates available"})]}),s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:u}),s.jsx("div",{className:"picker-value error",children:"No times available"})]})]});const x=c?{}:{"data-first":!0},j=c?{"data-first":!0}:{};return s.jsxs("div",{className:`date-time-picker ${d}`,style:h,children:[s.jsxs("div",{className:"picker-field",...x,children:[s.jsx("label",{className:"picker-label",children:p}),s.jsxs("select",{className:"picker-select date-select",value:f||"",onChange:L=>w(L.target.value),disabled:l||_.length===0,children:[s.jsx("option",{value:"",disabled:!0,children:"Select date"}),_.map(L=>s.jsx("option",{value:L.date,disabled:!L.isAvailable,children:L.display},L.date))]})]}),s.jsxs("div",{className:"picker-field",...j,children:[s.jsx("label",{className:"picker-label",children:u}),s.jsxs("select",{className:"picker-select time-select",value:D||"",onChange:L=>k(L.target.value),disabled:l||!f||q.length===0,children:[s.jsx("option",{value:"",disabled:!0,children:"Select time"}),q.map(L=>s.jsx("option",{value:L.value,disabled:!L.isAvailable,"data-recommended":L.isRecommended||!1,style:L.isRecommended?{backgroundColor:"#e8f5e8",fontWeight:"600",color:"#2e7d2e"}:{},children:L.display},L.value))]})]})]})};function Wa(){const e=wt(),t=$t(),{kitchenId:n}=As(),i=()=>{var g,I,b,z;if((I=(g=t.state)==null?void 0:g.from)!=null&&I.fullUrl){console.log("Going back to FoodDetailPage with params:",t.state.from.fullUrl),e(t.state.from.fullUrl);return}if((z=(b=t.state)==null?void 0:b.from)!=null&&z.pathname){console.log("Going back to:",t.state.from.pathname+(t.state.from.search||"")),e(t.state.from.pathname+(t.state.from.search||""));return}try{e(-1)}catch(P){e("/")}},{cartItems:a,getCartQuantity:r,handleQuantityChange:o}=ss(),[l,c]=m.useState({}),[d,p]=m.useState({}),{allFoods:u}=rm(10),h=n||(u.length>0?u[0].kitchenId:null),{kitchen:f,foods:v,loading:D,error:T}=ns(h);console.log("🚀 ~ ListingPage ~ foods:",v),m.useEffect(()=>{f&&v.length>0&&(console.log("[ListingPage] Kitchen data:",f),console.log("[ListingPage] Foods data:",v),console.log("[ListingPage] Preorder schedule:",f.preorderSchedule))},[f,v]);const _=()=>{var S;if(!((S=f==null?void 0:f.preorderSchedule)!=null&&S.dates))return[];const g=Z(),I=g.format("YYYY-MM-DD");console.log("🔥🔥🔥 [PREORDER DATES DEBUG] Using dayjs - Current date (today):",I),console.log("🔥🔥🔥 [PREORDER DATES DEBUG] Raw dayjs object:",g.toString());const b=[];for(let y=1;y<=2;y++){const E=g.add(y,"day").format("YYYY-MM-DD");b.push(E)}console.log("🔥🔥🔥 [PREORDER DATES DEBUG] Next 2 days after today (should be 2025-08-23, 2025-08-24):",b),console.log("🔥🔥🔥 [PREORDER DATES DEBUG] All dates in preorder schedule:",Object.keys(f.preorderSchedule.dates));const z=b.filter(y=>{const R=f.preorderSchedule.dates[y],E=y!==I;return console.log(`🔥🔥🔥 [PREORDER DATES DEBUG] Date ${y}: has schedule=${!!R}, is not today=${E}, today is=${I}`),R&&E});console.log("🔥🔥🔥 [PREORDER DATES DEBUG] Final available preorder dates (should only be 23 & 24):",z);const P=z.map(y=>{const E=Z(y).format("ddd, MMM D");return console.log(`🔥🔥🔥 [PREORDER DATES DEBUG] Mapping ${y} to display: ${E}`),{dateString:y,displayDate:E}});return console.log("🔥🔥🔥 [PREORDER DATES DEBUG] Final result returned:",P),P},{goGrabItems:q,preOrderItems:w}=m.useMemo(()=>{var z;if(!v.length)return{goGrabItems:[],preOrderItems:[]};const g=v.filter(P=>P.kitchenId===h);console.log("[ListingPage] All foods for current kitchen:",g);const I=g.filter(P=>{var y,R;const S=((y=P.availability)==null?void 0:y.numAvailable)||P.numAvailable||0;return console.log(`[ListingPage] ${P.name} - numAvailable: ${S} (from ${(R=P.availability)!=null&&R.numAvailable?"availability":"direct"})`),S>0});let b=[];if((z=f==null?void 0:f.preorderSchedule)!=null&&z.dates){const P=f.preorderSchedule.dates,S=new Set;Object.values(P).flat().forEach(y=>{S.add(y.foodItemId)}),console.log("[ListingPage] Preorder food IDs from schedule:",Array.from(S)),b=g.filter(y=>{const R=S.has(y.id);return console.log(`[ListingPage] ${y.name} (${y.id}) - in preorder: ${R}`),R})}return console.log(`[ListingPage] Kitchen: ${h}, Total Foods: ${g.length}, Go&Grab: ${I.length}, Pre-order: ${b.length}`),console.log("[ListingPage] Go&Grab items:",I.map(P=>{var S;return{id:P.id,name:P.name,numAvailable:((S=P.availability)==null?void 0:S.numAvailable)||P.numAvailable}})),console.log("[ListingPage] Pre-order items:",b.map(P=>({id:P.id,name:P.name}))),{goGrabItems:I,preOrderItems:b}},[v,f,h]);console.log("🚀 ~ ListingPage ~ goGrabItems:",q),console.log("🚀 ~ ListingPage ~ preOrderItems:",w);const k=m.useCallback((g,I,b=!1)=>{const z=b?`${g}_preorder`:g;c(P=>({...P,[z]:I})),console.log("📅 [ListingPage] Date changed:",{foodId:g,newDate:I,isPreOrder:b})},[]),x=m.useCallback((g,I,b=!1)=>{const z=b?`${g}_preorder`:g;p(P=>({...P,[z]:I})),console.log("⏰ [ListingPage] Time changed:",{foodId:g,newTime:I,isPreOrder:b})},[]),j=g=>{var b,z;return(z=(b=f==null?void 0:f.preorderSchedule)==null?void 0:b.dates)!=null&&z[g]?f.preorderSchedule.dates[g].map(P=>{const S=w.find(y=>y.id===P.foodItemId);return S?{...S,scheduleItem:P}:null}).filter(Boolean):[]},L=_(),$=!D&&f&&v.length>0;return T?s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsx("div",{className:"padding-20",children:s.jsxs("div",{className:"text-center py-5 text-danger",children:["Error: ",T]})})})}):D||!$?s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsx(ls,{isLoading:!0,text:"Loading menu items...",overlay:!0,size:"medium"})})}):s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsxs("div",{className:"padding-20",children:[s.jsxs("div",{className:"back-link-title",children:[s.jsx("button",{className:"back-link",onClick:i,style:{border:"none",background:"none",cursor:"pointer"},children:s.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),s.jsx("div",{className:"title",children:"More offers from HomeFresh"})]}),s.jsx("h2",{className:"small-title mb-2",children:(f==null?void 0:f.name)||"Coco&apos;s Kitchen"}),q.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"small-title mb-20",children:"Grab & Go"}),s.jsx("div",{className:"menu-listing",children:q.map(g=>{const I=r(g.id);return s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:g.imageUrl||"/src/assets/images/product.png",alt:g.name,onError:b=>{b.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:g.name}),s.jsx("div",{className:"text",children:g.description||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",g.cost]})]})]}),s.jsxs("div",{className:"quantity-warpper",children:[s.jsx("div",{className:"right mb-1",children:s.jsx(Nt,{food:g,kitchen:f,selectedDate:null,size:"small",initialQuantity:I,onQuantityChange:async b=>{const z=r(g.id),P=l[g.id],S=d[g.id],y=P?Z(P).isSame(Z(),"day"):!0;await o({food:g,kitchen:f,newQuantity:b,currentQuantity:z,selectedDate:P,selectedTime:S,specialInstructions:"",isPreOrder:!y})}})}),s.jsx("div",{className:"pickup-time-section",children:s.jsx(ki,{food:g,kitchen:f,orderType:"GO_GRAB",selectedDate:l[g.id],selectedTime:d[g.id],onDateChange:b=>k(g.id,b,!1),onTimeChange:b=>x(g.id,b,!1),disabled:!g||!f,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},g.id)})})]}),L.map(g=>{const I=j(g.dateString);return I.length===0?null:s.jsxs("div",{children:[s.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",g.displayDate]}),s.jsx("div",{className:"menu-listing",children:I.map(b=>{const z=r(b.id,g.dateString);return s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:b.imageUrl||"/src/assets/images/product.png",alt:b.name,onError:P=>{P.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:b.name}),s.jsx("div",{className:"text",children:b.description||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",b.cost]})]})]}),s.jsxs("div",{className:"quantity-warpper",children:[s.jsx("div",{className:"right mb-1",children:s.jsx(Nt,{food:b,kitchen:f,selectedDate:g.dateString,size:"small",initialQuantity:z,onQuantityChange:async P=>{const S=r(b.id,g.dateString),y=d[`${b.id}_preorder`];await o({food:b,kitchen:f,newQuantity:P,currentQuantity:S,selectedDate:g.dateString,selectedTime:y,specialInstructions:"",isPreOrder:!0})}})}),s.jsx("div",{className:"pickup-time-section",children:s.jsx(ki,{food:b,kitchen:f,orderType:"PRE_ORDER",selectedDate:l[`${b.id}_preorder`]||g.dateString,selectedTime:d[`${b.id}_preorder`],onDateChange:P=>k(b.id,P,!0),onTimeChange:P=>x(b.id,P,!0),disabled:!b||!f,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},`${b.id}-${g.dateString}`)})})]},g.dateString)}),a.length>0&&s.jsx("button",{className:"action-button mb-16",onClick:()=>e("/order"),children:"Continue to View Cart"}),s.jsxs("div",{className:"scanner-bottom mb-16",children:[s.jsx("div",{className:"text",children:"Full menus from your local home kitchens can be found in the HomeFresh app, available in the iOS App Store."}),s.jsx("div",{className:"qr",children:s.jsx("img",{src:im,alt:"QR Code"})})]})]})})})}const um=()=>{const e=He(),t=wt();return{logout:m.useCallback(async()=>{try{const i=ne.loading("Logging out...");await e(es()).unwrap(),ne.success("Successfully logged out!"),t("/login",{replace:!0})}catch(i){console.error("❌ Logout failed:",i),ne.error("Logout failed, but redirecting anyway"),t("/login",{replace:!0})}},[e,t])}},pm=()=>(m.useEffect(()=>{const e={currentUrl:window.location.href,hostname:window.location.hostname,origin:window.location.origin,userAgent:navigator.userAgent,isWeChatBrowser:/micromessenger/i.test(navigator.userAgent),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),timestamp:new Date().toISOString()};console.log("🔍 WeChat Debug Info:",e),localStorage.setItem("wechat_debug_info",JSON.stringify(e,null,2))},[]),null);function fm(){const[e,t]=m.useState(new Date),[n,i]=m.useState(""),a="Enjoy delicious meal from your favorite chef.";console.log("Deployed Version 5");const{user:r,isAuthenticated:o}=we(u=>u.auth),{items:l,totalItems:c}=we(u=>u.cart),{logout:d}=um();m.useEffect(()=>{const u=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(u)},[]),m.useEffect(()=>{let u=0;const h=setInterval(()=>{u<a.length?(i(a.slice(0,u+1)),u++):clearInterval(h)},50);return()=>clearInterval(h)},[]);const p=u=>u.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"});return s.jsxs("div",{className:"landing-page",children:[s.jsxs("div",{className:"background-animation",children:[s.jsx("div",{className:"floating-food food-1",children:"🥘"}),s.jsx("div",{className:"floating-food food-2",children:"🍜"}),s.jsx("div",{className:"floating-food food-3",children:"🥗"}),s.jsx("div",{className:"floating-food food-4",children:"🍲"}),s.jsx("div",{className:"floating-food food-5",children:"🥙"}),s.jsx("div",{className:"floating-food food-6",children:"🍱"})]}),s.jsxs("div",{className:"landing-content",children:[s.jsxs("div",{className:"logo-section",children:[s.jsx("div",{className:"logo-circle",children:s.jsx("span",{className:"logo-icon",children:"🏠"})}),s.jsxs("h1",{className:"brand-name",children:["Home",s.jsx("span",{className:"accent-text",children:"Fresh"})]})]}),s.jsxs("div",{className:"coming-soon-section",children:[s.jsxs("h2",{className:"coming-soon-title",children:["Welcome to ",s.jsx("span",{className:"gradient-text",children:"HomeFresh!"})]}),s.jsxs("p",{className:"subtitle",children:[n,s.jsx("span",{className:"cursor",children:"|"})]}),s.jsxs("div",{className:"feature-grid",children:[s.jsxs("div",{className:"feature-card",children:[s.jsx("div",{className:"feature-icon",children:"👨‍🍳"}),s.jsx("h3",{children:"Home Chefs"}),s.jsx("p",{children:"Local talented chefs cooking with love"})]}),s.jsxs("div",{className:"feature-card",children:[s.jsx("div",{className:"feature-icon",children:"🚀"}),s.jsx("h3",{children:"Fresh Experience"}),s.jsx("p",{children:"Fast and reliable taste you can trust"})]}),s.jsxs("div",{className:"feature-card",children:[s.jsx("div",{className:"feature-icon",children:"💝"}),s.jsx("h3",{children:"Made with Love"}),s.jsx("p",{children:"Every meal crafted with care and passion"})]})]}),s.jsxs("div",{className:"live-clock",children:[s.jsx("span",{className:"clock-icon",children:"⏰"}),s.jsx("span",{className:"time-display",children:p(e)})]}),s.jsxs("div",{className:"cta-section",children:[s.jsx("p",{className:"launch-text",children:"We're putting the finishing touches on something special!"}),s.jsxs(At,{to:"/foods",className:"explore-btn",children:[s.jsx("span",{children:"Explore Preview"}),s.jsx("div",{className:"btn-arrow",children:"→"})]})]}),s.jsxs("div",{className:"progress-container",children:[s.jsx("div",{className:"progress-label",children:"Launch Progress"}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"progress-fill"})}),s.jsx("div",{className:"progress-text",children:"95% Complete"})]})]}),s.jsxs("footer",{className:"landing-footer",children:[s.jsx("p",{children:"Get ready for a culinary revolution 🌟"}),s.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,0,0,0.1)",borderRadius:"8px",fontSize:"12px"},children:[s.jsx("h4",{children:"🔧 Debug Panel (Persistence Test)"}),s.jsxs("p",{children:[s.jsx("strong",{children:"User:"})," ",o?(r==null?void 0:r.name)||"Authenticated":"Not logged in"]}),s.jsxs("p",{children:[s.jsx("strong",{children:"Cart Items:"})," ",c," items"]}),s.jsxs("div",{style:{marginTop:"10px"},children:[s.jsx("button",{onClick:d,style:{padding:"8px 16px",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"🚪 Test Logout (Clear All Data)"}),s.jsx(At,{to:"/foods",style:{padding:"8px 16px",backgroundColor:"#44ff44",color:"white",textDecoration:"none",borderRadius:"4px"},children:"🛒 Go to Foods (Test Cart)"})]})]})]})]}),s.jsx(pm,{})]})}const mm="/assets/user1-DLLHbfvd.svg",hm=(e,t)=>{const n=He(),[i,a]=m.useState(!1),{user:r,isAuthenticated:o}=we(M=>M.auth),{currentFood:l,currentKitchen:c,currentReviews:d,currentReviewStats:p,currentLikes:u,loading:h,error:f,likedFoods:v}=we(M=>M.food),{kitchenStats:D,kitchenReviews:T,statsLoading:_,reviewsLoading:q}=we(M=>M.kitchen),{foodReviews:w,foodReviewsLoading:k,submissionLoading:x}=we(M=>M.reviews),{items:j,loading:L}=we(M=>M.cart),$=D[t],g=T[t],I=w[e],b=k[e],z=_[t],P=q[t],S=v.includes(e),y=j.filter(M=>M.foodId===e&&M.kitchenId===t).reduce((M,C)=>M+C.quantity,0),R=m.useCallback(M=>j.find(C=>C.foodId===e&&C.kitchenId===t&&C.selectedDate===M.selectedDate&&C.specialInstructions===(M.specialInstructions||"")),[j,e,t]),E=m.useCallback(()=>{e&&t&&n(Et({foodId:e,kitchenId:t}))},[n,e,t]),A=m.useCallback(()=>{t&&!$&&!z&&n(an(t))},[n,t,$,z]),F=m.useCallback(()=>{t&&!g&&!P&&n(rn({kitchenId:t,limit:10}))},[n,t,g,P]),U=m.useCallback(()=>{e&&!I&&!b&&n(on({foodId:e,kitchenId:t,limit:10}))},[n,e,t,I,b]),W=m.useCallback(()=>{if(!o){console.warn("User must be logged in to like food");return}if(!t){console.warn("Kitchen ID is required to like food");return}if(!i){console.warn("Like status not yet checked, preventing toggle");return}console.log("🔍 Toggle like called:",{foodId:e,kitchenId:t,userId:r==null?void 0:r.id,currentlyLiked:S,likedFoodsArray:v,likeStatusChecked:i}),n(wi(e))},[n,e,t,o,S,v,r==null?void 0:r.id,i]),H=m.useCallback((M=null,C=null)=>{const G=Z();if(M){const Q=Z(M),fe=C||"6:30 PM",Ce=Q.isSame(G,"day")?"Go&Grab":"Pre-Order";return{date:Q.format("YYYY-MM-DD"),time:fe,display:`${Q.format("MMM DD, YYYY")} at ${fe}`,orderType:Ce}}else{const Q=C||G.add(30,"minutes").format("h:mm A");return{date:G.format("YYYY-MM-DD"),time:Q,display:`Today at ${Q}`,orderType:"Go&Grab"}}},[]),J=m.useCallback(M=>{if(!o)return console.warn("User must be logged in to add to cart"),{success:!1,message:"User must be logged in to add to cart",requiresAuth:!0};const C=R(M);if(C)return console.log("Item already exists with same quantity:",C.quantity),n(_t({cartItemId:C.id,quantity:M.quantity})),{success:!1,message:"This item already exists in the cart with the same quantity and specifications",existingQuantity:C.quantity};const G=H(M.selectedDate,M.selectedTime),Q={foodId:e,kitchenId:t,quantity:M.quantity,orderType:M.orderType,selectedDate:M.selectedDate,specialInstructions:M.specialInstructions||"",pickupDetails:G,food:l?{id:l.id,name:l.name,cost:l.cost,price:l.price||l.cost,imageUrl:l.imageUrl,image:l.image||l.imageUrl,description:l.description,category:l.category,isAvailable:l.isAvailable,kitchenName:l.kitchenName,maxQuantity:l.maxQuantity,totalQuantity:l.totalQuantity,availableQuantity:l.availableQuantity,isPreOrder:l.isPreOrder,...l}:null,kitchen:c?{id:c.id,name:c.name,address:c.address,rating:c.rating,ratingCount:c.ratingCount,...c}:null};return console.log("Adding new item to cart:",Q),n(Ke(Q)),{success:!0,message:"Item added to cart successfully"}},[n,e,t,o,R,_t,l,c,H]),X=m.useCallback(M=>{if(!o){console.warn("User must be logged in to update cart");return}const C=j.find(G=>G.foodId===e&&G.kitchenId===t);C&&(console.log("Updating cart item quantity:",{cartItemId:C.id,quantity:M}),n(_t({cartItemId:C.id,quantity:M})))},[n,e,t,o,j]),O=m.useCallback(M=>{if(!o){console.warn("User must be logged in to add review");return}return n(sn({foodId:e,kitchenId:t,reviewData:M}))},[n,e,t,o]),Y=m.useCallback(()=>{n(Of())},[n]);return m.useEffect(()=>(E(),A(),U(),()=>{}),[E,A,U]),m.useEffect(()=>{e&&t&&o&&l?(console.log("🔍 Checking like status for food:",{foodId:e,kitchenId:t,userId:r==null?void 0:r.id}),n(Wo({foodId:e,kitchenId:t})).then(M=>{console.log("✅ Like status checked:",M),a(!0)})):o||(console.log("🔍 Not authenticated, setting like status as checked"),a(!0))},[n,e,t,o,l,r==null?void 0:r.id]),{food:l,kitchen:c,reviews:d||[],reviewStats:p||$,kitchenStats:$,likes:u,isLiked:S,cartQuantity:y,loading:h||z,reviewsLoading:b,kitchenStatsLoading:z,kitchenReviewsLoading:P,reviewSubmissionLoading:x,cartLoading:L,error:f,user:r,isAuthenticated:o,toggleLike:W,addToCartAction:J,updateCartItemQuantity:X,addReview:O,loadFoodDetail:E,loadKitchenStats:A,loadKitchenReviews:F,loadFoodReviews:U,clearData:Y}},Ga=({rating:e=0,maxStars:t=5,size:n="small",showRating:i=!1,reviewCount:a=null,className:r=""})=>{const o=Math.max(0,Math.min(e,t)),l={small:{width:12,height:12,gap:"2px"},medium:{width:16,height:17,gap:"3px"},large:{width:20,height:21,gap:"4px"}},{width:c,height:d,gap:p}=l[n]||l.small,u=()=>{const h=[];for(let f=1;f<=t;f++){const v=Math.max(0,Math.min(1,o-(f-1)));h.push(s.jsxs("div",{className:"star-container",style:{position:"relative"},children:[s.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"star-empty",children:s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8542 1.20117C5.80112 1.20117 5.67045 1.21576 5.60103 1.35459L4.53587 3.48434C4.36728 3.82092 4.04237 4.05484 3.6667 4.10851L1.28203 4.45209C1.12453 4.47484 1.07087 4.59151 1.05453 4.6405C1.03995 4.68776 1.01662 4.80792 1.12512 4.91176L2.84945 6.56842C3.1242 6.83267 3.24903 7.21359 3.1837 7.58634L2.7777 9.9255C2.75262 10.0719 2.8442 10.1571 2.88503 10.1863C2.9282 10.2189 3.0437 10.2837 3.18662 10.209L5.3187 9.10359C5.6547 8.93034 6.05487 8.93034 6.3897 9.10359L8.5212 10.2084C8.6647 10.2825 8.7802 10.2178 8.82395 10.1863C8.86478 10.1571 8.95637 10.0719 8.93128 9.9255L8.52412 7.58634C8.45878 7.21359 8.58362 6.83267 8.85837 6.56842L10.5827 4.91176C10.6918 4.80792 10.6684 4.68717 10.6533 4.6405C10.6375 4.59151 10.5839 4.47484 10.4264 4.45209L8.0417 4.10851C7.66662 4.05484 7.3417 3.82092 7.17312 3.48376L6.10678 1.35459C6.03795 1.21576 5.90728 1.20117 5.8542 1.20117Z",fill:"#E5E7EB",stroke:"#E5E7EB",strokeWidth:"0.2"})}),v>0&&s.jsx("div",{className:"star-filled",style:{position:"absolute",top:0,left:0,width:`${v*100}%`,overflow:"hidden"},children:s.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.45251 6.92967C9.30143 7.07609 9.23201 7.28784 9.26643 7.4955L9.78502 10.3655C9.82876 10.6088 9.7261 10.8549 9.52251 10.9955C9.32301 11.1413 9.0576 11.1588 8.84001 11.0422L6.25643 9.69467C6.1666 9.64684 6.06685 9.62117 5.96476 9.61825H5.80668C5.75185 9.62642 5.69818 9.64392 5.64918 9.67075L3.06501 11.0247C2.93726 11.0888 2.7926 11.1116 2.65085 11.0888C2.30551 11.0235 2.0751 10.6945 2.13168 10.3474L2.65085 7.47742C2.68526 7.268 2.61585 7.05509 2.46476 6.90633L0.358348 4.86467C0.182181 4.69375 0.120931 4.43709 0.201431 4.2055C0.279598 3.9745 0.479098 3.80592 0.720015 3.768L3.61918 3.34742C3.83968 3.32467 4.03335 3.1905 4.13251 2.99217L5.41001 0.373001C5.44035 0.314668 5.47943 0.261001 5.52668 0.215501L5.57918 0.174668C5.6066 0.144335 5.6381 0.119251 5.6731 0.0988346L5.73668 0.0755013L5.83585 0.034668H6.08143C6.30076 0.057418 6.49385 0.188668 6.59476 0.384668L7.88918 2.99217C7.98251 3.18292 8.16393 3.31533 8.37335 3.34742L11.2725 3.768C11.5175 3.803 11.7223 3.97217 11.8033 4.2055C11.8798 4.43942 11.8138 4.69608 11.6342 4.86467L9.45251 6.92967Z",fill:"#FF981F"})})})]},f))}return h};return s.jsxs("div",{className:`star-rating ${n} ${r}`,children:[s.jsx("div",{className:"stars-container",style:{gap:p},children:u()}),(i||a)&&s.jsxs("div",{className:"rating-info",children:[i&&s.jsx("span",{className:"rating-value",children:s.jsx("strong",{children:o.toFixed(1)})}),a&&s.jsxs("span",{className:"review-count",children:["(",a>1e3?`${(a/1e3).toFixed(1)}k`:a,"+ reviews)"]})]})]})},Ka="/assets/order1-D4-quvXg.png",Ya="/assets/order2-CvB8ifzw.png",gm=({onClose:e})=>{console.log("🚀 WeChatAuthDialog rendered!");const{signInWithTestUser:t}=m.useContext(Vi),n=async()=>{try{console.log("🧪 Using test user bypass"),await t(),sessionStorage.removeItem("wechat_pending_cart_action"),e()}catch(r){console.error("❌ Error with test user bypass:",r)}},i=async()=>{try{const r=wa(),o=ba();console.log("🔍 Auth context:",{isMobile:r,isWeChat:o}),sessionStorage.setItem("wechat_pending_cart_action","true");const l=ka();console.log("🔗 Generated auth URL:",l),o?(console.log("📱 WeChat browser detected - direct redirect"),window.location.href=l):r?(console.log("📱 Mobile device - attempting WeChat authentication"),window.location.href=l):(console.log("🖥️ Desktop - direct redirect"),window.location.href=l)}catch(r){console.error("❌ Error in WeChat authentication:",r);const o=ka();window.location.href=o}},a=r=>{r.target===r.currentTarget&&e()};return s.jsx("div",{className:"wechat-auth-dialog-overlay",onClick:a,children:s.jsxs("div",{className:"wechat-auth-dialog",children:[s.jsxs("div",{className:"wechat-auth-header",children:[s.jsx("h3",{children:"Sign in to Continue"}),s.jsx("button",{className:"wechat-auth-close",onClick:e,"aria-label":"Close dialog",children:"×"})]}),s.jsxs("div",{className:"wechat-auth-content",children:[s.jsx("div",{className:"wechat-auth-icon",children:s.jsx("img",{src:bi,alt:"WeChat"})}),s.jsx("p",{className:"wechat-auth-message",children:"Please sign in with WeChat to add items to your cart"}),s.jsxs("button",{className:"wechat-auth-button",onClick:i,children:[s.jsx("img",{src:bi,alt:"WeChat"}),"Continue with WeChat"]}),s.jsx("button",{className:"wechat-auth-button",onClick:n,style:{backgroundColor:"#ff6b35",marginTop:"10px",fontSize:"14px"},children:"🧪 Skip for Testing (Temporary)"}),s.jsx("p",{className:"wechat-auth-note",children:wa()&&!ba()?"This will open WeChat app for secure authentication":"We'll redirect you to WeChat for secure authentication"})]})]})})},vm=({isLiked:e,handleLikeToggle:t})=>{const n=[Ka,Ya,Ka,Ya],[i,a]=m.useState(0),[r,o]=m.useState(!0);m.useEffect(()=>{if(!r)return;const d=setInterval(()=>{a(p=>(p+1)%n.length)},2e3);return()=>clearInterval(d)},[r,n.length]);const l=()=>{o(!1),a(d=>d===0?n.length-1:d-1),setTimeout(()=>o(!0),3e3)},c=()=>{o(!1),a(d=>(d+1)%n.length),setTimeout(()=>o(!0),3e3)};return s.jsx("div",{className:"custom-slider",children:s.jsxs("div",{className:"slider-container",children:[s.jsx("div",{className:"slider-track",style:{transform:`translateX(-${i*100}%)`},children:n.map((d,p)=>s.jsx("div",{className:"slider-slide",children:s.jsx("img",{src:d,alt:`Order ${p%2+1}`})},p))}),s.jsx("div",{className:`icon heart-icon ${e?"liked":""}`,onClick:t,children:s.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M9.80568 16.3852C9.53252 16.4816 9.08261 16.4816 8.80945 16.3852C6.47955 15.5898 1.27344 12.2717 1.27344 6.64781C1.27344 4.16527 3.27393 2.15674 5.74041 2.15674C7.20262 2.15674 8.49612 2.86374 9.30756 3.95638C10.119 2.86374 11.4205 2.15674 12.8747 2.15674C15.3412 2.15674 17.3417 4.16527 17.3417 6.64781C17.3417 12.2717 12.1356 15.5898 9.80568 16.3852Z",stroke:"#FF5555",fill:e?"#FF5555":"transparent",strokeWidth:"1.20512",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("button",{className:"slider-btn slider-prev",onClick:l,children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:s.jsx("path",{d:"M12.5 15L7.5 10L12.5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("button",{className:"slider-btn slider-next",onClick:c,children:s.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:s.jsx("path",{d:"M7.5 5L12.5 10L7.5 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),s.jsx("div",{className:"slider-dots",children:n.slice(0,2).map((d,p)=>s.jsx("button",{className:`slider-dot ${i%2===p?"active":""}`,onClick:()=>{o(!1),a(p),setTimeout(()=>o(!0),3e3)}},p))})]})})};function Ha(){const[e]=dr(),t=$t(),n=wt(),i=()=>{if(console.log("🔍 [FoodDetailPage] Current pathname:",t.pathname),console.log("🔍 [FoodDetailPage] Search params:",e.toString()),t.pathname==="/share"||t.pathname==="/share/"){const C={kitchenId:e.get("kitchenId"),foodId:e.get("foodId"),selectedDate:e.get("date")};return console.log("🔍 [FoodDetailPage] Extracted params:",C),C}return console.log("🔍 [FoodDetailPage] Using fallback params (pathname not /share)"),{kitchenId:null,foodId:null,selectedDate:null}},{kitchenId:a,foodId:r,selectedDate:o}=i();if(!a||!r)return s.jsx("div",{className:"mobile-container",children:s.jsx("div",{className:"padding-20",children:s.jsxs("div",{className:"alert alert-danger",role:"alert",children:[s.jsx("h4",{children:"Invalid URL"}),s.jsx("p",{children:"Missing required parameters. Please check your link and try again."}),s.jsxs("small",{className:"text-muted",children:["Expected: kitchenId and foodId"," ",t.pathname==="/share"?"as query parameters":"as URL parameters"]})]})})});const[l,c]=m.useState("reviews"),[d,p]=m.useState(1),[u,h]=m.useState(""),[f,v]=m.useState(!1),[D,T]=m.useState(o),[_,q]=m.useState(null);m.useEffect(()=>{console.log("🔍 showWeChatDialog state changed to:",f)},[f]);const[w,k]=m.useState({isAvailable:!0,quantity:1,orderType:"GO_GRAB"}),{food:x,kitchen:j,likes:L,reviews:$,reviewStats:g,loading:I,error:b,isLiked:z,cartQuantity:P,toggleLike:S,addToCartAction:y,updateCartItemQuantity:R}=hm(r,a),E=Ci.useMemo(()=>{var G,Q;return o?"PRE_ORDER":(((G=x==null?void 0:x.availability)==null?void 0:G.numAvailable)||(x==null?void 0:x.numAvailable)||0)>0?"GO_GRAB":(Q=j==null?void 0:j.preorderSchedule)!=null&&Q.dates&&Object.values(j.preorderSchedule.dates).flat().some(Ce=>Ce.foodItemId===(x==null?void 0:x.id))?"PRE_ORDER":"GO_GRAB"},[o,x,j]);console.log("FoodDetailPage data:",{food:x,kitchen:j,likes:L,reviews:$,reviewStats:g,loading:I,error:b,selectedDate:o,orderType:E,pickupDate:D,pickupTime:_,urlPattern:t.pathname,extractedParams:{kitchenId:a,foodId:r,selectedDate:o},kitchenPreorderSchedule:j==null?void 0:j.preorderSchedule});const A=m.useCallback(C=>{T(C),console.log("📅 Date changed to:",C)},[]),F=m.useCallback(C=>{q(C),console.log("⏰ Time changed to:",C)},[]),U=m.useCallback(C=>{console.log(`[FoodDetailPage] Quantity changed to: ${C}`),p(C),P>0&&(console.log(`[FoodDetailPage] Updating cart quantity to: ${C}`),R(C))},[P,R]),W=m.useCallback(C=>{k(C)},[]),H=m.useCallback(C=>{console.error(`[FoodDetailPage] Quantity error: ${C}`),ne.error(C)},[]),J=m.useCallback(C=>{console.warn(`[FoodDetailPage] Quantity warning: ${C}`),ne.warning(C)},[]),X=m.useCallback(()=>{if(console.log("[FoodDetailPage] Add to Cart button clicked!"),console.log("[FoodDetailPage] Availability status:",w),console.log("[FoodDetailPage] Selected quantity:",d),console.log("[FoodDetailPage] Special instructions:",u),!w.isAvailable){ne.error("This item is currently unavailable");return}const C={quantity:d,orderType:w.orderType,selectedDate:D||o,selectedTime:_,specialInstructions:u.trim()};console.log(`Adding ${d} items to cart`,{foodId:r,kitchenId:a,selectedDate:D||o,selectedTime:_,orderType:w.orderType,quantity:d,specialInstructions:u.trim()}),console.log("[FoodDetailPage] Calling addToCartAction with:",C);const G=y(C);if(G){if(G.requiresAuth){console.log("🔒 Authentication required - showing WeChat dialog"),console.log("🔒 Setting showWeChatDialog to true"),v(!0),console.log("🔒 showWeChatDialog state should now be true");return}if(G.success){console.log("✅ Success:",G.message),ne.cart(G.message);const Q=new URLSearchParams({kitchenId:a||"",foodId:r||"",...o&&{date:o}}).toString();n("/foods",{replace:!0,state:{from:{pathname:t.pathname,search:t.search,fullUrl:`/share?${Q}`}}})}else console.log("ℹ️ Info:",G.message),ne.warning(G.message)}},[w,d,u,r,a,D,_,y,n,v]),O=m.useCallback(()=>{v(!1)},[]);m.useEffect(()=>{P>0&&p(P)},[P]),m.useEffect(()=>{o&&!D&&T(o)},[o,D]),m.useEffect(()=>{(async()=>{console.log("=== DEBUGGING REVIEWS ==="),console.log("URL params - foodId:",r,"kitchenId:",a,"selectedDate:",o);const G=await Rf();if(console.log("Connection test:",G),r){const Q=await jf(r);console.log("Debug reviews result:",Q)}})()},[r,a,o]),console.log("🚀 ~ FoodDetailPage ~ reviewStats:",g);const Y=(g==null?void 0:g.averageRating)||4.5,N=(g==null?void 0:g.totalReviews)||0,V=(g==null?void 0:g.ratingPercentages)||{5:90,4:70,3:40,2:20,1:8},ee=($==null?void 0:$.length)>0?$.map(C=>({id:C.id,image:C.userProfile||mm,date:C.timeStamp?(()=>{try{let G;return typeof C.timeStamp=="string"?C.timeStamp.includes(" at ")?G=new Date(C.timeStamp.replace(" at "," ").replace(" UTC+5","")):G=new Date(C.timeStamp):C.timeStamp.seconds?G=new Date(C.timeStamp.seconds*1e3):G=new Date(C.timeStamp),G.toLocaleDateString()}catch(G){return console.warn("Error parsing timestamp:",C.timeStamp),"Unknown date"}})():"Unknown date",name:C.userName||"Anonymous User",rating:C.rating||5,description:C.message||"No comment provided"})):[],M=m.useCallback(()=>{S(),console.log(`[FoodDetailPage] Food ${z?"unliked":"liked"}`)},[S,z]);return I?s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsx(ls,{isLoading:I,text:"Loading food details...",overlay:!0,size:"medium"})})}):s.jsxs("div",{className:"container",children:[s.jsx("div",{className:"mobile-container",children:s.jsxs("div",{className:"product-detail",children:[s.jsxs("div",{className:"padding-20",children:[s.jsx("h2",{className:"title text-center",children:x==null?void 0:x.name}),s.jsxs("h2",{className:"text text-center",children:["By ",x==null?void 0:x.kitchenName]}),s.jsxs("div",{className:"review-info",children:[s.jsxs("div",{className:"left flex-0",children:[s.jsx("div",{children:s.jsx("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7499 4.80322L9.97336 4.26881L8.28761 0.940677C8.12458 0.667862 7.82468 0.5 7.50028 0.5C7.17588 0.5 6.87597 0.667862 6.71295 0.940677L5.02719 4.26966L1.25064 4.80322C0.920725 4.84924 0.64636 5.07363 0.543084 5.38188C0.439808 5.69013 0.525567 6.02868 0.764246 6.25497L3.49628 8.84616L2.85154 12.5053C2.79531 12.8246 2.93026 13.1472 3.19965 13.3375C3.46905 13.5279 3.82617 13.553 4.12089 13.4022L7.50028 11.6739L10.8779 13.4005C11.1726 13.5513 11.5298 13.5262 11.7992 13.3358C12.0685 13.1455 12.2035 12.8229 12.1473 12.5036L11.5025 8.84446L14.2363 6.25497C14.4744 6.02885 14.56 5.69094 14.4572 5.38312C14.3543 5.0753 14.0809 4.85087 13.7517 4.80407L13.7499 4.80322Z",fill:"#FBBC04"})})}),s.jsxs("div",{className:"text",children:[s.jsx("strong",{children:j!=null&&j.rating&&(j!=null&&j.ratingCount)?parseFloat(parseInt(j==null?void 0:j.rating)/parseInt(j==null?void 0:j.ratingCount)).toFixed(1):"No ratings yet"}),` ${j==null?void 0:j.ratingCount}+ reviews`]})]}),s.jsx("div",{className:"line"}),s.jsxs("div",{className:"left",children:[s.jsx("div",{children:s.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[s.jsx("path",{d:"M10.1667 6.00016C10.1667 6.92063 9.42051 7.66683 8.50004 7.66683C7.57957 7.66683 6.83337 6.92063 6.83337 6.00016C6.83337 5.07969 7.57957 4.3335 8.50004 4.3335C9.42051 4.3335 10.1667 5.07969 10.1667 6.00016Z",stroke:"#3FC045"}),s.jsx("path",{d:"M12.6481 11.3335C13.5778 12.6592 14.0225 13.3652 13.7576 13.9334C13.731 13.9904 13.6999 14.0454 13.6646 14.098C13.2816 14.6668 12.2916 14.6668 10.3118 14.6668H6.68811C4.7083 14.6668 3.71839 14.6668 3.33536 14.098C3.29999 14.0454 3.26888 13.9904 3.24232 13.9334C2.97742 13.3652 3.42213 12.6592 4.35181 11.3335",stroke:"#3FC045",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M9.33831 11.6626C9.11344 11.8791 8.81291 12.0002 8.50017 12.0002C8.18737 12.0002 7.88684 11.8791 7.66197 11.6626C5.60291 9.66736 2.8435 7.4385 4.18918 4.20265C4.91677 2.45304 6.66333 1.3335 8.50017 1.3335C10.337 1.3335 12.0835 2.45305 12.8111 4.20265C14.1551 7.43443 11.4024 9.67423 9.33831 11.6626Z",stroke:"#3FC045"})]})}),s.jsx("div",{className:"text",children:(j==null?void 0:j.address)||"Unknown location"})]})]}),s.jsx(vm,{isLiked:z,handleLikeToggle:M}),s.jsxs("div",{className:"quantity-warpper",children:[s.jsxs("div",{className:"price",children:[s.jsx("sup",{children:"$"}),(x==null?void 0:x.cost)&&parseFloat(x==null?void 0:x.cost).toFixed(2)]}),s.jsx(Nt,{food:x,kitchen:j,selectedDate:D||o,initialQuantity:Math.max(P,1),onQuantityChange:U,onAvailabilityChange:W,onError:H,onWarning:J,showAvailabilityInfo:!1,showErrorMessages:!0,size:"large",className:"food-detail-quantity"})]}),s.jsx("div",{className:"pickup-details",children:s.jsx(ki,{food:x,kitchen:j,orderType:E,selectedDate:D,selectedTime:_,onDateChange:A,onTimeChange:F,disabled:!x||!j,className:"food-detail-picker"})})]}),s.jsx("div",{className:"hr"}),s.jsxs("div",{className:"padding-20",children:[s.jsx("h3",{className:"small-title mb-8",children:"Special Instruction"}),s.jsx("p",{className:"body-text mb-16",children:"Please let us know if you are allergic to anything or if we need to avoid anything."}),s.jsx("textarea",{className:"special-instructions-input",placeholder:"Enter your special instructions here...",value:u,onChange:C=>h(C.target.value),rows:3,style:{width:"100%",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",marginBottom:"16px"}}),s.jsxs("div",{className:"add-to-cart-action mt-2",children:[s.jsx("button",{className:`button ${w.isAvailable?"":"sold-out"}`,onClick:C=>{console.log("🔥 BUTTON CLICKED! Event:",C),console.log("🔥 handleAddToCart type:",typeof X),X(C)},disabled:!w.isAvailable,style:{pointerEvents:"auto",zIndex:1e3},children:w.isAvailable?"Add to Cart":"Sold Out"}),s.jsx("div",{className:"icon",children:s.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{const C=new URLSearchParams({kitchenId:a||"",foodId:r||"",...o&&{date:o}}).toString();n("/foods",{replace:!0,state:{from:{pathname:t.pathname,search:t.search,fullUrl:`/share?${C}`}}})},children:[s.jsx("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M3 6H21",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),s.jsx("path",{d:"M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),s.jsxs("div",{className:"custom-accordian",children:[s.jsx("button",{className:`button${l==="description"?" active":""}`,onClick:()=>c("description"),children:"Description"}),s.jsx("button",{className:`button${l==="reviews"?" active":""}`,onClick:()=>c("reviews"),children:"Reviews"})]}),s.jsxs("div",{className:"accordian-content",children:[l==="description"&&s.jsx("div",{className:"description-content",children:(x==null?void 0:x.description)||"No description available."}),l==="reviews"&&s.jsxs("div",{className:"reviews-content",children:[s.jsxs("div",{className:"overall-reviews",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"bold",children:Y>0?Y.toFixed(1):"No ratings yet"}),s.jsx(Ga,{rating:Y,size:"small",showRating:!1}),s.jsxs("div",{className:"body-text",children:["(",N,"+ reviews)"]})]}),s.jsx("div",{className:"line"}),s.jsx("div",{className:"right",children:[5,4,3,2,1].map(C=>s.jsxs("div",{className:"review",children:[s.jsx("div",{className:"text",children:C}),s.jsx("div",{className:"progress-bar",children:s.jsx("div",{className:"fill",style:{width:`${V[C]}%`}})})]},C))})]}),s.jsx("div",{className:"reviews-list",children:ee.map((C,G)=>s.jsxs("div",{className:"review-item",children:[s.jsxs("div",{className:"header",children:[s.jsxs("div",{className:"profile",children:[s.jsx("img",{src:C.image,alt:C.name,className:"image"}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"name",children:C.name}),s.jsx("div",{className:"rating",children:s.jsx(Ga,{rating:C.rating||5,size:"small",showRating:!1})}),s.jsx("div",{className:"date",children:C.date})]})]}),s.jsx("div",{className:"icon"})]}),s.jsx("div",{className:"description",children:C.description})]},C.id||G))})]})]})]})]})}),f&&s.jsx(gm,{onClose:O})]})}function xm(){const e=wt(),t=He(),n=$t(),i=we(w=>w.cart.items),{handleQuantityChange:a}=ss(),[r,o]=m.useState(new Set);m.useEffect(()=>{var w;if((w=n.state)!=null&&w.editItem){const k=n.state.editItem;o(new Set([k])),window.history.replaceState({},document.title)}},[n.state]);const l=i.length>0?i[0].kitchenId:null,{kitchen:c,foods:d,loading:p}=ns(l);console.log("OrderPage - Kitchen data:",{kitchenId:l,hasKitchen:!!c,foodsCount:d.length,kitchenLoading:p});const u=m.useMemo(()=>{const w=new Map;return d.forEach(k=>{w.set(k.id,k)}),w},[d]),h=w=>{var j,L,$,g;const k=u.get(w.foodId);if(console.log(`OrderPage - Getting food data for ${w.foodId}:`,{hasFullData:!!k,fullFoodData:k?{id:k.id,name:k.name,availability:k.availability,numAvailable:k.numAvailable}:null}),k)return k;const x={id:w.foodId,name:(j=w.food)==null?void 0:j.name,cost:(L=w.food)==null?void 0:L.cost,imageUrl:($=w.food)==null?void 0:$.imageUrl,kitchenId:w.kitchenId,description:(g=w.food)==null?void 0:g.description,availability:{numAvailable:99},numAvailable:99};return console.log(`OrderPage - Using fallback data for ${w.foodId}:`,x),x},f=m.useMemo(()=>{const w={grabAndGo:[],preOrders:{}};i.forEach(x=>{var L,$,g,I,b,z,P,S;const j=((L=x.pickupDetails)==null?void 0:L.orderType)||x.orderType||(x.isPreOrder?"PRE_ORDER":"GO_GRAB");if(j==="GO_GRAB")w.grabAndGo.push({...x,displayPickupTime:(($=x.pickupDetails)==null?void 0:$.display)||"Pick up today",displayPickupClock:((g=x.pickupDetails)==null?void 0:g.time)||Z().add(30,"minutes").format("h:mm A")});else if(j==="PRE_ORDER"||x.isPreOrder||x.selectedDate){const y=x.selectedDate||((I=x.pickupDetails)==null?void 0:I.date);y&&(w.preOrders[y]||(w.preOrders[y]=[]),w.preOrders[y].push({...x,displayPickupTime:((b=x.pickupDetails)==null?void 0:b.display)||`Pick up ${Z(y).format("MMM D ddd")}`,displayPickupClock:((z=x.pickupDetails)==null?void 0:z.time)||"6:30 PM"}))}else w.grabAndGo.push({...x,displayPickupTime:((P=x.pickupDetails)==null?void 0:P.display)||"Pick up today",displayPickupClock:((S=x.pickupDetails)==null?void 0:S.time)||Z().add(30,"minutes").format("h:mm A")})});const k={};return Object.keys(w.preOrders).sort((x,j)=>Z(x).diff(Z(j))).forEach(x=>{k[x]=w.preOrders[x]}),w.preOrders=k,w},[i]),v=m.useMemo(()=>{const w=i.reduce((j,L)=>{var b,z,P;const $=u.get(L.foodId),g=($==null?void 0:$.cost)||((b=L.food)==null?void 0:b.cost)||0,I=typeof g=="string"?parseFloat(g):g;return console.log(`OrderPage - Pricing calculation for ${L.foodId}:`,{itemName:(z=L.food)==null?void 0:z.name,quantity:L.quantity,originalCost:(P=L.food)==null?void 0:P.cost,enrichedCost:$==null?void 0:$.cost,finalCost:I,lineTotal:I*L.quantity}),j+I*L.quantity},0),k=w*.0725,x=w+k;return console.log("OrderPage - Total calculation:",{subtotal:w.toFixed(2),tax:k.toFixed(2),total:x.toFixed(2),cartItemsCount:i.length}),{subtotal:w.toFixed(2),tax:k.toFixed(2),total:x.toFixed(2)}},[i,u]),D=(w,k=null)=>i.filter(x=>x.foodId===w&&(!k||x.selectedDate===k)).reduce((x,j)=>x+j.quantity,0),T=()=>{t(An()),ne.info("Cart cleared successfully")},_=w=>Z(w).format("MMM D ddd"),q=i.reduce((w,k)=>w+k.quantity,0);return s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsxs("div",{className:"padding-20",children:[s.jsxs("div",{className:"back-link-title",children:[s.jsx(At,{className:"back-link",to:"/foods",children:s.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:s.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),s.jsxs("div",{className:"title",children:["Order (",q," Item",q!==1?"s":"",")"]})]}),i.length>0&&i[0].kitchen&&s.jsx("h2",{className:"small-title mb-2",children:i[0].kitchen.name}),i.length===0?s.jsxs("div",{className:"text-center py-5",children:[s.jsx("p",{children:"Your cart is empty"}),s.jsx(At,{to:"/foods",className:"action-button",style:{textDecoration:"none",display:"inline-block",padding:"12px 24px",marginTop:"16px"},children:"Continue Shopping"})]}):s.jsxs(s.Fragment,{children:[f.grabAndGo.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"small-title mb-20",children:"Go&Grab"}),s.jsx("div",{className:"menu-listing",children:f.grabAndGo.map((w,k)=>{var j,L,$,g,I;const x=D(w.foodId);return s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:((j=w.food)==null?void 0:j.imageUrl)||"/src/assets/images/product.png",alt:((L=w.food)==null?void 0:L.name)||"Food item",onError:b=>{b.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:(($=w.food)==null?void 0:$.name)||"Unknown Item"}),s.jsx("div",{className:"text",children:((g=w.food)==null?void 0:g.description)||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",((I=w.food)==null?void 0:I.cost)||"0.00"]})]})]}),s.jsx("div",{className:"quantity-warpper",children:s.jsx("div",{className:"right mb-1",children:s.jsx(Nt,{food:h(w),kitchen:c||w.kitchen,selectedDate:null,size:"small",initialQuantity:x,onQuantityChange:async b=>{const z=D(w.foodId),P=h(w);await a({food:P,kitchen:c||w.kitchen,newQuantity:b,currentQuantity:z,selectedDate:null,specialInstructions:w.specialInstructions||"",isPreOrder:!1})}})})})]},`grab-${w.foodId}-${k}`)})})]}),Object.entries(f.preOrders).map(([w,k])=>s.jsxs("div",{children:[s.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",_(w)]}),s.jsx("div",{className:"menu-listing",children:k.map((x,j)=>{var $,g,I,b,z;const L=D(x.foodId,w);return s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:(($=x.food)==null?void 0:$.imageUrl)||"/src/assets/images/product.png",alt:((g=x.food)==null?void 0:g.name)||"Food item",onError:P=>{P.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:((I=x.food)==null?void 0:I.name)||"Unknown Item"}),s.jsx("div",{className:"text",children:((b=x.food)==null?void 0:b.description)||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",((z=x.food)==null?void 0:z.cost)||"0.00"]})]})]}),s.jsxs("div",{className:"quantity-warpper",children:[s.jsx("div",{className:"right mb-1",children:s.jsx(Nt,{food:h(x),kitchen:c||x.kitchen,selectedDate:w,size:"small",initialQuantity:L,onQuantityChange:async P=>{const S=D(x.foodId,w),y=h(x);await a({food:y,kitchen:c||x.kitchen,newQuantity:P,currentQuantity:S,selectedDate:w,specialInstructions:x.specialInstructions||"",isPreOrder:!0})}})}),s.jsx("div",{className:"title",children:x.displayPickupTime})]})]},`preorder-${x.foodId}-${w}-${j}`)})})]},w)),s.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsxs("span",{children:["Subtotal (",q," item",q!==1?"s":"","):"]}),s.jsxs("span",{children:["$",v.subtotal]})]}),s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsx("span",{children:"Tax (7.25%):"}),s.jsxs("span",{children:["$",v.tax]})]}),s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",v.total]})]})]}),s.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[s.jsx("button",{onClick:T,style:{flex:"1",padding:"12px 16px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",color:"#6c757d",cursor:"pointer"},children:"Clear Cart"}),s.jsx("button",{className:"action-button",onClick:()=>e("/checkout"),style:{flex:"2"},children:"Check Out"})]})]})]})})})}var cs={exports:{}},ym="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",wm=ym,bm=wm;function ds(){}function us(){}us.resetWarningCache=ds;var km=function(){function e(i,a,r,o,l,c){if(c!==bm){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:us,resetWarningCache:ds};return n.PropTypes=n,n};cs.exports=km();var jm=cs.exports;const ie=ur(jm),Sm=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function yt(e,t,n){const i=Rm(e),{webkitRelativePath:a}=e,r=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof i.path!="string"&&Qa(i,"path",r),Qa(i,"relativePath",r),i}function Rm(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const i=t.split(".").pop().toLowerCase(),a=Sm.get(i);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function Qa(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const Dm=[".DS_Store","Thumbs.db"];function Lm(e){return ft(this,void 0,void 0,function*(){return vn(e)&&Cm(e.dataTransfer)?Im(e.dataTransfer,e.type):Em(e)?_m(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?Am(e):[]})}function Cm(e){return vn(e)}function Em(e){return vn(e)&&vn(e.target)}function vn(e){return typeof e=="object"&&e!==null}function _m(e){return ji(e.target.files).map(t=>yt(t))}function Am(e){return ft(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>yt(n))})}function Im(e,t){return ft(this,void 0,void 0,function*(){if(e.items){const n=ji(e.items).filter(a=>a.kind==="file");if(t!=="drop")return n;const i=yield Promise.all(n.map(Tm));return Va(ps(i))}return Va(ji(e.files).map(n=>yt(n)))})}function Va(e){return e.filter(t=>Dm.indexOf(t.name)===-1)}function ji(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(i)}return t}function Tm(e){if(typeof e.webkitGetAsEntry!="function")return Za(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?fs(t):Za(e,t)}function ps(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?ps(n):[n]],[])}function Za(e,t){return ft(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const r=yield e.getAsFileSystemHandle();if(r===null)throw new Error(`${e} is not a File`);if(r!==void 0){const o=yield r.getFile();return o.handle=r,yt(o)}}const i=e.getAsFile();if(!i)throw new Error(`${e} is not a File`);return yt(i,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function Pm(e){return ft(this,void 0,void 0,function*(){return e.isDirectory?fs(e):Om(e)})}function fs(e){const t=e.createReader();return new Promise((n,i)=>{const a=[];function r(){t.readEntries(o=>ft(this,void 0,void 0,function*(){if(o.length){const l=Promise.all(o.map(Pm));a.push(l),r()}else try{const l=yield Promise.all(a);n(l)}catch(l){i(l)}}),o=>{i(o)})}r()})}function Om(e){return ft(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(i=>{const a=yt(i,e.fullPath);t(a)},i=>{n(i)})})})}var ni=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var i=e.name||"",a=(e.type||"").toLowerCase(),r=a.replace(/\/.*$/,"");return n.some(function(o){var l=o.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?r===l.replace(/\/.*$/,""):a===l})}return!0};function Ja(e){return $m(e)||Fm(e)||hs(e)||Nm()}function Nm(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Fm(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $m(e){if(Array.isArray(e))return Si(e)}function Xa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function er(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Xa(Object(n),!0).forEach(function(i){ms(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Xa(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function ms(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ft(e,t){return zm(e)||Um(e,t)||hs(e,t)||Mm()}function Mm(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(e,t){if(e){if(typeof e=="string")return Si(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Si(e,t)}}function Si(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function Um(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,r=!1,o,l;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));a=!0);}catch(c){r=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(r)throw l}}return i}}function zm(e){if(Array.isArray(e))return e}var Bm=typeof ni=="function"?ni:ni.default,qm="file-invalid-type",Wm="file-too-large",Gm="file-too-small",Km="too-many-files",Ym=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:qm,message:"File type must be ".concat(i)}},tr=function(t){return{code:Wm,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},nr=function(t){return{code:Gm,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Hm={code:Km,message:"Too many files"};function gs(e,t){var n=e.type==="application/x-moz-file"||Bm(e,t);return[n,n?null:Ym(t)]}function vs(e,t,n){if(et(e.size))if(et(t)&&et(n)){if(e.size>n)return[!1,tr(n)];if(e.size<t)return[!1,nr(t)]}else{if(et(t)&&e.size<t)return[!1,nr(t)];if(et(n)&&e.size>n)return[!1,tr(n)]}return[!0,null]}function et(e){return e!=null}function Qm(e){var t=e.files,n=e.accept,i=e.minSize,a=e.maxSize,r=e.multiple,o=e.maxFiles,l=e.validator;return!r&&t.length>1||r&&o>=1&&t.length>o?!1:t.every(function(c){var d=gs(c,n),p=Ft(d,1),u=p[0],h=vs(c,i,a),f=Ft(h,1),v=f[0],D=l?l(c):null;return u&&v&&!D})}function xn(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Qt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function ir(e){e.preventDefault()}function Vm(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function Zm(e){return e.indexOf("Edge/")!==-1}function Jm(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return Vm(e)||Zm(e)}function Te(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return t.some(function(l){return!xn(i)&&l&&l.apply(void 0,[i].concat(r)),xn(i)})}}function Xm(){return"showOpenFilePicker"in window}function eh(e){if(et(e)){var t=Object.entries(e).filter(function(n){var i=Ft(n,2),a=i[0],r=i[1],o=!0;return xs(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),o=!1),(!Array.isArray(r)||!r.every(ys))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),o=!1),o}).reduce(function(n,i){var a=Ft(i,2),r=a[0],o=a[1];return er(er({},n),{},ms({},r,o))},{});return[{description:"Files",accept:t}]}return e}function th(e){if(et(e))return Object.entries(e).reduce(function(t,n){var i=Ft(n,2),a=i[0],r=i[1];return[].concat(Ja(t),[a],Ja(r))},[]).filter(function(t){return xs(t)||ys(t)}).join(",")}function nh(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function ih(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function xs(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function ys(e){return/^.*\.[\w]+$/.test(e)}var ah=["children"],rh=["open"],oh=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],sh=["refKey","onChange","onClick"];function lh(e){return uh(e)||dh(e)||ws(e)||ch()}function ch(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dh(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function uh(e){if(Array.isArray(e))return Ri(e)}function ii(e,t){return mh(e)||fh(e,t)||ws(e,t)||ph()}function ph(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ws(e,t){if(e){if(typeof e=="string")return Ri(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ri(e,t)}}function Ri(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function fh(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,r=!1,o,l;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(i.push(o.value),!(t&&i.length===t));a=!0);}catch(c){r=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(r)throw l}}return i}}function mh(e){if(Array.isArray(e))return e}function ar(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function re(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ar(Object(n),!0).forEach(function(i){Di(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ar(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Di(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function yn(e,t){if(e==null)return{};var n=hh(e,t),i,a;if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)i=r[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function hh(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,r;for(r=0;r<i.length;r++)a=i[r],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var Ji=m.forwardRef(function(e,t){var n=e.children,i=yn(e,ah),a=ks(i),r=a.open,o=yn(a,rh);return m.useImperativeHandle(t,function(){return{open:r}},[r]),Ci.createElement(m.Fragment,null,n(re(re({},o),{},{open:r})))});Ji.displayName="Dropzone";var bs={disabled:!1,getFilesFromEvent:Lm,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Ji.defaultProps=bs;Ji.propTypes={children:ie.func,accept:ie.objectOf(ie.arrayOf(ie.string)),multiple:ie.bool,preventDropOnDocument:ie.bool,noClick:ie.bool,noKeyboard:ie.bool,noDrag:ie.bool,noDragEventsBubbling:ie.bool,minSize:ie.number,maxSize:ie.number,maxFiles:ie.number,disabled:ie.bool,getFilesFromEvent:ie.func,onFileDialogCancel:ie.func,onFileDialogOpen:ie.func,useFsAccessApi:ie.bool,autoFocus:ie.bool,onDragEnter:ie.func,onDragLeave:ie.func,onDragOver:ie.func,onDrop:ie.func,onDropAccepted:ie.func,onDropRejected:ie.func,onError:ie.func,validator:ie.func};var Li={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ks(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=re(re({},bs),e),n=t.accept,i=t.disabled,a=t.getFilesFromEvent,r=t.maxSize,o=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,p=t.onDragLeave,u=t.onDragOver,h=t.onDrop,f=t.onDropAccepted,v=t.onDropRejected,D=t.onFileDialogCancel,T=t.onFileDialogOpen,_=t.useFsAccessApi,q=t.autoFocus,w=t.preventDropOnDocument,k=t.noClick,x=t.noKeyboard,j=t.noDrag,L=t.noDragEventsBubbling,$=t.onError,g=t.validator,I=m.useMemo(function(){return th(n)},[n]),b=m.useMemo(function(){return eh(n)},[n]),z=m.useMemo(function(){return typeof T=="function"?T:rr},[T]),P=m.useMemo(function(){return typeof D=="function"?D:rr},[D]),S=m.useRef(null),y=m.useRef(null),R=m.useReducer(gh,Li),E=ii(R,2),A=E[0],F=E[1],U=A.isFocused,W=A.isFileDialogActive,H=m.useRef(typeof window!="undefined"&&window.isSecureContext&&_&&Xm()),J=function(){!H.current&&W&&setTimeout(function(){if(y.current){var K=y.current.files;K.length||(F({type:"closeDialog"}),P())}},300)};m.useEffect(function(){return window.addEventListener("focus",J,!1),function(){window.removeEventListener("focus",J,!1)}},[y,W,P,H]);var X=m.useRef([]),O=function(K){S.current&&S.current.contains(K.target)||(K.preventDefault(),X.current=[])};m.useEffect(function(){return w&&(document.addEventListener("dragover",ir,!1),document.addEventListener("drop",O,!1)),function(){w&&(document.removeEventListener("dragover",ir),document.removeEventListener("drop",O))}},[S,w]),m.useEffect(function(){return!i&&q&&S.current&&S.current.focus(),function(){}},[S,q,i]);var Y=m.useCallback(function(B){$?$(B):console.error(B)},[$]),N=m.useCallback(function(B){B.preventDefault(),B.persist(),Ze(B),X.current=[].concat(lh(X.current),[B.target]),Qt(B)&&Promise.resolve(a(B)).then(function(K){if(!(xn(B)&&!L)){var de=K.length,me=de>0&&Qm({files:K,accept:I,minSize:o,maxSize:r,multiple:l,maxFiles:c,validator:g}),ke=de>0&&!me;F({isDragAccept:me,isDragReject:ke,isDragActive:!0,type:"setDraggedFiles"}),d&&d(B)}}).catch(function(K){return Y(K)})},[a,d,Y,L,I,o,r,l,c,g]),V=m.useCallback(function(B){B.preventDefault(),B.persist(),Ze(B);var K=Qt(B);if(K&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch(de){}return K&&u&&u(B),!1},[u,L]),ee=m.useCallback(function(B){B.preventDefault(),B.persist(),Ze(B);var K=X.current.filter(function(me){return S.current&&S.current.contains(me)}),de=K.indexOf(B.target);de!==-1&&K.splice(de,1),X.current=K,!(K.length>0)&&(F({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Qt(B)&&p&&p(B))},[S,p,L]),M=m.useCallback(function(B,K){var de=[],me=[];B.forEach(function(ke){var kt=gs(ke,I),ht=ii(kt,2),In=ht[0],Tn=ht[1],Pn=vs(ke,o,r),qt=ii(Pn,2),On=qt[0],Nn=qt[1],Fn=g?g(ke):null;if(In&&On&&!Fn)de.push(ke);else{var $n=[Tn,Nn];Fn&&($n=$n.concat(Fn)),me.push({file:ke,errors:$n.filter(function(Ds){return Ds})})}}),(!l&&de.length>1||l&&c>=1&&de.length>c)&&(de.forEach(function(ke){me.push({file:ke,errors:[Hm]})}),de.splice(0)),F({acceptedFiles:de,fileRejections:me,isDragReject:me.length>0,type:"setFiles"}),h&&h(de,me,K),me.length>0&&v&&v(me,K),de.length>0&&f&&f(de,K)},[F,l,I,o,r,c,h,f,v,g]),C=m.useCallback(function(B){B.preventDefault(),B.persist(),Ze(B),X.current=[],Qt(B)&&Promise.resolve(a(B)).then(function(K){xn(B)&&!L||M(K,B)}).catch(function(K){return Y(K)}),F({type:"reset"})},[a,M,Y,L]),G=m.useCallback(function(){if(H.current){F({type:"openDialog"}),z();var B={multiple:l,types:b};window.showOpenFilePicker(B).then(function(K){return a(K)}).then(function(K){M(K,null),F({type:"closeDialog"})}).catch(function(K){nh(K)?(P(K),F({type:"closeDialog"})):ih(K)?(H.current=!1,y.current?(y.current.value=null,y.current.click()):Y(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):Y(K)});return}y.current&&(F({type:"openDialog"}),z(),y.current.value=null,y.current.click())},[F,z,P,_,M,Y,b,l]),Q=m.useCallback(function(B){!S.current||!S.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),G())},[S,G]),fe=m.useCallback(function(){F({type:"focus"})},[]),Le=m.useCallback(function(){F({type:"blur"})},[]),Ce=m.useCallback(function(){k||(Jm()?setTimeout(G,0):G())},[k,G]),ve=function(K){return i?null:K},mt=function(K){return x?null:ve(K)},Ve=function(K){return j?null:ve(K)},Ze=function(K){L&&K.stopPropagation()},js=m.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=B.refKey,de=K===void 0?"ref":K,me=B.role,ke=B.onKeyDown,kt=B.onFocus,ht=B.onBlur,In=B.onClick,Tn=B.onDragEnter,Pn=B.onDragOver,qt=B.onDragLeave,On=B.onDrop,Nn=yn(B,oh);return re(re(Di({onKeyDown:mt(Te(ke,Q)),onFocus:mt(Te(kt,fe)),onBlur:mt(Te(ht,Le)),onClick:ve(Te(In,Ce)),onDragEnter:Ve(Te(Tn,N)),onDragOver:Ve(Te(Pn,V)),onDragLeave:Ve(Te(qt,ee)),onDrop:Ve(Te(On,C)),role:typeof me=="string"&&me!==""?me:"presentation"},de,S),!i&&!x?{tabIndex:0}:{}),Nn)}},[S,Q,fe,Le,Ce,N,V,ee,C,x,j,i]),Ss=m.useCallback(function(B){B.stopPropagation()},[]),Rs=m.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},K=B.refKey,de=K===void 0?"ref":K,me=B.onChange,ke=B.onClick,kt=yn(B,sh),ht=Di({accept:I,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:ve(Te(me,C)),onClick:ve(Te(ke,Ss)),tabIndex:-1},de,y);return re(re({},ht),kt)}},[y,n,l,C,i]);return re(re({},A),{},{isFocused:U&&!i,getRootProps:js,getInputProps:Rs,rootRef:S,inputRef:y,open:ve(G)})}function gh(e,t){switch(t.type){case"focus":return re(re({},e),{},{isFocused:!0});case"blur":return re(re({},e),{},{isFocused:!1});case"openDialog":return re(re({},Li),{},{isFileDialogActive:!0});case"closeDialog":return re(re({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return re(re({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return re(re({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return re({},Li);default:return e}}function rr(){}const or="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16675%201.66699H7.50008C3.33341%201.66699%201.66675%203.33366%201.66675%207.50033V12.5003C1.66675%2016.667%203.33341%2018.3337%207.50008%2018.3337H12.5001C16.6667%2018.3337%2018.3334%2016.667%2018.3334%2012.5003V10.8337'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.3668%202.51639L6.80014%209.08306C6.55014%209.33306%206.30014%209.82472%206.25014%2010.1831L5.89181%2012.6914C5.75848%2013.5997%206.40014%2014.2331%207.30848%2014.1081L9.81681%2013.7497C10.1668%2013.6997%2010.6585%2013.4497%2010.9168%2013.1997L17.4835%206.63306C18.6168%205.49972%2019.1501%204.18306%2017.4835%202.51639C15.8168%200.849722%2014.5001%201.38306%2013.3668%202.51639Z'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.425%203.45801C12.9834%205.44967%2014.5417%207.00801%2016.5417%207.57467'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var vh={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const xh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),yh=(e,t)=>{const n=m.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:r=2,absoluteStrokeWidth:o,children:l,...c},d)=>m.createElement("svg",{ref:d,...vh,width:a,height:a,stroke:i,strokeWidth:o?Number(r)*24/Number(a):r,className:`lucide lucide-${xh(e)}`,...c},[...t.map(([p,u])=>m.createElement(p,u)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var Xi=yh;const sr=Xi("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),wh=Xi("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),lr=Xi("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),bh=async(e,t="payment-screenshots",n="anonymous")=>{try{if(!e)throw new Error("No file provided");if(!e.type.startsWith("image/"))throw new Error("File must be an image");const i=10*1024*1024;if(e.size>i)throw new Error("File size must be less than 10MB");const a=new Date().getTime(),r=e.name.split(".").pop()||"jpg",o=`${n}_${a}.${r}`,l=Qu(Mo,`${t}/${o}`);console.log("Uploading file to Firebase Storage...");const c=await Yu(l,e),d=await Hu(c.ref);return console.log("File uploaded successfully:",d),d}catch(i){throw console.error("Error uploading file to Firebase Storage:",i),i}},kh=async e=>{try{console.log("Placing order with data:",e);const t=await yr(oe(te,"orders"),e);if(console.log("Order placed successfully with ID:",t.id),await Un(t,{orderIDKey:t.id}),e.kitchenId)try{const n=it(te,"kitchens",e.kitchenId);await Un(n,{totalOrders:zn(1),lastOrderDate:new Date})}catch(n){console.warn("Could not update kitchen statistics:",n)}for(const n of e.orderedFoodItems)try{const i=it(te,"foods",n.foodItemId);await Un(i,{numOfSoldItem:zn(n.quantity),numberOfAvailableItem:zn(-n.quantity)})}catch(i){console.warn(`Could not update food item ${n.foodItemId} statistics:`,i)}return t.id}catch(t){throw console.error("Error placing order:",t),t}},jh=()=>Math.floor(1e5+Math.random()*9e5).toString(),Sh=({cartItems:e,kitchenInfo:t,firebaseImageUrl:n,currentUser:i,paymentCalculation:a,groupedCartItems:r})=>{const o=new Date().toISOString(),l=jh(),c=Object.keys(r.preOrders).length>0,d=r.grabAndGo.length>0;let p="grabAndGo";c&&!d?p="preOrder":c&&d&&(p="mixed");let u=o;if(c){const v=Object.keys(r.preOrders);if(v.length>0){const D=v.sort()[0];u=new Date(D).toISOString()}}const h=e.map(v=>{var D,T,_,q,w,k,x,j,L,$,g,I;return{countRating:0,foodItemId:v.foodId||v.id,id:cr(),imageUrl:((D=v.food)==null?void 0:D.imageUrl)||((T=v.food)==null?void 0:T.image)||"",isFromPreorder:((_=v.pickupDetails)==null?void 0:_.orderType)==="PRE_ORDER"||v.isPreOrder||!1,name:((q=v.food)==null?void 0:q.name)||"Unknown Item",numOfLike:((w=v.food)==null?void 0:w.numOfLike)||0,numOfSoldItem:((k=v.food)==null?void 0:k.numOfSoldItem)||0,numberOfAvailableItem:((x=v.food)==null?void 0:x.numberOfAvailableItem)||0,quantity:parseInt(v.quantity||1),rating:0,specialInstructions:v.specialInstructions||"",...((j=v.food)==null?void 0:j.preOrder)&&{preOrder:{availableTimes:v.food.preOrder.availableTimes||[],foodItemId:v.foodId||v.id,id:cr(),nameOfFood:((L=v.food)==null?void 0:L.name)||"Unknown Item",numOfAvailableItems:(($=v.food)==null?void 0:$.numberOfAvailableItem)||0,price:parseFloat(((g=v.food)==null?void 0:g.cost)||((I=v.food)==null?void 0:I.price)||0)}},pickupDetails:v.pickupDetails||{}}});return{datePickedUp:u,datePlaced:o,kitchenId:(t==null?void 0:t.id)||(t==null?void 0:t.kitchenId)||"unknown",kitchenName:(t==null?void 0:t.name)||"Unknown Kitchen",orderID:l,orderIDKey:"",orderPaymentImage:n||"",orderStatus:"pending",orderTotalCoast:parseFloat(a.totalPayment),orderType:p,orderedFoodItems:h,paymentVia:{other:{method:"manual_upload",uploadedAt:n?o:null}},pickUpAddress:(t==null?void 0:t.address)||"Address not available",userId:(i==null?void 0:i.uid)||"mzqXlFHOJXNVA0BUvtvbbhgF78x1",subtotal:parseFloat(a.subtotal),salesTax:parseFloat(a.salesTax),taxRate:.0725,createdAt:o,updatedAt:o}},cr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16).toUpperCase()});function Rh(){var X;const[e,t]=m.useState(null),[n,i]=m.useState(null),[a,r]=m.useState(null),[o,l]=m.useState(!1),[c,d]=m.useState(null),[p,u]=m.useState(!1),[h,f]=m.useState(!1),[v,D]=m.useState(null),[T,_]=m.useState(null),[q,w]=m.useState(null),k=wt(),x=He(),j=we(O=>O.cart.items),L=we(O=>O.food.currentKitchen),$=we(O=>O.auth.user),g=m.useMemo(()=>{var O,Y;if(L){const N=L;if(console.log("kitchen",N),N)return{id:N.id||N.ownerId||"PKcWQYMxEZQxnKSLp4de",name:N.name||"James Kitchen",address:N.address||"120 Lane San Francisco, East Falmouth MA",latitude:((O=N.location)==null?void 0:O.lat)||N.latitude||41.5742,longitude:((Y=N.location)==null?void 0:Y.lng)||N.longitude||-70.6109}}return{id:"PKcWQYMxEZQxnKSLp4de",name:"James Kitchen",address:"120 Lane San Francisco, East Falmouth MA",latitude:41.5742,longitude:-70.6109}},[L]),I=O=>{var Y,N;D(O),_(O.selectedDate||((Y=O.pickupDetails)==null?void 0:Y.date)),w((N=O.pickupDetails)==null?void 0:N.time),f(!0)},b=()=>{f(!1),D(null),_(null),w(null)},z=O=>{_(O)},P=O=>{w(O)},S=()=>{if(v&&T&&q){const O={date:T,time:q,display:T===Z().format("YYYY-MM-DD")?"Pick up today":`Pick up ${Z(T).format("MMM D ddd")}`,orderType:T===Z().format("YYYY-MM-DD")?"GO_GRAB":"PRE_ORDER"};console.log("Updating pickup details for item:",v),console.log("New pickup details:",O),ne.success(`Pickup time updated to ${O.display} at ${O.time}`),b()}else ne.error("Please select both date and time")},y=m.useMemo(()=>{const O={grabAndGo:[],preOrders:{}};j.forEach(N=>{var ee,M,C,G,Q,fe,Le,Ce;const V=((ee=N.pickupDetails)==null?void 0:ee.orderType)||N.orderType||(N.isPreOrder?"PRE_ORDER":"GO_GRAB");if(V==="GO_GRAB")O.grabAndGo.push({...N,displayPickupTime:((M=N.pickupDetails)==null?void 0:M.display)||"Pick up today",displayPickupClock:((C=N.pickupDetails)==null?void 0:C.time)||Z().add(30,"minutes").format("h:mm A")});else if(V==="PRE_ORDER"||N.isPreOrder||N.selectedDate){const ve=N.selectedDate||((G=N.pickupDetails)==null?void 0:G.date);ve&&(O.preOrders[ve]||(O.preOrders[ve]=[]),O.preOrders[ve].push({...N,displayPickupTime:((Q=N.pickupDetails)==null?void 0:Q.display)||`Pick up ${Z(ve).format("MMM D ddd")}`,displayPickupClock:((fe=N.pickupDetails)==null?void 0:fe.time)||"6:30 PM"}))}else O.grabAndGo.push({...N,displayPickupTime:((Le=N.pickupDetails)==null?void 0:Le.display)||"Pick up today",displayPickupClock:((Ce=N.pickupDetails)==null?void 0:Ce.time)||Z().add(30,"minutes").format("h:mm A")})});const Y={};return Object.keys(O.preOrders).sort((N,V)=>Z(N).diff(Z(V))).forEach(N=>{Y[N]=O.preOrders[N]}),O.preOrders=Y,O},[j]),R=O=>Z(O).format("MMM D ddd");m.useMemo(()=>{const O=[];if(y.grabAndGo.length>0){const Y=y.grabAndGo[0];O.push({type:"Go&Grab",date:"Today",time:Y.displayPickupClock,count:y.grabAndGo.length})}return Object.entries(y.preOrders).forEach(([Y,N])=>{const V=N[0];O.push({type:"Pre-Order",date:R(Y),time:V.displayPickupClock,count:N.length})}),O},[y,R]);const E=m.useMemo(()=>{const O=j.reduce((ee,M)=>{var Q,fe;const C=parseFloat(((Q=M.food)==null?void 0:Q.cost)||((fe=M.food)==null?void 0:fe.price)||0),G=parseInt(M.quantity||1);return ee+C*G},0),N=O*.0725,V=O+N;return{subtotal:O.toFixed(2),salesTax:N.toFixed(2),totalPayment:V.toFixed(2)}},[j]),A=async O=>{if(O.length>0){const Y=O[0];i(Y),d(null),e&&URL.revokeObjectURL(e);const N=URL.createObjectURL(Y);t(N);try{l(!0);const V=($==null?void 0:$.uid)||"anonymous",ee=await bh(Y,"payment-screenshots",V);r(ee),ne.success("Payment screenshot uploaded successfully!"),console.log("Firebase Storage URL:",ee)}catch(V){console.error("Error uploading to Firebase:",V),d(V.message),ne.error(`Upload failed: ${V.message}`)}finally{l(!1)}}},{getRootProps:F,getInputProps:U,isDragActive:W}=ks({onDrop:A,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".bmp",".webp"]},multiple:!1,maxSize:10*1024*1024}),H=()=>{e&&URL.revokeObjectURL(e),t(null),i(null),r(null),d(null)},J=async()=>{try{if(j.length===0){ne.error("Your cart is empty. Please add items before placing an order.");return}if(!a){ne.error("Please upload a payment confirmation screenshot before placing your order.");return}if(!$){ne.error("Please log in to place an order.");return}u(!0);const O=Sh({cartItems:j,kitchenInfo:g,firebaseImageUrl:a,currentUser:$,paymentCalculation:E,groupedCartItems:y});console.log("Order data to be placed:",O);const Y=await kh(O);x(An()),ne.success("Order placed successfully! Redirecting to success page..."),setTimeout(()=>{k("/success",{state:{orderID:O.orderID,orderDocId:Y,totalAmount:E.totalPayment,kitchenName:g.name,pickupAddress:g.address,orderedItems:j.map(N=>{var C,G,Q,fe,Le,Ce,ve,mt,Ve,Ze;const V=((C=N.pickupDetails)==null?void 0:C.date)||N.selectedDate,ee=(G=N.pickupDetails)==null?void 0:G.orderType,M=ee==="PRE_ORDER"||N.isPreOrder||V&&V!==Z().format("YYYY-MM-DD");return console.log("🔍 [PaymentPage] Mapping cart item:",{name:(Q=N.food)==null?void 0:Q.name,pickupDate:V,orderType:ee,isPreOrderItem:M,originalIsPreOrder:N.isPreOrder}),{id:N.foodId||N.id,foodItemId:N.foodId||N.id,name:((fe=N.food)==null?void 0:fe.name)||"Unknown Item",description:((Le=N.food)==null?void 0:Le.description)||"This dish features tender, juicy flavors",imageUrl:((Ce=N.food)==null?void 0:Ce.imageUrl)||((ve=N.food)==null?void 0:ve.image),price:((mt=N.food)==null?void 0:mt.cost)||((Ve=N.food)==null?void 0:Ve.price)||"0.00",quantity:N.quantity||1,pickupDate:V,pickupTime:(Ze=N.pickupDetails)==null?void 0:Ze.time,isPreOrder:M,orderType:ee,isFromPreorder:N.isFromPreorder||M}})}})},2e3)}catch(O){console.error("Error placing order:",O),ne.error(`Failed to place order: ${O.message}`)}finally{u(!1)}};return s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsxs("div",{className:"padding-20 order-page",children:[s.jsx("h4",{className:"medium-title mb-12",children:"Pickup Address"}),s.jsx("p",{className:"body-text-med mb-20",children:g.address}),s.jsx("div",{className:"hr mb-18"}),s.jsxs("div",{className:"other-payments-wrapper mb-20",children:[s.jsx("h2",{className:"title",children:"Other Payments acceptable to James Kitchen Kitchen"}),s.jsxs("div",{className:"item-flex",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"text",children:"PayPal to"}),s.jsx("a",{className:"email",children:"jamesPayPal00@gmail.com"})]}),s.jsxs("div",{className:"copy",children:[s.jsx(sr,{})," Copy"]})]}),s.jsxs("div",{className:"item-flex",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"text",children:"Venmo to"}),s.jsx("a",{className:"email",children:"jamesVenmo00@gmail.com"})]}),s.jsxs("div",{className:"copy",children:[s.jsx(sr,{})," Copy"]})]})]}),s.jsxs("div",{className:"payment-method mb-20",children:[s.jsx("h5",{className:"medium-title mb-20",children:"Payment Details"}),s.jsx("div",{className:"hr mb-20"}),s.jsxs("div",{className:"item-flex",children:[s.jsx("span",{children:"Subtotal"}),s.jsxs("span",{children:["$",E.subtotal]})]}),s.jsxs("div",{className:"item-flex",children:[s.jsx("span",{children:"Sales Tax (7.25%)"}),s.jsxs("span",{children:["$",E.salesTax]})]}),s.jsx("div",{className:"hr mb-12"}),s.jsxs("div",{className:"item-flex bold",children:[s.jsx("span",{children:"Total Payment"}),s.jsxs("span",{children:["$",E.totalPayment]})]})]}),s.jsxs("div",{className:"order-items-section mb-20",children:[s.jsx("h3",{className:"order-items-title",children:"Select Pickup Date & Time"}),j.length===0?s.jsx("div",{className:"empty-cart-message",children:s.jsx("p",{className:"body-text-med",children:"No items in cart"})}):s.jsxs("div",{className:"pickup-items-list",children:[y.grabAndGo.length>0&&y.grabAndGo.map((O,Y)=>{var N,V,ee,M,C,G;return s.jsxs("div",{className:"pickup-item-row",children:[s.jsxs("div",{className:"item-info",children:[s.jsx("div",{className:"food-image",children:s.jsx("img",{src:((N=O.food)==null?void 0:N.imageUrl)||((V=O.food)==null?void 0:V.image),alt:(ee=O.food)==null?void 0:ee.name,onError:Q=>{Q.target.style.display="none"}})}),s.jsxs("div",{className:"food-details",children:[s.jsx("h5",{className:"food-name",children:((M=O.food)==null?void 0:M.name)||"Unknown Item"}),s.jsxs("div",{className:"pickup-time",children:["Today, ",O.displayPickupClock]}),s.jsxs("div",{className:"item-quantity",children:["Qty: ",O.quantity," × $",((C=O.food)==null?void 0:C.cost)||((G=O.food)==null?void 0:G.price)||"0.00"]})]})]}),s.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>I(O),children:s.jsx("img",{src:or,alt:"Edit pickup time"})})]},`grab-${O.foodId}-${Y}`)}),Object.keys(y.preOrders).length>0&&Object.entries(y.preOrders).map(([O,Y])=>Y.map((N,V)=>{var ee,M,C,G,Q,fe;return s.jsxs("div",{className:"pickup-item-row",children:[s.jsxs("div",{className:"item-info",children:[s.jsx("div",{className:"food-image",children:s.jsx("img",{src:((ee=N.food)==null?void 0:ee.imageUrl)||((M=N.food)==null?void 0:M.image),alt:(C=N.food)==null?void 0:C.name,onError:Le=>{Le.target.style.display="none"}})}),s.jsxs("div",{className:"food-details",children:[s.jsx("h5",{className:"food-name",children:((G=N.food)==null?void 0:G.name)||"Unknown Item"}),s.jsxs("div",{className:"pickup-time",children:[R(O),", ",N.displayPickupClock]}),s.jsxs("div",{className:"item-quantity",children:["Qty: ",N.quantity," × $",((Q=N.food)==null?void 0:Q.cost)||((fe=N.food)==null?void 0:fe.price)||"0.00"]})]})]}),s.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>I(N),children:s.jsx("img",{src:or,alt:"Edit pickup time"})})]},`preorder-${N.foodId}-${O}-${V}`)}))]})]}),s.jsxs("div",{className:"upload-section mb-20",children:[s.jsx("h5",{className:"medium-title mb-12",children:"Payment Confirmation"}),s.jsx("p",{className:"body-text-med mb-16",children:"Upload payment confirmation screenshot"}),e?s.jsx("div",{className:"upload-preview-container",children:s.jsxs("div",{className:"upload-preview",children:[s.jsx("img",{src:e,alt:"Payment confirmation preview",className:"preview-image"}),s.jsx("button",{type:"button",className:"remove-image-btn",onClick:H,"aria-label":"Remove image",disabled:o,children:s.jsx(lr,{size:16})}),o&&s.jsxs("div",{className:"upload-status-overlay",children:[s.jsx("div",{className:"upload-spinner"}),s.jsx("p",{children:"Uploading to Firebase..."})]})]})}):s.jsxs("div",{...F(),className:`upload-dropzone ${W?"active":""}`,children:[s.jsx("input",{...U()}),s.jsxs("div",{className:"upload-content",children:[s.jsx("div",{className:"upload-icon",children:s.jsx(wh,{size:32})}),s.jsx("h6",{className:"upload-title",children:W?"Drop image here":"Upload Screenshot"}),s.jsxs("p",{className:"upload-description",children:["Drag & drop your payment confirmation or"," ",s.jsx("span",{className:"upload-link",children:"browse files"})]}),s.jsx("p",{className:"upload-formats",children:"Supports: JPG, PNG, GIF, WebP (Max 10MB)"})]})]})]}),s.jsx("button",{className:"action-button",onClick:J,disabled:p||o||j.length===0,children:p?"Placing Order...":"Place My Order"})]})})}),h&&v&&s.jsx("div",{className:"modal-overlay",onClick:b,children:s.jsxs("div",{className:"modal-container",onClick:O=>O.stopPropagation(),children:[s.jsxs("div",{className:"modal-header",children:[s.jsx("h3",{className:"modal-title",children:"Edit Pickup Time"}),s.jsx("button",{className:"modal-close-btn",onClick:b,"aria-label":"Close modal",children:s.jsx(lr,{size:24})})]}),s.jsxs("div",{className:"modal-content",children:[s.jsxs("div",{className:"editing-item-info",children:[s.jsx("h4",{children:((X=v.food)==null?void 0:X.name)||"Food Item"}),s.jsxs("p",{children:["Current pickup: ",v.displayPickupTime," at"," ",v.displayPickupClock]})]}),s.jsxs("div",{className:"date-time-picker-container",children:[s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:"Select Pickup Date:"}),s.jsx("input",{type:"date",className:"picker-input",value:T||"",onChange:O=>z(O.target.value),min:Z().format("YYYY-MM-DD"),max:Z().add(7,"days").format("YYYY-MM-DD")})]}),s.jsxs("div",{className:"picker-field",children:[s.jsx("label",{className:"picker-label",children:"Select Pickup Time:"}),s.jsx("div",{className:"time-slots-container",children:["9:00 AM","9:30 AM","10:00 AM","10:30 AM","11:00 AM","11:30 AM","12:00 PM","12:30 PM","1:00 PM","1:30 PM","2:00 PM","2:30 PM","3:00 PM","3:30 PM","4:00 PM","4:30 PM","5:00 PM","5:30 PM","6:00 PM","6:30 PM"].map(O=>s.jsx("button",{className:`time-slot ${q===O?"selected":""}`,onClick:()=>P(O),children:O},O))})]})]})]}),s.jsxs("div",{className:"modal-footer",children:[s.jsx("button",{className:"btn-secondary",onClick:b,children:"Cancel"}),s.jsx("button",{className:"btn-primary",onClick:S,disabled:!T||!q,children:"Update Pickup Time"})]})]})})]})}const Dh="data:image/svg+xml,%3csvg%20width='173'%20height='162'%20viewBox='0%200%20173%20162'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='85.5'%20cy='93'%20r='67'%20fill='%23829F35'/%3e%3ccircle%20cx='166'%20cy='32.5'%20r='6.5'%20fill='%23829F35'/%3e%3cellipse%20cx='11'%20cy='10'%20rx='10.5'%20ry='10'%20fill='%23829F35'/%3e%3cellipse%20cx='5.5'%20cy='136.5'%20rx='5'%20ry='5.5'%20fill='%23829F35'/%3e%3cellipse%20cx='154'%20cy='160'%20rx='2.5'%20ry='2'%20fill='%23829F35'/%3e%3cpath%20d='M82.1976%20111C80.5838%20111%2078.9701%20110.393%2078.048%20109.179L65.138%2094.6121C63.2937%2092.5889%2063.7548%2089.7565%2066.0602%2088.1379C68.3655%2086.5193%2071.593%2086.924%2073.4373%2088.9472L82.1976%2098.8609L101.563%2076.808C103.407%2074.7848%20106.635%2074.3801%20108.94%2075.9987C111.245%2077.6173%20111.706%2080.4498%20109.862%2082.4729L86.3473%20109.179C85.1946%20110.191%2083.8114%20111%2082.1976%20111Z'%20fill='white'/%3e%3ccircle%20cx='114'%20cy='103.5'%20r='2.5'%20fill='white'/%3e%3ccircle%20cx='48.5'%20cy='76'%20r='4'%20fill='white'/%3e%3ccircle%20cx='107'%20cy='54.5'%20r='1.5'%20fill='white'/%3e%3ccircle%20cx='65.5'%20cy='125'%20r='2'%20fill='white'/%3e%3ccircle%20cx='87.5'%20cy='77'%20r='1'%20fill='white'/%3e%3c/svg%3e";function Lh(){const t=$t().state||{},{orderID:n,totalAmount:i,kitchenName:a,pickupAddress:r,orderedItems:o}=t;console.log("🔍 [SuccessPage] Order details received:",{orderID:n,totalAmount:i,kitchenName:a,pickupAddress:r,orderedItemsCount:(o==null?void 0:o.length)||0,orderedItems:o});const l=u=>u?Z(u).format("ddd, MMM D"):"Today",c=m.useMemo(()=>{if(!(o!=null&&o.length))return{goGrab:[],preOrders:{}};const u={goGrab:[],preOrders:{}};return console.log("🔍 [SuccessPage] Grouping ordered items:",o),o.forEach(h=>{if(console.log("🔍 [SuccessPage] Processing item:",{name:h.name,isPreOrder:h.isPreOrder,pickupDate:h.pickupDate,hasPickupDate:!!h.pickupDate}),(h.isPreOrder||h.isFromPreorder||h.pickupDate&&h.pickupDate!=="today"||h.orderType==="PRE_ORDER")&&h.pickupDate){const v=h.pickupDate;u.preOrders[v]||(u.preOrders[v]=[]),u.preOrders[v].push(h),console.log("🔍 [SuccessPage] Added to pre-orders for date:",v)}else u.goGrab.push(h),console.log("🔍 [SuccessPage] Added to go&grab")}),console.log("🔍 [SuccessPage] Final grouping:",{goGrabCount:u.goGrab.length,preOrderDates:Object.keys(u.preOrders),preOrderCounts:Object.entries(u.preOrders).map(([h,f])=>({date:h,count:f.length}))}),u},[o]),d=m.useMemo(()=>{if(!(o!=null&&o.length))return{subtotal:"0.00",tax:"0.00",total:"0.00"};const u=o.reduce((v,D)=>{const T=parseFloat(D.price||D.cost||0),_=parseInt(D.quantity||1);return v+T*_},0),h=u*.0725,f=u+h;return{subtotal:u.toFixed(2),tax:h.toFixed(2),total:f.toFixed(2)}},[o]),p=(o==null?void 0:o.reduce((u,h)=>u+parseInt(h.quantity||1),0))||0;return s.jsx("div",{className:"container",children:s.jsx("div",{className:"mobile-container",children:s.jsxs("div",{className:"padding-20 order-page",children:[s.jsxs("div",{className:"success-image-wrapper pt-5",children:[s.jsx("img",{src:Dh,alt:"Success"}),s.jsx("h2",{className:"title",children:"Your order has been successfully placed"}),s.jsx("p",{className:"text mb-20",children:"Your order is being worked on. It will take 20-30 min to get ready for pick up."})]}),o&&o.length>0?s.jsxs(s.Fragment,{children:[c.goGrab.length>0&&s.jsxs(s.Fragment,{children:[s.jsx("h2",{className:"small-title mb-16",children:"Go & Grab"}),s.jsx("div",{className:"menu-listing",children:c.goGrab.map((u,h)=>s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:u.imageUrl||"/src/assets/images/product.png",alt:u.name||"Food item",onError:f=>{f.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:u.name||"Unknown Item"}),s.jsx("div",{className:"text",children:u.description||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",u.price||u.cost||"0.00"]})]})]}),s.jsx("div",{className:"quantity-warpper",children:s.jsx("div",{className:"right",children:s.jsxs("div",{className:"quantity-text",children:["Qty: ",u.quantity||1]})})})]},`go-grab-${u.foodItemId||u.id}-${h}`))})]}),Object.entries(c.preOrders).map(([u,h])=>s.jsxs("div",{children:[s.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",l(u)]}),s.jsx("div",{className:"menu-listing",children:h.map((f,v)=>s.jsxs("div",{className:"menu-list",children:[s.jsxs("div",{className:"left",children:[s.jsx("div",{className:"image",children:s.jsx("img",{src:f.imageUrl||"/src/assets/images/product.png",alt:f.name||"Food item",onError:D=>{D.target.src="/src/assets/images/product.png"}})}),s.jsxs("div",{className:"data",children:[s.jsx("div",{className:"title",children:f.name||"Unknown Item"}),s.jsx("div",{className:"text",children:f.description||"This dish features tender, juicy flavors"}),s.jsxs("div",{className:"price",children:["$ ",f.price||f.cost||"0.00"]})]})]}),s.jsx("div",{className:"quantity-warpper",children:s.jsxs("div",{className:"right flex-column",children:[s.jsxs("div",{className:"quantity-text",children:["Qty: ",f.quantity||1]}),f.pickupTime&&s.jsx("div",{className:"pickup-time-display",children:f.pickupTime})]})})]},`preorder-${f.foodItemId||f.id}-${u}-${v}`))})]},u)),s.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsxs("span",{children:["Subtotal (",p," item",p!==1?"s":"","):"]}),s.jsxs("span",{children:["$",d.subtotal]})]}),s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[s.jsx("span",{children:"Tax (7.25%):"}),s.jsxs("span",{children:["$",d.tax]})]}),s.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[s.jsx("span",{children:"Total:"}),s.jsxs("span",{children:["$",d.total]})]})]})]}):s.jsxs("div",{style:{padding:"20px",background:"#f0f0f0",margin:"20px 0",borderRadius:"8px"},children:[s.jsx("h4",{children:"Debug: No Ordered Items Found"}),s.jsxs("p",{children:["Order Details: ",JSON.stringify(t,null,2)]})]}),s.jsx("div",{className:"success-actions",children:s.jsx(At,{to:"/",className:"action-button",children:"Back to Home"})})]})})})}function Ch(){const{user:e,initializing:t}=Zi(),n=$t();return t?s.jsx("div",{className:"d-flex vh-100 align-items-center justify-content-center",children:"Loading..."}):e?s.jsx(Ts,{}):s.jsx(Is,{to:"/login",replace:!0,state:{from:n}})}function Eh(){return s.jsxs(Ps,{children:[s.jsx(Ee,{path:"/",element:s.jsx(fm,{})}),s.jsx(Ee,{path:"/foods",element:s.jsx(Wa,{})}),s.jsx(Ee,{path:"/foods/:kitchenId",element:s.jsx(Wa,{})}),s.jsx(Ee,{path:"/share",element:s.jsx(Ha,{})}),s.jsx(Ee,{path:"/share/",element:s.jsx(Ha,{})}),s.jsx(Ee,{path:"/order",element:s.jsx(xm,{})}),s.jsx(Ee,{path:"/checkout",element:s.jsx(Rh,{})}),s.jsx(Ee,{path:"/success",element:s.jsx(Lh,{})}),s.jsx(Ee,{path:"/login",element:s.jsx(tm,{})}),s.jsx(Ee,{path:"/wechat/callback",element:s.jsx(nm,{})}),s.jsx(Ee,{element:s.jsx(Ch,{}),children:s.jsx(Ee,{path:"/home",element:s.jsx(em,{})})})]})}const _h=()=>{const e=He(),t=we(r=>r.auth),[n,i]=m.useState(window.innerWidth<768);m.useEffect(()=>{const r=()=>{i(window.innerWidth<768)};return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[]);const a=()=>{e(Zr())};return n?null:s.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#f8f9fa",padding:"15px",border:"2px solid #dee2e6",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",zIndex:9999,maxWidth:"300px"},children:[s.jsx("h6",{style:{margin:"0 0 10px 0",fontSize:"14px"},children:"🔍 Auth Debug Panel"}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Is Authenticated:"})," ",s.jsx("span",{style:{color:t.isAuthenticated?"green":"red"},children:t.isAuthenticated?"✅ YES":"❌ NO"})]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"Auth Status:"})," ",s.jsx("span",{style:{color:t.loading?"orange":"gray"},children:t.loading?"� LOADING":"READY"})]}),s.jsxs("div",{style:{marginBottom:"10px"},children:[s.jsx("strong",{children:"User:"})," ",t.user?s.jsx("span",{style:{color:"green"},children:t.user.nickname||t.user.openid||"WeChat User"}):s.jsx("span",{style:{color:"red"},children:"None"})]}),t.error&&s.jsxs("div",{style:{marginBottom:"10px",color:"red"},children:[s.jsx("strong",{children:"Error:"})," ",t.error]}),t.isAuthenticated&&s.jsx("button",{onClick:a,style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:"🔓 Logout"}),s.jsx("div",{style:{marginTop:"10px",fontSize:"10px",color:"#6c757d"},children:"WeChat Authentication System"})]})};kr(document.getElementById("root")).render(s.jsx(Ci.StrictMode,{children:s.jsx(bl,{store:Jo,children:s.jsx(Lr,{loading:s.jsx("div",{children:"Loading..."}),persistor:Xo,children:s.jsx(Os,{children:s.jsxs(Xf,{children:[s.jsx(Eh,{}),s.jsx(_h,{}),s.jsx(xc,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:4e3,style:{background:"#fff",color:"#333",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #e0e0e0"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})})}));
