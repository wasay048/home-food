var Cs=Object.defineProperty;var Ss=(e,t,n)=>t in e?Cs(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n;var Wn=(e,t,n)=>Ss(e,typeof t!="symbol"?t+"":t,n);import{r as f,a as Rs,u as fr,b as jt,c as Ds,g as hr,d as Ut,e as Es,L as Tt,R as Fi,N as Ls,O as _s,f as As,h as Le,B as Is}from"./vendor-Ctg7QK9K.js";import{_ as Ot,C as Pt,r as bt,S as Ts,F as $i,g as gr,a as Ct,b as Bt,c as Os,d as Ps,E as vr,o as Ns,L as Fs,i as xr,e as yr,v as br,f as da,h as wr,j as $s,k as ua,l as Ms,m as kr,n as Us,p as Et,q as ot,s as he,t as ce,u as de,w as Be,x as Fe,y as Bs,z as zs,A as jr,B as qs,D as Ws,G as pa,H as ht,I as Gn,J as Kn}from"./firebase-B79HKUX_.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))i(a);new MutationObserver(a=>{for(const o of a)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(a){const o={};return a.integrity&&(o.integrity=a.integrity),a.referrerPolicy&&(o.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?o.credentials="include":a.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function i(a){if(a.ep)return;a.ep=!0;const o=n(a);fetch(a.href,o)}})();var Cr={exports:{}},Cn={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Gs=f,Ks=Symbol.for("react.element"),Ys=Symbol.for("react.fragment"),Hs=Object.prototype.hasOwnProperty,Qs=Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Vs={key:!0,ref:!0,__self:!0,__source:!0};function Sr(e,t,n){var i,a={},o=null,s=null;n!==void 0&&(o=""+n),t.key!==void 0&&(o=""+t.key),t.ref!==void 0&&(s=t.ref);for(i in t)Hs.call(t,i)&&!Vs.hasOwnProperty(i)&&(a[i]=t[i]);if(e&&e.defaultProps)for(i in t=e.defaultProps,t)a[i]===void 0&&(a[i]=t[i]);return{$$typeof:Ks,type:e,key:o,ref:s,props:a,_owner:Qs.current}}Cn.Fragment=Ys;Cn.jsx=Sr;Cn.jsxs=Sr;Cr.exports=Cn;var r=Cr.exports,Rr,ma=Rs;Rr=ma.createRoot,ma.hydrateRoot;var Dr={exports:{}},Er={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var zt=f;function Zs(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Js=typeof Object.is=="function"?Object.is:Zs,Xs=zt.useSyncExternalStore,el=zt.useRef,tl=zt.useEffect,nl=zt.useMemo,il=zt.useDebugValue;Er.useSyncExternalStoreWithSelector=function(e,t,n,i,a){var o=el(null);if(o.current===null){var s={hasValue:!1,value:null};o.current=s}else s=o.current;o=nl(function(){function c(m){if(!d){if(d=!0,p=m,m=i(m),a!==void 0&&s.hasValue){var g=s.value;if(a(g,m))return u=g}return u=m}if(g=u,Js(p,m))return g;var C=i(m);return a!==void 0&&a(g,C)?(p=m,g):(p=m,u=C)}var d=!1,p,u,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,i,a]);var l=Xs(e,o[0],o[1]);return tl(function(){s.hasValue=!0,s.value=l},[l]),il(l),l};Dr.exports=Er;var al=Dr.exports;function rl(e){e()}function ol(){let e=null,t=null;return{clear(){e=null,t=null},notify(){rl(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let i=e;for(;i;)n.push(i),i=i.next;return n},subscribe(n){let i=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!i||e===null||(i=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var fa={notify(){},get:()=>[]};function sl(e,t){let n,i=fa,a=0,o=!1;function s(C){p();const j=i.subscribe(C);let P=!1;return()=>{P||(P=!0,j(),u())}}function l(){i.notify()}function c(){g.onStateChange&&g.onStateChange()}function d(){return o}function p(){a++,n||(n=e.subscribe(c),i=ol())}function u(){a--,n&&a===0&&(n(),n=void 0,i.clear(),i=fa)}function h(){o||(o=!0,p())}function m(){o&&(o=!1,u())}const g={addNestedSub:s,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:m,getListeners:()=>i};return g}var ll=()=>typeof window!="undefined"&&typeof window.document!="undefined"&&typeof window.document.createElement!="undefined",cl=ll(),dl=()=>typeof navigator!="undefined"&&navigator.product==="ReactNative",ul=dl(),pl=()=>cl||ul?f.useLayoutEffect:f.useEffect,ml=pl(),Yn=Symbol.for("react-redux-context"),Hn=typeof globalThis!="undefined"?globalThis:{};function fl(){var n;if(!f.createContext)return{};const e=(n=Hn[Yn])!=null?n:Hn[Yn]=new Map;let t=e.get(f.createContext);return t||(t=f.createContext(null),e.set(f.createContext,t)),t}var Je=fl();function hl(e){const{children:t,context:n,serverState:i,store:a}=e,o=f.useMemo(()=>{const c=sl(a);return{store:a,subscription:c,getServerState:i?()=>i:void 0}},[a,i]),s=f.useMemo(()=>a.getState(),[a]);ml(()=>{const{subscription:c}=o;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),s!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[o,s]);const l=n||Je;return f.createElement(l.Provider,{value:o},t)}var gl=hl;function Mi(e=Je){return function(){return f.useContext(e)}}var Lr=Mi();function _r(e=Je){const t=e===Je?Lr:Mi(e),n=()=>{const{store:i}=t();return i};return Object.assign(n,{withTypes:()=>n}),n}var vl=_r();function xl(e=Je){const t=e===Je?vl:_r(e),n=()=>t().dispatch;return Object.assign(n,{withTypes:()=>n}),n}var gt=xl(),yl=(e,t)=>e===t;function bl(e=Je){const t=e===Je?Lr:Mi(e),n=(i,a={})=>{const{equalityFn:o=yl}=typeof a=="function"?{equalityFn:a}:a,s=t(),{store:l,subscription:c,getServerState:d}=s;f.useRef(!0);const p=f.useCallback({[i.name](h){return i(h)}}[i.name],[i]),u=al.useSyncExternalStoreWithSelector(c.addNestedSub,l.getState,d||l.getState,p,o);return f.useDebugValue(u),u};return Object.assign(n,{withTypes:()=>n}),n}var Se=bl();function Xt(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Xt=function(n){return typeof n}:Xt=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},Xt(e)}function wl(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function kl(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function jl(e,t,n){return t&&kl(e.prototype,t),e}function Cl(e,t){return t&&(Xt(t)==="object"||typeof t=="function")?t:en(e)}function di(e){return di=Object.setPrototypeOf?Object.getPrototypeOf:function(n){return n.__proto__||Object.getPrototypeOf(n)},di(e)}function en(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sl(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ui(e,t)}function ui(e,t){return ui=Object.setPrototypeOf||function(i,a){return i.__proto__=a,i},ui(e,t)}function tn(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ar=function(e){Sl(t,e);function t(){var n,i;wl(this,t);for(var a=arguments.length,o=new Array(a),s=0;s<a;s++)o[s]=arguments[s];return i=Cl(this,(n=di(t)).call.apply(n,[this].concat(o))),tn(en(i),"state",{bootstrapped:!1}),tn(en(i),"_unsubscribe",void 0),tn(en(i),"handlePersistorState",function(){var l=i.props.persistor,c=l.getState(),d=c.bootstrapped;d&&(i.props.onBeforeLift?Promise.resolve(i.props.onBeforeLift()).finally(function(){return i.setState({bootstrapped:!0})}):i.setState({bootstrapped:!0}),i._unsubscribe&&i._unsubscribe())}),i}return jl(t,[{key:"componentDidMount",value:function(){this._unsubscribe=this.props.persistor.subscribe(this.handlePersistorState),this.handlePersistorState()}},{key:"componentWillUnmount",value:function(){this._unsubscribe&&this._unsubscribe()}},{key:"render",value:function(){return typeof this.props.children=="function"?this.props.children(this.state.bootstrapped):this.state.bootstrapped?this.props.children:this.props.loading}}]),t}(f.PureComponent);tn(Ar,"defaultProps",{children:null,loading:null});let Rl={data:""},Dl=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Rl,El=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Ll=/\/\*[^]*?\*\/|  +/g,ha=/\n+/g,Ve=(e,t)=>{let n="",i="",a="";for(let o in e){let s=e[o];o[0]=="@"?o[1]=="i"?n=o+" "+s+";":i+=o[1]=="f"?Ve(s,o):o+"{"+Ve(s,o[1]=="k"?"":t)+"}":typeof s=="object"?i+=Ve(s,t?t.replace(/([^,])+/g,l=>o.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,c=>/&/.test(c)?c.replace(/&/g,l):l?l+" "+c:c)):o):s!=null&&(o=/^--/.test(o)?o:o.replace(/[A-Z]/g,"-$&").toLowerCase(),a+=Ve.p?Ve.p(o,s):o+":"+s+";")}return n+(t&&a?t+"{"+a+"}":a)+i},Ge={},Ir=e=>{if(typeof e=="object"){let t="";for(let n in e)t+=n+Ir(e[n]);return t}return e},_l=(e,t,n,i,a)=>{let o=Ir(e),s=Ge[o]||(Ge[o]=(c=>{let d=0,p=11;for(;d<c.length;)p=101*p+c.charCodeAt(d++)>>>0;return"go"+p})(o));if(!Ge[s]){let c=o!==e?e:(d=>{let p,u,h=[{}];for(;p=El.exec(d.replace(Ll,""));)p[4]?h.shift():p[3]?(u=p[3].replace(ha," ").trim(),h.unshift(h[0][u]=h[0][u]||{})):h[0][p[1]]=p[2].replace(ha," ").trim();return h[0]})(e);Ge[s]=Ve(a?{["@keyframes "+s]:c}:c,n?"":"."+s)}let l=n&&Ge.g?Ge.g:null;return n&&(Ge.g=Ge[s]),((c,d,p,u)=>{u?d.data=d.data.replace(u,c):d.data.indexOf(c)===-1&&(d.data=p?c+d.data:d.data+c)})(Ge[s],t,i,l),s},Al=(e,t,n)=>e.reduce((i,a,o)=>{let s=t[o];if(s&&s.call){let l=s(n),c=l&&l.props&&l.props.className||/^go/.test(l)&&l;s=c?"."+c:l&&typeof l=="object"?l.props?"":Ve(l,""):l===!1?"":l}return i+a+(s==null?"":s)},"");function Sn(e){let t=this||{},n=e.call?e(t.p):e;return _l(n.unshift?n.raw?Al(n,[].slice.call(arguments,1),t.p):n.reduce((i,a)=>Object.assign(i,a&&a.call?a(t.p):a),{}):n,Dl(t.target),t.g,t.o,t.k)}let Tr,pi,mi;Sn.bind({g:1});let He=Sn.bind({k:1});function Il(e,t,n,i){Ve.p=t,Tr=e,pi=n,mi=i}function Xe(e,t){let n=this||{};return function(){let i=arguments;function a(o,s){let l=Object.assign({},o),c=l.className||a.className;n.p=Object.assign({theme:pi&&pi()},l),n.o=/ *go\d+/.test(c),l.className=Sn.apply(n,i)+(c?" "+c:"");let d=e;return e[0]&&(d=l.as||e,delete l.as),mi&&d[0]&&mi(l),Tr(d,l)}return a}}var Tl=e=>typeof e=="function",un=(e,t)=>Tl(e)?e(t):e,Ol=(()=>{let e=0;return()=>(++e).toString()})(),Or=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let t=matchMedia("(prefers-reduced-motion: reduce)");e=!t||t.matches}return e}})(),Pl=20,Ui="default",Pr=(e,t)=>{let{toastLimit:n}=e.settings;switch(t.type){case 0:return{...e,toasts:[t.toast,...e.toasts].slice(0,n)};case 1:return{...e,toasts:e.toasts.map(s=>s.id===t.toast.id?{...s,...t.toast}:s)};case 2:let{toast:i}=t;return Pr(e,{type:e.toasts.find(s=>s.id===i.id)?1:0,toast:i});case 3:let{toastId:a}=t;return{...e,toasts:e.toasts.map(s=>s.id===a||a===void 0?{...s,dismissed:!0,visible:!1}:s)};case 4:return t.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(s=>s.id!==t.toastId)};case 5:return{...e,pausedAt:t.time};case 6:let o=t.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(s=>({...s,pauseDuration:s.pauseDuration+o}))}}},nn=[],Nr={toasts:[],pausedAt:void 0,settings:{toastLimit:Pl}},ze={},Fr=(e,t=Ui)=>{ze[t]=Pr(ze[t]||Nr,e),nn.forEach(([n,i])=>{n===t&&i(ze[t])})},$r=e=>Object.keys(ze).forEach(t=>Fr(e,t)),Nl=e=>Object.keys(ze).find(t=>ze[t].toasts.some(n=>n.id===e)),Rn=(e=Ui)=>t=>{Fr(t,e)},Fl={blank:4e3,error:4e3,success:2e3,loading:1/0,custom:4e3},$l=(e={},t=Ui)=>{let[n,i]=f.useState(ze[t]||Nr),a=f.useRef(ze[t]);f.useEffect(()=>(a.current!==ze[t]&&i(ze[t]),nn.push([t,i]),()=>{let s=nn.findIndex(([l])=>l===t);s>-1&&nn.splice(s,1)}),[t]);let o=n.toasts.map(s=>{var l,c,d;return{...e,...e[s.type],...s,removeDelay:s.removeDelay||((l=e[s.type])==null?void 0:l.removeDelay)||(e==null?void 0:e.removeDelay),duration:s.duration||((c=e[s.type])==null?void 0:c.duration)||(e==null?void 0:e.duration)||Fl[s.type],style:{...e.style,...(d=e[s.type])==null?void 0:d.style,...s.style}}});return{...n,toasts:o}},Ml=(e,t="blank",n)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:t,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...n,id:(n==null?void 0:n.id)||Ol()}),qt=e=>(t,n)=>{let i=Ml(t,e,n);return Rn(i.toasterId||Nl(i.id))({type:2,toast:i}),i.id},ge=(e,t)=>qt("blank")(e,t);ge.error=qt("error");ge.success=qt("success");ge.loading=qt("loading");ge.custom=qt("custom");ge.dismiss=(e,t)=>{let n={type:3,toastId:e};t?Rn(t)(n):$r(n)};ge.dismissAll=e=>ge.dismiss(void 0,e);ge.remove=(e,t)=>{let n={type:4,toastId:e};t?Rn(t)(n):$r(n)};ge.removeAll=e=>ge.remove(void 0,e);ge.promise=(e,t,n)=>{let i=ge.loading(t.loading,{...n,...n==null?void 0:n.loading});return typeof e=="function"&&(e=e()),e.then(a=>{let o=t.success?un(t.success,a):void 0;return o?ge.success(o,{id:i,...n,...n==null?void 0:n.success}):ge.dismiss(i),a}).catch(a=>{let o=t.error?un(t.error,a):void 0;o?ge.error(o,{id:i,...n,...n==null?void 0:n.error}):ge.dismiss(i)}),e};var Ul=1e3,Bl=(e,t="default")=>{let{toasts:n,pausedAt:i}=$l(e,t),a=f.useRef(new Map).current,o=f.useCallback((u,h=Ul)=>{if(a.has(u))return;let m=setTimeout(()=>{a.delete(u),s({type:4,toastId:u})},h);a.set(u,m)},[]);f.useEffect(()=>{if(i)return;let u=Date.now(),h=n.map(m=>{if(m.duration===1/0)return;let g=(m.duration||0)+m.pauseDuration-(u-m.createdAt);if(g<0){m.visible&&ge.dismiss(m.id);return}return setTimeout(()=>ge.dismiss(m.id,t),g)});return()=>{h.forEach(m=>m&&clearTimeout(m))}},[n,i,t]);let s=f.useCallback(Rn(t),[t]),l=f.useCallback(()=>{s({type:5,time:Date.now()})},[s]),c=f.useCallback((u,h)=>{s({type:1,toast:{id:u,height:h}})},[s]),d=f.useCallback(()=>{i&&s({type:6,time:Date.now()})},[i,s]),p=f.useCallback((u,h)=>{let{reverseOrder:m=!1,gutter:g=8,defaultPosition:C}=h||{},j=n.filter(_=>(_.position||C)===(u.position||C)&&_.height),P=j.findIndex(_=>_.id===u.id),q=j.filter((_,w)=>w<P&&_.visible).length;return j.filter(_=>_.visible).slice(...m?[q+1]:[0,q]).reduce((_,w)=>_+(w.height||0)+g,0)},[n]);return f.useEffect(()=>{n.forEach(u=>{if(u.dismissed)o(u.id,u.removeDelay);else{let h=a.get(u.id);h&&(clearTimeout(h),a.delete(u.id))}})},[n,o]),{toasts:n,handlers:{updateHeight:c,startPause:l,endPause:d,calculateOffset:p}}},zl=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,ql=He`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,Wl=He`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Gl=Xe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${zl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${ql} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${Wl} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Kl=He`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Yl=Xe("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Kl} 1s linear infinite;
`,Hl=He`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Ql=He`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Vl=Xe("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Hl} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Ql} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Zl=Xe("div")`
  position: absolute;
`,Jl=Xe("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Xl=He`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,ec=Xe("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Xl} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tc=({toast:e})=>{let{icon:t,type:n,iconTheme:i}=e;return t!==void 0?typeof t=="string"?f.createElement(ec,null,t):t:n==="blank"?null:f.createElement(Jl,null,f.createElement(Yl,{...i}),n!=="loading"&&f.createElement(Zl,null,n==="error"?f.createElement(Gl,{...i}):f.createElement(Vl,{...i})))},nc=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,ic=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,ac="0%{opacity:0;} 100%{opacity:1;}",rc="0%{opacity:1;} 100%{opacity:0;}",oc=Xe("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,sc=Xe("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,lc=(e,t)=>{let n=e.includes("top")?1:-1,[i,a]=Or()?[ac,rc]:[nc(n),ic(n)];return{animation:t?`${He(i)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${He(a)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}},cc=f.memo(({toast:e,position:t,style:n,children:i})=>{let a=e.height?lc(e.position||t||"top-center",e.visible):{opacity:0},o=f.createElement(tc,{toast:e}),s=f.createElement(sc,{...e.ariaProps},un(e.message,e));return f.createElement(oc,{className:e.className,style:{...a,...n,...e.style}},typeof i=="function"?i({icon:o,message:s}):f.createElement(f.Fragment,null,o,s))});Il(f.createElement);var dc=({id:e,className:t,style:n,onHeightUpdate:i,children:a})=>{let o=f.useCallback(s=>{if(s){let l=()=>{let c=s.getBoundingClientRect().height;i(e,c)};l(),new MutationObserver(l).observe(s,{subtree:!0,childList:!0,characterData:!0})}},[e,i]);return f.createElement("div",{ref:o,className:t,style:n},a)},uc=(e,t)=>{let n=e.includes("top"),i=n?{top:0}:{bottom:0},a=e.includes("center")?{justifyContent:"center"}:e.includes("right")?{justifyContent:"flex-end"}:{};return{left:0,right:0,display:"flex",position:"absolute",transition:Or()?void 0:"all 230ms cubic-bezier(.21,1.02,.73,1)",transform:`translateY(${t*(n?1:-1)}px)`,...i,...a}},pc=Sn`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`,Kt=16,mc=({reverseOrder:e,position:t="top-center",toastOptions:n,gutter:i,children:a,toasterId:o,containerStyle:s,containerClassName:l})=>{let{toasts:c,handlers:d}=Bl(n,o);return f.createElement("div",{"data-rht-toaster":o||"",style:{position:"fixed",zIndex:9999,top:Kt,left:Kt,right:Kt,bottom:Kt,pointerEvents:"none",...s},className:l,onMouseEnter:d.startPause,onMouseLeave:d.endPause},c.map(p=>{let u=p.position||t,h=d.calculateOffset(p,{reverseOrder:e,gutter:i,defaultPosition:t}),m=uc(u,h);return f.createElement(dc,{id:p.id,key:p.id,onHeightUpdate:d.updateHeight,className:p.visible?pc:"",style:m},p.type==="custom"?un(p.message,p):a?a(p):f.createElement(cc,{toast:p,position:u}))}))},xt=ge;function we(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var fc=typeof Symbol=="function"&&Symbol.observable||"@@observable",ga=fc,Qn=()=>Math.random().toString(36).substring(7).split("").join("."),hc={INIT:`@@redux/INIT${Qn()}`,REPLACE:`@@redux/REPLACE${Qn()}`,PROBE_UNKNOWN_ACTION:()=>`@@redux/PROBE_UNKNOWN_ACTION${Qn()}`},pn=hc;function Bi(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function zi(e,t,n){if(typeof e!="function")throw new Error(we(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(we(0));if(typeof t=="function"&&typeof n=="undefined"&&(n=t,t=void 0),typeof n!="undefined"){if(typeof n!="function")throw new Error(we(1));return n(zi)(e,t)}let i=e,a=t,o=new Map,s=o,l=0,c=!1;function d(){s===o&&(s=new Map,o.forEach((j,P)=>{s.set(P,j)}))}function p(){if(c)throw new Error(we(3));return a}function u(j){if(typeof j!="function")throw new Error(we(4));if(c)throw new Error(we(5));let P=!0;d();const q=l++;return s.set(q,j),function(){if(P){if(c)throw new Error(we(6));P=!1,d(),s.delete(q),o=null}}}function h(j){if(!Bi(j))throw new Error(we(7));if(typeof j.type=="undefined")throw new Error(we(8));if(typeof j.type!="string")throw new Error(we(17));if(c)throw new Error(we(9));try{c=!0,a=i(a,j)}finally{c=!1}return(o=s).forEach(q=>{q()}),j}function m(j){if(typeof j!="function")throw new Error(we(10));i=j,h({type:pn.REPLACE})}function g(){const j=u;return{subscribe(P){if(typeof P!="object"||P===null)throw new Error(we(11));function q(){const w=P;w.next&&w.next(p())}return q(),{unsubscribe:j(q)}},[ga](){return this}}}return h({type:pn.INIT}),{dispatch:h,subscribe:u,getState:p,replaceReducer:m,[ga]:g}}function gc(e){Object.keys(e).forEach(t=>{const n=e[t];if(typeof n(void 0,{type:pn.INIT})=="undefined")throw new Error(we(12));if(typeof n(void 0,{type:pn.PROBE_UNKNOWN_ACTION()})=="undefined")throw new Error(we(13))})}function Mr(e){const t=Object.keys(e),n={};for(let o=0;o<t.length;o++){const s=t[o];typeof e[s]=="function"&&(n[s]=e[s])}const i=Object.keys(n);let a;try{gc(n)}catch(o){a=o}return function(s={},l){if(a)throw a;let c=!1;const d={};for(let p=0;p<i.length;p++){const u=i[p],h=n[u],m=s[u],g=h(m,l);if(typeof g=="undefined")throw l&&l.type,new Error(we(14));d[u]=g,c=c||g!==m}return c=c||i.length!==Object.keys(s).length,c?d:s}}function mn(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...i)=>t(n(...i)))}function vc(...e){return t=>(n,i)=>{const a=t(n,i);let o=()=>{throw new Error(we(15))};const s={getState:a.getState,dispatch:(c,...d)=>o(c,...d)},l=e.map(c=>c(s));return o=mn(...l)(a.dispatch),{...a,dispatch:o}}}function xc(e){return Bi(e)&&"type"in e&&typeof e.type=="string"}var Ur=Symbol.for("immer-nothing"),va=Symbol.for("immer-draftable"),Te=Symbol.for("immer-state");function Ne(e,...t){throw new Error(`[Immer] minified error nr: ${e}. Full error at: https://bit.ly/3cXEKWf`)}var wt=Object.getPrototypeOf;function dt(e){return!!e&&!!e[Te]}function Qe(e){var t;return e?Br(e)||Array.isArray(e)||!!e[va]||!!((t=e.constructor)!=null&&t[va])||En(e)||Ln(e):!1}var yc=Object.prototype.constructor.toString();function Br(e){if(!e||typeof e!="object")return!1;const t=wt(e);if(t===null)return!0;const n=Object.hasOwnProperty.call(t,"constructor")&&t.constructor;return n===Object?!0:typeof n=="function"&&Function.toString.call(n)===yc}function fn(e,t){Dn(e)===0?Reflect.ownKeys(e).forEach(n=>{t(n,e[n],e)}):e.forEach((n,i)=>t(i,n,e))}function Dn(e){const t=e[Te];return t?t.type_:Array.isArray(e)?1:En(e)?2:Ln(e)?3:0}function fi(e,t){return Dn(e)===2?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function zr(e,t,n){const i=Dn(e);i===2?e.set(t,n):i===3?e.add(n):e[t]=n}function bc(e,t){return e===t?e!==0||1/e===1/t:e!==e&&t!==t}function En(e){return e instanceof Map}function Ln(e){return e instanceof Set}function tt(e){return e.copy_||e.base_}function hi(e,t){if(En(e))return new Map(e);if(Ln(e))return new Set(e);if(Array.isArray(e))return Array.prototype.slice.call(e);const n=Br(e);if(t===!0||t==="class_only"&&!n){const i=Object.getOwnPropertyDescriptors(e);delete i[Te];let a=Reflect.ownKeys(i);for(let o=0;o<a.length;o++){const s=a[o],l=i[s];l.writable===!1&&(l.writable=!0,l.configurable=!0),(l.get||l.set)&&(i[s]={configurable:!0,writable:!0,enumerable:l.enumerable,value:e[s]})}return Object.create(wt(e),i)}else{const i=wt(e);if(i!==null&&n)return{...e};const a=Object.create(i);return Object.assign(a,e)}}function qi(e,t=!1){return _n(e)||dt(e)||!Qe(e)||(Dn(e)>1&&(e.set=e.add=e.clear=e.delete=wc),Object.freeze(e),t&&Object.entries(e).forEach(([n,i])=>qi(i,!0))),e}function wc(){Ne(2)}function _n(e){return Object.isFrozen(e)}var kc={};function ut(e){const t=kc[e];return t||Ne(0,e),t}var Nt;function qr(){return Nt}function jc(e,t){return{drafts_:[],parent_:e,immer_:t,canAutoFreeze_:!0,unfinalizedDrafts_:0}}function xa(e,t){t&&(ut("Patches"),e.patches_=[],e.inversePatches_=[],e.patchListener_=t)}function gi(e){vi(e),e.drafts_.forEach(Cc),e.drafts_=null}function vi(e){e===Nt&&(Nt=e.parent_)}function ya(e){return Nt=jc(Nt,e)}function Cc(e){const t=e[Te];t.type_===0||t.type_===1?t.revoke_():t.revoked_=!0}function ba(e,t){t.unfinalizedDrafts_=t.drafts_.length;const n=t.drafts_[0];return e!==void 0&&e!==n?(n[Te].modified_&&(gi(t),Ne(4)),Qe(e)&&(e=hn(t,e),t.parent_||gn(t,e)),t.patches_&&ut("Patches").generateReplacementPatches_(n[Te].base_,e,t.patches_,t.inversePatches_)):e=hn(t,n,[]),gi(t),t.patches_&&t.patchListener_(t.patches_,t.inversePatches_),e!==Ur?e:void 0}function hn(e,t,n){if(_n(t))return t;const i=t[Te];if(!i)return fn(t,(a,o)=>wa(e,i,t,a,o,n)),t;if(i.scope_!==e)return t;if(!i.modified_)return gn(e,i.base_,!0),i.base_;if(!i.finalized_){i.finalized_=!0,i.scope_.unfinalizedDrafts_--;const a=i.copy_;let o=a,s=!1;i.type_===3&&(o=new Set(a),a.clear(),s=!0),fn(o,(l,c)=>wa(e,i,a,l,c,n,s)),gn(e,a,!1),n&&e.patches_&&ut("Patches").generatePatches_(i,n,e.patches_,e.inversePatches_)}return i.copy_}function wa(e,t,n,i,a,o,s){if(dt(a)){const l=o&&t&&t.type_!==3&&!fi(t.assigned_,i)?o.concat(i):void 0,c=hn(e,a,l);if(zr(n,i,c),dt(c))e.canAutoFreeze_=!1;else return}else s&&n.add(a);if(Qe(a)&&!_n(a)){if(!e.immer_.autoFreeze_&&e.unfinalizedDrafts_<1)return;hn(e,a),(!t||!t.scope_.parent_)&&typeof i!="symbol"&&Object.prototype.propertyIsEnumerable.call(n,i)&&gn(e,a)}}function gn(e,t,n=!1){!e.parent_&&e.immer_.autoFreeze_&&e.canAutoFreeze_&&qi(t,n)}function Sc(e,t){const n=Array.isArray(e),i={type_:n?1:0,scope_:t?t.scope_:qr(),modified_:!1,finalized_:!1,assigned_:{},parent_:t,base_:e,draft_:null,copy_:null,revoke_:null,isManual_:!1};let a=i,o=Wi;n&&(a=[i],o=Ft);const{revoke:s,proxy:l}=Proxy.revocable(a,o);return i.draft_=l,i.revoke_=s,l}var Wi={get(e,t){if(t===Te)return e;const n=tt(e);if(!fi(n,t))return Rc(e,n,t);const i=n[t];return e.finalized_||!Qe(i)?i:i===Vn(e.base_,t)?(Zn(e),e.copy_[t]=yi(i,e)):i},has(e,t){return t in tt(e)},ownKeys(e){return Reflect.ownKeys(tt(e))},set(e,t,n){const i=Wr(tt(e),t);if(i!=null&&i.set)return i.set.call(e.draft_,n),!0;if(!e.modified_){const a=Vn(tt(e),t),o=a==null?void 0:a[Te];if(o&&o.base_===n)return e.copy_[t]=n,e.assigned_[t]=!1,!0;if(bc(n,a)&&(n!==void 0||fi(e.base_,t)))return!0;Zn(e),xi(e)}return e.copy_[t]===n&&(n!==void 0||t in e.copy_)||Number.isNaN(n)&&Number.isNaN(e.copy_[t])||(e.copy_[t]=n,e.assigned_[t]=!0),!0},deleteProperty(e,t){return Vn(e.base_,t)!==void 0||t in e.base_?(e.assigned_[t]=!1,Zn(e),xi(e)):delete e.assigned_[t],e.copy_&&delete e.copy_[t],!0},getOwnPropertyDescriptor(e,t){const n=tt(e),i=Reflect.getOwnPropertyDescriptor(n,t);return i&&{writable:!0,configurable:e.type_!==1||t!=="length",enumerable:i.enumerable,value:n[t]}},defineProperty(){Ne(11)},getPrototypeOf(e){return wt(e.base_)},setPrototypeOf(){Ne(12)}},Ft={};fn(Wi,(e,t)=>{Ft[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}});Ft.deleteProperty=function(e,t){return Ft.set.call(this,e,t,void 0)};Ft.set=function(e,t,n){return Wi.set.call(this,e[0],t,n,e[0])};function Vn(e,t){const n=e[Te];return(n?tt(n):e)[t]}function Rc(e,t,n){var a;const i=Wr(t,n);return i?"value"in i?i.value:(a=i.get)==null?void 0:a.call(e.draft_):void 0}function Wr(e,t){if(!(t in e))return;let n=wt(e);for(;n;){const i=Object.getOwnPropertyDescriptor(n,t);if(i)return i;n=wt(n)}}function xi(e){e.modified_||(e.modified_=!0,e.parent_&&xi(e.parent_))}function Zn(e){e.copy_||(e.copy_=hi(e.base_,e.scope_.immer_.useStrictShallowCopy_))}var Dc=class{constructor(e){this.autoFreeze_=!0,this.useStrictShallowCopy_=!1,this.produce=(t,n,i)=>{if(typeof t=="function"&&typeof n!="function"){const o=n;n=t;const s=this;return function(c=o,...d){return s.produce(c,p=>n.call(this,p,...d))}}typeof n!="function"&&Ne(6),i!==void 0&&typeof i!="function"&&Ne(7);let a;if(Qe(t)){const o=ya(this),s=yi(t,void 0);let l=!0;try{a=n(s),l=!1}finally{l?gi(o):vi(o)}return xa(o,i),ba(a,o)}else if(!t||typeof t!="object"){if(a=n(t),a===void 0&&(a=t),a===Ur&&(a=void 0),this.autoFreeze_&&qi(a,!0),i){const o=[],s=[];ut("Patches").generateReplacementPatches_(t,a,o,s),i(o,s)}return a}else Ne(1,t)},this.produceWithPatches=(t,n)=>{if(typeof t=="function")return(s,...l)=>this.produceWithPatches(s,c=>t(c,...l));let i,a;return[this.produce(t,n,(s,l)=>{i=s,a=l}),i,a]},typeof(e==null?void 0:e.autoFreeze)=="boolean"&&this.setAutoFreeze(e.autoFreeze),typeof(e==null?void 0:e.useStrictShallowCopy)=="boolean"&&this.setUseStrictShallowCopy(e.useStrictShallowCopy)}createDraft(e){Qe(e)||Ne(8),dt(e)&&(e=Ec(e));const t=ya(this),n=yi(e,void 0);return n[Te].isManual_=!0,vi(t),n}finishDraft(e,t){const n=e&&e[Te];(!n||!n.isManual_)&&Ne(9);const{scope_:i}=n;return xa(i,t),ba(void 0,i)}setAutoFreeze(e){this.autoFreeze_=e}setUseStrictShallowCopy(e){this.useStrictShallowCopy_=e}applyPatches(e,t){let n;for(n=t.length-1;n>=0;n--){const a=t[n];if(a.path.length===0&&a.op==="replace"){e=a.value;break}}n>-1&&(t=t.slice(n+1));const i=ut("Patches").applyPatches_;return dt(e)?i(e,t):this.produce(e,a=>i(a,t))}};function yi(e,t){const n=En(e)?ut("MapSet").proxyMap_(e,t):Ln(e)?ut("MapSet").proxySet_(e,t):Sc(e,t);return(t?t.scope_:qr()).drafts_.push(n),n}function Ec(e){return dt(e)||Ne(10,e),Gr(e)}function Gr(e){if(!Qe(e)||_n(e))return e;const t=e[Te];let n;if(t){if(!t.modified_)return t.base_;t.finalized_=!0,n=hi(e,t.scope_.immer_.useStrictShallowCopy_)}else n=hi(e,!0);return fn(n,(i,a)=>{zr(n,i,Gr(a))}),t&&(t.finalized_=!1),n}var Oe=new Dc,Kr=Oe.produce;Oe.produceWithPatches.bind(Oe);Oe.setAutoFreeze.bind(Oe);Oe.setUseStrictShallowCopy.bind(Oe);Oe.applyPatches.bind(Oe);Oe.createDraft.bind(Oe);Oe.finishDraft.bind(Oe);function Yr(e){return({dispatch:n,getState:i})=>a=>o=>typeof o=="function"?o(n,i,e):a(o)}var Lc=Yr(),_c=Yr,Ac=typeof window!="undefined"&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__?window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__:function(){if(arguments.length!==0)return typeof arguments[0]=="object"?mn:mn.apply(null,arguments)},Ic=e=>e&&typeof e.match=="function";function Lt(e,t){function n(...i){if(t){let a=t(...i);if(!a)throw new Error(Ye(0));return{type:e,payload:a.payload,..."meta"in a&&{meta:a.meta},..."error"in a&&{error:a.error}}}return{type:e,payload:i[0]}}return n.toString=()=>`${e}`,n.type=e,n.match=i=>xc(i)&&i.type===e,n}var Hr=class Dt extends Array{constructor(...t){super(...t),Object.setPrototypeOf(this,Dt.prototype)}static get[Symbol.species](){return Dt}concat(...t){return super.concat.apply(this,t)}prepend(...t){return t.length===1&&Array.isArray(t[0])?new Dt(...t[0].concat(this)):new Dt(...t.concat(this))}};function ka(e){return Qe(e)?Kr(e,()=>{}):e}function Yt(e,t,n){return e.has(t)?e.get(t):e.set(t,n(t)).get(t)}function Tc(e){return typeof e=="boolean"}var Oc=()=>function(t){const{thunk:n=!0,immutableCheck:i=!0,serializableCheck:a=!0,actionCreatorCheck:o=!0}=t!=null?t:{};let s=new Hr;return n&&(Tc(n)?s.push(Lc):s.push(_c(n.extraArgument))),s},Pc="RTK_autoBatch",ja=e=>t=>{setTimeout(t,e)},Nc=(e={type:"raf"})=>t=>(...n)=>{const i=t(...n);let a=!0,o=!1,s=!1;const l=new Set,c=e.type==="tick"?queueMicrotask:e.type==="raf"?typeof window!="undefined"&&window.requestAnimationFrame?window.requestAnimationFrame:ja(10):e.type==="callback"?e.queueNotification:ja(e.timeout),d=()=>{s=!1,o&&(o=!1,l.forEach(p=>p()))};return Object.assign({},i,{subscribe(p){const u=()=>a&&p(),h=i.subscribe(u);return l.add(p),()=>{h(),l.delete(p)}},dispatch(p){var u;try{return a=!((u=p==null?void 0:p.meta)!=null&&u[Pc]),o=!a,o&&(s||(s=!0,c(d))),i.dispatch(p)}finally{a=!0}}})},Fc=e=>function(n){const{autoBatch:i=!0}=n!=null?n:{};let a=new Hr(e);return i&&a.push(Nc(typeof i=="object"?i:void 0)),a};function $c(e){const t=Oc(),{reducer:n=void 0,middleware:i,devTools:a=!0,preloadedState:o=void 0,enhancers:s=void 0}=e||{};let l;if(typeof n=="function")l=n;else if(Bi(n))l=Mr(n);else throw new Error(Ye(1));let c;typeof i=="function"?c=i(t):c=t();let d=mn;a&&(d=Ac({trace:!1,...typeof a=="object"&&a}));const p=vc(...c),u=Fc(p);let h=typeof s=="function"?s(u):u();const m=d(...h);return zi(l,o,m)}function Qr(e){const t={},n=[];let i;const a={addCase(o,s){const l=typeof o=="string"?o:o.type;if(!l)throw new Error(Ye(28));if(l in t)throw new Error(Ye(29));return t[l]=s,a},addMatcher(o,s){return n.push({matcher:o,reducer:s}),a},addDefaultCase(o){return i=o,a}};return e(a),[t,n,i]}function Mc(e){return typeof e=="function"}function Uc(e,t){let[n,i,a]=Qr(t),o;if(Mc(e))o=()=>ka(e());else{const l=ka(e);o=()=>l}function s(l=o(),c){let d=[n[c.type],...i.filter(({matcher:p})=>p(c)).map(({reducer:p})=>p)];return d.filter(p=>!!p).length===0&&(d=[a]),d.reduce((p,u)=>{if(u)if(dt(p)){const m=u(p,c);return m===void 0?p:m}else{if(Qe(p))return Kr(p,h=>u(h,c));{const h=u(p,c);if(h===void 0){if(p===null)return p;throw Error("A case reducer on a non-draftable value must not return undefined")}return h}}return p},l)}return s.getInitialState=o,s}var Bc=(e,t)=>Ic(e)?e.match(t):e(t);function zc(...e){return t=>e.some(n=>Bc(n,t))}var qc="ModuleSymbhasOwnPr-0123456789ABCDEFGHNRVfgctiUvz_KqYTJkLxpZXIjQW",Wc=(e=21)=>{let t="",n=e;for(;n--;)t+=qc[Math.random()*64|0];return t},Gc=["name","message","stack","code"],Jn=class{constructor(e,t){Wn(this,"_type");this.payload=e,this.meta=t}},Ca=class{constructor(e,t){Wn(this,"_type");this.payload=e,this.meta=t}},Kc=e=>{if(typeof e=="object"&&e!==null){const t={};for(const n of Gc)typeof e[n]=="string"&&(t[n]=e[n]);return t}return{message:String(e)}},Sa="External signal was aborted",ye=(()=>{function e(t,n,i){const a=Lt(t+"/fulfilled",(c,d,p,u)=>({payload:c,meta:{...u||{},arg:p,requestId:d,requestStatus:"fulfilled"}})),o=Lt(t+"/pending",(c,d,p)=>({payload:void 0,meta:{...p||{},arg:d,requestId:c,requestStatus:"pending"}})),s=Lt(t+"/rejected",(c,d,p,u,h)=>({payload:u,error:(i&&i.serializeError||Kc)(c||"Rejected"),meta:{...h||{},arg:p,requestId:d,rejectedWithValue:!!u,requestStatus:"rejected",aborted:(c==null?void 0:c.name)==="AbortError",condition:(c==null?void 0:c.name)==="ConditionError"}}));function l(c,{signal:d}={}){return(p,u,h)=>{const m=i!=null&&i.idGenerator?i.idGenerator(c):Wc(),g=new AbortController;let C,j;function P(_){j=_,g.abort()}d&&(d.aborted?P(Sa):d.addEventListener("abort",()=>P(Sa),{once:!0}));const q=async function(){var v,k;let _;try{let M=(v=i==null?void 0:i.condition)==null?void 0:v.call(i,c,{getState:u,extra:h});if(Hc(M)&&(M=await M),M===!1||g.signal.aborted)throw{name:"ConditionError",message:"Aborted due to condition callback returning false."};const $=new Promise((b,O)=>{C=()=>{O({name:"AbortError",message:j||"Aborted"})},g.signal.addEventListener("abort",C)});p(o(m,c,(k=i==null?void 0:i.getPendingMeta)==null?void 0:k.call(i,{requestId:m,arg:c},{getState:u,extra:h}))),_=await Promise.race([$,Promise.resolve(n(c,{dispatch:p,getState:u,extra:h,requestId:m,signal:g.signal,abort:P,rejectWithValue:(b,O)=>new Jn(b,O),fulfillWithValue:(b,O)=>new Ca(b,O)})).then(b=>{if(b instanceof Jn)throw b;return b instanceof Ca?a(b.payload,m,c,b.meta):a(b,m,c)})])}catch(M){_=M instanceof Jn?s(null,m,c,M.payload,M.meta):s(M,m,c)}finally{C&&g.signal.removeEventListener("abort",C)}return i&&!i.dispatchConditionRejection&&s.match(_)&&_.meta.condition||p(_),_}();return Object.assign(q,{abort:P,requestId:m,arg:c,unwrap(){return q.then(Yc)}})}}return Object.assign(l,{pending:o,rejected:s,fulfilled:a,settled:zc(s,a),typePrefix:t})}return e.withTypes=()=>e,e})();function Yc(e){if(e.meta&&e.meta.rejectedWithValue)throw e.payload;if(e.error)throw e.error;return e.payload}function Hc(e){return e!==null&&typeof e=="object"&&typeof e.then=="function"}var Qc=Symbol.for("rtk-slice-createasyncthunk");function Vc(e,t){return`${e}/${t}`}function Zc({creators:e}={}){var n;const t=(n=e==null?void 0:e.asyncThunk)==null?void 0:n[Qc];return function(a){const{name:o,reducerPath:s=o}=a;if(!o)throw new Error(Ye(11));const l=(typeof a.reducers=="function"?a.reducers(Xc()):a.reducers)||{},c=Object.keys(l),d={sliceCaseReducersByName:{},sliceCaseReducersByType:{},actionCreators:{},sliceMatchers:[]},p={addCase(w,v){const k=typeof w=="string"?w:w.type;if(!k)throw new Error(Ye(12));if(k in d.sliceCaseReducersByType)throw new Error(Ye(13));return d.sliceCaseReducersByType[k]=v,p},addMatcher(w,v){return d.sliceMatchers.push({matcher:w,reducer:v}),p},exposeAction(w,v){return d.actionCreators[w]=v,p},exposeCaseReducer(w,v){return d.sliceCaseReducersByName[w]=v,p}};c.forEach(w=>{const v=l[w],k={reducerName:w,type:Vc(o,w),createNotation:typeof a.reducers=="function"};td(v)?id(k,v,p,t):ed(k,v,p)});function u(){const[w={},v=[],k=void 0]=typeof a.extraReducers=="function"?Qr(a.extraReducers):[a.extraReducers],M={...w,...d.sliceCaseReducersByType};return Uc(a.initialState,$=>{for(let b in M)$.addCase(b,M[b]);for(let b of d.sliceMatchers)$.addMatcher(b.matcher,b.reducer);for(let b of v)$.addMatcher(b.matcher,b.reducer);k&&$.addDefaultCase(k)})}const h=w=>w,m=new Map,g=new WeakMap;let C;function j(w,v){return C||(C=u()),C(w,v)}function P(){return C||(C=u()),C.getInitialState()}function q(w,v=!1){function k($){let b=$[w];return typeof b=="undefined"&&v&&(b=Yt(g,k,P)),b}function M($=h){const b=Yt(m,v,()=>new WeakMap);return Yt(b,$,()=>{var E;const O={};for(const[W,R]of Object.entries((E=a.selectors)!=null?E:{}))O[W]=Jc(R,$,()=>Yt(g,$,P),v);return O})}return{reducerPath:w,getSelectors:M,get selectors(){return M(k)},selectSlice:k}}const _={name:o,reducer:j,actions:d.actionCreators,caseReducers:d.sliceCaseReducersByName,getInitialState:P,...q(s),injectInto(w,{reducerPath:v,...k}={}){const M=v!=null?v:s;return w.inject({reducerPath:M,reducer:j},k),{..._,...q(M,!0)}}};return _}}function Jc(e,t,n,i){function a(o,...s){let l=t(o);return typeof l=="undefined"&&i&&(l=n()),e(l,...s)}return a.unwrapped=e,a}var Wt=Zc();function Xc(){function e(t,n){return{_reducerDefinitionType:"asyncThunk",payloadCreator:t,...n}}return e.withTypes=()=>e,{reducer(t){return Object.assign({[t.name](...n){return t(...n)}}[t.name],{_reducerDefinitionType:"reducer"})},preparedReducer(t,n){return{_reducerDefinitionType:"reducerWithPrepare",prepare:t,reducer:n}},asyncThunk:e}}function ed({type:e,reducerName:t,createNotation:n},i,a){let o,s;if("reducer"in i){if(n&&!nd(i))throw new Error(Ye(17));o=i.reducer,s=i.prepare}else o=i;a.addCase(e,o).exposeCaseReducer(t,o).exposeAction(t,s?Lt(e,s):Lt(e))}function td(e){return e._reducerDefinitionType==="asyncThunk"}function nd(e){return e._reducerDefinitionType==="reducerWithPrepare"}function id({type:e,reducerName:t},n,i,a){if(!a)throw new Error(Ye(18));const{payloadCreator:o,fulfilled:s,pending:l,rejected:c,settled:d,options:p}=n,u=a(e,o,p);i.exposeAction(t,u),s&&i.addCase(u.fulfilled,s),l&&i.addCase(u.pending,l),c&&i.addCase(u.rejected,c),d&&i.addMatcher(u.settled,d),i.exposeCaseReducer(t,{fulfilled:s||Ht,pending:l||Ht,rejected:c||Ht,settled:d||Ht})}function Ht(){}function Ye(e){return`Minified Redux Toolkit error #${e}; visit https://redux-toolkit.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var Gi="persist:",Vr="persist/FLUSH",An="persist/REHYDRATE",Zr="persist/PAUSE",Jr="persist/PERSIST",Ki="persist/PURGE",Xr="persist/REGISTER",ad=-1;function an(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?an=function(n){return typeof n}:an=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},an(e)}function Ra(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function rd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Ra(n,!0).forEach(function(i){od(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ra(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function od(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sd(e,t,n,i){i.debug;var a=rd({},n);return e&&an(e)==="object"&&Object.keys(e).forEach(function(o){o!=="_persist"&&t[o]===n[o]&&(a[o]=e[o])}),a}function ld(e){var t=e.blacklist||null,n=e.whitelist||null,i=e.transforms||[],a=e.throttle||0,o="".concat(e.keyPrefix!==void 0?e.keyPrefix:Gi).concat(e.key),s=e.storage,l;e.serialize===!1?l=function(v){return v}:typeof e.serialize=="function"?l=e.serialize:l=cd;var c=e.writeFailHandler||null,d={},p={},u=[],h=null,m=null,g=function(v){Object.keys(v).forEach(function(k){P(k)&&d[k]!==v[k]&&u.indexOf(k)===-1&&u.push(k)}),Object.keys(d).forEach(function(k){v[k]===void 0&&P(k)&&u.indexOf(k)===-1&&d[k]!==void 0&&u.push(k)}),h===null&&(h=setInterval(C,a)),d=v};function C(){if(u.length===0){h&&clearInterval(h),h=null;return}var w=u.shift(),v=i.reduce(function(k,M){return M.in(k,w,d)},d[w]);if(v!==void 0)try{p[w]=l(v)}catch(k){console.error("redux-persist/createPersistoid: error serializing state",k)}else delete p[w];u.length===0&&j()}function j(){Object.keys(p).forEach(function(w){d[w]===void 0&&delete p[w]}),m=s.setItem(o,l(p)).catch(q)}function P(w){return!(n&&n.indexOf(w)===-1&&w!=="_persist"||t&&t.indexOf(w)!==-1)}function q(w){c&&c(w)}var _=function(){for(;u.length!==0;)C();return m||Promise.resolve()};return{update:g,flush:_}}function cd(e){return JSON.stringify(e)}function dd(e){var t=e.transforms||[],n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Gi).concat(e.key),i=e.storage;e.debug;var a;return e.deserialize===!1?a=function(s){return s}:typeof e.deserialize=="function"?a=e.deserialize:a=ud,i.getItem(n).then(function(o){if(o)try{var s={},l=a(o);return Object.keys(l).forEach(function(c){s[c]=t.reduceRight(function(d,p){return p.out(d,c,l)},a(l[c]))}),s}catch(c){throw c}else return})}function ud(e){return JSON.parse(e)}function pd(e){var t=e.storage,n="".concat(e.keyPrefix!==void 0?e.keyPrefix:Gi).concat(e.key);return t.removeItem(n,md)}function md(e){}function Da(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function Ke(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Da(n,!0).forEach(function(i){fd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Da(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function fd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function hd(e,t){if(e==null)return{};var n=gd(e,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function gd(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var vd=5e3;function bi(e,t){var n=e.version!==void 0?e.version:ad;e.debug;var i=e.stateReconciler===void 0?sd:e.stateReconciler,a=e.getStoredState||dd,o=e.timeout!==void 0?e.timeout:vd,s=null,l=!1,c=!0,d=function(u){return u._persist.rehydrated&&s&&!c&&s.update(u),u};return function(p,u){var h=p||{},m=h._persist,g=hd(h,["_persist"]),C=g;if(u.type===Jr){var j=!1,P=function($,b){j||(u.rehydrate(e.key,$,b),j=!0)};if(o&&setTimeout(function(){!j&&P(void 0,new Error('redux-persist: persist timed out for persist key "'.concat(e.key,'"')))},o),c=!1,s||(s=ld(e)),m)return Ke({},t(C,u),{_persist:m});if(typeof u.rehydrate!="function"||typeof u.register!="function")throw new Error("redux-persist: either rehydrate or register is not a function on the PERSIST action. This can happen if the action is being replayed. This is an unexplored use case, please open an issue and we will figure out a resolution.");return u.register(e.key),a(e).then(function(M){var $=e.migrate||function(b,O){return Promise.resolve(b)};$(M,n).then(function(b){P(b)},function(b){P(void 0,b)})},function(M){P(void 0,M)}),Ke({},t(C,u),{_persist:{version:n,rehydrated:!1}})}else{if(u.type===Ki)return l=!0,u.result(pd(e)),Ke({},t(C,u),{_persist:m});if(u.type===Vr)return u.result(s&&s.flush()),Ke({},t(C,u),{_persist:m});if(u.type===Zr)c=!0;else if(u.type===An){if(l)return Ke({},C,{_persist:Ke({},m,{rehydrated:!0})});if(u.key===e.key){var q=t(C,u),_=u.payload,w=i!==!1&&_!==void 0?i(_,p,q,e):q,v=Ke({},w,{_persist:Ke({},m,{rehydrated:!0})});return d(v)}}}if(!m)return t(p,u);var k=t(C,u);return k===C?p:d(Ke({},k,{_persist:m}))}}function Ea(e){return bd(e)||yd(e)||xd()}function xd(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function yd(e){if(Symbol.iterator in Object(e)||Object.prototype.toString.call(e)==="[object Arguments]")return Array.from(e)}function bd(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}function La(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function wi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?La(n,!0).forEach(function(i){wd(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):La(n).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function wd(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var eo={registry:[],bootstrapped:!1},kd=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:eo,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case Xr:return wi({},t,{registry:[].concat(Ea(t.registry),[n.key])});case An:var i=t.registry.indexOf(n.key),a=Ea(t.registry);return a.splice(i,1),wi({},t,{registry:a,bootstrapped:a.length===0});default:return t}};function jd(e,t,n){var i=zi(kd,eo,void 0),a=function(c){i.dispatch({type:Xr,key:c})},o=function(c,d,p){var u={type:An,payload:d,err:p,key:c};e.dispatch(u),i.dispatch(u)},s=wi({},i,{purge:function(){var c=[];return e.dispatch({type:Ki,result:function(p){c.push(p)}}),Promise.all(c)},flush:function(){var c=[];return e.dispatch({type:Vr,result:function(p){c.push(p)}}),Promise.all(c)},pause:function(){e.dispatch({type:Zr})},persist:function(){e.dispatch({type:Jr,register:a,rehydrate:o})}});return s.persist(),s}var Yi={},Hi={};Hi.__esModule=!0;Hi.default=Rd;function rn(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?rn=function(n){return typeof n}:rn=function(n){return n&&typeof Symbol=="function"&&n.constructor===Symbol&&n!==Symbol.prototype?"symbol":typeof n},rn(e)}function Xn(){}var Cd={getItem:Xn,setItem:Xn,removeItem:Xn};function Sd(e){if((typeof self=="undefined"?"undefined":rn(self))!=="object"||!(e in self))return!1;try{var t=self[e],n="redux-persist ".concat(e," test");t.setItem(n,"test"),t.getItem(n),t.removeItem(n)}catch(i){return!1}return!0}function Rd(e){var t="".concat(e,"Storage");return Sd(t)?self[t]:Cd}Yi.__esModule=!0;Yi.default=Ld;var Dd=Ed(Hi);function Ed(e){return e&&e.__esModule?e:{default:e}}function Ld(e){var t=(0,Dd.default)(e);return{getItem:function(i){return new Promise(function(a,o){a(t.getItem(i))})},setItem:function(i,a){return new Promise(function(o,s){o(t.setItem(i,a))})},removeItem:function(i){return new Promise(function(a,o){a(t.removeItem(i))})}}}var In=void 0,_d=Ad(Yi);function Ad(e){return e&&e.__esModule?e:{default:e}}var Id=(0,_d.default)("local");In=Id;const _e={APP_ID:"wx4a71fe09bb125182",APP_SECRET:"e8a88b5e0271b89a1dc71261d9063fad",REDIRECT_URI:"https://homefreshfoods.ai/wechat/callback",SCOPE:"snsapi_userinfo",WEB_AUTHORIZE_URL:"https://open.weixin.qq.com/connect/oauth2/authorize",ACCESS_TOKEN_URL:"https://api.weixin.qq.com/sns/oauth2/access_token",USER_INFO_URL:"https://api.weixin.qq.com/sns/userinfo"},vn=()=>(console.log("ï¿½ Redirect URI:",_e.REDIRECT_URI),_e.REDIRECT_URI),ki=()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),ji=()=>/micromessenger/i.test(navigator.userAgent),Ci=(e=null)=>{const t=e||Math.random().toString(36).substring(7);console.log("ð Generating WeChat OAuth URL");const n=vn();console.log("ð Using redirect URI:",n);const i=new URLSearchParams({appid:_e.APP_ID,redirect_uri:n,response_type:"code",scope:_e.SCOPE,state:t}),o=`${_e.WEB_AUTHORIZE_URL}?${i.toString()}#wechat_redirect`;return console.log("ð Final WeChat OAuth URL:",o),console.log("ð OAuth parameters:",Object.fromEntries(i)),o},Si={getAccessToken:async e=>{const t=new URLSearchParams({appid:_e.APP_ID,secret:_e.APP_SECRET,code:e,grant_type:"authorization_code"});return await(await fetch(`${_e.ACCESS_TOKEN_URL}?${t.toString()}`)).json()},getUserInfo:async(e,t)=>{const n=new URLSearchParams({access_token:e,openid:t,lang:"en"});return await(await fetch(`${_e.USER_INFO_URL}?${n.toString()}`)).json()}},Td=Object.freeze(Object.defineProperty({__proto__:null,WECHAT_API:Si,WECHAT_CONFIG:_e,generateWeChatAuthUrl:Ci,getRedirectUri:vn,isMobileDevice:ki,isWeChatBrowser:ji},Symbol.toStringTag,{value:"Module"})),ei=ye("auth/authenticateWithWeChat",async(e,{rejectWithValue:t})=>{try{console.log("Starting WeChat authentication with code:",e);const n=await Si.getAccessToken(e);if(console.log("WeChat token response:",n),n.errcode)throw new Error(n.errmsg||"Failed to get WeChat access token");const{access_token:i,openid:a}=n,o=await Si.getUserInfo(i,a);if(console.log("WeChat user response:",o),o.errcode)throw new Error(o.errmsg||"Failed to get WeChat user info");const s={id:`wechat_${a}`,openid:a,name:o.nickname,displayName:o.nickname,avatar:o.headimgurl,country:o.country,province:o.province,city:o.city,sex:o.sex,language:o.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:a,accessToken:i,createdAt:new Date().toISOString()};return console.log("â WeChat authentication successful:",s),s}catch(n){return console.error("â WeChat authentication failed:",n),t(n.message||"WeChat authentication failed")}}),to=ye("auth/logout",async(e,{rejectWithValue:t})=>{try{return console.log("User logged out"),sessionStorage.removeItem("wechat_access_token"),sessionStorage.removeItem("wechat_pending_cart_action"),{clearData:!0}}catch(n){return t(n.message)}}),no=Wt({name:"auth",initialState:{user:null,isAuthenticated:!1,loading:!1,error:null,wechatAuthUrl:null},reducers:{clearError:e=>{e.error=null},updateUserProfile:(e,t)=>{e.user&&(e.user={...e.user,...t.payload})},setWeChatAuthUrl:(e,t)=>{e.wechatAuthUrl=t.payload},setTestUser:(e,t)=>{e.user=t.payload,e.isAuthenticated=!0,e.loading=!1,e.error=null},clearAllData:e=>{e.user=null,e.isAuthenticated=!1,e.loading=!1,e.error=null,e.wechatAuthUrl=null}},extraReducers:e=>{e.addCase(ei.pending,t=>{t.loading=!0,t.error=null}).addCase(ei.fulfilled,(t,n)=>{t.loading=!1,t.user=n.payload,t.isAuthenticated=!0,t.error=null}).addCase(ei.rejected,(t,n)=>{t.loading=!1,t.error=n.payload,t.isAuthenticated=!1,t.user=null}).addCase(to.fulfilled,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null}).addCase(Ki,t=>{t.user=null,t.isAuthenticated=!1,t.loading=!1,t.error=null,t.wechatAuthUrl=null})}}),{clearError:Rh,updateUserProfile:Dh,setWeChatAuthUrl:Eh,clearAllData:Od,setTestUser:Qt}=no.actions,Pd=no.reducer;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io="firebasestorage.googleapis.com",ao="storageBucket",Nd=2*60*1e3,Fd=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pe extends $i{constructor(t,n,i=0){super(ti(t),`Firebase Storage: ${n} (${ti(t)})`),this.status_=i,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,pe.prototype)}get status(){return this.status_}set status(t){this.status_=t}_codeEquals(t){return ti(t)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(t){this.customData.serverResponse=t,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var ue;(function(e){e.UNKNOWN="unknown",e.OBJECT_NOT_FOUND="object-not-found",e.BUCKET_NOT_FOUND="bucket-not-found",e.PROJECT_NOT_FOUND="project-not-found",e.QUOTA_EXCEEDED="quota-exceeded",e.UNAUTHENTICATED="unauthenticated",e.UNAUTHORIZED="unauthorized",e.UNAUTHORIZED_APP="unauthorized-app",e.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",e.INVALID_CHECKSUM="invalid-checksum",e.CANCELED="canceled",e.INVALID_EVENT_NAME="invalid-event-name",e.INVALID_URL="invalid-url",e.INVALID_DEFAULT_BUCKET="invalid-default-bucket",e.NO_DEFAULT_BUCKET="no-default-bucket",e.CANNOT_SLICE_BLOB="cannot-slice-blob",e.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",e.NO_DOWNLOAD_URL="no-download-url",e.INVALID_ARGUMENT="invalid-argument",e.INVALID_ARGUMENT_COUNT="invalid-argument-count",e.APP_DELETED="app-deleted",e.INVALID_ROOT_OPERATION="invalid-root-operation",e.INVALID_FORMAT="invalid-format",e.INTERNAL_ERROR="internal-error",e.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(ue||(ue={}));function ti(e){return"storage/"+e}function Qi(){const e="An unknown error occurred, please check the error payload for server response.";return new pe(ue.UNKNOWN,e)}function $d(e){return new pe(ue.OBJECT_NOT_FOUND,"Object '"+e+"' does not exist.")}function Md(e){return new pe(ue.QUOTA_EXCEEDED,"Quota for bucket '"+e+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function Ud(){const e="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new pe(ue.UNAUTHENTICATED,e)}function Bd(){return new pe(ue.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function zd(e){return new pe(ue.UNAUTHORIZED,"User does not have permission to access '"+e+"'.")}function qd(){return new pe(ue.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wd(){return new pe(ue.CANCELED,"User canceled the upload/download.")}function Gd(e){return new pe(ue.INVALID_URL,"Invalid URL '"+e+"'.")}function Kd(e){return new pe(ue.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+e+"'.")}function Yd(){return new pe(ue.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+ao+"' property when initializing the app?")}function Hd(){return new pe(ue.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function Qd(){return new pe(ue.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function Vd(e){return new pe(ue.UNSUPPORTED_ENVIRONMENT,`${e} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ri(e){return new pe(ue.INVALID_ARGUMENT,e)}function ro(){return new pe(ue.APP_DELETED,"The Firebase app was deleted.")}function Zd(e){return new pe(ue.INVALID_ROOT_OPERATION,"The operation '"+e+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function _t(e,t){return new pe(ue.INVALID_FORMAT,"String does not match format '"+e+"': "+t)}function Rt(e){throw new pe(ue.INTERNAL_ERROR,"Internal error: "+e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(t,n){this.bucket=t,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const t=encodeURIComponent;return"/b/"+t(this.bucket)+"/o/"+t(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(t,n){let i;try{i=Ae.makeFromUrl(t,n)}catch(a){return new Ae(t,"")}if(i.path==="")return i;throw Kd(t)}static makeFromUrl(t,n){let i=null;const a="([A-Za-z0-9.\\-_]+)";function o(w){w.path.charAt(w.path.length-1)==="/"&&(w.path_=w.path_.slice(0,-1))}const s="(/(.*))?$",l=new RegExp("^gs://"+a+s,"i"),c={bucket:1,path:3};function d(w){w.path_=decodeURIComponent(w.path)}const p="v[A-Za-z0-9_]+",u=n.replace(/[.]/g,"\\."),h="(/([^?#]*).*)?$",m=new RegExp(`^https?://${u}/${p}/b/${a}/o${h}`,"i"),g={bucket:1,path:3},C=n===io?"(?:storage.googleapis.com|storage.cloud.google.com)":n,j="([^?#]*)",P=new RegExp(`^https?://${C}/${a}/${j}`,"i"),_=[{regex:l,indices:c,postModify:o},{regex:m,indices:g,postModify:d},{regex:P,indices:{bucket:1,path:2},postModify:d}];for(let w=0;w<_.length;w++){const v=_[w],k=v.regex.exec(t);if(k){const M=k[v.indices.bucket];let $=k[v.indices.path];$||($=""),i=new Ae(M,$),v.postModify(i);break}}if(i==null)throw Gd(t);return i}}class Jd{constructor(t){this.promise_=Promise.reject(t)}getPromise(){return this.promise_}cancel(t=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xd(e,t,n){let i=1,a=null,o=null,s=!1,l=0;function c(){return l===2}let d=!1;function p(...j){d||(d=!0,t.apply(null,j))}function u(j){a=setTimeout(()=>{a=null,e(m,c())},j)}function h(){o&&clearTimeout(o)}function m(j,...P){if(d){h();return}if(j){h(),p.call(null,j,...P);return}if(c()||s){h(),p.call(null,j,...P);return}i<64&&(i*=2);let _;l===1?(l=2,_=0):_=(i+Math.random())*1e3,u(_)}let g=!1;function C(j){g||(g=!0,h(),!d&&(a!==null?(j||(l=2),clearTimeout(a),u(0)):j||(l=1)))}return u(0),o=setTimeout(()=>{s=!0,C(!0)},n),C}function eu(e){e(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tu(e){return e!==void 0}function nu(e){return typeof e=="object"&&!Array.isArray(e)}function Vi(e){return typeof e=="string"||e instanceof String}function _a(e){return Zi()&&e instanceof Blob}function Zi(){return typeof Blob!="undefined"}function Aa(e,t,n,i){if(i<t)throw Ri(`Invalid value for '${e}'. Expected ${t} or greater.`);if(i>n)throw Ri(`Invalid value for '${e}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ji(e,t,n){let i=t;return n==null&&(i=`https://${t}`),`${n}://${i}/v0${e}`}function oo(e){const t=encodeURIComponent;let n="?";for(const i in e)if(e.hasOwnProperty(i)){const a=t(i)+"="+t(e[i]);n=n+a+"&"}return n=n.slice(0,-1),n}var st;(function(e){e[e.NO_ERROR=0]="NO_ERROR",e[e.NETWORK_ERROR=1]="NETWORK_ERROR",e[e.ABORT=2]="ABORT"})(st||(st={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iu(e,t){const n=e>=500&&e<600,a=[408,429].indexOf(e)!==-1,o=t.indexOf(e)!==-1;return n||a||o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class au{constructor(t,n,i,a,o,s,l,c,d,p,u,h=!0){this.url_=t,this.method_=n,this.headers_=i,this.body_=a,this.successCodes_=o,this.additionalRetryCodes_=s,this.callback_=l,this.errorCallback_=c,this.timeout_=d,this.progressCallback_=p,this.connectionFactory_=u,this.retry=h,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((m,g)=>{this.resolve_=m,this.reject_=g,this.start_()})}start_(){const t=(i,a)=>{if(a){i(!1,new Vt(!1,null,!0));return}const o=this.connectionFactory_();this.pendingConnection_=o;const s=l=>{const c=l.loaded,d=l.lengthComputable?l.total:-1;this.progressCallback_!==null&&this.progressCallback_(c,d)};this.progressCallback_!==null&&o.addUploadProgressListener(s),o.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&o.removeUploadProgressListener(s),this.pendingConnection_=null;const l=o.getErrorCode()===st.NO_ERROR,c=o.getStatus();if(!l||iu(c,this.additionalRetryCodes_)&&this.retry){const p=o.getErrorCode()===st.ABORT;i(!1,new Vt(!1,null,p));return}const d=this.successCodes_.indexOf(c)!==-1;i(!0,new Vt(d,o))})},n=(i,a)=>{const o=this.resolve_,s=this.reject_,l=a.connection;if(a.wasSuccessCode)try{const c=this.callback_(l,l.getResponse());tu(c)?o(c):o()}catch(c){s(c)}else if(l!==null){const c=Qi();c.serverResponse=l.getErrorText(),this.errorCallback_?s(this.errorCallback_(l,c)):s(c)}else if(a.canceled){const c=this.appDelete_?ro():Wd();s(c)}else{const c=qd();s(c)}};this.canceled_?n(!1,new Vt(!1,null,!0)):this.backoffId_=Xd(t,n,this.timeout_)}getPromise(){return this.promise_}cancel(t){this.canceled_=!0,this.appDelete_=t||!1,this.backoffId_!==null&&eu(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class Vt{constructor(t,n,i){this.wasSuccessCode=t,this.connection=n,this.canceled=!!i}}function ru(e,t){t!==null&&t.length>0&&(e.Authorization="Firebase "+t)}function ou(e,t){e["X-Firebase-Storage-Version"]="webjs/"+(t!=null?t:"AppManager")}function su(e,t){t&&(e["X-Firebase-GMPID"]=t)}function lu(e,t){t!==null&&(e["X-Firebase-AppCheck"]=t)}function cu(e,t,n,i,a,o,s=!0){const l=oo(e.urlParams),c=e.url+l,d=Object.assign({},e.headers);return su(d,t),ru(d,n),ou(d,o),lu(d,i),new au(c,e.method,d,e.body,e.successCodes,e.additionalRetryCodes,e.handler,e.errorHandler,e.timeout,e.progressCallback,a,s)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function du(){return typeof BlobBuilder!="undefined"?BlobBuilder:typeof WebKitBlobBuilder!="undefined"?WebKitBlobBuilder:void 0}function uu(...e){const t=du();if(t!==void 0){const n=new t;for(let i=0;i<e.length;i++)n.append(e[i]);return n.getBlob()}else{if(Zi())return new Blob(e);throw new pe(ue.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function pu(e,t,n){return e.webkitSlice?e.webkitSlice(t,n):e.mozSlice?e.mozSlice(t,n):e.slice?e.slice(t,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mu(e){if(typeof atob=="undefined")throw Vd("base-64");return atob(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qe={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class ni{constructor(t,n){this.data=t,this.contentType=n||null}}function fu(e,t){switch(e){case qe.RAW:return new ni(so(t));case qe.BASE64:case qe.BASE64URL:return new ni(lo(e,t));case qe.DATA_URL:return new ni(gu(t),vu(t))}throw Qi()}function so(e){const t=[];for(let n=0;n<e.length;n++){let i=e.charCodeAt(n);if(i<=127)t.push(i);else if(i<=2047)t.push(192|i>>6,128|i&63);else if((i&64512)===55296)if(!(n<e.length-1&&(e.charCodeAt(n+1)&64512)===56320))t.push(239,191,189);else{const o=i,s=e.charCodeAt(++n);i=65536|(o&1023)<<10|s&1023,t.push(240|i>>18,128|i>>12&63,128|i>>6&63,128|i&63)}else(i&64512)===56320?t.push(239,191,189):t.push(224|i>>12,128|i>>6&63,128|i&63)}return new Uint8Array(t)}function hu(e){let t;try{t=decodeURIComponent(e)}catch(n){throw _t(qe.DATA_URL,"Malformed data URL.")}return so(t)}function lo(e,t){switch(e){case qe.BASE64:{const a=t.indexOf("-")!==-1,o=t.indexOf("_")!==-1;if(a||o)throw _t(e,"Invalid character '"+(a?"-":"_")+"' found: is it base64url encoded?");break}case qe.BASE64URL:{const a=t.indexOf("+")!==-1,o=t.indexOf("/")!==-1;if(a||o)throw _t(e,"Invalid character '"+(a?"+":"/")+"' found: is it base64 encoded?");t=t.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=mu(t)}catch(a){throw a.message.includes("polyfill")?a:_t(e,"Invalid character found")}const i=new Uint8Array(n.length);for(let a=0;a<n.length;a++)i[a]=n.charCodeAt(a);return i}class co{constructor(t){this.base64=!1,this.contentType=null;const n=t.match(/^data:([^,]+)?,/);if(n===null)throw _t(qe.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const i=n[1]||null;i!=null&&(this.base64=xu(i,";base64"),this.contentType=this.base64?i.substring(0,i.length-7):i),this.rest=t.substring(t.indexOf(",")+1)}}function gu(e){const t=new co(e);return t.base64?lo(qe.BASE64,t.rest):hu(t.rest)}function vu(e){return new co(e).contentType}function xu(e,t){return e.length>=t.length?e.substring(e.length-t.length)===t:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ze{constructor(t,n){let i=0,a="";_a(t)?(this.data_=t,i=t.size,a=t.type):t instanceof ArrayBuffer?(n?this.data_=new Uint8Array(t):(this.data_=new Uint8Array(t.byteLength),this.data_.set(new Uint8Array(t))),i=this.data_.length):t instanceof Uint8Array&&(n?this.data_=t:(this.data_=new Uint8Array(t.length),this.data_.set(t)),i=t.length),this.size_=i,this.type_=a}size(){return this.size_}type(){return this.type_}slice(t,n){if(_a(this.data_)){const i=this.data_,a=pu(i,t,n);return a===null?null:new Ze(a)}else{const i=new Uint8Array(this.data_.buffer,t,n-t);return new Ze(i,!0)}}static getBlob(...t){if(Zi()){const n=t.map(i=>i instanceof Ze?i.data_:i);return new Ze(uu.apply(null,n))}else{const n=t.map(s=>Vi(s)?fu(qe.RAW,s).data:s.data_);let i=0;n.forEach(s=>{i+=s.byteLength});const a=new Uint8Array(i);let o=0;return n.forEach(s=>{for(let l=0;l<s.length;l++)a[o++]=s[l]}),new Ze(a,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uo(e){let t;try{t=JSON.parse(e)}catch(n){return null}return nu(t)?t:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(e){if(e.length===0)return null;const t=e.lastIndexOf("/");return t===-1?"":e.slice(0,t)}function bu(e,t){const n=t.split("/").filter(i=>i.length>0).join("/");return e.length===0?n:e+"/"+n}function po(e){const t=e.lastIndexOf("/",e.length-2);return t===-1?e:e.slice(t+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wu(e,t){return t}class Ce{constructor(t,n,i,a){this.server=t,this.local=n||t,this.writable=!!i,this.xform=a||wu}}let Zt=null;function ku(e){return!Vi(e)||e.length<2?e:po(e)}function mo(){if(Zt)return Zt;const e=[];e.push(new Ce("bucket")),e.push(new Ce("generation")),e.push(new Ce("metageneration")),e.push(new Ce("name","fullPath",!0));function t(o,s){return ku(s)}const n=new Ce("name");n.xform=t,e.push(n);function i(o,s){return s!==void 0?Number(s):s}const a=new Ce("size");return a.xform=i,e.push(a),e.push(new Ce("timeCreated")),e.push(new Ce("updated")),e.push(new Ce("md5Hash",null,!0)),e.push(new Ce("cacheControl",null,!0)),e.push(new Ce("contentDisposition",null,!0)),e.push(new Ce("contentEncoding",null,!0)),e.push(new Ce("contentLanguage",null,!0)),e.push(new Ce("contentType",null,!0)),e.push(new Ce("metadata","customMetadata",!0)),Zt=e,Zt}function ju(e,t){function n(){const i=e.bucket,a=e.fullPath,o=new Ae(i,a);return t._makeStorageReference(o)}Object.defineProperty(e,"ref",{get:n})}function Cu(e,t,n){const i={};i.type="file";const a=n.length;for(let o=0;o<a;o++){const s=n[o];i[s.local]=s.xform(i,t[s.server])}return ju(i,e),i}function fo(e,t,n){const i=uo(t);return i===null?null:Cu(e,i,n)}function Su(e,t,n,i){const a=uo(t);if(a===null||!Vi(a.downloadTokens))return null;const o=a.downloadTokens;if(o.length===0)return null;const s=encodeURIComponent;return o.split(",").map(d=>{const p=e.bucket,u=e.fullPath,h="/b/"+s(p)+"/o/"+s(u),m=Ji(h,n,i),g=oo({alt:"media",token:d});return m+g})[0]}function Ru(e,t){const n={},i=t.length;for(let a=0;a<i;a++){const o=t[a];o.writable&&(n[o.server]=e[o.local])}return JSON.stringify(n)}class ho{constructor(t,n,i,a){this.url=t,this.method=n,this.handler=i,this.timeout=a,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function go(e){if(!e)throw Qi()}function Du(e,t){function n(i,a){const o=fo(e,a,t);return go(o!==null),o}return n}function Eu(e,t){function n(i,a){const o=fo(e,a,t);return go(o!==null),Su(o,a,e.host,e._protocol)}return n}function vo(e){function t(n,i){let a;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?a=Bd():a=Ud():n.getStatus()===402?a=Md(e.bucket):n.getStatus()===403?a=zd(e.path):a=i,a.status=n.getStatus(),a.serverResponse=i.serverResponse,a}return t}function Lu(e){const t=vo(e);function n(i,a){let o=t(i,a);return i.getStatus()===404&&(o=$d(e.path)),o.serverResponse=a.serverResponse,o}return n}function _u(e,t,n){const i=t.fullServerUrl(),a=Ji(i,e.host,e._protocol),o="GET",s=e.maxOperationRetryTime,l=new ho(a,o,Eu(e,n),s);return l.errorHandler=Lu(t),l}function Au(e,t){return e&&e.contentType||t&&t.type()||"application/octet-stream"}function Iu(e,t,n){const i=Object.assign({},n);return i.fullPath=e.path,i.size=t.size(),i.contentType||(i.contentType=Au(null,t)),i}function Tu(e,t,n,i,a){const o=t.bucketOnlyServerUrl(),s={"X-Goog-Upload-Protocol":"multipart"};function l(){let _="";for(let w=0;w<2;w++)_=_+Math.random().toString().slice(2);return _}const c=l();s["Content-Type"]="multipart/related; boundary="+c;const d=Iu(t,i,a),p=Ru(d,n),u="--"+c+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+p+`\r
--`+c+`\r
Content-Type: `+d.contentType+`\r
\r
`,h=`\r
--`+c+"--",m=Ze.getBlob(u,i,h);if(m===null)throw Hd();const g={name:d.fullPath},C=Ji(o,e.host,e._protocol),j="POST",P=e.maxUploadRetryTime,q=new ho(C,j,Du(e,n),P);return q.urlParams=g,q.headers=s,q.body=m.uploadData(),q.errorHandler=vo(t),q}class Ou{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=st.NO_ERROR,this.sendPromise_=new Promise(t=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=st.ABORT,t()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=st.NETWORK_ERROR,t()}),this.xhr_.addEventListener("load",()=>{t()})})}send(t,n,i,a){if(this.sent_)throw Rt("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(n,t,!0),a!==void 0)for(const o in a)a.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,a[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Rt("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Rt("cannot .getStatus() before sending");try{return this.xhr_.status}catch(t){return-1}}getResponse(){if(!this.sent_)throw Rt("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Rt("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(t){return this.xhr_.getResponseHeader(t)}addUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",t)}removeUploadProgressListener(t){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",t)}}class Pu extends Ou{initXhr(){this.xhr_.responseType="text"}}function xo(){return new Pu}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(t,n){this._service=t,n instanceof Ae?this._location=n:this._location=Ae.makeFromUrl(n,t.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(t,n){return new pt(t,n)}get root(){const t=new Ae(this._location.bucket,"");return this._newRef(this._service,t)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return po(this._location.path)}get storage(){return this._service}get parent(){const t=yu(this._location.path);if(t===null)return null;const n=new Ae(this._location.bucket,t);return new pt(this._service,n)}_throwIfRoot(t){if(this._location.path==="")throw Zd(t)}}function Nu(e,t,n){e._throwIfRoot("uploadBytes");const i=Tu(e.storage,e._location,mo(),new Ze(t,!0),n);return e.storage.makeRequestWithTokens(i,xo).then(a=>({metadata:a,ref:e}))}function Fu(e){e._throwIfRoot("getDownloadURL");const t=_u(e.storage,e._location,mo());return e.storage.makeRequestWithTokens(t,xo).then(n=>{if(n===null)throw Qd();return n})}function $u(e,t){const n=bu(e._location.path,t),i=new Ae(e._location.bucket,n);return new pt(e.storage,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mu(e){return/^[A-Za-z]+:\/\//.test(e)}function Uu(e,t){return new pt(e,t)}function yo(e,t){if(e instanceof Xi){const n=e;if(n._bucket==null)throw Yd();const i=new pt(n,n._bucket);return t!=null?yo(i,t):i}else return t!==void 0?$u(e,t):e}function Bu(e,t){if(t&&Mu(t)){if(e instanceof Xi)return Uu(e,t);throw Ri("To use ref(service, url), the first argument must be a Storage instance.")}else return yo(e,t)}function Ia(e,t){const n=t==null?void 0:t[ao];return n==null?null:Ae.makeFromBucketSpec(n,e)}function zu(e,t,n,i={}){e.host=`${t}:${n}`,e._protocol="http";const{mockUserToken:a}=i;a&&(e._overrideAuthToken=typeof a=="string"?a:Ps(a,e.app.options.projectId))}class Xi{constructor(t,n,i,a,o){this.app=t,this._authProvider=n,this._appCheckProvider=i,this._url=a,this._firebaseVersion=o,this._bucket=null,this._host=io,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=Nd,this._maxUploadRetryTime=Fd,this._requests=new Set,a!=null?this._bucket=Ae.makeFromBucketSpec(a,this._host):this._bucket=Ia(this._host,this.app.options)}get host(){return this._host}set host(t){this._host=t,this._url!=null?this._bucket=Ae.makeFromBucketSpec(this._url,t):this._bucket=Ia(t,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(t){Aa("time",0,Number.POSITIVE_INFINITY,t),this._maxUploadRetryTime=t}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(t){Aa("time",0,Number.POSITIVE_INFINITY,t),this._maxOperationRetryTime=t}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const t=this._authProvider.getImmediate({optional:!0});if(t){const n=await t.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){const t=this._appCheckProvider.getImmediate({optional:!0});return t?(await t.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(t=>t.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(t){return new pt(this,t)}_makeRequest(t,n,i,a,o=!0){if(this._deleted)return new Jd(ro());{const s=cu(t,this._appId,i,a,n,this._firebaseVersion,o);return this._requests.add(s),s.getPromise().then(()=>this._requests.delete(s),()=>this._requests.delete(s)),s}}async makeRequestWithTokens(t,n){const[i,a]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(t,n,i,a).getPromise()}}const Ta="@firebase/storage",Oa="0.13.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo="storage";function qu(e,t,n){return e=Ct(e),Nu(e,t,n)}function Wu(e){return e=Ct(e),Fu(e)}function Gu(e,t){return e=Ct(e),Bu(e,t)}function Ku(e=gr(),t){e=Ct(e);const i=Bt(e,bo).getImmediate({identifier:t}),a=Os("storage");return a&&Yu(i,...a),i}function Yu(e,t,n,i={}){zu(e,t,n,i)}function Hu(e,{instanceIdentifier:t}){const n=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),a=e.getProvider("app-check-internal");return new Xi(n,i,a,t,Ts)}function Qu(){Ot(new Pt(bo,Hu,"PUBLIC").setMultipleInstances(!0)),bt(Ta,Oa,""),bt(Ta,Oa,"esm2017")}Qu();const wo="@firebase/installations",ea="0.6.9";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ko=1e4,jo=`w:${ea}`,Co="FIS_v2",Vu="https://firebaseinstallations.googleapis.com/v1",Zu=60*60*1e3,Ju="installations",Xu="Installations";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep={"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."},mt=new vr(Ju,Xu,ep);function So(e){return e instanceof $i&&e.code.includes("request-failed")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro({projectId:e}){return`${Vu}/projects/${e}/installations`}function Do(e){return{token:e.token,requestStatus:2,expiresIn:np(e.expiresIn),creationTime:Date.now()}}async function Eo(e,t){const i=(await t.json()).error;return mt.create("request-failed",{requestName:e,serverCode:i.code,serverMessage:i.message,serverStatus:i.status})}function Lo({apiKey:e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":e})}function tp(e,{refreshToken:t}){const n=Lo(e);return n.append("Authorization",ip(t)),n}async function _o(e){const t=await e();return t.status>=500&&t.status<600?e():t}function np(e){return Number(e.replace("s","000"))}function ip(e){return`${Co} ${e}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ap({appConfig:e,heartbeatServiceProvider:t},{fid:n}){const i=Ro(e),a=Lo(e),o=t.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={fid:n,authVersion:Co,appId:e.appId,sdkVersion:jo},l={method:"POST",headers:a,body:JSON.stringify(s)},c=await _o(()=>fetch(i,l));if(c.ok){const d=await c.json();return{fid:d.fid||n,registrationStatus:2,refreshToken:d.refreshToken,authToken:Do(d.authToken)}}else throw await Eo("Create Installation",c)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ao(e){return new Promise(t=>{setTimeout(t,e)})}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rp(e){return btoa(String.fromCharCode(...e)).replace(/\+/g,"-").replace(/\//g,"_")}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const op=/^[cdef][\w-]{21}$/,Di="";function sp(){try{const e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;const n=lp(e);return op.test(n)?n:Di}catch(e){return Di}}function lp(e){return rp(e).substr(0,22)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tn(e){return`${e.appName}!${e.appId}`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Io=new Map;function To(e,t){const n=Tn(e);Oo(n,t),cp(n,t)}function Oo(e,t){const n=Io.get(e);if(n)for(const i of n)i(t)}function cp(e,t){const n=dp();n&&n.postMessage({key:e,fid:t}),up()}let at=null;function dp(){return!at&&"BroadcastChannel"in self&&(at=new BroadcastChannel("[Firebase] FID Change"),at.onmessage=e=>{Oo(e.data.key,e.data.fid)}),at}function up(){Io.size===0&&at&&(at.close(),at=null)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pp="firebase-installations-database",mp=1,ft="firebase-installations-store";let ii=null;function ta(){return ii||(ii=Ns(pp,mp,{upgrade:(e,t)=>{switch(t){case 0:e.createObjectStore(ft)}}})),ii}async function xn(e,t){const n=Tn(e),a=(await ta()).transaction(ft,"readwrite"),o=a.objectStore(ft),s=await o.get(n);return await o.put(t,n),await a.done,(!s||s.fid!==t.fid)&&To(e,t.fid),t}async function Po(e){const t=Tn(e),i=(await ta()).transaction(ft,"readwrite");await i.objectStore(ft).delete(t),await i.done}async function On(e,t){const n=Tn(e),a=(await ta()).transaction(ft,"readwrite"),o=a.objectStore(ft),s=await o.get(n),l=t(s);return l===void 0?await o.delete(n):await o.put(l,n),await a.done,l&&(!s||s.fid!==l.fid)&&To(e,l.fid),l}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function na(e){let t;const n=await On(e.appConfig,i=>{const a=fp(i),o=hp(e,a);return t=o.registrationPromise,o.installationEntry});return n.fid===Di?{installationEntry:await t}:{installationEntry:n,registrationPromise:t}}function fp(e){const t=e||{fid:sp(),registrationStatus:0};return No(t)}function hp(e,t){if(t.registrationStatus===0){if(!navigator.onLine){const a=Promise.reject(mt.create("app-offline"));return{installationEntry:t,registrationPromise:a}}const n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},i=gp(e,n);return{installationEntry:n,registrationPromise:i}}else return t.registrationStatus===1?{installationEntry:t,registrationPromise:vp(e)}:{installationEntry:t}}async function gp(e,t){try{const n=await ap(e,t);return xn(e.appConfig,n)}catch(n){throw So(n)&&n.customData.serverCode===409?await Po(e.appConfig):await xn(e.appConfig,{fid:t.fid,registrationStatus:0}),n}}async function vp(e){let t=await Pa(e.appConfig);for(;t.registrationStatus===1;)await Ao(100),t=await Pa(e.appConfig);if(t.registrationStatus===0){const{installationEntry:n,registrationPromise:i}=await na(e);return i||n}return t}function Pa(e){return On(e,t=>{if(!t)throw mt.create("installation-not-found");return No(t)})}function No(e){return xp(e)?{fid:e.fid,registrationStatus:0}:e}function xp(e){return e.registrationStatus===1&&e.registrationTime+ko<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function yp({appConfig:e,heartbeatServiceProvider:t},n){const i=bp(e,n),a=tp(e,n),o=t.getImmediate({optional:!0});if(o){const d=await o.getHeartbeatsHeader();d&&a.append("x-firebase-client",d)}const s={installation:{sdkVersion:jo,appId:e.appId}},l={method:"POST",headers:a,body:JSON.stringify(s)},c=await _o(()=>fetch(i,l));if(c.ok){const d=await c.json();return Do(d)}else throw await Eo("Generate Auth Token",c)}function bp(e,{fid:t}){return`${Ro(e)}/${t}/authTokens:generate`}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ia(e,t=!1){let n;const i=await On(e.appConfig,o=>{if(!Fo(o))throw mt.create("not-registered");const s=o.authToken;if(!t&&jp(s))return o;if(s.requestStatus===1)return n=wp(e,t),o;{if(!navigator.onLine)throw mt.create("app-offline");const l=Sp(o);return n=kp(e,l),l}});return n?await n:i.authToken}async function wp(e,t){let n=await Na(e.appConfig);for(;n.authToken.requestStatus===1;)await Ao(100),n=await Na(e.appConfig);const i=n.authToken;return i.requestStatus===0?ia(e,t):i}function Na(e){return On(e,t=>{if(!Fo(t))throw mt.create("not-registered");const n=t.authToken;return Rp(n)?Object.assign(Object.assign({},t),{authToken:{requestStatus:0}}):t})}async function kp(e,t){try{const n=await yp(e,t),i=Object.assign(Object.assign({},t),{authToken:n});return await xn(e.appConfig,i),n}catch(n){if(So(n)&&(n.customData.serverCode===401||n.customData.serverCode===404))await Po(e.appConfig);else{const i=Object.assign(Object.assign({},t),{authToken:{requestStatus:0}});await xn(e.appConfig,i)}throw n}}function Fo(e){return e!==void 0&&e.registrationStatus===2}function jp(e){return e.requestStatus===2&&!Cp(e)}function Cp(e){const t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+Zu}function Sp(e){const t={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},e),{authToken:t})}function Rp(e){return e.requestStatus===1&&e.requestTime+ko<Date.now()}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Dp(e){const t=e,{installationEntry:n,registrationPromise:i}=await na(t);return i?i.catch(console.error):ia(t).catch(console.error),n.fid}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ep(e,t=!1){const n=e;return await Lp(n),(await ia(n,t)).token}async function Lp(e){const{registrationPromise:t}=await na(e);t&&await t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(e){if(!e||!e.options)throw ai("App Configuration");if(!e.name)throw ai("App Name");const t=["projectId","apiKey","appId"];for(const n of t)if(!e.options[n])throw ai(n);return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}function ai(e){return mt.create("missing-app-config-values",{valueName:e})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $o="installations",Ap="installations-internal",Ip=e=>{const t=e.getProvider("app").getImmediate(),n=_p(t),i=Bt(t,"heartbeat");return{app:t,appConfig:n,heartbeatServiceProvider:i,_delete:()=>Promise.resolve()}},Tp=e=>{const t=e.getProvider("app").getImmediate(),n=Bt(t,$o).getImmediate();return{getId:()=>Dp(n),getToken:a=>Ep(n,a)}};function Op(){Ot(new Pt($o,Ip,"PUBLIC")),Ot(new Pt(Ap,Tp,"PRIVATE"))}Op();bt(wo,ea);bt(wo,ea,"esm2017");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yn="analytics",Pp="firebase_id",Np="origin",Fp=60*1e3,$p="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",aa="https://www.googletagmanager.com/gtag/js";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Re=new Fs("@firebase/analytics");/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mp={"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-initialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."},Ie=new vr("analytics","Analytics",Mp);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Up(e){if(!e.startsWith(aa)){const t=Ie.create("invalid-gtag-resource",{gtagURL:e});return Re.warn(t.message),""}return e}function Mo(e){return Promise.all(e.map(t=>t.catch(n=>n)))}function Bp(e,t){let n;return window.trustedTypes&&(n=window.trustedTypes.createPolicy(e,t)),n}function zp(e,t){const n=Bp("firebase-js-sdk-policy",{createScriptURL:Up}),i=document.createElement("script"),a=`${aa}?l=${e}&id=${t}`;i.src=n?n==null?void 0:n.createScriptURL(a):a,i.async=!0,document.head.appendChild(i)}function qp(e){let t=[];return Array.isArray(window[e])?t=window[e]:window[e]=t,t}async function Wp(e,t,n,i,a,o){const s=i[a];try{if(s)await t[s];else{const c=(await Mo(n)).find(d=>d.measurementId===a);c&&await t[c.appId]}}catch(l){Re.error(l)}e("config",a,o)}async function Gp(e,t,n,i,a){try{let o=[];if(a&&a.send_to){let s=a.send_to;Array.isArray(s)||(s=[s]);const l=await Mo(n);for(const c of s){const d=l.find(u=>u.measurementId===c),p=d&&t[d.appId];if(p)o.push(p);else{o=[];break}}}o.length===0&&(o=Object.values(t)),await Promise.all(o),e("event",i,a||{})}catch(o){Re.error(o)}}function Kp(e,t,n,i){async function a(o,...s){try{if(o==="event"){const[l,c]=s;await Gp(e,t,n,l,c)}else if(o==="config"){const[l,c]=s;await Wp(e,t,n,i,l,c)}else if(o==="consent"){const[l,c]=s;e("consent",l,c)}else if(o==="get"){const[l,c,d]=s;e("get",l,c,d)}else if(o==="set"){const[l]=s;e("set",l)}else e(o,...s)}catch(l){Re.error(l)}}return a}function Yp(e,t,n,i,a){let o=function(...s){window[i].push(arguments)};return window[a]&&typeof window[a]=="function"&&(o=window[a]),window[a]=Kp(o,e,t,n),{gtagCore:o,wrappedGtag:window[a]}}function Hp(e){const t=window.document.getElementsByTagName("script");for(const n of Object.values(t))if(n.src&&n.src.includes(aa)&&n.src.includes(e))return n;return null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qp=30,Vp=1e3;class Zp{constructor(t={},n=Vp){this.throttleMetadata=t,this.intervalMillis=n}getThrottleMetadata(t){return this.throttleMetadata[t]}setThrottleMetadata(t,n){this.throttleMetadata[t]=n}deleteThrottleMetadata(t){delete this.throttleMetadata[t]}}const Uo=new Zp;function Jp(e){return new Headers({Accept:"application/json","x-goog-api-key":e})}async function Xp(e){var t;const{appId:n,apiKey:i}=e,a={method:"GET",headers:Jp(i)},o=$p.replace("{app-id}",n),s=await fetch(o,a);if(s.status!==200&&s.status!==304){let l="";try{const c=await s.json();!((t=c.error)===null||t===void 0)&&t.message&&(l=c.error.message)}catch(c){}throw Ie.create("config-fetch-failed",{httpStatus:s.status,responseMessage:l})}return s.json()}async function em(e,t=Uo,n){const{appId:i,apiKey:a,measurementId:o}=e.options;if(!i)throw Ie.create("no-app-id");if(!a){if(o)return{measurementId:o,appId:i};throw Ie.create("no-api-key")}const s=t.getThrottleMetadata(i)||{backoffCount:0,throttleEndTimeMillis:Date.now()},l=new im;return setTimeout(async()=>{l.abort()},Fp),Bo({appId:i,apiKey:a,measurementId:o},s,l,t)}async function Bo(e,{throttleEndTimeMillis:t,backoffCount:n},i,a=Uo){var o;const{appId:s,measurementId:l}=e;try{await tm(i,t)}catch(c){if(l)return Re.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${c==null?void 0:c.message}]`),{appId:s,measurementId:l};throw c}try{const c=await Xp(e);return a.deleteThrottleMetadata(s),c}catch(c){const d=c;if(!nm(d)){if(a.deleteThrottleMetadata(s),l)return Re.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${l} provided in the "measurementId" field in the local Firebase config. [${d==null?void 0:d.message}]`),{appId:s,measurementId:l};throw c}const p=Number((o=d==null?void 0:d.customData)===null||o===void 0?void 0:o.httpStatus)===503?da(n,a.intervalMillis,Qp):da(n,a.intervalMillis),u={throttleEndTimeMillis:Date.now()+p,backoffCount:n+1};return a.setThrottleMetadata(s,u),Re.debug(`Calling attemptFetch again in ${p} millis`),Bo(e,u,i,a)}}function tm(e,t){return new Promise((n,i)=>{const a=Math.max(t-Date.now(),0),o=setTimeout(n,a);e.addEventListener(()=>{clearTimeout(o),i(Ie.create("fetch-throttle",{throttleEndTimeMillis:t}))})})}function nm(e){if(!(e instanceof $i)||!e.customData)return!1;const t=Number(e.customData.httpStatus);return t===429||t===500||t===503||t===504}class im{constructor(){this.listeners=[]}addEventListener(t){this.listeners.push(t)}abort(){this.listeners.forEach(t=>t())}}async function am(e,t,n,i,a){if(a&&a.global){e("event",n,i);return}else{const o=await t,s=Object.assign(Object.assign({},i),{send_to:o});e("event",n,s)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function rm(){if(yr())try{await br()}catch(e){return Re.warn(Ie.create("indexeddb-unavailable",{errorInfo:e==null?void 0:e.toString()}).message),!1}else return Re.warn(Ie.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;return!0}async function om(e,t,n,i,a,o,s){var l;const c=em(e);c.then(m=>{n[m.measurementId]=m.appId,e.options.measurementId&&m.measurementId!==e.options.measurementId&&Re.warn(`The measurement ID in the local Firebase config (${e.options.measurementId}) does not match the measurement ID fetched from the server (${m.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(m=>Re.error(m)),t.push(c);const d=rm().then(m=>{if(m)return i.getId()}),[p,u]=await Promise.all([c,d]);Hp(o)||zp(o,p.measurementId),a("js",new Date);const h=(l=s==null?void 0:s.config)!==null&&l!==void 0?l:{};return h[Np]="firebase",h.update=!0,u!=null&&(h[Pp]=u),a("config",p.measurementId,h),p.measurementId}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sm{constructor(t){this.app=t}_delete(){return delete At[this.app.options.appId],Promise.resolve()}}let At={},Fa=[];const $a={};let ri="dataLayer",lm="gtag",Ma,zo,Ua=!1;function cm(){const e=[];if(xr()&&e.push("This is a browser extension environment."),wr()||e.push("Cookies are not available."),e.length>0){const t=e.map((i,a)=>`(${a+1}) ${i}`).join(" "),n=Ie.create("invalid-analytics-context",{errorInfo:t});Re.warn(n.message)}}function dm(e,t,n){cm();const i=e.options.appId;if(!i)throw Ie.create("no-app-id");if(!e.options.apiKey)if(e.options.measurementId)Re.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${e.options.measurementId} provided in the "measurementId" field in the local Firebase config.`);else throw Ie.create("no-api-key");if(At[i]!=null)throw Ie.create("already-exists",{id:i});if(!Ua){qp(ri);const{wrappedGtag:o,gtagCore:s}=Yp(At,Fa,$a,ri,lm);zo=o,Ma=s,Ua=!0}return At[i]=om(e,Fa,$a,t,Ma,ri,n),new sm(e)}function um(e=gr()){e=Ct(e);const t=Bt(e,yn);return t.isInitialized()?t.getImmediate():pm(e)}function pm(e,t={}){const n=Bt(e,yn);if(n.isInitialized()){const a=n.getImmediate();if($s(t,n.getOptions()))return a;throw Ie.create("already-initialized")}return n.initialize({options:t})}async function mm(){if(xr()||!wr()||!yr())return!1;try{return await br()}catch(e){return!1}}function fm(e,t,n,i){e=Ct(e),am(zo,At[e.app.options.appId],t,n,i).catch(a=>Re.error(a))}const Ba="@firebase/analytics",za="0.10.8";function hm(){Ot(new Pt(yn,(t,{options:n})=>{const i=t.getProvider("app").getImmediate(),a=t.getProvider("installations-internal").getImmediate();return dm(i,a,n)},"PUBLIC")),Ot(new Pt("analytics-internal",e,"PRIVATE")),bt(Ba,za),bt(Ba,za,"esm2017");function e(t){try{const n=t.getProvider(yn).getImmediate();return{logEvent:(i,a,o)=>fm(n,i,a,o)}}catch(n){throw Ie.create("interop-component-reg-failed",{reason:n})}}}hm();const Ei={apiKey:"AIzaSyD1TjtSC-Mukd2EdNtiuQq-u3l3gdMP0dc",authDomain:"homefoods-16e56.firebaseapp.com",projectId:"homefoods-16e56",storageBucket:"homefoods-16e56.firebasestorage.app",messagingSenderId:"495709118320",appId:"1:495709118320:web:6fe3b7ec2b7c19d66cf9b5",measurementId:"G-6MR0ED1C3E"},gm=["apiKey","authDomain","projectId","appId"],je=gm.some(e=>!Ei[e]);let nt,X,qo,qa;je?Promise.resolve(null):(nt=ua().length?ua()[0]:Ms(Ei),kr(nt),X=Us(nt),qo=Ku(nt),Ei.measurementId?mm().then(e=>e?(qa=um(nt),qa):null):Promise.resolve(null));async function vm(e,t=null,n=20){if(console.log(`[getFoodReviews] Starting fetch for foodId: "${e}", kitchenId: "${t}", limit: ${n}`),je)return console.warn("[getFoodReviews] Firebase disabled, returning mock data"),Ka(e);if(!e||e.trim()==="")return console.log("[getFoodReviews] No foodId provided, returning empty array"),[];const i=e.trim();console.log(`[getFoodReviews] Cleaned foodId: "${i}"`);try{let a=[];if(t){console.log(`[getFoodReviews] Searching reviews in kitchen: ${t}`);const o=ce(X,"kitchens",t,"reviews"),s=he(o,Fe("foodId","==",i),Be(n));a=(await de(s)).docs.map(c=>({id:c.id,kitchenId:t,...c.data()})),console.log(`[getFoodReviews] Found ${a.length} reviews in kitchen ${t}`)}else{console.log("[getFoodReviews] Searching reviews across all kitchens...");const o=he(ce(X,"kitchens")),s=await de(o);console.log(`[getFoodReviews] Found ${s.size} kitchens to search`);for(const l of s.docs)try{const c=ce(X,"kitchens",l.id,"reviews"),d=he(c,Fe("foodId","==",i),Be(n)),u=(await de(d)).docs.map(h=>({id:h.id,kitchenId:l.id,...h.data()}));if(a.push(...u),console.log(`[getFoodReviews] Found ${u.length} reviews in kitchen ${l.id}`),a.length>=n)break}catch(c){console.warn(`[getFoodReviews] Error searching kitchen ${l.id}:`,c);continue}}return a.length>0&&(a=a.sort((o,s)=>{const l=p=>p?typeof p=="string"?p.includes(" at ")?new Date(p.replace(" at "," ").replace(" UTC+5","")):new Date(p):p.seconds?new Date(p.seconds*1e3):new Date(p):new Date(0),c=l(o.timeStamp);return l(s.timeStamp)-c}),a=a.slice(0,n)),console.log(`[getFoodReviews] Final result - Found ${a.length} reviews for food '${i}':`,a),a}catch(a){return console.error("[getFoodReviews] Error fetching food reviews:",a),console.log("[getFoodReviews] Returning mock data due to error"),Ka(i)}}async function xm(e,t=null){if(console.log(`[debugReviewsQuery] Testing query for foodId: ${e}, kitchenId: ${t}`),je)return console.warn("[debugReviewsQuery] Firebase disabled"),{status:"disabled"};try{let n=[],i=[];const a=he(ce(X,"kitchens")),o=await de(a);console.log(`[debugReviewsQuery] Found ${o.size} kitchens`);for(const l of o.docs)try{i.push(l.id);const c=ce(X,"kitchens",l.id,"reviews"),p=(await de(he(c,Be(50)))).docs.map(u=>({id:u.id,kitchenId:l.id,...u.data()}));if(console.log(`[debugReviewsQuery] Kitchen ${l.id} has ${p.length} total reviews`),p.length>0&&console.log(`[debugReviewsQuery] Sample reviews from kitchen ${l.id}:`,p.slice(0,2)),e){const u=he(c,Fe("foodId","==",e)),m=(await de(u)).docs.map(g=>({id:g.id,kitchenId:l.id,...g.data()}));m.length>0&&(console.log(`[debugReviewsQuery] Found ${m.length} reviews for foodId '${e}' in kitchen ${l.id}:`,m),n.push(...m))}n.push(...p)}catch(c){console.warn(`[debugReviewsQuery] Error checking kitchen ${l.id}:`,c);continue}const s=[...new Set(n.map(l=>l.foodId))];return console.log("[debugReviewsQuery] All unique foodIds in reviews:",s),{status:"success",requestedFoodId:e,kitchensSearched:i,allReviewsCount:n.length,matchingReviewsCount:n.filter(l=>l.foodId===e).length,uniqueFoodIds:s,sampleReviews:n.slice(0,5)}}catch(n){return console.error("[debugReviewsQuery] Error:",n),{status:"error",error:n.message}}}async function ym(e,t=null){if(console.log(`[getFoodLikes] Starting fetch for foodId: ${e}, kitchenId: ${t}`),je)return console.warn("[getFoodLikes] Firebase disabled, returning mock data"),Ga(e);if(!e||e.trim()==="")return console.log("[getFoodLikes] No foodId provided, returning empty array"),[];try{let n=[];if(t)try{console.log(`[getFoodLikes] Searching likes in kitchen ${t} subcollection`);const l=ce(X,"kitchens",t,"Likes");let c=he(l,Fe("foodId","==",e)),d=await de(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}));p.length===0&&(c=he(l,Fe("productId","==",e)),d=await de(c),p=d.docs.map(u=>({id:u.id,kitchenId:t,...u.data()}))),n.push(...p),console.log(`[getFoodLikes] Found ${p.length} likes in kitchen subcollection`)}catch(l){console.warn("[getFoodLikes] Error searching kitchen subcollection:",l)}console.log("[getFoodLikes] Querying top-level Likes collection");let i=he(ce(X,"Likes"),Fe("foodId","==",e)),a=await de(i),o=a.docs.map(l=>({id:l.id,...l.data()}));o.length===0&&(console.log("[getFoodLikes] No results with foodId, trying productId in top-level..."),i=he(ce(X,"Likes"),Fe("productId","==",e)),a=await de(i),o=a.docs.map(l=>({id:l.id,...l.data()}))),n.push(...o),console.log(`[getFoodLikes] Found ${o.length} likes in top-level collection`);const s=n.filter((l,c,d)=>d.findIndex(p=>p.id===l.id)===c);return console.log(`[getFoodLikes] Total unique likes: ${s.length}`),s}catch(n){return console.error("[getFoodLikes] Error fetching food likes:",n),console.log("[getFoodLikes] Returning mock data due to error"),Ga(e)}}async function bm(){if(je)return console.log("Firebase is disabled - check your .env file"),{status:"disabled"};try{console.log("Testing Firestore connection...");const e=ce(X,"kitchens"),t=await de(he(e,Be(5))),n=t.docs.map(d=>({id:d.id,...d.data()}));let i=[],a=[];for(const d of n)try{const p=ce(X,"kitchens",d.id,"reviews"),h=(await de(he(p,Be(5)))).docs.map(j=>({id:j.id,kitchenId:d.id,...j.data()}));i.push(...h);const m=ce(X,"kitchens",d.id,"Likes"),C=(await de(he(m,Be(5)))).docs.map(j=>({id:j.id,kitchenId:d.id,...j.data()}));a.push(...C),console.log(`Kitchen ${d.id}: ${h.length} reviews, ${C.length} likes`)}catch(p){console.warn(`Error testing kitchen ${d.id} subcollections:`,p)}const o=ce(X,"Likes"),l=(await de(he(o,Be(10)))).docs.map(d=>({id:d.id,...d.data()}));console.log("Reviews found in kitchen subcollections:",i),console.log("Likes found in kitchen subcollections:",a),console.log("Likes found in top-level collection:",l);const c={status:"connected",collections:{kitchens:{count:t.size,samples:n,sampleIds:n.map(d=>d.id)},reviews:{source:"kitchen_subcollections",count:i.length,samples:i,sampleIds:i.map(d=>d.id),foodIds:i.map(d=>d.foodId)},likes:{subcollectionCount:a.length,topLevelCount:l.length,samples:[...a,...l],foodIds:[...a,...l].map(d=>d.foodId||d.productId)}}};return console.log("Firestore Test Results:",c),c}catch(e){return console.error("Firestore connection test failed:",e),{status:"error",error:e.message}}}async function wm(e,t=null){console.log(`[getFoodDetailWithKitchenAndReviews] Fetching food: ${e}, kitchen: ${t}`);try{const n=await Wo(e,t),i=t||n.kitchenId;console.log(`[getFoodDetailWithKitchenAndReviews] Using kitchenId: ${i}`);const[a,o,s]=await Promise.all([i?km(i):Promise.resolve(null),ym(e,i),vm(e,i)]),l=Go(s);console.log("ð ~ getFoodDetailWithKitchenAndReviews ~ reviewStats:",l);const c={food:n,kitchen:a,likes:o,reviews:s,totalLikes:o.length,reviewStats:l};return console.log("[getFoodDetailWithKitchenAndReviews] Complete result:",c),c}catch(n){throw console.error("[getFoodDetailWithKitchenAndReviews] Error fetching food detail:",n),n}}async function Wo(e,t=null){if(console.log(`[getFoodById] Starting fetch for foodId: ${e}, kitchenId: ${t}`),je)return console.warn("[getFoodById] Firebase disabled, returning mock data"),rt(e);if(!e||e.trim()==="")throw console.error("[getFoodById] Invalid foodId provided:",e),new Error("Food ID is required and cannot be empty");try{let n,i=null,a=null;if(t&&(console.log(`[getFoodById] Querying kitchens/${t}/foodItems/${e}`),n=await Et(ot(X,"kitchens",t,"foodItems",e)),n.exists()))return i={id:n.id,...n.data()},a=t,console.log("[getFoodById] Found in specific kitchen subcollection:",i),{...i,kitchenId:a};if(!i){console.log("[getFoodById] Searching across all kitchen subcollections...");const o=he(ce(X,"kitchens")),s=await de(o);for(const l of s.docs)try{const c=ot(X,"kitchens",l.id,"foodItems",e),d=await Et(c);if(d.exists())return i={id:d.id,...d.data()},a=l.id,console.log(`[getFoodById] Found in kitchen ${l.id}:`,i),{...i,kitchenId:a}}catch(c){console.warn(`[getFoodById] Error checking kitchen ${l.id}:`,c);continue}}if(console.log(`[getFoodById] Trying top-level foodItems/${e}`),n=await Et(ot(X,"foodItems",e)),n.exists()){const o={id:n.id,...n.data()};return console.log("[getFoodById] Found in top-level collection:",o),o}return console.warn(`[getFoodById] Food item with ID '${e}' not found anywhere`),rt(e)}catch(n){return console.error("[getFoodById] Error fetching food item:",n),rt(e)}}async function km(e){if(console.log(`[getKitchenById] Starting fetch for kitchenId: ${e}`),je)return console.warn("[getKitchenById] Firebase disabled, returning mock data"),lt(e);if(!e||e.trim()==="")throw console.error("[getKitchenById] Invalid kitchenId provided:",e),new Error("Kitchen ID is required and cannot be empty");try{console.log(`[getKitchenById] Querying Firestore collection 'kitchens' for document: ${e}`);const t=await Et(ot(X,"kitchens",e));if(console.log(`[getKitchenById] Document exists: ${t.exists()}`),!t.exists())return console.warn(`[getKitchenById] Kitchen with ID '${e}' not found in Firestore`),console.log("[getKitchenById] Returning mock data as fallback"),lt(e);const n={id:t.id,...t.data()};return console.log("[getKitchenById] Successfully fetched kitchen data:",n),n}catch(t){return console.error("[getKitchenById] Error fetching kitchen:",t),console.log("[getKitchenById] Returning mock data due to error"),lt(e)}}function Go(e){if(!e||e.length===0)return{totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0}};const t=e.length;console.log("ð ~ calculateReviewStats ~ totalReviews:",t);const n={5:0,4:0,3:0,2:0,1:0};let i=0;e.forEach(s=>{const l=Math.floor(s.rating||0);l>=1&&l<=5&&(n[l]++,i+=s.rating)});const a=t>0?i/t:0,o={};for(let s=1;s<=5;s++)o[s]=t>0?n[s]/t*100:0;return{totalReviews:t,averageRating:parseFloat(a.toFixed(1)),ratingBreakdown:n,ratingPercentages:o}}async function jm(e=20){if(console.log(`[getAllFoods] Starting fetch with limit: ${e}`),je)return ct();try{const t=he(ce(X,"foodItems"),Be(e)),i=(await de(t)).docs.map(a=>({id:a.id,...a.data()}));return i.length>0?i:ct()}catch(t){return console.error("[getAllFoods] Error:",t),ct()}}async function Ko(e,t=1e3){if(console.log(`[getKitchenAllReviews] Fetching all reviews for kitchen: ${e}`),je)return console.warn("[getKitchenAllReviews] Firebase disabled, returning mock data"),Wa(e);if(!e||e.trim()==="")return console.log("[getKitchenAllReviews] No kitchenId provided, returning empty array"),[];try{console.log(`[getKitchenAllReviews] Querying reviews subcollection for kitchen: ${e}`);const n=ce(X,"kitchens",e,"reviews"),i=he(n,Be(t)),o=(await de(i)).docs.map(s=>({id:s.id,kitchenId:e,...s.data()}));return console.log(`[getKitchenAllReviews] Found ${o.length} total reviews for kitchen ${e}`),o.length>0&&o.sort((s,l)=>{const c=u=>u?typeof u=="string"?u.includes(" at ")?new Date(u.replace(" at "," ").replace(" UTC+5","")):new Date(u):u.seconds?new Date(u.seconds*1e3):new Date(u):new Date(0),d=c(s.timeStamp);return c(l.timeStamp)-d}),console.log(`[getKitchenAllReviews] Returning ${o.length} reviews for kitchen ${e}`),o}catch(n){return console.error("[getKitchenAllReviews] Error fetching kitchen reviews:",n),console.log("[getKitchenAllReviews] Returning mock data due to error"),Wa(e)}}async function Cm(e){console.log(`[getKitchenReviewStats] Getting review stats for kitchen: ${e}`);try{const t=await Ko(e),i={...Go(t),kitchenId:e,reviewsList:t,uniqueFoodIds:[...new Set(t.map(a=>a.foodId).filter(Boolean))],lastUpdated:new Date().toISOString()};return console.log(`[getKitchenReviewStats] Kitchen ${e} stats:`,i),i}catch(t){return console.error("[getKitchenReviewStats] Error calculating kitchen stats:",t),{kitchenId:e,totalReviews:0,averageRating:0,ratingBreakdown:{5:0,4:0,3:0,2:0,1:0},ratingPercentages:{5:0,4:0,3:0,2:0,1:0},reviewsList:[],uniqueFoodIds:[],lastUpdated:new Date().toISOString(),error:t.message}}}function Wa(e){return[{id:"kitchen-review-1",kitchenId:e,foodId:"food-1",userId:"user-1",userName:"Alice Johnson",userProfile:"",rating:5,message:"Amazing food from this kitchen! The Dim Sum was perfect.",timeStamp:"July 10, 2025 at 2:30:00 PM UTC+5",orderId:"order-1"},{id:"kitchen-review-2",kitchenId:e,foodId:"food-2",userId:"user-2",userName:"Bob Smith",userProfile:"",rating:4,message:"Great kitchen, fast delivery and tasty food.",timeStamp:"July 9, 2025 at 7:15:00 PM UTC+5",orderId:"order-2"},{id:"kitchen-review-3",kitchenId:e,foodId:"food-1",userId:"user-3",userName:"Carol Davis",userProfile:"",rating:5,message:"Best kitchen in the area! Highly recommend.",timeStamp:"July 8, 2025 at 12:45:00 PM UTC+5",orderId:"order-3"}]}function rt(e){return{id:e,name:"Dim Sum (Dumplings)",description:"A timeless delicacy from Chinese cuisine, Dim Sum dumplings are handcrafted pockets of flavor, delicately wrapped in thin, translucent dough. Each dumpling is steamed to perfection, preserving the juicy, savory filling inside.",cost:150,foodCategory:"1, 2",foodType:"Chinese",imageUrl:"/src/assets/images/product.png",kitchenId:"mock-kitchen-1",kitchenName:"Resto Parmato Bapo",isFeatured:!0,availability:{numAvailable:15,numOfSoldItem:85},engagement:{numOfLike:127,rating:4.9,numRatings:1247,countRating:1247}}}function lt(e){const t=new Date,n=new Date(t);n.setDate(t.getDate()+1);const i=new Date(t);i.setDate(t.getDate()+2);const a=o=>o.toISOString().split("T")[0];return{id:e,name:"Coco's Kitchen",address:"Lahore-Sialkot Motorway",city:"San Francisco",cuisine:"Thai",description:"This is the kitchen of James done. This is the kitchen of James done, This is the kitchen of James done.This is the kitchen of James done",ownerId:"mock-owner-1",location:{latitude:37.5485,longitude:-121.9886},rating:4.9,ratingCount:1247,preorderSchedule:{dates:{[a(n)]:[{id:"schedule-1",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["6:22 PM","7:30 PM"],numOfAvailableItems:10,isLimitedOrder:!1},{id:"schedule-2",foodItemId:"food-4",nameOfFood:"Margherita Pizza",availableTimes:["6:22 PM","8:00 PM"],numOfAvailableItems:8,isLimitedOrder:!1}],[a(i)]:[{id:"schedule-3",foodItemId:"food-3",nameOfFood:"Dim Sum (Dumplings)",availableTimes:["5:30 PM","7:00 PM"],numOfAvailableItems:12,isLimitedOrder:!1}]}}}}function ct(){return[rt("food-1"),{...rt("food-2"),id:"food-2",name:"Margherita Pizza",cost:12.45,availability:{numAvailable:5,numOfSoldItem:2},imageUrl:"/src/assets/images/order2.png"},{...rt("food-3"),id:"food-3",name:"Dim Sum (Dumplings)",cost:22.45,availability:{numAvailable:0,numOfSoldItem:15},imageUrl:"/src/assets/images/order1.png"},{...rt("food-4"),id:"food-4",name:"Margherita Pizza (Pre-order)",cost:12.45,availability:{numAvailable:0,numOfSoldItem:8},imageUrl:"/src/assets/images/order2.png"}]}function Ga(e){return[{id:"like-1",userID:"user-1",foodId:e,status:"liked",timestamp:"2025-08-01T10:00:00Z"},{id:"like-2",userID:"user-2",foodId:e,status:"liked",timestamp:"2025-08-02T15:30:00Z"}]}function Ka(e){return[{id:"review-1",foodId:e,userId:"z6HJ9L3KS3XR9yLZ9rexp7K4Eo43",userName:"Testing55",userProfile:"",rating:4,message:"Testing",timeStamp:"July 7, 2025 at 6:06:01 PM UTC+5",orderId:"PrH8qFuHeHDlpfAw6c9"},{id:"review-2",foodId:e,userId:"user-456",userName:"John Doe",userProfile:"",rating:5,message:"Great food, would definitely order again!",timeStamp:"2025-07-07T15:30:00Z",orderId:"order-456"},{id:"review-3",foodId:e,userId:"user-789",userName:"Jane Smith",userProfile:"",rating:5,message:"Perfect! Exceeded my expectations.",timeStamp:"2025-07-06T10:15:30Z",orderId:"order-789"}]}async function Sm(e){if(console.log(`[getKitchenWithFoodItems] Fetching kitchen: ${e}`),je)return console.warn("[getKitchenWithFoodItems] Firebase disabled, returning mock data"),{kitchen:lt(e),foods:ct()};try{const t=await Et(ot(X,"kitchens",e));if(!t.exists())return console.warn(`[getKitchenWithFoodItems] Kitchen ${e} not found`),{kitchen:null,foods:[]};const n={id:t.id,...t.data()},i=ce(X,"kitchens",e,"foodItems"),o=(await de(i)).docs.map(s=>({id:s.id,kitchenId:e,...s.data()}));return console.log(`[getKitchenWithFoodItems] Found ${o.length} food items for kitchen ${e}`),{kitchen:n,foods:o}}catch(t){return console.error("[getKitchenWithFoodItems] Error:",t),{kitchen:lt(e),foods:ct()}}}async function Rm(e=10){if(console.log(`[getAllKitchensWithFoodItems] Fetching up to ${e} kitchens`),je)return console.warn("[getAllKitchensWithFoodItems] Firebase disabled, returning mock data"),[{kitchen:lt("mock-kitchen-1"),foods:ct()}];try{const t=he(ce(X,"kitchens"),Be(e)),n=await de(t),i=[];for(const a of n.docs){const o={id:a.id,...a.data()},s=ce(X,"kitchens",a.id,"foodItems"),c=(await de(s)).docs.map(d=>({id:d.id,kitchenId:a.id,...d.data()}));i.push({kitchen:o,foods:c}),console.log(`[getAllKitchensWithFoodItems] Kitchen ${a.id}: ${c.length} food items`)}return console.log(`[getAllKitchensWithFoodItems] Loaded ${i.length} kitchens with food data`),i}catch(t){return console.error("[getAllKitchensWithFoodItems] Error:",t),[{kitchen:lt("mock-kitchen-1"),foods:ct()}]}}const Dm=async(e,t,n)=>{try{console.log("ð¥ Adding like to Firestore:",{kitchenId:e,productId:t,userId:n});const i=ce(X,"kitchens",e,"likes"),a={productId:t,userId:n,timestamp:zs()},o=await jr(i,a);return console.log("â Like added successfully with ID:",o.id),{id:o.id,...a}}catch(i){throw console.error("â Error adding like:",i),i}},Em=async(e,t,n)=>{try{console.log("ð¥ Removing like from Firestore:",{kitchenId:e,productId:t,userId:n});const i=ce(X,"kitchens",e,"likes"),a=he(i,Fe("productId","==",t),Fe("userId","==",n)),o=await de(a);if(o.empty)return console.warn("â ï¸ No like found to remove"),!1;const s=o.docs.map(l=>Bs(l.ref));return await Promise.all(s),console.log("â Like(s) removed successfully"),!0}catch(i){throw console.error("â Error removing like:",i),i}},Yo=async(e,t,n)=>{try{const i=ce(X,"kitchens",e,"likes"),a=he(i,Fe("productId","==",t),Fe("userId","==",n));return!(await de(a)).empty}catch(i){return console.error("â Error checking user like:",i),!1}},Ya=e=>!e||!e._lat||!e._long?null:{lat:e._lat,lng:e._long},Lm=e=>!e||!e.seconds?null:new Date(e.seconds*1e3+(e.nanoseconds||0)/1e6).toISOString(),Ue=e=>{if(!e||typeof e!="object")return e;const t={...e};return t.location&&t.location._lat!==void 0&&(t.location=Ya(t.location)),Object.keys(t).forEach(n=>{const i=t[n];i&&typeof i=="object"&&(i._lat!==void 0&&i._long!==void 0?t[n]=Ya(i):i.seconds!==void 0&&(i.nanoseconds!==void 0||i.nanoseconds===0)?t[n]=Lm(i):Array.isArray(i)?t[n]=i.map(a=>Ue(a)):t[n]=Ue(i))}),t},It=ye("food/fetchDetail",async({foodId:e,kitchenId:t})=>{try{return{...await wm(e,t),foodId:e,kitchenId:t}}catch(n){return{food:await Wo(e),kitchen:null,likes:[],reviews:[],reviewStats:null,foodId:e,kitchenId:t}}}),oi=ye("food/fetchAll",async(e=20)=>await jm(e)),Ho=ye("food/checkLikeStatus",async({foodId:e,kitchenId:t},{getState:n})=>{var o;const{auth:i}=n(),a=(o=i.user)==null?void 0:o.id;if(console.log("ð Checking like status:",{foodId:e,kitchenId:t,userId:a}),!a||!t)return console.log("â Missing userId or kitchenId for like status check"),{foodId:e,liked:!1};try{const s=await Yo(t,e,a);return console.log("â Like status check result:",{foodId:e,isLiked:s}),{foodId:e,liked:s}}catch(s){return console.error("â Error checking like status:",s),{foodId:e,liked:!1}}}),Li=ye("food/toggleLike",async(e,{getState:t})=>{var c,d;const{auth:n,food:i}=t(),a=(c=n.user)==null?void 0:c.id,o=(d=i.currentKitchen)==null?void 0:d.id;if(console.log("ð Toggle like action:",{foodId:e,userId:a,kitchenId:o,currentLikedFoods:i.likedFoods}),!a)throw new Error("User not authenticated");if(!o)throw new Error("Kitchen information not available");const s=i.likedFoods.includes(e);console.log("ð Current like state from Redux:",{foodId:e,isCurrentlyLiked:s}),console.log("ð Checking actual Firestore like state before toggle");const l=await Yo(o,e,a);console.log("ð Actual Firestore like state:",{foodId:e,actualFirestoreState:l});try{return l?(console.log("ð¥ Attempting to remove like from Firestore"),await Em(o,e,a),console.log("â Like removed from Firestore")):(console.log("ð¥ Attempting to add like to Firestore"),await Dm(o,e,a),console.log("â Like added to Firestore")),{foodId:e,userId:a,kitchenId:o,liked:!l}}catch(p){throw console.error("â Error toggling like in Firestore:",p),p}});ye("food/refresh",async({foodId:e,kitchenId:t},{dispatch:n})=>n(It({foodId:e,kitchenId:t})));const Qo=Wt({name:"food",initialState:{currentFood:null,currentKitchen:null,currentReviews:[],currentReviewStats:null,currentLikes:[],allFoods:[],likedFoods:[],loading:!1,allFoodsLoading:!1,error:null,allFoodsError:null,lastUpdated:null,allFoodsLastUpdated:null},reducers:{clearCurrentFood:e=>{e.currentFood=null,e.currentKitchen=null,e.currentReviews=[],e.currentReviewStats=null,e.currentLikes=[],e.error=null},clearError:e=>{e.error=null},clearAllFoodsError:e=>{e.allFoodsError=null},updateFoodInList:(e,t)=>{var o;const{foodId:n,updates:i}=t.payload,a=e.allFoods.findIndex(s=>s.id===n);a!==-1&&(e.allFoods[a]={...e.allFoods[a],...i}),((o=e.currentFood)==null?void 0:o.id)===n&&(e.currentFood={...e.currentFood,...i})},toggleLikeLocally:(e,t)=>{const n=t.payload,i=e.likedFoods.includes(n);console.log("ð toggleLikeLocally called:",{foodId:n,currentlyLiked:i,likedFoods:e.likedFoods}),i?(e.likedFoods=e.likedFoods.filter(a=>a!==n),console.log("â Locally removed like for:",n)):(e.likedFoods.push(n),console.log("â Locally added like for:",n)),console.log("ð Updated likedFoods locally:",e.likedFoods)}},extraReducers:e=>{e.addCase(It.pending,t=>{t.loading=!0,t.error=null}).addCase(It.fulfilled,(t,n)=>{t.loading=!1;const{food:i,kitchen:a,likes:o,reviews:s,reviewStats:l}=n.payload;t.currentFood=Ue(i),t.currentKitchen=Ue(a),t.currentReviews=s?s.map(c=>Ue(c)):[],t.currentReviewStats=Ue(l),t.currentLikes=o?o.map(c=>Ue(c)):[],t.lastUpdated=new Date().toISOString()}).addCase(It.rejected,(t,n)=>{t.loading=!1,t.error=n.error.message}).addCase(oi.pending,t=>{t.allFoodsLoading=!0,t.allFoodsError=null}).addCase(oi.fulfilled,(t,n)=>{t.allFoodsLoading=!1,t.allFoods=n.payload,t.allFoodsLastUpdated=new Date().toISOString()}).addCase(oi.rejected,(t,n)=>{t.allFoodsLoading=!1,t.allFoodsError=n.error.message}).addCase(Li.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;a&&!t.likedFoods.includes(i)?t.likedFoods.push(i):a||(t.likedFoods=t.likedFoods.filter(o=>o!==i))}).addCase(Li.rejected,(t,n)=>{const i=n.meta.arg;t.likedFoods.includes(i)?t.likedFoods=t.likedFoods.filter(o=>o!==i):t.likedFoods.push(i)}).addCase(Ho.fulfilled,(t,n)=>{const{foodId:i,liked:a}=n.payload;console.log("â Like status check fulfilled:",{foodId:i,liked:a,currentLikedFoods:t.likedFoods}),a&&!t.likedFoods.includes(i)?(t.likedFoods.push(i),console.log("â Added foodId to likedFoods:",i)):a||(t.likedFoods=t.likedFoods.filter(o=>o!==i),console.log("â Removed foodId from likedFoods:",i)),console.log("ð Updated likedFoods:",t.likedFoods)})}}),{clearCurrentFood:_m,clearError:Lh,clearAllFoodsError:_h,updateFoodInList:Ah,toggleLikeLocally:Ih}=Qo.actions,Am=Qo.reducer,yt=Wt({name:"cart",initialState:{items:[],totalItems:0,totalAmount:0,loading:!1,error:null,lastUpdated:null},reducers:{addToCart:(e,t)=>{console.log("ð Adding to cart:",t.payload);const n=t.payload,i=e.items.findIndex(a=>a.foodId===n.foodId&&a.selectedDate===n.selectedDate&&(a.specialInstructions||"")===(n.specialInstructions||"")&&a.orderType===n.orderType);if(i!==-1){const a=e.items[i].quantity;e.items[i].quantity+=n.quantity||1,e.items[i].updatedAt=new Date().toISOString(),console.log("ð¦ Updated existing cart item quantity:",{foodId:n.foodId,selectedDate:n.selectedDate,oldQuantity:a,newQuantity:e.items[i].quantity,addedQuantity:n.quantity||1})}else{const a={id:`cart-item-${Date.now()}-${Math.random()}`,foodId:n.foodId,kitchenId:n.kitchenId,userId:n.userId||"local_user",quantity:n.quantity||1,selectedDate:n.selectedDate||null,selectedTime:n.selectedTime||null,orderType:n.orderType||"GO_GRAB",specialInstructions:n.specialInstructions||"",food:n.food||null,kitchen:n.kitchen||null,pickupDetails:n.pickupDetails||{date:n.selectedDate,time:n.selectedTime,display:n.orderType==="GO_GRAB"?"Pick up today":`Pick up ${n.selectedDate}`,orderType:n.orderType||"GO_GRAB"},isPreOrder:n.isPreOrder||!1,addedAt:new Date().toISOString()};e.items.push(a),console.log("ð¦ Added new cart item:",a)}yt.caseReducers.calculateTotals(e)},removeFromCart:(e,t)=>{const n=t.payload;console.log("ðï¸ Removing from cart:",n);const i=e.items.length;e.items=e.items.filter(a=>a.id!==n),console.log("ðï¸ Removed cart item:",{itemId:n,itemsRemoved:i-e.items.length,remainingItems:e.items.length}),yt.caseReducers.calculateTotals(e)},updateCartItem:(e,t)=>{const{cartItemId:n,quantity:i,specialInstructions:a}=t.payload;console.log("ð Updating cart item:",t.payload);const o=e.items.findIndex(s=>s.id===n);o!==-1?(i!==void 0&&(e.items[o].quantity=i),a!==void 0&&(e.items[o].specialInstructions=a),e.items[o].updatedAt=new Date().toISOString(),console.log("ð Updated cart item:",{itemId:n,newQuantity:i,specialInstructions:a}),yt.caseReducers.calculateTotals(e)):console.error("â Cart item not found for update:",n)},updatePickupDetails:(e,t)=>{const{cartItemId:n,pickupDate:i,pickupTime:a,orderType:o}=t.payload;console.log("ð Updating pickup details:",t.payload);const s=e.items.find(l=>l.id===n);s?(i!==void 0&&(s.selectedDate=i),a!==void 0&&(s.selectedTime=a),o!==void 0&&(s.orderType=o),s.pickupDetails||(s.pickupDetails={}),i!==void 0&&(s.pickupDetails.date=i,s.pickupDetails.display=o==="GO_GRAB"?"Pick up today":`Pick up ${i}`),a!==void 0&&(s.pickupDetails.time=a),o!==void 0&&(s.pickupDetails.orderType=o),s.updatedAt=new Date().toISOString(),console.log("ð Updated pickup details for item:",n)):console.error("â Cart item not found for pickup details update:",n)},clearCart:e=>{console.log("ðï¸ Clearing entire cart"),e.items=[],e.totalItems=0,e.totalAmount=0,e.lastUpdated=new Date().toISOString()},clearError:e=>{e.error=null},calculateTotals:e=>{e.totalItems=e.items.reduce((t,n)=>t+(n.quantity||1),0),e.totalAmount=e.items.reduce((t,n)=>{var o;const i=((o=n.food)==null?void 0:o.cost)||0,a=typeof i=="string"?parseFloat(i):i;return t+a*(n.quantity||1)},0),e.lastUpdated=new Date().toISOString(),console.log("ð§® Calculated totals:",{totalItems:e.totalItems,totalAmount:e.totalAmount,itemCount:e.items.length})},setLoading:(e,t)=>{e.loading=t.payload},setError:(e,t)=>{e.error=t.payload}},extraReducers:e=>{e.addCase(An,(t,n)=>{var i;if((i=n.payload)!=null&&i.cart){console.log("ð¾ Rehydrating cart from persistence:",n.payload.cart);const a={...t,...n.payload.cart,loading:!1,error:null};return yt.caseReducers.calculateTotals(a),a}})}}),{addToCart:Vo,removeFromCart:Im,updateCartItem:_i,updatePickupDetails:Th,clearCart:ra,clearError:Oh,calculateTotals:Ph,setLoading:Nh,setError:Fh}=yt.actions,Tm=yt.reducer,on=ye("kitchen/fetchStats",async e=>{try{const t=await Cm(e);return{kitchenId:e,stats:t}}catch(t){throw console.error("Error fetching kitchen stats:",t),t}}),sn=ye("kitchen/fetchReviews",async({kitchenId:e,limit:t=10})=>{try{const n=await Ko(e,t);return{kitchenId:e,reviews:n}}catch(n){throw console.error("Error fetching kitchen reviews:",n),n}}),Om=ye("kitchen/addReview",async({kitchenId:e,reviewData:t},{getState:n})=>{var l,c;const{auth:i}=n(),a=(l=i.user)==null?void 0:l.id,o=((c=i.user)==null?void 0:c.name)||"Anonymous";if(!a)throw new Error("User not authenticated");console.log("Adding kitchen review:",{kitchenId:e,reviewData:t,userId:a,userName:o}),await new Promise(d=>setTimeout(d,500));const s={id:`review-${Date.now()}`,userId:a,userName:o,rating:t.rating,comment:t.comment,timestamp:new Date().toISOString(),kitchenId:e};return{kitchenId:e,review:s}}),Pm=ye("kitchen/updateReview",async({kitchenId:e,reviewId:t,updates:n},{getState:i})=>{var s;const{auth:a}=i(),o=(s=a.user)==null?void 0:s.id;if(!o)throw new Error("User not authenticated");return console.log("Updating kitchen review:",{kitchenId:e,reviewId:t,updates:n,userId:o}),await new Promise(l=>setTimeout(l,300)),{kitchenId:e,reviewId:t,updates:n}}),Nm=ye("kitchen/deleteReview",async({kitchenId:e,reviewId:t},{getState:n})=>{var o;const{auth:i}=n(),a=(o=i.user)==null?void 0:o.id;if(!a)throw new Error("User not authenticated");return console.log("Deleting kitchen review:",{kitchenId:e,reviewId:t,userId:a}),await new Promise(s=>setTimeout(s,300)),{kitchenId:e,reviewId:t}}),Zo=Wt({name:"kitchen",initialState:{kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}},reducers:{clearKitchenData:(e,t)=>{const n=t.payload;delete e.kitchenStats[n],delete e.kitchenReviews[n],delete e.statsLoading[n],delete e.reviewsLoading[n],delete e.statsError[n],delete e.reviewsError[n],delete e.statsLastUpdated[n],delete e.reviewsLastUpdated[n]},clearAllKitchenData:()=>({kitchenStats:{},kitchenReviews:{},statsLoading:{},reviewsLoading:{},statsError:{},reviewsError:{},statsLastUpdated:{},reviewsLastUpdated:{}}),clearKitchenErrors:(e,t)=>{const n=t.payload;delete e.statsError[n],delete e.reviewsError[n]}},extraReducers:e=>{e.addCase(on.pending,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!0,delete t.statsError[i]}).addCase(on.fulfilled,(t,n)=>{const{kitchenId:i,stats:a}=n.payload;t.statsLoading[i]=!1,t.kitchenStats[i]=Ue(a),t.statsLastUpdated[i]=new Date().toISOString()}).addCase(on.rejected,(t,n)=>{const i=n.meta.arg;t.statsLoading[i]=!1,t.statsError[i]=n.error.message}).addCase(sn.pending,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!0,delete t.reviewsError[i]}).addCase(sn.fulfilled,(t,n)=>{const{kitchenId:i,reviews:a}=n.payload;t.reviewsLoading[i]=!1,t.kitchenReviews[i]=a?a.map(o=>Ue(o)):[],t.reviewsLastUpdated[i]=new Date().toISOString()}).addCase(sn.rejected,(t,n)=>{const{kitchenId:i}=n.meta.arg;t.reviewsLoading[i]=!1,t.reviewsError[i]=n.error.message}).addCase(Om.fulfilled,(t,n)=>{const{kitchenId:i,review:a}=n.payload;t.kitchenReviews[i]||(t.kitchenReviews[i]=[]);const o=Ue(a);if(t.kitchenReviews[i].unshift(o),t.kitchenStats[i]){const s=t.kitchenStats[i],l=s.totalReviews||0,c=(s.averageRating||0)*l,d=l+1,p=c+a.rating;t.kitchenStats[i]={...s,totalReviews:d,averageRating:p/d}}}).addCase(Pm.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a,updates:o}=n.payload;if(t.kitchenReviews[i]){const s=t.kitchenReviews[i].findIndex(l=>l.id===a);if(s!==-1){const l=t.kitchenReviews[i][s].rating;if(t.kitchenReviews[i][s]={...t.kitchenReviews[i][s],...o,updatedAt:new Date().toISOString()},o.rating&&o.rating!==l&&t.kitchenStats[i]){const c=t.kitchenStats[i],d=c.totalReviews||0,u=(c.averageRating||0)*d-l+o.rating;t.kitchenStats[i]={...c,averageRating:u/d}}}}}).addCase(Nm.fulfilled,(t,n)=>{const{kitchenId:i,reviewId:a}=n.payload;if(t.kitchenReviews[i]){const o=t.kitchenReviews[i].findIndex(s=>s.id===a);if(o!==-1){const s=t.kitchenReviews[i][o].rating;if(t.kitchenReviews[i].splice(o,1),t.kitchenStats[i]){const l=t.kitchenStats[i],c=l.totalReviews||0;if(c>1){const d=(l.averageRating||0)*c,p=c-1,u=d-s;t.kitchenStats[i]={...l,totalReviews:p,averageRating:u/p}}else t.kitchenStats[i]={...l,totalReviews:0,averageRating:0}}}}})}}),{clearKitchenData:$h,clearAllKitchenData:Mh,clearKitchenErrors:Uh}=Zo.actions,Fm=Zo.reducer,ln=ye("reviews/fetchFoodReviews",async({foodId:e,kitchenId:t,limit:n=10})=>{try{console.log("Fetching food reviews:",{foodId:e,kitchenId:t,limit:n}),await new Promise(a=>setTimeout(a,300));const i=[{id:`review-1-${e}`,userId:"user-001",userName:"Alice Chen",rating:5,comment:"Absolutely delicious! Perfect taste and portion size.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-2-${e}`,userId:"user-002",userName:"Bob Wilson",rating:4,comment:"Great food, fast delivery. Will order again!",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:e,kitchenId:t,verified:!0},{id:`review-3-${e}`,userId:"user-003",userName:"Carol Davis",rating:5,comment:"Outstanding quality! Fresh ingredients and amazing flavors.",timestamp:new Date(Date.now()-2592e5).toISOString(),foodId:e,kitchenId:t,verified:!0}].slice(0,n);return{foodId:e,kitchenId:t,reviews:i}}catch(i){throw console.error("Error fetching food reviews:",i),i}}),cn=ye("reviews/addFoodReview",async({foodId:e,kitchenId:t,reviewData:n},{getState:i})=>{var c,d;const{auth:a}=i(),o=(c=a.user)==null?void 0:c.id,s=((d=a.user)==null?void 0:d.name)||"Anonymous";if(!o)throw new Error("User not authenticated");console.log("Adding food review:",{foodId:e,kitchenId:t,reviewData:n,userId:o,userName:s}),await new Promise(p=>setTimeout(p,500));const l={id:`review-${Date.now()}`,userId:o,userName:s,rating:n.rating,comment:n.comment,timestamp:new Date().toISOString(),foodId:e,kitchenId:t,verified:!0};return{foodId:e,kitchenId:t,review:l}}),$m=ye("reviews/updateFoodReview",async({foodId:e,kitchenId:t,reviewId:n,updates:i},{getState:a})=>{var l;const{auth:o}=a(),s=(l=o.user)==null?void 0:l.id;if(!s)throw new Error("User not authenticated");return console.log("Updating food review:",{foodId:e,kitchenId:t,reviewId:n,updates:i,userId:s}),await new Promise(c=>setTimeout(c,300)),{foodId:e,kitchenId:t,reviewId:n,updates:i}}),Mm=ye("reviews/deleteFoodReview",async({foodId:e,kitchenId:t,reviewId:n},{getState:i})=>{var s;const{auth:a}=i(),o=(s=a.user)==null?void 0:s.id;if(!o)throw new Error("User not authenticated");return console.log("Deleting food review:",{foodId:e,kitchenId:t,reviewId:n,userId:o}),await new Promise(l=>setTimeout(l,300)),{foodId:e,kitchenId:t,reviewId:n}}),si=ye("reviews/fetchUserReviews",async({limit:e=20},{getState:t})=>{var o;const{auth:n}=t(),i=(o=n.user)==null?void 0:o.id;if(!i)throw new Error("User not authenticated");return console.log("Fetching user reviews:",{userId:i,limit:e}),await new Promise(s=>setTimeout(s,300)),[{id:"user-review-1",userId:i,userName:n.user.name,rating:5,comment:"Loved this dish! Perfect for dinner.",timestamp:new Date(Date.now()-864e5).toISOString(),foodId:"food-001",foodName:"Kung Pao Chicken",kitchenId:"kitchen-001",kitchenName:"Mary's Kitchen",verified:!0},{id:"user-review-2",userId:i,userName:n.user.name,rating:4,comment:"Good value for money. Quick delivery.",timestamp:new Date(Date.now()-1728e5).toISOString(),foodId:"food-002",foodName:"Beef Noodle Soup",kitchenId:"kitchen-002",kitchenName:"Tom's Noodles",verified:!0}]}),Jo=Wt({name:"reviews",initialState:{foodReviews:{},userReviews:[],foodReviewsLoading:{},userReviewsLoading:!1,foodReviewsError:{},userReviewsError:null,foodReviewsLastUpdated:{},userReviewsLastUpdated:null,submissionLoading:!1,submissionError:null},reducers:{clearFoodReviews:(e,t)=>{const n=t.payload;delete e.foodReviews[n],delete e.foodReviewsLoading[n],delete e.foodReviewsError[n],delete e.foodReviewsLastUpdated[n]},clearAllReviews:e=>{e.foodReviews={},e.userReviews=[],e.foodReviewsLoading={},e.userReviewsLoading=!1,e.foodReviewsError={},e.userReviewsError=null,e.foodReviewsLastUpdated={},e.userReviewsLastUpdated=null},clearReviewErrors:(e,t)=>{if(t.payload){const n=t.payload;delete e.foodReviewsError[n]}else e.foodReviewsError={},e.userReviewsError=null,e.submissionError=null},clearSubmissionError:e=>{e.submissionError=null}},extraReducers:e=>{e.addCase(ln.pending,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!0,delete t.foodReviewsError[i]}).addCase(ln.fulfilled,(t,n)=>{const{foodId:i,reviews:a}=n.payload;t.foodReviewsLoading[i]=!1,t.foodReviews[i]=a,t.foodReviewsLastUpdated[i]=new Date().toISOString()}).addCase(ln.rejected,(t,n)=>{const{foodId:i}=n.meta.arg;t.foodReviewsLoading[i]=!1,t.foodReviewsError[i]=n.error.message}).addCase(cn.pending,t=>{t.submissionLoading=!0,t.submissionError=null}).addCase(cn.fulfilled,(t,n)=>{t.submissionLoading=!1;const{foodId:i,review:a}=n.payload;t.foodReviews[i]||(t.foodReviews[i]=[]),t.foodReviews[i].unshift(a),t.userReviews.unshift({...a,foodName:"Unknown Food",kitchenName:"Unknown Kitchen"})}).addCase(cn.rejected,(t,n)=>{t.submissionLoading=!1,t.submissionError=n.error.message}).addCase($m.fulfilled,(t,n)=>{const{foodId:i,reviewId:a,updates:o}=n.payload;if(t.foodReviews[i]){const l=t.foodReviews[i].findIndex(c=>c.id===a);l!==-1&&(t.foodReviews[i][l]={...t.foodReviews[i][l],...o,updatedAt:new Date().toISOString()})}const s=t.userReviews.findIndex(l=>l.id===a);s!==-1&&(t.userReviews[s]={...t.userReviews[s],...o,updatedAt:new Date().toISOString()})}).addCase(Mm.fulfilled,(t,n)=>{const{foodId:i,reviewId:a}=n.payload;t.foodReviews[i]&&(t.foodReviews[i]=t.foodReviews[i].filter(o=>o.id!==a)),t.userReviews=t.userReviews.filter(o=>o.id!==a)}).addCase(si.pending,t=>{t.userReviewsLoading=!0,t.userReviewsError=null}).addCase(si.fulfilled,(t,n)=>{t.userReviewsLoading=!1,t.userReviews=n.payload,t.userReviewsLastUpdated=new Date().toISOString()}).addCase(si.rejected,(t,n)=>{t.userReviewsLoading=!1,t.userReviewsError=n.error.message})}}),{clearFoodReviews:Bh,clearAllReviews:zh,clearReviewErrors:qh,clearSubmissionError:Wh}=Jo.actions,Um=Jo.reducer,Bm={key:"root",storage:In,whitelist:["auth","cart"],blacklist:["food","kitchen","reviews"]},zm={key:"auth",storage:In,whitelist:["user","isAuthenticated","isDevelopmentMode"],blacklist:["loading","error","wechatAuthUrl"]},qm={key:"cart",storage:In,whitelist:["items","totalItems","totalAmount"],blacklist:["loading","error"]},Wm=Mr({auth:bi(zm,Pd),food:Am,cart:bi(qm,Tm),kitchen:Fm,reviews:Um}),Gm=bi(Bm,Wm),Xo=$c({reducer:Gm,middleware:e=>e({serializableCheck:{ignoredActions:["persist/PERSIST","persist/REHYDRATE"]}})}),es=jd(Xo),Km="modulepreload",Ym=function(e){return"/"+e},Ha={},Hm=function(t,n,i){let a=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const s=document.querySelector("meta[property=csp-nonce]"),l=(s==null?void 0:s.nonce)||(s==null?void 0:s.getAttribute("nonce"));a=Promise.allSettled(n.map(c=>{if(c=Ym(c),c in Ha)return;Ha[c]=!0;const d=c.endsWith(".css"),p=d?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${c}"]${p}`))return;const u=document.createElement("link");if(u.rel=d?"stylesheet":Km,d||(u.as="script"),u.crossOrigin="",u.href=c,l&&u.setAttribute("nonce",l),document.head.appendChild(u),d)return new Promise((h,m)=>{u.addEventListener("load",h),u.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${c}`)))})}))}function o(s){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s}return a.then(s=>{for(const l of s||[])l.status==="rejected"&&o(l.reason);return t().catch(o)})},ts=ye("app/performCompleteLogout",async(e,{dispatch:t})=>{try{return console.log("ðª Starting complete logout process..."),t(Od()),t(ra()),await es.purge(),localStorage.removeItem("persist:root"),localStorage.removeItem("persist:auth"),localStorage.removeItem("persist:cart"),sessionStorage.clear(),console.log("â Complete logout successful"),{success:!0}}catch(n){throw console.error("â Logout error:",n),n}}),Pn=f.createContext(null),Pe=nt?kr(nt):null;function Qm({children:e}){const[t,n]=f.useState(null),[i,a]=f.useState(!0),o=gt();f.useEffect(()=>{if(je||!Pe){const m=localStorage.getItem("test_user_session");if(m)try{const C=JSON.parse(m);n(C),o(Qt(C)),console.log("ð§ª Restored test user session:",C)}catch(C){console.warn("Failed to restore test session:",C),localStorage.removeItem("test_user_session")}const g=localStorage.getItem("wechat_user");if(g)try{const C=JSON.parse(g);n(C),o(Qt(C)),console.log("ð Restored WeChat user session:",C)}catch(C){console.warn("Failed to restore WeChat session:",C),localStorage.removeItem("wechat_user")}a(!1);return}const h=qs(Pe,m=>{n(m||null),a(!1)});return()=>h()},[Pe,o]);const s=f.useCallback(async()=>{if(je||!Pe){console.info("Auth disabled: anonymous sign-in skipped");return}await Ws(Pe)},[Pe]),l=f.useCallback(()=>{const h=_e.APP_ID,m=encodeURIComponent(vn()),g=_e.SCOPE,C="we_"+Math.random().toString(36).slice(2),j=`${_e.WEB_AUTHORIZE_URL}?appid=${h}&redirect_uri=${m}&response_type=code&scope=${g}&state=${C}#wechat_redirect`;console.log("ð [AuthContext] WeChat OAuth URL:",j),console.log("ð [AuthContext] Using redirect URI:",vn()),window.location.href=j},[]),c=f.useCallback(async h=>{try{console.log("ð Exchanging WeChat code for user info...");const{WECHAT_API:m}=await Hm(async()=>{const{WECHAT_API:P}=await Promise.resolve().then(()=>Td);return{WECHAT_API:P}},void 0),g=await m.getAccessToken(h);if(g.errcode)throw new Error(`WeChat API Error: ${g.errmsg}`);console.log("â Got access token:",g);const C=await m.getUserInfo(g.access_token,g.openid);if(C.errcode)throw new Error(`WeChat User Info Error: ${C.errmsg}`);console.log("â Got user info:",C);const j={id:`wechat_${C.openid}`,uid:C.openid,openid:C.openid,name:C.nickname,displayName:C.nickname,avatar:C.headimgurl,photoURL:C.headimgurl,country:C.country,province:C.province,city:C.city,sex:C.sex,language:C.language,isAuthenticated:!0,authMethod:"wechat",wechatOpenId:C.openid,accessToken:g.access_token,createdAt:new Date().toISOString()};return localStorage.setItem("wechat_user",JSON.stringify(j)),n(j),o(Qt(j)),console.log("â WeChat authentication successful:",j),j}catch(m){throw console.error("â WeChat authentication failed:",m),m}},[o]),d=f.useCallback(async()=>{console.log("ð§ª Using test user bypass");const h={id:`test_user_${Date.now()}`,uid:`test_user_${Date.now()}`,openid:`test_openid_${Date.now()}`,name:"Test User",displayName:"Test User",avatar:null,photoURL:null,email:null,country:"Test Country",province:"Test Province",city:"Test City",sex:0,language:"en",isAuthenticated:!0,authMethod:"test",wechatOpenId:`test_openid_${Date.now()}`,accessToken:"test_access_token",providerId:"test",isAnonymous:!1,createdAt:new Date().toISOString()};return n(h),o(Qt(h)),localStorage.setItem("test_user_session",JSON.stringify(h)),console.log("â Test user signed in:",h),h},[o]),p=f.useCallback(async()=>{try{!je&&Pe&&await pa(Pe),localStorage.removeItem("test_user_session"),localStorage.removeItem("wechat_user"),n(null),await o(ts()).unwrap(),console.log("â Complete logout successful")}catch(h){console.error("â Logout error:",h),!je&&Pe&&await pa(Pe),localStorage.removeItem("test_user_session"),localStorage.removeItem("wechat_user"),n(null)}},[Pe,o]),u={user:t,initializing:i,authDisabled:je,signInAnonymously:s,signInWithWeChatPopup:l,signInWithTestUser:d,handleWeChatCallback:c,signOut:p};return r.jsx(Pn.Provider,{value:u,children:e})}function oa(){const e=f.useContext(Pn);if(!e)throw new Error("useAuth must be used within AuthProvider");return e}function Vm(){const{user:e,signOut:t,authDisabled:n}=oa();return r.jsxs("div",{className:"container py-3",children:[r.jsxs("h1",{className:"h4 mb-3",children:["Welcome ",(e==null?void 0:e.displayName)||"User"]}),r.jsx("p",{className:"text-secondary small mb-4",children:"This is a mobile-first boilerplate."}),n&&r.jsx("div",{className:"alert alert-warning p-2 small",role:"alert",children:"Firebase auth disabled (placeholder config). Add real env values to enable."}),r.jsx("button",{className:"btn btn-outline-danger btn-sm",onClick:t,children:"Sign out"})]})}const Ai="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='512'%20height='512'%20viewBox='0%200%2024%2024'%20fill='none'%20stroke='currentColor'%20stroke-width='1.2'%20stroke-linecap='round'%20stroke-linejoin='round'%3e%3ccircle%20cx='9'%20cy='10'%20r='1'/%3e%3ccircle%20cx='15'%20cy='10'%20r='1'/%3e%3cpath%20d='M5%2015c-1.143-1.012-2-2.547-2-4.25C3%207.798%205.91%205%209.5%205s6.5%202.798%206.5%205.75S13.09%2016.5%209.5%2016.5c-.517%200-1.02-.057-1.5-.165L5%2018l.8-2.4'/%3e%3cpath%20d='M16.5%208.5c2.485%200%204.5%201.79%204.5%204s-2.015%204-4.5%204c-.275%200-.544-.02-.805-.06L14%2018l.6-1.8'/%3e%3c/svg%3e";function Zm(){const{signInWithWeChatPopup:e,signInAnonymously:t}=oa();return r.jsxs("div",{className:"container py-5",children:[r.jsx("h1",{className:"h5 mb-4 text-center",children:"Sign In"}),r.jsxs("div",{className:"d-grid gap-3",children:[r.jsxs("button",{className:"btn btn-success d-flex align-items-center justify-content-center gap-2",onClick:e,children:[r.jsx("img",{src:Ai,alt:"WeChat",style:{width:20,height:20}}),r.jsx("span",{children:"Continue with WeChat"})]}),r.jsx("button",{className:"btn btn-outline-secondary",onClick:t,children:"Continue as Guest"})]})]})}const ae={success:(e,t={})=>xt.success(e,{icon:"â",duration:3e3,style:{background:"#F0FDF4",color:"#15803D",border:"1px solid #22C55E",borderRadius:"12px",padding:"16px"},...t}),error:(e,t={})=>xt.error(e,{icon:"â",duration:4e3,style:{background:"#FEF2F2",color:"#DC2626",border:"1px solid #EF4444",borderRadius:"12px",padding:"16px"},...t}),info:(e,t={})=>xt(e,{icon:"â¹ï¸",duration:3500,style:{background:"#EFF6FF",color:"#1D4ED8",border:"1px solid #3B82F6",borderRadius:"12px",padding:"16px"},...t}),warning:(e,t={})=>xt(e,{icon:"â ï¸",duration:4e3,style:{background:"#FEF3C7",color:"#92400E",border:"1px solid #F59E0B",borderRadius:"12px",padding:"16px"},...t}),cart:(e,t={})=>xt.success(e,{icon:"ð",duration:3e3,style:{background:"#F0F9FF",color:"#0C4A6E",border:"1px solid #0EA5E9",borderRadius:"12px",padding:"16px"},...t}),loading:(e,t={})=>xt.loading(e,{style:{background:"#F9FAFB",color:"#374151",border:"1px solid #D1D5DB",borderRadius:"12px",padding:"16px"},...t})},Jm=()=>{const[e]=fr(),t=jt(),{handleWeChatCallback:n}=f.useContext(Pn),[i,a]=f.useState("processing");return f.useEffect(()=>{const o=async()=>{try{const s=e.get("code"),l=e.get("state"),c=e.get("error");if(console.log("WeChat callback received:",{code:s,state:l,error:c}),c)throw new Error(`WeChat OAuth error: ${c}`);if(!s)throw new Error("Authorization code not received from WeChat");if(s==="dev_mock_code"){console.log("ð§ª Processing development mode authentication");const u=localStorage.getItem("wechat_auth_user");if(u){const h=JSON.parse(u);console.log("â Dev authentication successful:",h),dispatch({type:"auth/authenticateWithWeChat/fulfilled",payload:h}),a("success"),ae.success(`Welcome ${h.name}! (Dev Mode)`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),ae.info("You can now add items to your cart"),setTimeout(()=>t("/foods",{replace:!0}),1500)):setTimeout(()=>t("/foods",{replace:!0}),1500);return}}a("processing");const d=await o(s);console.log("â WeChat authentication successful:",d),a("success"),ae.success(`Welcome ${d.name||"User"}!`),sessionStorage.getItem("wechat_pending_cart_action")==="true"?(sessionStorage.removeItem("wechat_pending_cart_action"),ae.info("You can now add items to your cart!"),setTimeout(()=>{window.history.back()||t("/foods")},1500)):setTimeout(()=>{t("/")},1500)}catch(s){console.error("â WeChat authentication failed:",s),a("error"),ae.error(s.message||"Authentication failed"),setTimeout(()=>{t("/")},3e3)}};o()},[e,n,t]),r.jsx("div",{className:"wechat-callback-page",children:r.jsx("div",{className:"container py-5",children:r.jsxs("div",{className:"text-center",children:[i==="processing"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"spinner-border text-success mb-3",role:"status",children:r.jsx("span",{className:"visually-hidden",children:"Loading..."})}),r.jsx("h2",{children:"Processing WeChat Authentication..."}),r.jsx("p",{className:"text-muted",children:"Please wait while we sign you in."})]}),i==="success"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-success mb-3",children:r.jsx("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:r.jsx("path",{d:"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zm-3.97-3.03a.75.75 0 0 0-1.08.022L7.477 9.417 5.384 7.323a.75.75 0 0 0-1.06 1.061L6.97 11.03a.75.75 0 0 0 1.079-.02l3.992-4.99a.75.75 0 0 0-.01-1.05z"})})}),r.jsx("h2",{children:"Authentication Successful!"}),r.jsx("p",{className:"text-muted",children:"Redirecting you now..."})]}),i==="error"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"text-danger mb-3",children:r.jsxs("svg",{width:"48",height:"48",fill:"currentColor",viewBox:"0 0 16 16",children:[r.jsx("path",{d:"M8 15A7 7 0 1 1 8 1a7 7 0 0 1 0 14zm0 1A8 8 0 1 0 8 0a8 8 0 0 0 0 16z"}),r.jsx("path",{d:"M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0zM7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0L7.1 4.995z"})]})}),r.jsx("h2",{children:"Authentication Failed"}),r.jsx("p",{className:"text-muted",children:"Something went wrong. Redirecting to home..."})]})]})})})};class Nn{constructor(){this.domain="homefreshfoods.ai",this.appId="wx4a71fe09bb125182",this.redirectUri=`https://${this.domain}/wechat/callback`,this.results={timestamp:new Date().toISOString(),domain:this.domain,appId:this.appId,tests:{}}}async runAllTests(){console.log("ð Starting WeChat diagnostics...");try{this.results.tests.domainAccess=await this.testDomainAccess(),this.results.tests.verificationFile=await this.testVerificationFile(),this.results.tests.sslCertificate=await this.testSSLCertificate(),this.results.tests.redirectAccess=await this.testRedirectAccess(),this.results.tests.authUrl=this.generateAuthUrl();const t=Object.values(this.results.tests).filter(i=>i.success).length,n=Object.keys(this.results.tests).length-1;return this.results.overall={success:t===n,score:`${t}/${n}`,message:t===n?"All tests passed!":"Some tests failed - check WeChat Console configuration"},console.log("â Diagnostics complete:",this.results),this.results}catch(t){return console.error("â Diagnostics failed:",t),this.results.error=t.message,this.results}}async testDomainAccess(){const t={name:"Domain Access",success:!1,message:"",url:`https://${this.domain}/`};try{const n=new AbortController,i=setTimeout(()=>n.abort(),1e4),a=await fetch(t.url,{method:"HEAD",signal:n.signal});clearTimeout(i),a.ok?(t.success=!0,t.message=`Domain ${this.domain} is accessible`,t.status=a.status):(t.message=`HTTP ${a.status}: ${a.statusText}`,t.status=a.status)}catch(n){t.message=`Connection failed: ${n.message}`,t.error=n.name}return t}async testVerificationFile(){const t={name:"Verification File",success:!1,message:"",checkedFiles:[]},n=["MP_verify_placeholder.txt",`MP_verify_${this.appId}.txt`,"MP_verify_wx4a71fe09bb125182.txt"];for(const i of n){const a=`https://${this.domain}/${i}`;t.checkedFiles.push(i);try{const o=await fetch(a);if(o.ok){const s=await o.text();t.success=!0,t.message=`Found verification file: ${i}`,t.filename=i,t.content=s.substring(0,100),t.url=a;break}}catch(o){}}return t.success||(t.message="No verification file found. Upload MP_verify_*.txt from WeChat Console",t.recommendation="Download verification file from WeChat Developer Console and upload to website root"),t}async testSSLCertificate(){const t={name:"SSL Certificate",success:!1,message:"",url:`https://${this.domain}/`};try{const n=await fetch(t.url,{method:"HEAD"});n.ok?(t.success=!0,t.message="Valid HTTPS connection established",t.protocol="HTTPS"):(t.message=`HTTPS connection established but got HTTP ${n.status}`,t.protocol="HTTPS",t.status=n.status)}catch(n){t.message=`SSL/HTTPS error: ${n.message}`,t.error=n.name}return t}async testRedirectAccess(){const t={name:"Redirect URI Access",success:!1,message:"",url:this.redirectUri};try{const n=await fetch(this.redirectUri,{method:"HEAD"});n.ok||n.status===404||n.status===405?(t.success=!0,t.message=`Redirect URI is accessible (HTTP ${n.status})`,t.status=n.status):(t.message=`Redirect URI returned HTTP ${n.status}`,t.status=n.status)}catch(n){t.message=`Redirect URI test failed: ${n.message}`,t.error=n.name}return t}generateAuthUrl(t=null){const n=t||`test_${Math.random().toString(36).substring(7)}`,a=`https://open.weixin.qq.com/connect/oauth2/authorize?${new URLSearchParams({appid:this.appId,redirect_uri:this.redirectUri,response_type:"code",scope:"snsapi_base",state:n}).toString()}#wechat_redirect`;return{name:"Auth URL Generation",success:!0,message:"WeChat OAuth URL generated successfully",url:a,state:n,qrCodeUrl:`https://api.qrserver.com/v1/create-qr-code/?size=300x300&data=${encodeURIComponent(a)}`}}getWeChatConsoleChecklist(){return{title:"WeChat Developer Console Checklist",url:"https://developers.weixin.qq.com/",steps:[{step:1,action:"Login to WeChat Developer Console",url:"https://developers.weixin.qq.com/",status:"manual"},{step:2,action:"Navigate to Development Configuration (å¼åéç½®) tab",description:"Click on the Development Configuration tab in your app dashboard",status:"manual"},{step:3,action:"Find Web Authorization Domain (ç½é¡µææåå) section",description:"Look for the Web Authorization Domain configuration area",status:"critical"},{step:4,action:`Verify ${this.domain} is listed and verified`,description:`Ensure ${this.domain} appears in the authorized domains list with verified status`,status:"critical"},{step:5,action:"Check verification file accessibility",description:`Ensure MP_verify_*.txt file is uploaded and accessible at https://${this.domain}/MP_verify_*.txt`,status:"critical"},{step:6,action:'Verify domain status is "Verified" or "Active"',description:"Domain status should show as verified, not pending",status:"critical"}],commonIssues:[`Domain ${this.domain} not added to Web Authorization Domain list`,"Verification file missing or inaccessible","Domain added but not verified (still pending)","Wrong verification file uploaded","HTTPS not properly configured"]}}generateReport(){var n,i,a;const t={...this.results,checklist:this.getWeChatConsoleChecklist(),recommendations:[],nextSteps:[]};return(n=this.results.tests.domainAccess)!=null&&n.success||(t.recommendations.push("Fix domain accessibility issues"),t.nextSteps.push("Check DNS configuration and hosting setup")),(i=this.results.tests.verificationFile)!=null&&i.success||(t.recommendations.push("Upload WeChat verification file"),t.nextSteps.push("Download MP_verify_*.txt from WeChat Console and upload to website root")),(a=this.results.tests.sslCertificate)!=null&&a.success||(t.recommendations.push("Fix SSL certificate issues"),t.nextSteps.push("Ensure HTTPS is properly configured for the domain")),t.recommendations.length===0&&(t.recommendations.push("All technical tests passed - check WeChat Console configuration"),t.nextSteps.push("Verify domain is added to Web Authorization Domain list in WeChat Console")),t}}const ns=async()=>await new Nn().runAllTests(),is=async()=>{const e=new Nn;await e.runAllTests();const t=e.generateReport();return console.group("ð WeChat Domain Verification Report"),console.log("Overall Status:",t.overall),console.log("Test Results:",t.tests),console.log("Recommendations:",t.recommendations),console.log("Next Steps:",t.nextSteps),console.groupEnd(),t};typeof window!="undefined"&&(window.WeChatDiagnostics=Nn,window.runWeChatDiagnostics=ns,window.checkWeChatDomain=is);const Xm=({isVisible:e=!1,onClose:t=()=>{},autoRun:n=!1})=>{var h,m,g,C;const[i,a]=f.useState(null),[o,s]=f.useState(!1),[l,c]=f.useState(null);f.useEffect(()=>{n&&e&&d()},[n,e]);const d=async()=>{s(!0);try{const j=new Nn,P=await j.runAllTests(),q=j.generateReport();a(P),c(q)}catch(j){console.error("Diagnostic error:",j),a({error:j.message})}finally{s(!1)}},p=j=>j?"â":"â",u=j=>j?"#4CAF50":"#F44336";return e?r.jsx("div",{style:ee.overlay,children:r.jsxs("div",{style:ee.panel,children:[r.jsxs("div",{style:ee.header,children:[r.jsx("h2",{children:"WeChat Diagnostics"}),r.jsx("button",{onClick:t,style:ee.closeButton,children:"Ã"})]}),r.jsx("div",{style:ee.actions,children:r.jsx("button",{onClick:d,disabled:o,style:ee.runButton,children:o?"Running Tests...":"Run Diagnostics"})}),o&&r.jsxs("div",{style:ee.loading,children:[r.jsx("div",{style:ee.spinner}),r.jsx("p",{children:"Running WeChat diagnostic tests..."})]}),i&&!o&&r.jsx("div",{style:ee.results,children:i.error?r.jsxs("div",{style:ee.error,children:[r.jsx("h3",{children:"Error"}),r.jsx("p",{children:i.error})]}):r.jsxs(r.Fragment,{children:[r.jsxs("div",{style:ee.overall,children:[r.jsxs("h3",{children:["Overall Status: ",p((h=i.overall)==null?void 0:h.success)]}),r.jsx("p",{style:{color:u((m=i.overall)==null?void 0:m.success)},children:(g=i.overall)==null?void 0:g.message}),r.jsxs("p",{children:["Score: ",(C=i.overall)==null?void 0:C.score]})]}),r.jsxs("div",{style:ee.tests,children:[r.jsx("h3",{children:"Test Results"}),Object.entries(i.tests).map(([j,P])=>r.jsxs("div",{style:ee.testItem,children:[r.jsxs("div",{style:ee.testHeader,children:[r.jsx("span",{style:ee.testIcon,children:p(P.success)}),r.jsx("strong",{children:P.name})]}),r.jsx("p",{style:ee.testMessage,children:P.message}),P.url&&r.jsxs("p",{style:ee.testUrl,children:["URL:"," ",r.jsx("a",{href:P.url,target:"_blank",rel:"noopener noreferrer",children:P.url})]}),P.qrCodeUrl&&r.jsxs("div",{style:ee.qrCode,children:[r.jsx("p",{children:"QR Code for mobile testing:"}),r.jsx("img",{src:P.qrCodeUrl,alt:"WeChat Auth QR",style:ee.qrImage})]})]},j))]}),l&&r.jsxs("div",{style:ee.recommendations,children:[r.jsx("h3",{children:"Recommendations"}),l.recommendations.map((j,P)=>r.jsxs("div",{style:ee.recommendation,children:[r.jsx("span",{style:ee.bullet,children:"â¢"})," ",j]},P)),r.jsx("h3",{children:"Next Steps"}),l.nextSteps.map((j,P)=>r.jsxs("div",{style:ee.nextStep,children:[r.jsxs("span",{style:ee.stepNumber,children:[P+1,"."]})," ",j]},P))]}),r.jsxs("div",{style:ee.checklist,children:[r.jsx("h3",{children:"WeChat Console Checklist"}),r.jsx("p",{children:r.jsx("a",{href:"https://developers.weixin.qq.com/",target:"_blank",rel:"noopener noreferrer",style:ee.link,children:"Open WeChat Developer Console"})}),l==null?void 0:l.checklist.steps.map(j=>r.jsxs("div",{style:ee.checklistItem,children:[r.jsxs("span",{style:ee.stepNumber,children:[j.step,"."]}),r.jsx("span",{children:j.action}),j.status==="critical"&&r.jsx("span",{style:ee.critical,children:" (Critical)"})]},j.step))]})]})})]})}):null},ee={overlay:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0, 0, 0, 0.8)",zIndex:1e4,overflow:"auto"},panel:{backgroundColor:"white",margin:"20px auto",padding:"20px",maxWidth:"800px",borderRadius:"8px",boxShadow:"0 4px 20px rgba(0, 0, 0, 0.3)"},header:{display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid #eee",paddingBottom:"10px",marginBottom:"20px"},closeButton:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"0",width:"30px",height:"30px"},actions:{marginBottom:"20px"},runButton:{backgroundColor:"#4CAF50",color:"white",border:"none",padding:"10px 20px",borderRadius:"4px",cursor:"pointer",fontSize:"16px"},loading:{textAlign:"center",padding:"20px"},spinner:{width:"40px",height:"40px",border:"4px solid #f3f3f3",borderTop:"4px solid #3498db",borderRadius:"50%",animation:"spin 1s linear infinite",margin:"0 auto 10px"},results:{marginTop:"20px"},overall:{backgroundColor:"#f8f9fa",padding:"15px",borderRadius:"4px",marginBottom:"20px"},error:{backgroundColor:"#ffebee",color:"#c62828",padding:"15px",borderRadius:"4px"},tests:{marginBottom:"20px"},testItem:{border:"1px solid #ddd",padding:"10px",marginBottom:"10px",borderRadius:"4px"},testHeader:{display:"flex",alignItems:"center",marginBottom:"5px"},testIcon:{marginRight:"8px"},testMessage:{margin:"5px 0",fontSize:"14px"},testUrl:{margin:"5px 0",fontSize:"12px",color:"#666"},qrCode:{textAlign:"center",marginTop:"10px"},qrImage:{maxWidth:"200px",height:"auto"},recommendations:{backgroundColor:"#fff3cd",padding:"15px",borderRadius:"4px",marginBottom:"20px"},recommendation:{display:"flex",alignItems:"flex-start",marginBottom:"5px"},bullet:{marginRight:"8px",color:"#856404"},nextStep:{display:"flex",alignItems:"flex-start",marginBottom:"5px"},stepNumber:{marginRight:"8px",color:"#856404",fontWeight:"bold"},checklist:{backgroundColor:"#e1f5fe",padding:"15px",borderRadius:"4px"},checklistItem:{display:"flex",alignItems:"flex-start",marginBottom:"8px"},critical:{color:"#d32f2f",fontWeight:"bold"},link:{color:"#1976d2",textDecoration:"none"}},ef=()=>{const[e,t]=f.useState(!1),[n,i]=f.useState(null),a=async()=>{console.log("ð Running quick WeChat test...");const c=await ns();i(c),console.log("â Quick test completed:",c)},o=async()=>{console.log("ð Generating full WeChat report...");const c=await is();i(c),console.log("ð Full report completed:",c)},s=()=>{window.open("https://developers.weixin.qq.com/","_blank")},l=()=>{window.open("/wechat-diagnosis.html","_blank")};return r.jsxs("div",{style:ie.container,children:[r.jsxs("div",{style:ie.header,children:[r.jsx("h1",{children:"WeChat Authentication Debug"}),r.jsx("p",{children:"Diagnostic tools for troubleshooting WeChat domain verification issues"})]}),r.jsxs("div",{style:ie.section,children:[r.jsx("h2",{children:"Quick Actions"}),r.jsxs("div",{style:ie.buttonGrid,children:[r.jsx("button",{onClick:a,style:ie.button,children:"ð Run Quick Test"}),r.jsx("button",{onClick:o,style:ie.button,children:"ð Generate Full Report"}),r.jsx("button",{onClick:()=>t(!0),style:ie.button,children:"ð ï¸ Open Diagnostic Panel"}),r.jsx("button",{onClick:l,style:ie.button,children:"ð Open Web Diagnostic Tool"})]})]}),r.jsxs("div",{style:ie.section,children:[r.jsx("h2",{children:"External Resources"}),r.jsxs("div",{style:ie.buttonGrid,children:[r.jsx("button",{onClick:s,style:ie.externalButton,children:"ðï¸ WeChat Developer Console"}),r.jsx("a",{href:"https://homefreshfoods.ai/MP_verify_placeholder.txt",target:"_blank",rel:"noopener noreferrer",style:ie.link,children:"ð Check Verification File"})]})]}),r.jsxs("div",{style:ie.section,children:[r.jsx("h2",{children:"Current Configuration"}),r.jsxs("div",{style:ie.config,children:[r.jsxs("div",{style:ie.configItem,children:[r.jsx("strong",{children:"Domain:"})," homefreshfoods.ai"]}),r.jsxs("div",{style:ie.configItem,children:[r.jsx("strong",{children:"App ID:"})," wx4a71fe09bb125182"]}),r.jsxs("div",{style:ie.configItem,children:[r.jsx("strong",{children:"Redirect URI:"})," ","https://homefreshfoods.ai/wechat/callback"]}),r.jsxs("div",{style:ie.configItem,children:[r.jsx("strong",{children:"Environment:"})," Production"]})]})]}),n&&r.jsxs("div",{style:ie.section,children:[r.jsx("h2",{children:"Latest Results"}),r.jsx("div",{style:ie.results,children:r.jsx("pre",{style:ie.pre,children:JSON.stringify(n,null,2)})})]}),r.jsxs("div",{style:ie.section,children:[r.jsx("h2",{children:"Common Issues & Solutions"}),r.jsxs("div",{style:ie.troubleshooting,children:[r.jsxs("div",{style:ie.issue,children:[r.jsx("h3",{children:"Error 10003: Redirect URI Domain Mismatch"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Verify domain is added to Web Authorization Domain list"}),r.jsx("li",{children:"Ensure verification file is uploaded and accessible"}),r.jsx("li",{children:'Check domain status is "Verified" not "Pending"'}),r.jsx("li",{children:"Confirm no typos in domain name"})]})]}),r.jsxs("div",{style:ie.issue,children:[r.jsx("h3",{children:"Verification File Not Found"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Download MP_verify_*.txt from WeChat Console"}),r.jsx("li",{children:"Upload to website root directory"}),r.jsx("li",{children:"Ensure file is accessible via HTTPS"}),r.jsx("li",{children:"Check file permissions and hosting configuration"})]})]}),r.jsxs("div",{style:ie.issue,children:[r.jsx("h3",{children:"Domain Not Verified"}),r.jsxs("ul",{children:[r.jsx("li",{children:"Upload correct verification file"}),r.jsx("li",{children:"Wait for WeChat verification process (can take minutes)"}),r.jsx("li",{children:"Try removing and re-adding domain"}),r.jsx("li",{children:"Ensure HTTPS is properly configured"})]})]})]})]}),r.jsx(Xm,{isVisible:e,onClose:()=>t(!1),autoRun:!0})]})},ie={container:{maxWidth:"800px",margin:"0 auto",padding:"20px",fontFamily:"Arial, sans-serif"},header:{textAlign:"center",marginBottom:"30px",paddingBottom:"20px",borderBottom:"2px solid #eee"},section:{marginBottom:"30px",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"8px"},buttonGrid:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(200px, 1fr))",gap:"10px",marginTop:"15px"},button:{padding:"12px 20px",backgroundColor:"#007bff",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",textAlign:"center"},externalButton:{padding:"12px 20px",backgroundColor:"#28a745",color:"white",border:"none",borderRadius:"6px",cursor:"pointer",fontSize:"16px",textAlign:"center"},link:{display:"inline-block",padding:"12px 20px",backgroundColor:"#6c757d",color:"white",textDecoration:"none",borderRadius:"6px",textAlign:"center"},config:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd"},configItem:{padding:"8px 0",borderBottom:"1px solid #eee"},results:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd",maxHeight:"400px",overflow:"auto"},pre:{margin:0,fontSize:"12px",lineHeight:"1.4"},troubleshooting:{backgroundColor:"white",padding:"15px",borderRadius:"6px",border:"1px solid #ddd"},issue:{marginBottom:"20px",paddingBottom:"15px",borderBottom:"1px solid #eee"}},as="data:image/svg+xml,%3c?xml%20version='1.0'%20encoding='UTF-8'?%3e%3csvg%20xmlns='http://www.w3.org/2000/svg'%20version='1.1'%20width='1024'%20height='1024'%20viewBox='0%200%20500%20500'%3e%3crect%20x='0'%20y='0'%20width='500'%20height='500'%20fill='%23ffffff'/%3e%3cg%20transform='scale(18.519)'%3e%3cg%20transform='translate(1,1)'%3e%3cg%3e%3cg%20transform='translate(3.5,3.5)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(21.5,3.5)'%3e%3cg%20transform='rotate(90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cg%3e%3cg%20transform='translate(3.5,21.5)'%3e%3cg%20transform='rotate(-90)'%3e%3cpath%20fill-rule='evenodd'%20d='M-3.5%20-3.5L3.5%20-3.5L3.5%203.5L-3.5%203.5ZM-2.5%20-2.5L-2.5%202.5L2.5%202.5L2.5%20-2.5Z'%20fill='%23000000'/%3e%3cpath%20fill-rule='evenodd'%20d='M-1.5%20-1.5L1.5%20-1.5L1.5%201.5L-1.5%201.5Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/g%3e%3cpath%20fill-rule='evenodd'%20d='M9%200L9%202L8%202L8%208L10%208L10%209L9%209L9%2011L8%2011L8%2013L7%2013L7%2012L5%2012L5%2013L4%2013L4%2012L2%2012L2%2013L3%2013L3%2014L4%2014L4%2015L5%2015L5%2016L6%2016L6%2017L7%2017L7%2016L8%2016L8%2018L9%2018L9%2012L10%2012L10%2013L12%2013L12%2017L10%2017L10%2018L12%2018L12%2019L11%2019L11%2020L12%2020L12%2022L13%2022L13%2023L11%2023L11%2024L12%2024L12%2025L13%2025L13%2023L14%2023L14%2024L15%2024L15%2021L16%2021L16%2022L17%2022L17%2024L22%2024L22%2025L25%2025L25%2024L24%2024L24%2023L25%2023L25%2021L23%2021L23%2022L22%2022L22%2023L21%2023L21%2021L22%2021L22%2019L25%2019L25%2015L23%2015L23%2014L22%2014L22%2015L23%2015L23%2016L24%2016L24%2018L22%2018L22%2019L21%2019L21%2017L22%2017L22%2016L15%2016L15%2013L16%2013L16%2014L17%2014L17%2015L19%2015L19%2014L20%2014L20%2015L21%2015L21%2013L22%2013L22%2012L18%2012L18%2011L19%2011L19%2010L20%2010L20%2011L21%2011L21%209L23%209L23%208L18%208L18%209L17%209L17%2010L16%2010L16%208L17%208L17%206L16%206L16%204L17%204L17%202L16%202L16%201L17%201L17%200L16%200L16%201L15%201L15%200L14%200L14%201L13%201L13%200L12%200L12%202L16%202L16%203L14%203L14%205L13%205L13%203L9%203L9%202L11%202L11%201L10%201L10%200ZM9%204L9%207L10%207L10%208L12%208L12%209L13%209L13%2011L12%2011L12%2010L11%2010L11%2011L12%2011L12%2012L13%2012L13%2014L14%2014L14%2013L15%2013L15%2012L16%2012L16%2013L17%2013L17%2014L19%2014L19%2013L17%2013L17%2012L16%2012L16%2011L15%2011L15%2012L13%2012L13%2011L14%2011L14%209L13%209L13%207L14%207L14%208L16%208L16%206L15%206L15%205L14%205L14%206L13%206L13%205L12%205L12%204L11%204L11%207L10%207L10%204ZM12%206L12%207L13%207L13%206ZM14%206L14%207L15%207L15%206ZM0%208L0%209L1%209L1%2010L0%2010L0%2017L1%2017L1%2010L2%2010L2%2011L5%2011L5%2010L3%2010L3%209L7%209L7%2010L6%2010L6%2011L7%2011L7%2010L8%2010L8%209L7%209L7%208L2%208L2%209L1%209L1%208ZM18%209L18%2010L19%2010L19%209ZM24%209L24%2010L25%2010L25%209ZM22%2010L22%2011L23%2011L23%2010ZM23%2012L23%2013L24%2013L24%2014L25%2014L25%2012ZM5%2013L5%2015L6%2015L6%2016L7%2016L7%2015L8%2015L8%2014L7%2014L7%2013ZM6%2014L6%2015L7%2015L7%2014ZM10%2014L10%2016L11%2016L11%2014ZM2%2015L2%2017L3%2017L3%2015ZM13%2015L13%2016L14%2016L14%2015ZM12%2017L12%2018L13%2018L13%2019L12%2019L12%2020L14%2020L14%2021L13%2021L13%2022L14%2022L14%2021L15%2021L15%2020L16%2020L16%2017ZM17%2017L17%2020L20%2020L20%2017ZM14%2018L14%2019L15%2019L15%2018ZM18%2018L18%2019L19%2019L19%2018ZM8%2019L8%2023L9%2023L9%2024L8%2024L8%2025L10%2025L10%2022L11%2022L11%2021L10%2021L10%2022L9%2022L9%2020L10%2020L10%2019ZM17%2021L17%2022L19%2022L19%2023L20%2023L20%2021ZM23%2022L23%2023L22%2023L22%2024L23%2024L23%2023L24%2023L24%2022Z'%20fill='%23000000'/%3e%3c/g%3e%3c/g%3e%3c/svg%3e";var rs={exports:{}};(function(e,t){(function(n,i){e.exports=i()})(Ds,function(){var n=1e3,i=6e4,a=36e5,o="millisecond",s="second",l="minute",c="hour",d="day",p="week",u="month",h="quarter",m="year",g="date",C="Invalid Date",j=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,P=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(x){var y=["th","st","nd","rd"],S=x%100;return"["+x+(y[(S-20)%10]||y[S]||y[0])+"]"}},_=function(x,y,S){var I=String(x);return!I||I.length>=y?x:""+Array(y+1-I.length).join(S)+x},w={s:_,z:function(x){var y=-x.utcOffset(),S=Math.abs(y),I=Math.floor(S/60),T=S%60;return(y<=0?"+":"-")+_(I,2,"0")+":"+_(T,2,"0")},m:function x(y,S){if(y.date()<S.date())return-x(S,y);var I=12*(S.year()-y.year())+(S.month()-y.month()),T=y.clone().add(I,u),N=S-T<0,F=y.clone().add(I+(N?-1:1),u);return+(-(I+(S-T)/(N?T-F:F-T))||0)},a:function(x){return x<0?Math.ceil(x)||0:Math.floor(x)},p:function(x){return{M:u,y:m,w:p,d,D:g,h:c,m:l,s,ms:o,Q:h}[x]||String(x||"").toLowerCase().replace(/s$/,"")},u:function(x){return x===void 0}},v="en",k={};k[v]=q;var M="$isDayjsObject",$=function(x){return x instanceof W||!(!x||!x[M])},b=function x(y,S,I){var T;if(!y)return v;if(typeof y=="string"){var N=y.toLowerCase();k[N]&&(T=N),S&&(k[N]=S,T=N);var F=y.split("-");if(!T&&F.length>1)return x(F[0])}else{var U=y.name;k[U]=y,T=U}return!I&&T&&(v=T),T||!I&&v},O=function(x,y){if($(x))return x.clone();var S=typeof y=="object"?y:{};return S.date=x,S.args=arguments,new W(S)},E=w;E.l=b,E.i=$,E.w=function(x,y){return O(x,{locale:y.$L,utc:y.$u,x:y.$x,$offset:y.$offset})};var W=function(){function x(S){this.$L=b(S.locale,null,!0),this.parse(S),this.$x=this.$x||S.x||{},this[M]=!0}var y=x.prototype;return y.parse=function(S){this.$d=function(I){var T=I.date,N=I.utc;if(T===null)return new Date(NaN);if(E.u(T))return new Date;if(T instanceof Date)return new Date(T);if(typeof T=="string"&&!/Z$/i.test(T)){var F=T.match(j);if(F){var U=F[2]-1||0,z=(F[7]||"0").substring(0,3);return N?new Date(Date.UTC(F[1],U,F[3]||1,F[4]||0,F[5]||0,F[6]||0,z)):new Date(F[1],U,F[3]||1,F[4]||0,F[5]||0,F[6]||0,z)}}return new Date(T)}(S),this.init()},y.init=function(){var S=this.$d;this.$y=S.getFullYear(),this.$M=S.getMonth(),this.$D=S.getDate(),this.$W=S.getDay(),this.$H=S.getHours(),this.$m=S.getMinutes(),this.$s=S.getSeconds(),this.$ms=S.getMilliseconds()},y.$utils=function(){return E},y.isValid=function(){return this.$d.toString()!==C},y.isSame=function(S,I){var T=O(S);return this.startOf(I)<=T&&T<=this.endOf(I)},y.isAfter=function(S,I){return O(S)<this.startOf(I)},y.isBefore=function(S,I){return this.endOf(I)<O(S)},y.$g=function(S,I,T){return E.u(S)?this[I]:this.set(T,S)},y.unix=function(){return Math.floor(this.valueOf()/1e3)},y.valueOf=function(){return this.$d.getTime()},y.startOf=function(S,I){var T=this,N=!!E.u(I)||I,F=E.p(S),U=function(G,V){var A=E.w(T.$u?Date.UTC(T.$y,V,G):new Date(T.$y,V,G),T);return N?A:A.endOf(d)},z=function(G,V){return E.w(T.toDate()[G].apply(T.toDate("s"),(N?[0,0,0,0]:[23,59,59,999]).slice(V)),T)},Q=this.$W,K=this.$M,Y=this.$D,te="set"+(this.$u?"UTC":"");switch(F){case m:return N?U(1,0):U(31,11);case u:return N?U(1,K):U(0,K+1);case p:var me=this.$locale().weekStart||0,De=(Q<me?Q+7:Q)-me;return U(N?Y-De:Y+(6-De),K);case d:case g:return z(te+"Hours",0);case c:return z(te+"Minutes",1);case l:return z(te+"Seconds",2);case s:return z(te+"Milliseconds",3);default:return this.clone()}},y.endOf=function(S){return this.startOf(S,!1)},y.$set=function(S,I){var T,N=E.p(S),F="set"+(this.$u?"UTC":""),U=(T={},T[d]=F+"Date",T[g]=F+"Date",T[u]=F+"Month",T[m]=F+"FullYear",T[c]=F+"Hours",T[l]=F+"Minutes",T[s]=F+"Seconds",T[o]=F+"Milliseconds",T)[N],z=N===d?this.$D+(I-this.$W):I;if(N===u||N===m){var Q=this.clone().set(g,1);Q.$d[U](z),Q.init(),this.$d=Q.set(g,Math.min(this.$D,Q.daysInMonth())).$d}else U&&this.$d[U](z);return this.init(),this},y.set=function(S,I){return this.clone().$set(S,I)},y.get=function(S){return this[E.p(S)]()},y.add=function(S,I){var T,N=this;S=Number(S);var F=E.p(I),U=function(K){var Y=O(N);return E.w(Y.date(Y.date()+Math.round(K*S)),N)};if(F===u)return this.set(u,this.$M+S);if(F===m)return this.set(m,this.$y+S);if(F===d)return U(1);if(F===p)return U(7);var z=(T={},T[l]=i,T[c]=a,T[s]=n,T)[F]||1,Q=this.$d.getTime()+S*z;return E.w(Q,this)},y.subtract=function(S,I){return this.add(-1*S,I)},y.format=function(S){var I=this,T=this.$locale();if(!this.isValid())return T.invalidDate||C;var N=S||"YYYY-MM-DDTHH:mm:ssZ",F=E.z(this),U=this.$H,z=this.$m,Q=this.$M,K=T.weekdays,Y=T.months,te=T.meridiem,me=function(V,A,L,D){return V&&(V[A]||V(I,N))||L[A].slice(0,D)},De=function(V){return E.s(U%12||12,V,"0")},G=te||function(V,A,L){var D=V<12?"AM":"PM";return L?D.toLowerCase():D};return N.replace(P,function(V,A){return A||function(L){switch(L){case"YY":return String(I.$y).slice(-2);case"YYYY":return E.s(I.$y,4,"0");case"M":return Q+1;case"MM":return E.s(Q+1,2,"0");case"MMM":return me(T.monthsShort,Q,Y,3);case"MMMM":return me(Y,Q);case"D":return I.$D;case"DD":return E.s(I.$D,2,"0");case"d":return String(I.$W);case"dd":return me(T.weekdaysMin,I.$W,K,2);case"ddd":return me(T.weekdaysShort,I.$W,K,3);case"dddd":return K[I.$W];case"H":return String(U);case"HH":return E.s(U,2,"0");case"h":return De(1);case"hh":return De(2);case"a":return G(U,z,!0);case"A":return G(U,z,!1);case"m":return String(z);case"mm":return E.s(z,2,"0");case"s":return String(I.$s);case"ss":return E.s(I.$s,2,"0");case"SSS":return E.s(I.$ms,3,"0");case"Z":return F}return null}(V)||F.replace(":","")})},y.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},y.diff=function(S,I,T){var N,F=this,U=E.p(I),z=O(S),Q=(z.utcOffset()-this.utcOffset())*i,K=this-z,Y=function(){return E.m(F,z)};switch(U){case m:N=Y()/12;break;case u:N=Y();break;case h:N=Y()/3;break;case p:N=(K-Q)/6048e5;break;case d:N=(K-Q)/864e5;break;case c:N=K/a;break;case l:N=K/i;break;case s:N=K/n;break;default:N=K}return T?N:E.a(N)},y.daysInMonth=function(){return this.endOf(u).$D},y.$locale=function(){return k[this.$L]},y.locale=function(S,I){if(!S)return this.$L;var T=this.clone(),N=b(S,I,!0);return N&&(T.$L=N),T},y.clone=function(){return E.w(this.$d,this)},y.toDate=function(){return new Date(this.valueOf())},y.toJSON=function(){return this.isValid()?this.toISOString():null},y.toISOString=function(){return this.$d.toISOString()},y.toString=function(){return this.$d.toUTCString()},x}(),R=W.prototype;return O.prototype=R,[["$ms",o],["$s",s],["$m",l],["$H",c],["$W",d],["$M",u],["$y",m],["$D",g]].forEach(function(x){R[x[1]]=function(y){return this.$g(y,x[0],x[1])}}),O.extend=function(x,y){return x.$i||(x(y,W,O),x.$i=!0),O},O.locale=b,O.isDayjs=$,O.unix=function(x){return O(1e3*x)},O.en=k[v],O.Ls=k,O.p={},O})})(rs);var tf=rs.exports;const Z=hr(tf);function os(e){const[t,n]=f.useState(null),[i,a]=f.useState([]),[o,s]=f.useState(!0),[l,c]=f.useState(null);return f.useEffect(()=>{async function d(){if(!e){s(!1);return}console.log(`[useKitchenWithFoods] Fetching kitchen: ${e}`);try{s(!0),c(null);const{kitchen:p,foods:u}=await Sm(e);n(p),a(u),console.log(`[useKitchenWithFoods] Loaded kitchen with ${u.length} foods`)}catch(p){console.error("[useKitchenWithFoods] Error:",p),c(p.message)}finally{s(!1)}}d()},[e]),{kitchen:t,foods:i,loading:o,error:l,hasData:!!t&&i.length>0}}function nf(e=10){const[t,n]=f.useState([]),[i,a]=f.useState(!0),[o,s]=f.useState(null);f.useEffect(()=>{async function d(){console.log(`[useAllKitchensWithFoods] Fetching up to ${e} kitchens`);try{a(!0),s(null);const p=await Rm(e);n(p);const u=p.reduce((h,m)=>h+m.foods.length,0);console.log(`[useAllKitchensWithFoods] Loaded ${p.length} kitchens with ${u} total foods`)}catch(p){console.error("[useAllKitchensWithFoods] Error:",p),s(p.message)}finally{a(!1)}}d()},[e]);const l=t.reduce((d,p)=>[...d,...p.foods],[]),c=t.length>0?t[0].kitchen:null;return{kitchensData:t,allFoods:l,primaryKitchen:c,loading:i,error:o,hasData:t.length>0,totalKitchens:t.length,totalFoods:l.length}}const sa=()=>{const e=gt(),t=Se(a=>a.cart.items),n=f.useCallback((a,o=null)=>{if(console.log("ð getCartQuantity called with:",{foodId:a,selectedDate:o,cartItemsCount:t.length}),!a||!t||t.length===0)return console.log("ð Early return: no foodId or empty cart"),0;const s=t.filter(c=>{console.log("ð Checking item:",{itemFoodId:c.foodId,itemSelectedDate:c.selectedDate,itemOrderType:c.orderType,itemQuantity:c.quantity});const d=String(c.foodId)===String(a);let p;o?p=c.selectedDate===o:p=!c.selectedDate||c.orderType==="GO_GRAB"||c.orderType==="Go&Grab";const u=d&&p;return console.log("ð Item match result:",{matchesFood:d,matchesDate:p,matches:u}),u}),l=s.reduce((c,d)=>{const p=d.quantity||1;return console.log("ð Adding quantity:",p,"to total:",c),c+p},0);return console.log("ð getCartQuantity result:",{foodId:a,selectedDate:o,matchingItemsCount:s.length,matchingItems:s.map(c=>({id:c.id,foodId:c.foodId,quantity:c.quantity,selectedDate:c.selectedDate,orderType:c.orderType})),totalQuantity:l}),l},[t]),i=f.useCallback(({food:a,kitchen:o,newQuantity:s,currentQuantity:l,selectedDate:c=null,selectedTime:d=null,specialInstructions:p="",isPreOrder:u=!1})=>{console.log("ð useGenericCart - handleQuantityChange called:",{foodId:a==null?void 0:a.id,foodName:a==null?void 0:a.name,newQuantity:s,currentQuantity:l,selectedDate:c,selectedTime:d,isPreOrder:u});try{const h=t.find(m=>{const g=String(m.foodId)===String(a.id),C=c?m.selectedDate===c:!m.selectedDate||m.orderType==="GO_GRAB"||m.orderType==="Go&Grab",j=(m.specialInstructions||"")===(p||"");return g&&C&&j});if(s===0){h&&(console.log("ðï¸ Removing item from cart (quantity = 0)"),e(Im(h.id)));return}if(h)console.log("ð Updating existing item quantity:",{itemId:h.id,oldQuantity:h.quantity,newQuantity:s}),e(_i({cartItemId:h.id,quantity:s,specialInstructions:p}));else{console.log("â Adding new item to cart with quantity:",s);const m={foodId:a.id,food:{id:a.id,name:a.name,cost:a.cost,imageUrl:a.imageUrl,description:a.description},kitchen:{id:o.id,name:o.name},kitchenId:o.id,quantity:s,selectedDate:c,selectedTime:d,specialInstructions:p,isPreOrder:u,orderType:u?"PRE_ORDER":"GO_GRAB"};e(Vo(m))}console.log("â Cart update completed")}catch(h){console.error("â Error updating cart:",h),ae.error("Failed to update cart")}},[e,t]);return{cartItems:t,getCartQuantity:n,handleQuantityChange:i}},$t=({food:e=null,kitchen:t=null,selectedDate:n=null,initialQuantity:i=1,maxQuantity:a=99,minQuantity:o=1,onQuantityChange:s=()=>{},onAvailabilityChange:l=()=>{},onError:c=()=>{},onWarning:d=()=>{},showAvailabilityInfo:p=!0,showErrorMessages:u=!0,size:h="medium",className:m="",disabled:g=!1})=>{console.log("QuantitySelector render params:",{showAvailabilityInfo:p,showErrorMessages:u});const[C,j]=f.useState(!1),[P,q]=f.useState({title:"",body:""}),[_,w]=f.useState(i),[v,k]=f.useState({isAvailable:!0,maxAvailable:a,orderType:n?"PRE_ORDER":"GO_GRAB",message:null,warning:null,actualCheckingDate:n}),M=f.useCallback(()=>{var x,y,S,I,T,N;if(console.log("ð AVAILABILITY CALCULATION START"),console.log("DEBUG - Availability calculation:",{foodId:e==null?void 0:e.id,foodName:e==null?void 0:e.name,kitchenId:t==null?void 0:t.id,kitchenName:t==null?void 0:t.name,selectedDate:n,hasFood:!!e,hasKitchen:!!t,hasPreorderSchedule:!!((x=t==null?void 0:t.preorderSchedule)!=null&&x.dates)}),!e)return console.log("DEBUG - No food object"),{isAvailable:!1,maxAvailable:0,orderType:n?"PRE_ORDER":"GO_GRAB",message:"Food item not found",warning:null,actualCheckingDate:n};const R=Z().startOf("day");if(n){console.log("ð ~ QuantitySelector ~ selectedDate received:",n),console.log("ð ~ QuantitySelector ~ selectedDate type:",typeof n);const F=Z(n).startOf("day");if(console.log("ð ~ QuantitySelector ~ orderDate:",F.format()),console.log("ð ~ QuantitySelector ~ today:",R.format()),console.log("ð ~ QuantitySelector ~ orderDate > today:",F.isAfter(R)),console.log("ð ~ QuantitySelector ~ orderDate === today:",F.isSame(R,"day")),console.log("ð ~ QuantitySelector ~ orderDate < today (isPast):",F.isBefore(R,"day")),F.isAfter(R)){const U="PRE_ORDER";if(console.log("DEBUG - Future date PRE_ORDER case"),!((y=t==null?void 0:t.preorderSchedule)!=null&&y.dates))return console.log("DEBUG - No preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Pre-orders not available for this kitchen",warning:null,actualCheckingDate:n};const z=n.includes("-")?n:Z(n).format("YYYY-MM-DD");console.log("ð ~ QuantitySelector ~ dateKey:",z),console.log("ð ~ QuantitySelector ~ selectedDate:",n),console.log("ð ~ QuantitySelector ~ kitchen.preorderSchedule.dates:",t.preorderSchedule.dates),console.log("ð ~ QuantitySelector ~ Available dates:",Object.keys(t.preorderSchedule.dates));const Q=t.preorderSchedule.dates[z];if(console.log("DEBUG - Date lookup:",{dateKey:z,hasScheduleForDate:!!Q,scheduleForDate:Q,availableDates:Object.keys(t.preorderSchedule.dates)}),!Q||!Array.isArray(Q))return console.log("DEBUG - No schedule found for date"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Not available for pre-order on selected date",warning:null};const K=Q.find(Y=>Y.foodItemId===e.id);if(console.log("ð ~ QuantitySelector ~ foodSchedule:",K),console.log("ð ~ QuantitySelector ~ food.id:",e.id),console.log("ð ~ QuantitySelector ~ food object:",e),console.log("DEBUG - Food schedule lookup:",{foodId:e.id,foodSchedule:K,allItemsInSchedule:Q.map(Y=>({id:Y.foodItemId,name:Y.nameOfFood}))}),!K)return console.log("DEBUG - Food not found in schedule"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"This item is not available for pre-order on selected date",warning:null};if(console.log("DEBUG - Food schedule details:",{isLimitedOrder:K.isLimitedOrder,numOfAvailableItems:K.numOfAvailableItems,availableTimes:K.availableTimes}),K.isLimitedOrder===!1){const Y=K.numOfAvailableItems||0;return console.log("DEBUG - Limited order case:",{availableItems:Y}),Y<=0?{isAvailable:!1,maxAvailable:0,orderType:U,message:"Sold out for pre-order on selected date",warning:null}:(console.log("Math.min(availableItems, maxQuantity)",Math.min(Y,a)),{isAvailable:!0,maxAvailable:Math.min(Y,a),orderType:U,message:null,warning:Y<5?`Only ${Y} left for pre-order`:null})}else return console.log("DEBUG - Unlimited order case"),{isAvailable:!0,maxAvailable:a,orderType:U,message:null,warning:null}}else if(F.isSame(R,"day")){if(console.log("DEBUG - Today's date - checking both GO_GRAB and PRE_ORDER"),(S=t==null?void 0:t.preorderSchedule)!=null&&S.dates){const Q=n.includes("-")?n:Z(n).format("YYYY-MM-DD");console.log("DEBUG - Today's date - dateKey:",Q);const K=t.preorderSchedule.dates[Q];if(K&&Array.isArray(K)){const Y=K.find(te=>te.foodItemId===e.id);if(console.log("DEBUG - Today's date - foodSchedule found:",!!Y,Y),Y){console.log("DEBUG - Today's date found in preorder schedule - using PRE_ORDER logic");const te="PRE_ORDER";if(Y.isLimitedOrder===!1){const me=Y.numOfAvailableItems||0;return console.log("DEBUG - Today PRE_ORDER limited case:",{availableItems:me}),me<=0?{isAvailable:!1,maxAvailable:0,orderType:te,message:"Sold out for today",warning:null}:{isAvailable:!0,maxAvailable:Math.min(me,a),orderType:te,message:null,warning:me<5?`Only ${me} left`:null}}else return console.log("DEBUG - Today PRE_ORDER unlimited case"),{isAvailable:!0,maxAvailable:a,orderType:te,message:null,warning:null}}}}console.log("DEBUG - Today's date - no preorder schedule, falling back to GO_GRAB");const U="GO_GRAB",z=((I=e.availability)==null?void 0:I.numAvailable)||e.numAvailable||0;return console.log("DEBUG - Today's date GO_GRAB fallback:",{numAvailable:z}),z<=0?{isAvailable:!1,maxAvailable:0,orderType:U,message:"Not available",warning:null}:{isAvailable:!0,maxAvailable:Math.min(z,a),orderType:U,message:null,warning:z<5?`Only ${z} left`:null}}else{console.log("ð¨ PAST PRE-ORDER DATE DETECTED! ð¨"),console.log("DEBUG - Past pre-order date, checking current date in preorder schedule"),console.log("DEBUG - Selected date was:",n,"which is",F.format()),console.log("DEBUG - Current date is:",R.format()),console.log("DEBUG - Days difference:",R.diff(F,"day"),"days in the past"),console.log("DEBUG - Since selectedDate provided, maintaining PRE_ORDER type and checking today's preorder schedule");const U="PRE_ORDER",z=R.format("YYYY-MM-DD");if(console.log("DEBUG - Looking for today's date in preorder schedule:",z),!((T=t==null?void 0:t.preorderSchedule)!=null&&T.dates))return console.log("â DEBUG - No preorder schedule available"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Sold Out",warning:null,actualCheckingDate:z};const Q=t.preorderSchedule.dates[z];if(console.log("DEBUG - Today's preorder schedule:",Q),!Q||!Array.isArray(Q))return console.log("â DEBUG - No preorder schedule for today, item sold out"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Sold Out",warning:null,actualCheckingDate:z};const K=Q.find(Y=>Y.foodItemId===e.id);if(console.log("DEBUG - Food found in today's preorder schedule:",!!K,K),!K)return console.log("â DEBUG - Food not available in today's preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Sold Out",warning:null,actualCheckingDate:z};if(K.isLimitedOrder===!1){const Y=K.numOfAvailableItems||0;return console.log("DEBUG - Past date, today's limited preorder case:",{availableItems:Y}),Y<=0?(console.log("â DEBUG - Past pre-order date: Item SOLD OUT for current date in preorder schedule"),{isAvailable:!1,maxAvailable:0,orderType:U,message:"Sold Out",warning:null,actualCheckingDate:z}):(console.log("â DEBUG - Past pre-order date: Item AVAILABLE for current date in preorder schedule, quantity:",Y),{isAvailable:!0,maxAvailable:Math.min(Y,a),orderType:U,message:null,warning:Y<5?`Only ${Y} left`:null,actualCheckingDate:z})}else return console.log("â DEBUG - Past pre-order date: Item AVAILABLE (unlimited) for current date in preorder schedule"),{isAvailable:!0,maxAvailable:a,orderType:U,message:null,warning:null,actualCheckingDate:z}}}else{const F="GO_GRAB",U=((N=e.availability)==null?void 0:N.numAvailable)||e.numAvailable||0;return console.log("DEBUG - No date GO_GRAB:",{numAvailable:U}),U<=0?{isAvailable:!1,maxAvailable:0,orderType:F,message:"Sold Out",warning:null,actualCheckingDate:null}:{isAvailable:!0,maxAvailable:Math.min(U,a),orderType:F,message:null,warning:U<5?`Only ${U} left`:null,actualCheckingDate:null}}},[e,t,n,a]),$=f.useMemo(()=>M(),[M]);console.log("DEBUG - Current availability:",$),f.useEffect(()=>{($.isAvailable!==v.isAvailable||$.maxAvailable!==v.maxAvailable||$.orderType!==v.orderType||$.message!==v.message||$.warning!==v.warning||$.actualCheckingDate!==v.actualCheckingDate)&&k($)},[$,v]);const b=f.useCallback(R=>{if(console.log("ð¥ QuantitySelector handleQuantityChange called with:",R),console.log("ð¥ Current state:",{quantity:_,minQuantity:o,maxAvailable:v.maxAvailable}),R<0||R>v.maxAvailable){console.log("ð¥ Invalid quantity, not updating"),R>v.maxAvailable?(v.maxAvailable===0?alert("The item is currently sold out. Please check back later or choose another item."):alert(`Currently only ${v.maxAvailable} items are available.`),c(`Maximum available quantity is ${v.maxAvailable}`)):R<0&&c("Quantity cannot be negative");return}R!==_?(console.log("ð¥ Setting new quantity:",R),w(R),console.log("ð¥ Calling parent onQuantityChange with:",R),s(R)):console.log("ð¥ Quantity unchanged, skipping update")},[_,v.maxAvailable,s,c]);f.useEffect(()=>{l(v),v.warning&&d(v.warning),v.message&&v.isAvailable},[v,l,d,c]),f.useEffect(()=>{console.log("ð QuantitySelector initialQuantity effect:",{initialQuantity:i,currentQuantity:_,foodId:e==null?void 0:e.id,selectedDate:n}),i!==_&&(console.log("ð Syncing quantity:",i),w(i))},[i]);const O=f.useCallback(()=>{if(console.log("ð¥ INCREMENT CLICKED!",{disabled:g,availabilityStatus:v.isAvailable,currentQuantity:_,maxAvailable:v.maxAvailable}),g||!v.isAvailable){alert("The item is currently sold out. Please check back later or choose another item."),console.log("ð¥ INCREMENT BLOCKED: Item not available");return}const R=_+1;if(R>v.maxAvailable){console.log("ð¥ INCREMENT BLOCKED: At maximum quantity"),v.maxAvailable===0?alert("The item is currently sold out. Please check back later or choose another item."):alert(`Currently only ${v.maxAvailable} items are available.`);return}console.log("ð¥ INCREMENT: Calling handleQuantityChange with:",R),b(R)},[g,v.isAvailable,v.maxAvailable,_,b]),E=f.useCallback(()=>{if(console.log("ð¥ DECREMENT CLICKED!",{disabled:g,currentQuantity:_,minQuantity:o}),g){console.log("ð¥ DECREMENT BLOCKED: Component disabled");return}const R=_-1;if(R<0){console.log("ð¥ DECREMENT BLOCKED: Cannot go below 0");return}console.log("ð¥ DECREMENT: Calling handleQuantityChange with:",R),b(R)},[g,_,b]),W=["quantity-selector",`quantity-selector--${h}`,m,g&&"quantity-selector--disabled",!v.isAvailable&&"quantity-selector--unavailable"].filter(Boolean).join(" ");return r.jsxs("div",{className:W,children:[C&&r.jsx("div",{className:"modal-overlay",onClick:()=>j(!1),children:r.jsxs("div",{className:"modal-content",onClick:R=>R.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{children:P.title}),r.jsx("button",{className:"modal-close",onClick:()=>j(!1),children:"Ã"})]}),r.jsxs("div",{className:"modal-body",children:[r.jsx("p",{children:P.body}),r.jsx("button",{onClick:()=>j(!1),children:"OK"})]})]})}),r.jsxs("div",{className:"quantity-selector__controls",children:[r.jsx("div",{className:"quantity-selector__display",children:r.jsx("span",{className:"quantity-number",children:_})}),r.jsxs("div",{className:"quantity-selector__buttons",children:[r.jsx("button",{type:"button",className:"quantity-btn quantity-btn--decrement",onClick:E,disabled:g||_<=0,"aria-label":"Decrease quantity",children:r.jsx("svg",{width:"13",height:"2",viewBox:"0 0 13 2",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("rect",{x:"0.887695",width:"11.6854",height:"1.46067",fill:"currentColor"})})}),r.jsx("button",{type:"button",className:"quantity-btn quantity-btn--increment",onClick:O,"aria-label":"Increase quantity",children:r.jsxs("svg",{width:"13",height:"12",viewBox:"0 0 13 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M0.707673 5.27007H12.3931V6.73075H0.707673V5.27007Z",fill:"currentColor"}),r.jsx("path",{d:"M7.28071 0.157715L7.28071 11.8431H5.82003L5.82003 0.157715L7.28071 0.157715Z",fill:"currentColor"})]})})]})]})]})};function ss({isLoading:e=!0,text:t="Loading...",overlay:n=!0,size:i="medium"}){if(!e)return null;const a={small:"spinner-sm",medium:"spinner-md",large:"spinner-lg"},o=()=>r.jsx("div",{className:`mobile-loader-content ${n?"overlay":"inline"}`,children:r.jsxs("div",{className:"loader-spinner-wrapper",children:[r.jsxs("div",{className:`custom-spinner ${a[i]}`,children:[r.jsx("div",{className:"spinner-ring"}),r.jsx("div",{className:"spinner-ring"}),r.jsx("div",{className:"spinner-ring"})]}),t&&r.jsx("p",{className:"loader-text",children:t})]})});return n?r.jsx("div",{className:"mobile-loader-overlay",children:r.jsx(o,{})}):r.jsx(o,{})}const bn=({food:e,kitchen:t,orderType:n="GO_GRAB",selectedDate:i=null,selectedTime:a=null,onDateChange:o=()=>{},onTimeChange:s=()=>{},disabled:l=!1,showTimeFirst:c=!1,className:d="",dateLabel:p="Pick up date:",timeLabel:u="Pick up time:",style:h={}})=>{var W,R;const[m,g]=f.useState(i),[C,j]=f.useState(a),[P,q]=f.useState(!1),_=f.useRef(null),w=f.useMemo(()=>/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),[]);f.useEffect(()=>{g(i)},[i]),f.useEffect(()=>{j(a)},[a]);const v=f.useMemo(()=>{const x=Z().startOf("day");if(console.log("ðï¸ DateTimePicker - Calculating available dates:",{orderType:n,today:x.format("YYYY-MM-DD"),selectedDate:i,foodId:e==null?void 0:e.id}),n==="GO_GRAB"){const y=[];for(let S=0;S<30;S++){const I=x.add(S,"day"),T=I.format("YYYY-MM-DD");let N;S===0?N=`${I.format("MMM D, YYYY")} (Today)`:S===1?N=`${I.format("MMM D, YYYY")} (Tomorrow)`:N=`${I.format("dddd")}, ${I.format("MMM D, YYYY")}`,y.push({date:T,display:N,dayjs:I,isToday:S===0,isAvailable:!0})}return y}else if(n==="PRE_ORDER"){if(!i)return console.log("ð« DateTimePicker - No selectedDate provided for PRE_ORDER"),[];const y=Z(i),S=y.isSame(x,"day"),I=y.isSame(x.add(1,"day"),"day");let T;return S?T=`${y.format("MMM D, YYYY")} (Today)`:I?T=`${y.format("MMM D, YYYY")} (Tomorrow)`:T=`${y.format("dddd")}, ${y.format("MMM D, YYYY")}`,[{date:i,display:T,dayjs:y,isToday:S,isAvailable:!0}]}return[]},[n,i,e==null?void 0:e.id]),k=f.useMemo(()=>{var x;if(!m)return[];if(n==="GO_GRAB"){const y=Z(),S=Z(m),I=9,T=21,N=[];let F;if(S.isSame(y,"day")){F=y.add(30,"minutes");const z=F.minute(),Q=Math.ceil(z/15)*15;F=F.minute(Q).second(0),F.minute()===60&&(F=F.add(1,"hour").minute(0))}else F=S.hour(I).minute(0).second(0);let U=F;for(;U.hour()<T||U.hour()===T&&U.minute()===0;)N.push({value:U.format("h:mm A"),display:U.format("h:mm A"),dayjs:U,isAvailable:!0}),U=U.add(15,"minutes");return N}else if(n==="PRE_ORDER"){if(!i||!((x=t==null?void 0:t.preorderSchedule)!=null&&x.dates))return[];let y;try{y=Z(i).format("YYYY-MM-DD")}catch(N){return console.error("Error parsing selectedDate:",i,N),[]}if(!t.preorderSchedule.dates[y])return[];const I=t.preorderSchedule.dates[y].filter(N=>N.foodItemId===(e==null?void 0:e.id));if(I.length===0)return[];const T=[];return I.forEach(N=>{N.availableTimes&&Array.isArray(N.availableTimes)&&N.availableTimes.forEach(F=>{const U=Z(`2000-01-01 ${F}`,"YYYY-MM-DD h:mm A");for(let z=-30;z<=30;z+=15){const Q=U.add(z,"minutes"),K=Q.format("h:mm A"),Y=Q.hour();Y>=8&&Y<=22&&!T.find(te=>te.value===K)&&T.push({value:K,display:K+(z===0?" (Recommended)":""),isAvailable:!0,scheduleItem:N,isRecommended:z===0,originalTime:F})}})}),T.sort((N,F)=>{const U=Z(`2000-01-01 ${N.value}`,"YYYY-MM-DD h:mm A"),z=Z(`2000-01-01 ${F.value}`,"YYYY-MM-DD h:mm A");return U.diff(z)})}return[]},[m,n,i,t,e]),M=f.useCallback(x=>{const y=Z(x),S=Z().startOf("day");if(console.log("ð± Mobile date change validation:",{selectedDate:x,isBeforeToday:y.isBefore(S),orderType:n,isMobile:w}),n==="GO_GRAB"&&y.isBefore(S)){alert("Please select today or a future date for pickup.");const I=S.format("YYYY-MM-DD");g(I),o(I);return}if(n==="PRE_ORDER"&&x!==i){alert("For pre-orders, the pickup date cannot be changed."),g(i);return}g(x),j(null),o(x),s(null)},[n,i,o,s,w]),$=f.useCallback(x=>{j(x),s(x)},[s]),b=()=>P?r.jsx("div",{className:"mobile-date-picker-overlay",onClick:()=>q(!1),children:r.jsxs("div",{className:"mobile-date-picker-content",onClick:x=>x.stopPropagation(),children:[r.jsxs("div",{className:"mobile-date-picker-header",children:[r.jsx("button",{onClick:()=>q(!1),children:"Cancel"}),r.jsx("h3",{children:"Select Date"}),r.jsx("button",{onClick:()=>q(!1),children:"Done"})]}),r.jsx("div",{className:"mobile-date-grid",children:v.map(x=>r.jsxs("button",{className:`mobile-date-option ${m===x.date?"selected":""} ${x.isToday?"today":""}`,onClick:()=>{M(x.date),q(!1)},disabled:!x.isAvailable,children:[r.jsx("div",{className:"mobile-date-day",children:x.dayjs.format("D")}),r.jsx("div",{className:"mobile-date-month",children:x.dayjs.format("MMM")}),r.jsx("div",{className:"mobile-date-weekday",children:x.dayjs.format("ddd")})]},x.date))})]})}):null;if(f.useEffect(()=>{if(n==="GO_GRAB"&&!m&&v.length>0){const x=v[0].date;M(x)}n==="PRE_ORDER"&&i&&!m&&g(i)},[n,m,v,i,M]),f.useEffect(()=>{if(m&&!C&&k.length>0){const x=k[0].value;$(x)}},[m,C,k,$]),l)return r.jsxs("div",{className:`date-time-picker disabled ${d}`,style:h,children:[r.jsxs("div",{className:"picker-field",children:[r.jsx("label",{className:"picker-label",children:p}),r.jsx("div",{className:"picker-value disabled",children:"Not available"})]}),r.jsxs("div",{className:"picker-field",children:[r.jsx("label",{className:"picker-label",children:u}),r.jsx("div",{className:"picker-value disabled",children:"Not available"})]})]});if(v.length===0)return r.jsx("div",{className:"",style:h});const O=c?{}:{"data-first":!0},E=c?{"data-first":!0}:{};return r.jsxs("div",{className:`date-time-picker ${d}`,style:h,"data-order-type":n,"data-mobile":w,children:[r.jsxs("div",{className:"picker-field",...O,children:[r.jsx("label",{className:"picker-label",children:p}),r.jsx("div",{className:"date-input-wrapper",children:w&&n==="GO_GRAB"?r.jsxs("div",{className:"picker-select date-select mobile-date-trigger",onClick:()=>q(!0),style:{paddingRight:"18px"},children:[r.jsx("span",{className:"",children:m?((W=v.find(x=>x.date===m))==null?void 0:W.display)||Z(m).format("MMM D, YYYY"):"Select date"}),r.jsx("svg",{className:"picker-arrow",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",children:r.jsx("path",{d:"M1 1L6 6L11 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]}):r.jsxs(r.Fragment,{children:[r.jsx("input",{type:"date",ref:_,className:"picker-select date-select date-input",value:m||"",onChange:x=>M(x.target.value),disabled:l||v.length===0,min:n==="PRE_ORDER"&&i?i:Z().format("YYYY-MM-DD"),max:n==="PRE_ORDER"&&i?i:v.length>0?v[v.length-1].date:Z().add(7,"day").format("YYYY-MM-DD"),readOnly:n==="PRE_ORDER"}),r.jsx("div",{className:"date-display-text",onClick:()=>{var x,y,S;!l&&n!=="PRE_ORDER"&&((x=_.current)==null||x.focus(),(S=(y=_.current)==null?void 0:y.showPicker)==null||S.call(y))},children:m?((R=v.find(x=>x.date===m))==null?void 0:R.display)||Z(m).format("MMM D, YYYY"):n==="PRE_ORDER"?"Date pre-selected":"Select date"}),r.jsx("svg",{className:"picker-arrow",width:"12",height:"8",viewBox:"0 0 12 8",fill:"none",style:{opacity:n==="PRE_ORDER"?.5:1},onClick:()=>{var x,y,S;!l&&n!=="PRE_ORDER"&&((x=_.current)==null||x.focus(),(S=(y=_.current)==null?void 0:y.showPicker)==null||S.call(y))},children:r.jsx("path",{d:"M1 1L6 6L11 1",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})]})})]}),r.jsxs("div",{className:"picker-field",...E,children:[r.jsx("label",{className:"picker-label",children:u}),r.jsxs("select",{className:"picker-select time-select",value:C||"",onChange:x=>$(x.target.value),children:[r.jsx("option",{value:"",disabled:!0,children:"Select time"}),k.map(x=>r.jsx("option",{value:x.value,disabled:!x.isAvailable,"data-recommended":x.isRecommended||!1,style:x.isRecommended?{backgroundColor:"#e8f5e8",fontWeight:"600",color:"#2e7d2e"}:{},children:x.display},x.value))]})]}),r.jsx(b,{})]})};function Qa(){const e=jt(),t=Ut(),{kitchenId:n}=Es(),i=()=>{var b,O,E,W;if((O=(b=t.state)==null?void 0:b.from)!=null&&O.fullUrl){console.log("Going back to FoodDetailPage with params:",t.state.from.fullUrl),e(t.state.from.fullUrl);return}if((W=(E=t.state)==null?void 0:E.from)!=null&&W.pathname){console.log("Going back to:",t.state.from.pathname+(t.state.from.search||"")),e(t.state.from.pathname+(t.state.from.search||""));return}try{e(-1)}catch(R){e("/")}},{cartItems:a,getCartQuantity:o,handleQuantityChange:s}=sa(),[l,c]=f.useState({}),[d,p]=f.useState({}),{allFoods:u}=nf(10),h=n||(u.length>0?u[0].kitchenId:null),{kitchen:m,foods:g,loading:C,error:j}=os(h);console.log("ð ~ ListingPage ~ foods:",g),f.useEffect(()=>{m&&g.length>0&&(console.log("[ListingPage] Kitchen data:",m),console.log("[ListingPage] Foods data:",g),console.log("[ListingPage] Preorder schedule:",m.preorderSchedule))},[m,g]);const P=()=>{var x;if(!((x=m==null?void 0:m.preorderSchedule)!=null&&x.dates))return[];const b=Z(),O=b.format("YYYY-MM-DD");console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] Using dayjs - Current date (today):",O),console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] Raw dayjs object:",b.toString());const E=[];for(let y=1;y<=2;y++){const I=b.add(y,"day").format("YYYY-MM-DD");E.push(I)}console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] Next 2 days after today (should be 2025-08-23, 2025-08-24):",E),console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] All dates in preorder schedule:",Object.keys(m.preorderSchedule.dates));const W=E.filter(y=>{const S=m.preorderSchedule.dates[y],I=y!==O;return console.log(`ð¥ð¥ð¥ [PREORDER DATES DEBUG] Date ${y}: has schedule=${!!S}, is not today=${I}, today is=${O}`),S&&I});console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] Final available preorder dates (should only be 23 & 24):",W);const R=W.map(y=>{const I=Z(y).format("ddd, MMM D");return console.log(`ð¥ð¥ð¥ [PREORDER DATES DEBUG] Mapping ${y} to display: ${I}`),{dateString:y,displayDate:I}});return console.log("ð¥ð¥ð¥ [PREORDER DATES DEBUG] Final result returned:",R),R},{goGrabItems:q,preOrderItems:_}=f.useMemo(()=>{var W;if(!g.length)return{goGrabItems:[],preOrderItems:[]};const b=g.filter(R=>R.kitchenId===h);console.log("[ListingPage] All foods for current kitchen:",b);const O=b.filter(R=>{var y,S;const x=((y=R.availability)==null?void 0:y.numAvailable)||R.numAvailable||0;return console.log(`[ListingPage] ${R.name} - numAvailable: ${x} (from ${(S=R.availability)!=null&&S.numAvailable?"availability":"direct"})`),x>0});let E=[];if((W=m==null?void 0:m.preorderSchedule)!=null&&W.dates){const R=m.preorderSchedule.dates,x=new Set;Object.values(R).flat().forEach(y=>{x.add(y.foodItemId)}),console.log("[ListingPage] Preorder food IDs from schedule:",Array.from(x)),E=b.filter(y=>{const S=x.has(y.id);return console.log(`[ListingPage] ${y.name} (${y.id}) - in preorder: ${S}`),S})}return console.log(`[ListingPage] Kitchen: ${h}, Total Foods: ${b.length}, Go&Grab: ${O.length}, Pre-order: ${E.length}`),console.log("[ListingPage] Go&Grab items:",O.map(R=>{var x;return{id:R.id,name:R.name,numAvailable:((x=R.availability)==null?void 0:x.numAvailable)||R.numAvailable}})),console.log("[ListingPage] Pre-order items:",E.map(R=>({id:R.id,name:R.name}))),{goGrabItems:O,preOrderItems:E}},[g,m,h]);console.log("ð ~ ListingPage ~ goGrabItems:",q),console.log("ð ~ ListingPage ~ preOrderItems:",_);const w=f.useCallback((b,O,E=!1)=>{const W=E?`${b}_preorder`:b;c(R=>({...R,[W]:O})),console.log("ð [ListingPage] Date changed:",{foodId:b,newDate:O,isPreOrder:E})},[]),v=f.useCallback((b,O,E=!1)=>{const W=E?`${b}_preorder`:b;p(R=>({...R,[W]:O})),console.log("â° [ListingPage] Time changed:",{foodId:b,newTime:O,isPreOrder:E})},[]),k=b=>{var E,W;return(W=(E=m==null?void 0:m.preorderSchedule)==null?void 0:E.dates)!=null&&W[b]?m.preorderSchedule.dates[b].map(R=>{const x=_.find(y=>y.id===R.foodItemId);return x?{...x,scheduleItem:R}:null}).filter(Boolean):[]},M=P(),$=!C&&m&&g.length>0;return j?r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsx("div",{className:"padding-20",children:r.jsxs("div",{className:"text-center py-5 text-danger",children:["Error: ",j]})})})}):C||!$?r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsx(ss,{isLoading:!0,text:"Loading menu items...",overlay:!0,size:"medium"})})}):r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsxs("div",{className:"padding-20",children:[r.jsxs("div",{className:"back-link-title",children:[r.jsx("button",{className:"back-link",onClick:i,style:{border:"none",background:"none",cursor:"pointer"},children:r.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),r.jsx("div",{className:"title",children:"More offers from HomeFresh"})]}),r.jsx("h2",{className:"small-title mb-2",children:(m==null?void 0:m.name)||"Coco&apos;s Kitchen"}),q.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"small-title mb-20",children:"Grab & Go"}),r.jsx("div",{className:"menu-listing",children:q.map(b=>{const O=o(b.id);return r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:b.imageUrl||"/src/assets/images/product.png",alt:b.name,onError:E=>{E.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:b.name}),r.jsx("div",{className:"text",children:b.description||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",b.cost]})]})]}),r.jsxs("div",{className:"quantity-warpper",children:[r.jsx("div",{className:"right mb-1",children:r.jsx($t,{food:b,kitchen:m,selectedDate:null,size:"small",initialQuantity:O,minQuantity:0,onQuantityChange:E=>{try{const W=o(b.id),R=l[b.id],x=d[b.id],y=R?Z(R).isSame(Z(),"day"):!0;console.log("ð ListingPage Go&Grab quantity change:",{foodId:b.id,newQuantity:E,currentQty:W}),s({food:b,kitchen:m,newQuantity:E,currentQuantity:W,selectedDate:R,selectedTime:x,specialInstructions:"",isPreOrder:!y})}catch(W){console.error("Error updating quantity:",W),showToast.error("Failed to update cart")}}})}),r.jsx("div",{className:"pickup-time-section",children:r.jsx(bn,{food:b,kitchen:m,orderType:"GO_GRAB",selectedDate:l[b.id],selectedTime:d[b.id],onDateChange:E=>w(b.id,E,!1),onTimeChange:E=>v(b.id,E,!1),disabled:!b||!m,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},b.id)})})]}),M.map(b=>{const O=k(b.dateString);return O.length===0?null:r.jsxs("div",{children:[r.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",b.displayDate]}),r.jsx("div",{className:"menu-listing",children:O.map(E=>{const W=o(E.id,b.dateString);return r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:E.imageUrl||"/src/assets/images/product.png",alt:E.name,onError:R=>{R.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:E.name}),r.jsx("div",{className:"text",children:E.description||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",E.cost]})]})]}),r.jsxs("div",{className:"quantity-warpper",children:[r.jsx("div",{className:"right mb-1",children:r.jsx($t,{food:E,kitchen:m,selectedDate:b.dateString,size:"small",initialQuantity:W,minQuantity:0,onQuantityChange:R=>{try{const x=o(E.id,b.dateString),y=d[`${E.id}_preorder`];console.log("ð ListingPage Pre-Order quantity change:",{foodId:E.id,date:b.dateString,newQuantity:R,currentQty:x}),s({food:E,kitchen:m,newQuantity:R,currentQuantity:x,selectedDate:b.dateString,selectedTime:y,specialInstructions:"",isPreOrder:!0})}catch(x){console.error("Error updating pre-order quantity:",x),showToast.error("Failed to update cart")}}})}),r.jsx("div",{className:"pickup-time-section",children:r.jsx(bn,{food:E,kitchen:m,orderType:"PRE_ORDER",selectedDate:l[`${E.id}_preorder`]||b.dateString,selectedTime:d[`${E.id}_preorder`],onDateChange:R=>w(E.id,R,!0),onTimeChange:R=>v(E.id,R,!0),disabled:!E||!m,className:"listing-page-picker",dateLabel:"",timeLabel:""})})]})]},`${E.id}-${b.dateString}`)})})]},b.dateString)}),r.jsx("button",{className:"action-button mb-16",onClick:()=>{a.length===0?alert("Oops! Your cart is empty. Add something delicious to get started."):e("/order")},children:"Continue to View Cart"}),r.jsxs("div",{className:"scanner-bottom mb-16",children:[r.jsx("div",{className:"text",children:"Full menus from your local home kitchens can be found in the HomeFresh app, available in the iOS App Store."}),r.jsx("div",{className:"qr",children:r.jsx("img",{src:as,alt:"QR Code"})})]})]})})})}const af=()=>{const e=gt(),t=jt();return{logout:f.useCallback(async()=>{try{const i=ae.loading("Logging out...");await e(ts()).unwrap(),ae.success("Successfully logged out!"),t("/login",{replace:!0})}catch(i){console.error("â Logout failed:",i),ae.error("Logout failed, but redirecting anyway"),t("/login",{replace:!0})}},[e,t])}},rf=()=>(f.useEffect(()=>{const e={currentUrl:window.location.href,hostname:window.location.hostname,origin:window.location.origin,userAgent:navigator.userAgent,isWeChatBrowser:/micromessenger/i.test(navigator.userAgent),isMobile:/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent),timestamp:new Date().toISOString()};console.log("ð WeChat Debug Info:",e),localStorage.setItem("wechat_debug_info",JSON.stringify(e,null,2))},[]),null);function of(){const[e,t]=f.useState(new Date),[n,i]=f.useState(""),a="Enjoy delicious meal from your favorite chef.";console.log("Deployed Version 9");const{user:o,isAuthenticated:s}=Se(u=>u.auth),{items:l,totalItems:c}=Se(u=>u.cart),{logout:d}=af();f.useEffect(()=>{const u=setInterval(()=>{t(new Date)},1e3);return()=>clearInterval(u)},[]),f.useEffect(()=>{let u=0;const h=setInterval(()=>{u<a.length?(i(a.slice(0,u+1)),u++):clearInterval(h)},50);return()=>clearInterval(h)},[]);const p=u=>u.toLocaleTimeString("en-US",{hour12:!0,hour:"numeric",minute:"2-digit",second:"2-digit"});return r.jsxs("div",{className:"landing-page",children:[r.jsxs("div",{className:"background-animation",children:[r.jsx("div",{className:"floating-food food-1",children:"ð¥"}),r.jsx("div",{className:"floating-food food-2",children:"ð"}),r.jsx("div",{className:"floating-food food-3",children:"ð¥"}),r.jsx("div",{className:"floating-food food-4",children:"ð²"}),r.jsx("div",{className:"floating-food food-5",children:"ð¥"}),r.jsx("div",{className:"floating-food food-6",children:"ð±"})]}),r.jsxs("div",{className:"landing-content",children:[r.jsxs("div",{className:"logo-section",children:[r.jsx("div",{className:"logo-circle",children:r.jsx("span",{className:"logo-icon",children:"ð "})}),r.jsxs("h1",{className:"brand-name",children:["Home",r.jsx("span",{className:"accent-text",children:"Fresh"})]})]}),r.jsxs("div",{className:"coming-soon-section",children:[r.jsxs("h2",{className:"coming-soon-title",children:["Welcome to ",r.jsx("span",{className:"gradient-text",children:"HomeFresh!"})]}),r.jsxs("p",{className:"subtitle",children:[n,r.jsx("span",{className:"cursor",children:"|"})]}),r.jsxs("div",{className:"feature-grid",children:[r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"ð¨âð³"}),r.jsx("h3",{children:"Home Chefs"}),r.jsx("p",{children:"Local talented chefs cooking with love"})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"ð"}),r.jsx("h3",{children:"Fresh Experience"}),r.jsx("p",{children:"Fast and reliable taste you can trust"})]}),r.jsxs("div",{className:"feature-card",children:[r.jsx("div",{className:"feature-icon",children:"ð"}),r.jsx("h3",{children:"Made with Love"}),r.jsx("p",{children:"Every meal crafted with care and passion"})]})]}),r.jsxs("div",{className:"live-clock",children:[r.jsx("span",{className:"clock-icon",children:"â°"}),r.jsx("span",{className:"time-display",children:p(e)})]}),r.jsxs("div",{className:"cta-section",children:[r.jsx("p",{className:"launch-text",children:"We're putting the finishing touches on something special!"}),r.jsxs(Tt,{to:"/foods",className:"explore-btn",children:[r.jsx("span",{children:"Explore Preview"}),r.jsx("div",{className:"btn-arrow",children:"â"})]})]}),r.jsxs("div",{className:"progress-container",children:[r.jsx("div",{className:"progress-label",children:"Launch Progress"}),r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"progress-fill"})}),r.jsx("div",{className:"progress-text",children:"95% Complete"})]})]}),r.jsxs("footer",{className:"landing-footer",children:[r.jsx("p",{children:"Get ready for a culinary revolution ð"}),r.jsxs("div",{style:{marginTop:"20px",padding:"15px",background:"rgba(0,0,0,0.1)",borderRadius:"8px",fontSize:"12px"},children:[r.jsx("h4",{children:"ð§ Debug Panel (Persistence Test)"}),r.jsxs("p",{children:[r.jsx("strong",{children:"User:"})," ",s?(o==null?void 0:o.name)||"Authenticated":"Not logged in"]}),r.jsxs("p",{children:[r.jsx("strong",{children:"Cart Items:"})," ",c," items"]}),r.jsxs("div",{style:{marginTop:"10px"},children:[r.jsx("button",{onClick:d,style:{padding:"8px 16px",backgroundColor:"#ff4444",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",marginRight:"10px"},children:"ðª Test Logout (Clear All Data)"}),r.jsx(Tt,{to:"/foods",style:{padding:"8px 16px",backgroundColor:"#44ff44",color:"white",textDecoration:"none",borderRadius:"4px"},children:"ð Go to Foods (Test Cart)"})]})]})]})]}),r.jsx(rf,{})]})}const dn="/assets/product-BvDHopBm.png",sf="/assets/user1-DLLHbfvd.svg",lf=(e,t)=>{const n=gt(),[i,a]=f.useState(!1),{user:o}=Se(G=>G.auth),{currentFood:s,currentKitchen:l,currentReviews:c,currentReviewStats:d,currentLikes:p,loading:u,error:h,likedFoods:m}=Se(G=>G.food),{kitchenStats:g,kitchenReviews:C,statsLoading:j,reviewsLoading:P}=Se(G=>G.kitchen),{foodReviews:q,foodReviewsLoading:_,submissionLoading:w}=Se(G=>G.reviews),{items:v,loading:k}=Se(G=>G.cart),M=g[t],$=C[t],b=q[e],O=_[e],E=j[t],W=P[t],R=m.includes(e),x=v.filter(G=>G.foodId===e&&G.kitchenId===t).reduce((G,V)=>G+V.quantity,0),y=f.useCallback(G=>v.find(V=>V.foodId===e&&V.kitchenId===t&&V.selectedDate===G.selectedDate&&V.specialInstructions===(G.specialInstructions||"")),[v,e,t]),S=f.useCallback(()=>{e&&t&&n(It({foodId:e,kitchenId:t}))},[n,e,t]),I=f.useCallback(()=>{t&&!M&&!E&&n(on(t))},[n,t,M,E]),T=f.useCallback(()=>{t&&!$&&!W&&n(sn({kitchenId:t,limit:10}))},[n,t,$,W]),N=f.useCallback(()=>{e&&!b&&!O&&n(ln({foodId:e,kitchenId:t,limit:10}))},[n,e,t,b,O]),F=f.useCallback(()=>{if(!t){console.warn("Kitchen ID is required to like food");return}if(!i){console.warn("Like status not yet checked, preventing toggle");return}console.log("ð Toggle like called:",{foodId:e,kitchenId:t,userId:o==null?void 0:o.id,currentlyLiked:R,likedFoodsArray:m,likeStatusChecked:i}),n(Li(e))},[n,e,t,R,m,o==null?void 0:o.id,i]),U=f.useCallback((G=null,V=null)=>{const A=Z();if(G){const L=Z(G),D=V||"6:30 PM",re=L.isSame(A,"day")?"Go&Grab":"Pre-Order";return{date:L.format("YYYY-MM-DD"),time:D,display:`${L.format("MMM DD, YYYY")} at ${D}`,orderType:re}}else{const L=V||A.add(30,"minutes").format("h:mm A");return{date:A.format("YYYY-MM-DD"),time:L,display:`Today at ${L}`,orderType:"Go&Grab"}}},[]),z=f.useCallback(G=>{const V=y(G);if(V)return console.log("Item already exists, updating quantity:",V.quantity,"to",G.quantity),n(_i({cartItemId:V.id,quantity:G.quantity,specialInstructions:G.specialInstructions})),{success:!0,message:"Cart item quantity updated successfully",existingQuantity:V.quantity,newQuantity:G.quantity};const A=U(G.selectedDate,G.selectedTime),L={foodId:e,kitchenId:t,quantity:G.quantity,orderType:G.orderType,selectedDate:G.selectedDate,selectedTime:G.selectedTime,specialInstructions:G.specialInstructions||"",pickupDetails:A,isPreOrder:G.selectedDate&&!Z(G.selectedDate).isSame(Z(),"day"),food:s?{id:s.id,name:s.name,cost:s.cost,price:s.price||s.cost,imageUrl:s.imageUrl,image:s.image||s.imageUrl,description:s.description,category:s.category,isAvailable:s.isAvailable,kitchenName:s.kitchenName,maxQuantity:s.maxQuantity,totalQuantity:s.totalQuantity,availableQuantity:s.availableQuantity,isPreOrder:s.isPreOrder,...s}:null,kitchen:l?{id:l.id,name:l.name,address:l.address,rating:l.rating,ratingCount:l.ratingCount,...l}:null};return console.log("Adding new item to cart:",L),n(Vo(L)),{success:!0,message:"Item added to cart successfully"}},[n,e,t,y,s,l,U]),Q=f.useCallback(G=>{const V=v.find(A=>A.foodId===e&&A.kitchenId===t);V&&(console.log("Updating cart item quantity:",{cartItemId:V.id,quantity:G}),n(_i({cartItemId:V.id,quantity:G})))},[n,e,t,v]),K=f.useCallback(G=>n(cn({foodId:e,kitchenId:t,reviewData:G})),[n,e,t]),Y=f.useCallback(()=>{n(_m())},[n]);return f.useEffect(()=>(S(),I(),N(),()=>{}),[S,I,N]),f.useEffect(()=>{e&&t&&s&&(console.log("ð Checking like status for food:",{foodId:e,kitchenId:t,userId:o==null?void 0:o.id}),n(Ho({foodId:e,kitchenId:t})).then(G=>{console.log("â Like status checked:",G),a(!0)}))},[n,e,t,s,o==null?void 0:o.id]),{food:s,kitchen:l,reviews:c||[],reviewStats:d||M,kitchenStats:M,likes:p,isLiked:R,cartQuantity:x,loading:u||E,reviewsLoading:O,kitchenStatsLoading:E,kitchenReviewsLoading:W,reviewSubmissionLoading:w,cartLoading:k,error:h,user:o,toggleLike:F,addToCartAction:z,updateCartItemQuantity:Q,addReview:K,loadFoodDetail:S,loadKitchenStats:I,loadKitchenReviews:T,loadFoodReviews:N,clearData:Y}},Va=({src:e,alt:t,fallbackSrc:n=dn,className:i=""})=>{const[a,o]=f.useState(null),[s,l]=f.useState(),[c,d]=f.useState(!1),[p,u]=f.useState(!1),h=f.useRef(),m=f.useCallback(j=>{h.current&&h.current.disconnect(),h.current=new IntersectionObserver(P=>{P.forEach(q=>{q.isIntersecting&&(o(e),h.current.disconnect())})},{threshold:.1,rootMargin:"50px"}),j&&h.current.observe(j),l(j)},[e]),g=()=>{d(!0)},C=()=>{u(!0),o(n),d(!0)};return r.jsxs("div",{className:"lazy-image-container",style:{position:"relative"},children:[!c&&r.jsx("div",{className:"image-placeholder",children:r.jsx("div",{className:"image-skeleton"})}),r.jsx("img",{ref:m,src:a||n,alt:t,className:`${i} ${c?"loaded":"loading"}`,onLoad:g,onError:C,loading:"lazy",style:{opacity:c?1:0,transition:"opacity 0.3s ease-in-out"}}),p&&r.jsx("div",{className:"image-error-indicator",children:r.jsx("small",{children:"Using fallback image"})})]})},Za=({rating:e=0,maxStars:t=5,size:n="small",showRating:i=!1,reviewCount:a=null,className:o=""})=>{const s=Math.max(0,Math.min(e,t)),l={small:{width:12,height:12,gap:"2px"},medium:{width:16,height:17,gap:"3px"},large:{width:20,height:21,gap:"4px"}},{width:c,height:d,gap:p}=l[n]||l.small,u=()=>{const h=[];for(let m=1;m<=t;m++){const g=Math.max(0,Math.min(1,s-(m-1)));h.push(r.jsxs("div",{className:"star-container",style:{position:"relative"},children:[r.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"star-empty",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M5.8542 1.20117C5.80112 1.20117 5.67045 1.21576 5.60103 1.35459L4.53587 3.48434C4.36728 3.82092 4.04237 4.05484 3.6667 4.10851L1.28203 4.45209C1.12453 4.47484 1.07087 4.59151 1.05453 4.6405C1.03995 4.68776 1.01662 4.80792 1.12512 4.91176L2.84945 6.56842C3.1242 6.83267 3.24903 7.21359 3.1837 7.58634L2.7777 9.9255C2.75262 10.0719 2.8442 10.1571 2.88503 10.1863C2.9282 10.2189 3.0437 10.2837 3.18662 10.209L5.3187 9.10359C5.6547 8.93034 6.05487 8.93034 6.3897 9.10359L8.5212 10.2084C8.6647 10.2825 8.7802 10.2178 8.82395 10.1863C8.86478 10.1571 8.95637 10.0719 8.93128 9.9255L8.52412 7.58634C8.45878 7.21359 8.58362 6.83267 8.85837 6.56842L10.5827 4.91176C10.6918 4.80792 10.6684 4.68717 10.6533 4.6405C10.6375 4.59151 10.5839 4.47484 10.4264 4.45209L8.0417 4.10851C7.66662 4.05484 7.3417 3.82092 7.17312 3.48376L6.10678 1.35459C6.03795 1.21576 5.90728 1.20117 5.8542 1.20117Z",fill:"#E5E7EB",stroke:"#E5E7EB",strokeWidth:"0.2"})}),g>0&&r.jsx("div",{className:"star-filled",style:{position:"absolute",top:0,left:0,width:`${g*100}%`,overflow:"hidden"},children:r.jsx("svg",{width:c,height:d,viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M9.45251 6.92967C9.30143 7.07609 9.23201 7.28784 9.26643 7.4955L9.78502 10.3655C9.82876 10.6088 9.7261 10.8549 9.52251 10.9955C9.32301 11.1413 9.0576 11.1588 8.84001 11.0422L6.25643 9.69467C6.1666 9.64684 6.06685 9.62117 5.96476 9.61825H5.80668C5.75185 9.62642 5.69818 9.64392 5.64918 9.67075L3.06501 11.0247C2.93726 11.0888 2.7926 11.1116 2.65085 11.0888C2.30551 11.0235 2.0751 10.6945 2.13168 10.3474L2.65085 7.47742C2.68526 7.268 2.61585 7.05509 2.46476 6.90633L0.358348 4.86467C0.182181 4.69375 0.120931 4.43709 0.201431 4.2055C0.279598 3.9745 0.479098 3.80592 0.720015 3.768L3.61918 3.34742C3.83968 3.32467 4.03335 3.1905 4.13251 2.99217L5.41001 0.373001C5.44035 0.314668 5.47943 0.261001 5.52668 0.215501L5.57918 0.174668C5.6066 0.144335 5.6381 0.119251 5.6731 0.0988346L5.73668 0.0755013L5.83585 0.034668H6.08143C6.30076 0.057418 6.49385 0.188668 6.59476 0.384668L7.88918 2.99217C7.98251 3.18292 8.16393 3.31533 8.37335 3.34742L11.2725 3.768C11.5175 3.803 11.7223 3.97217 11.8033 4.2055C11.8798 4.43942 11.8138 4.69608 11.6342 4.86467L9.45251 6.92967Z",fill:"#FF981F"})})})]},m))}return h};return r.jsxs("div",{className:`star-rating ${n} ${o}`,children:[r.jsx("div",{className:"stars-container",style:{gap:p},children:u()}),(i||a)&&r.jsxs("div",{className:"rating-info",children:[i&&r.jsx("span",{className:"rating-value",children:r.jsx("strong",{children:s.toFixed(1)})}),a&&r.jsxs("span",{className:"review-count",children:["(",a>1e3?`${(a/1e3).toFixed(1)}k`:a,"+ reviews)"]})]})]})},ls=({onClose:e})=>{console.log("ð WeChatAuthDialog rendered!");const{signInWithTestUser:t}=f.useContext(Pn),n=async()=>{try{console.log("ð§ª Using test user bypass"),await t(),sessionStorage.removeItem("wechat_pending_cart_action"),e()}catch(o){console.error("â Error with test user bypass:",o)}},i=async()=>{try{const o=ki(),s=ji();console.log("ð Auth context:",{isMobile:o,isWeChat:s}),sessionStorage.setItem("wechat_pending_cart_action","true");const l=Ci();console.log("ð Generated auth URL:",l),s?(console.log("ð± WeChat browser detected - direct redirect"),window.location.href=l):o?(console.log("ð± Mobile device - attempting WeChat authentication"),window.location.href=l):(console.log("ð¥ï¸ Desktop - direct redirect"),window.location.href=l)}catch(o){console.error("â Error in WeChat authentication:",o);const s=Ci();window.location.href=s}},a=o=>{o.target===o.currentTarget&&e()};return r.jsx("div",{className:"wechat-auth-dialog-overlay",onClick:a,children:r.jsxs("div",{className:"wechat-auth-dialog",children:[r.jsxs("div",{className:"wechat-auth-header",children:[r.jsx("h3",{children:"Sign in to Continue"}),r.jsx("button",{className:"wechat-auth-close",onClick:e,"aria-label":"Close dialog",children:"Ã"})]}),r.jsxs("div",{className:"wechat-auth-content",children:[r.jsx("div",{className:"wechat-auth-icon",children:r.jsx("img",{src:Ai,alt:"WeChat"})}),r.jsx("p",{className:"wechat-auth-message",children:"Please sign in with WeChat to add items to your cart"}),r.jsxs("button",{className:"wechat-auth-button",onClick:i,children:[r.jsx("img",{src:Ai,alt:"WeChat"}),"Continue with WeChat"]}),r.jsx("button",{className:"wechat-auth-button",onClick:n,style:{backgroundColor:"#ff6b35",marginTop:"10px",fontSize:"14px"},children:"ð§ª Skip for Testing (Temporary)"}),r.jsx("p",{className:"wechat-auth-note",children:ki()&&!ji()?"This will open WeChat app for secure authentication":"We'll redirect you to WeChat for secure authentication"})]})]})})},cf=({food:e,isLiked:t,handleLikeToggle:n})=>{console.log("ð ~ CustomSlider ~ isLiked:",t);const a=(()=>{if(console.log("ð¼ï¸ [CustomSlider] Checking imagesUrl array:",e),e!=null&&e.imageUrls&&Array.isArray(e.imageUrls)&&e.imageUrls.length>0)return console.log("ð¼ï¸ [CustomSlider] Using imageUrls array with",e.imageUrls.length,"images"),e.imageUrls;if(e!=null&&e.imageUrl&&!(e!=null&&e.imageUrls))return[e.imageUrl]})()||[],[o,s]=f.useState(0),[l,c]=f.useState(!1);f.useEffect(()=>{if(!l||!a||a.length<=1)return;const m=setInterval(()=>{s(g=>(g+1)%a.length)},2e3);return()=>clearInterval(m)},[l,a]),f.useEffect(()=>{a&&a.length>1&&c(!1)},[a]);const d=()=>{c(!1),setTimeout(()=>{a&&a.length>1&&c(!1)},3e3)},p=()=>{!a||a.length===0||(d(),s(m=>m===0?a.length-1:m-1))},u=()=>{!a||a.length===0||(d(),s(m=>(m+1)%a.length))},h=m=>{!a||a.length===0||(d(),s(m))};return!a||a.length===0?r.jsx("div",{className:"custom-slider",children:r.jsx("div",{className:"slider-container",children:r.jsx("div",{className:"slider-slide",children:r.jsx(Va,{src:dn,alt:"No image available",fallbackSrc:dn,className:"slider-image"})})})}):r.jsx("div",{className:`custom-slider ${l?"auto-sliding":""}`,children:r.jsxs("div",{className:"slider-container",children:[r.jsx("div",{className:"slider-track",style:{transform:`translateX(-${o*100}%)`},children:a.map((m,g)=>r.jsx("div",{className:"slider-slide",children:r.jsx(Va,{src:m,alt:`${(e==null?void 0:e.name)||"Food"} Image ${g+1}`,fallbackSrc:dn,className:"slider-image"})},g))}),r.jsx("div",{className:`icon heart-icon ${t?"liked":""}`,onClick:n,children:r.jsx("svg",{width:"18",height:"18",viewBox:"0 0 18 18",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M9.80568 16.3852C9.53252 16.4816 9.08261 16.4816 8.80945 16.3852C6.47955 15.5898 1.27344 12.2717 1.27344 6.64781C1.27344 4.16527 3.27393 2.15674 5.74041 2.15674C7.20262 2.15674 8.49612 2.86374 9.30756 3.95638C10.119 2.86374 11.4205 2.15674 12.8747 2.15674C15.3412 2.15674 17.3417 4.16527 17.3417 6.64781C17.3417 12.2717 12.1356 15.5898 9.80568 16.3852Z",stroke:"#FF5555",fill:t?"#FF5555":"transparent",strokeWidth:"1.20512"})})}),a.length>1&&r.jsx("button",{className:"slider-btn slider-prev",onClick:p,"aria-label":"Previous image",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:r.jsx("path",{d:"M12.5 15L7.5 10L12.5 5",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.length>1&&r.jsx("button",{className:"slider-btn slider-next",onClick:u,"aria-label":"Next image",children:r.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"none",children:r.jsx("path",{d:"M7.5 5L12.5 10L7.5 15",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"})})}),a.length>1&&r.jsx("div",{className:"slider-dots",children:a.map((m,g)=>r.jsx("button",{className:`slider-dot ${o===g?"active":""}`,onClick:()=>h(g),"aria-label":`Go to slide ${g+1}`},g))})]})})};function Ja(){var V,A;const[e]=fr(),t=Ut(),n=jt(),i=()=>{if(console.log("ð [FoodDetailPage] Current pathname:",t.pathname),console.log("ð [FoodDetailPage] Search params:",e.toString()),t.pathname==="/share"||t.pathname==="/share/"){const L={kitchenId:e.get("kitchenId"),foodId:e.get("foodId"),selectedDate:e.get("date")};return console.log("ð [FoodDetailPage] Extracted params:",L),L}return console.log("ð [FoodDetailPage] Using fallback params (pathname not /share)"),{kitchenId:null,foodId:null,selectedDate:null}},{kitchenId:a,foodId:o,selectedDate:s}=i();if(!a||!o)return r.jsx("div",{className:"mobile-container",children:r.jsx("div",{className:"padding-20",children:r.jsxs("div",{className:"alert alert-danger",role:"alert",children:[r.jsx("h4",{children:"Invalid URL"}),r.jsx("p",{children:"Missing required parameters. Please check your link and try again."}),r.jsxs("small",{className:"text-muted",children:["Expected: kitchenId and foodId"," ",t.pathname==="/share"?"as query parameters":"as URL parameters"]})]})})});const[l,c]=f.useState("reviews"),[d,p]=f.useState(1),[u,h]=f.useState(""),[m,g]=f.useState(!1),[C,j]=f.useState(s),[P,q]=f.useState(null);f.useEffect(()=>{console.log("ð showWeChatDialog state changed to:",m)},[m]);const[_,w]=f.useState({isAvailable:!0,quantity:1,orderType:"GO_GRAB"}),{food:v,kitchen:k,likes:M,reviews:$,reviewStats:b,loading:O,error:E,isLiked:W,cartQuantity:R,toggleLike:x,addToCartAction:y,updateCartItemQuantity:S}=lf(o,a),I=Fi.useMemo(()=>{var D,J;return s?"PRE_ORDER":(((D=v==null?void 0:v.availability)==null?void 0:D.numAvailable)||(v==null?void 0:v.numAvailable)||0)>0?"GO_GRAB":(J=k==null?void 0:k.preorderSchedule)!=null&&J.dates&&Object.values(k.preorderSchedule.dates).flat().some(le=>le.foodItemId===(v==null?void 0:v.id))?"PRE_ORDER":"GO_GRAB"},[s,v,k]);console.log("FoodDetailPage data:",{food:v,kitchen:k,likes:M,reviews:$,reviewStats:b,loading:O,error:E,selectedDate:s,orderType:I,pickupDate:C,pickupTime:P,urlPattern:t.pathname,extractedParams:{kitchenId:a,foodId:o,selectedDate:s},kitchenPreorderSchedule:k==null?void 0:k.preorderSchedule});const T=f.useCallback(L=>{j(L),console.log("ð Date changed to:",L)},[]),N=f.useCallback(L=>{q(L),console.log("â° Time changed to:",L)},[]),F=f.useCallback(L=>{console.log(`[FoodDetailPage] Quantity changed to: ${L}`),p(L),R>0&&(console.log(`[FoodDetailPage] Updating cart quantity to: ${L}`),S(L))},[R,S]),U=f.useCallback(L=>{w(L)},[]),z=f.useCallback(L=>{console.error(`[FoodDetailPage] Quantity error: ${L}`),ae.error(L)},[]),Q=f.useCallback(L=>{console.warn(`[FoodDetailPage] Quantity warning: ${L}`),ae.warning(L)},[]),K=f.useCallback(()=>{if(console.log("[FoodDetailPage] Add to Cart button clicked!"),console.log("[FoodDetailPage] Availability status:",_),console.log("[FoodDetailPage] Selected quantity:",d),console.log("[FoodDetailPage] Special instructions:",u),!_.isAvailable){ae.error("This item is currently unavailable");return}const L={quantity:d,orderType:_.orderType,selectedDate:C||s,selectedTime:P,specialInstructions:u.trim()};console.log(`Adding ${d} items to cart`,{foodId:o,kitchenId:a,selectedDate:C||s,selectedTime:P,orderType:_.orderType,quantity:d,specialInstructions:u.trim()}),console.log("[FoodDetailPage] Calling addToCartAction with:",L);const D=y(L);if(D)if(D.success){console.log("â Success:",D.message),ae.cart(D.message);const J=new URLSearchParams({kitchenId:a||"",foodId:o||"",...s&&{date:s}}).toString();n("/foods",{replace:!0,state:{from:{pathname:t.pathname,search:t.search,fullUrl:`/share?${J}`}}})}else console.log("â¹ï¸ Info:",D.message),ae.warning(D.message)},[_,d,u,o,a,C,P,y,n]);f.useEffect(()=>{R>0&&p(R)},[R]),f.useEffect(()=>{s&&!C&&j(s)},[s,C]),f.useEffect(()=>{(async()=>{console.log("=== DEBUGGING REVIEWS ==="),console.log("URL params - foodId:",o,"kitchenId:",a,"selectedDate:",s);const D=await bm();if(console.log("Connection test:",D),o){const J=await xm(o);console.log("Debug reviews result:",J)}})()},[o,a,s]),console.log("ð ~ FoodDetailPage ~ reviewStats:",b);const Y=(b==null?void 0:b.averageRating)||4.5,te=(b==null?void 0:b.totalReviews)||0,me=(b==null?void 0:b.ratingPercentages)||{5:90,4:70,3:40,2:20,1:8},De=($==null?void 0:$.length)>0?$.map(L=>({id:L.id,image:L.userProfile||sf,date:L.timeStamp?(()=>{try{let D;return typeof L.timeStamp=="string"?L.timeStamp.includes(" at ")?D=new Date(L.timeStamp.replace(" at "," ").replace(" UTC+5","")):D=new Date(L.timeStamp):L.timeStamp.seconds?D=new Date(L.timeStamp.seconds*1e3):D=new Date(L.timeStamp),D.toLocaleDateString()}catch(D){return console.warn("Error parsing timestamp:",L.timeStamp),"Unknown date"}})():"Unknown date",name:L.userName||"Anonymous User",rating:L.rating||5,description:L.message||"No comment provided"})):[],G=f.useCallback(()=>{x(),console.log(`[FoodDetailPage] Food ${W?"unliked":"liked"}`)},[x,W]);return O?r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsx(ss,{isLoading:O,text:"Loading food details...",overlay:!0,size:"medium"})})}):r.jsxs("div",{className:"container",children:[r.jsx("div",{className:"mobile-container",children:r.jsxs("div",{className:"product-detail",children:[r.jsxs("div",{className:"padding-20",children:[r.jsx("h2",{className:"title text-center",children:v==null?void 0:v.name}),r.jsxs("h2",{className:"text text-center",children:["By ",v==null?void 0:v.kitchenName]}),r.jsxs("div",{className:"review-info",children:[r.jsxs("div",{className:"left flex-0",children:[r.jsx("div",{children:r.jsx("svg",{width:"15",height:"14",viewBox:"0 0 15 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M13.7499 4.80322L9.97336 4.26881L8.28761 0.940677C8.12458 0.667862 7.82468 0.5 7.50028 0.5C7.17588 0.5 6.87597 0.667862 6.71295 0.940677L5.02719 4.26966L1.25064 4.80322C0.920725 4.84924 0.64636 5.07363 0.543084 5.38188C0.439808 5.69013 0.525567 6.02868 0.764246 6.25497L3.49628 8.84616L2.85154 12.5053C2.79531 12.8246 2.93026 13.1472 3.19965 13.3375C3.46905 13.5279 3.82617 13.553 4.12089 13.4022L7.50028 11.6739L10.8779 13.4005C11.1726 13.5513 11.5298 13.5262 11.7992 13.3358C12.0685 13.1455 12.2035 12.8229 12.1473 12.5036L11.5025 8.84446L14.2363 6.25497C14.4744 6.02885 14.56 5.69094 14.4572 5.38312C14.3543 5.0753 14.0809 4.85087 13.7517 4.80407L13.7499 4.80322Z",fill:"#FBBC04"})})}),r.jsx("div",{className:"text",children:r.jsx("strong",{children:k!=null&&k.rating&&(k!=null&&k.ratingCount)?parseFloat(parseInt(k==null?void 0:k.rating)/parseInt(k==null?void 0:k.ratingCount)).toFixed(1):"No ratings yet"})})]}),r.jsx("div",{className:"line"}),r.jsxs("div",{className:"left flex-0",children:[r.jsx("div",{children:r.jsx("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7.41337 11.8736C7.18671 11.9536 6.81337 11.9536 6.58671 11.8736C4.65337 11.2136 0.333374 8.46023 0.333374 3.79356C0.333374 1.73356 1.99337 0.0668945 4.04004 0.0668945C5.25337 0.0668945 6.32671 0.653561 7.00004 1.56023C7.67337 0.653561 8.75337 0.0668945 9.96004 0.0668945C12.0067 0.0668945 13.6667 1.73356 13.6667 3.79356C13.6667 8.46023 9.34671 11.2136 7.41337 11.8736Z",fill:"#FF5555"})})}),r.jsx("div",{className:"text",children:r.jsx("strong",{children:(V=v==null?void 0:v.numOfLike)!=null?V:0})})]}),r.jsx("div",{className:"line"}),r.jsxs("div",{className:"left flex-0",children:[r.jsx("div",{children:r.jsxs("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M13.3067 5.9731C12.86 5.47977 12.1867 5.1931 11.2534 5.0931V4.58644C11.2534 3.6731 10.8667 2.7931 10.1867 2.17977C9.50003 1.5531 8.6067 1.25977 7.68003 1.34644C6.0867 1.49977 4.7467 3.03977 4.7467 4.70644V5.0931C3.81337 5.1931 3.14003 5.47977 2.69337 5.9731C2.0467 6.6931 2.0667 7.6531 2.14003 8.31977L2.6067 12.0331C2.7467 13.3331 3.27337 14.6664 6.14003 14.6664H9.86003C12.7267 14.6664 13.2534 13.3331 13.3934 12.0398L13.86 8.3131C13.9334 7.6531 13.9534 6.6931 13.3067 5.9731ZM7.77337 2.2731C8.44003 2.2131 9.07337 2.41977 9.5667 2.86644C10.0534 3.30644 10.3267 3.9331 10.3267 4.58644V5.0531H5.67337V4.70644C5.67337 3.51977 6.65337 2.37977 7.77337 2.2731ZM8.00003 12.3864C6.6067 12.3864 5.47337 11.2531 5.47337 9.85977C5.47337 8.46644 6.6067 7.3331 8.00003 7.3331C9.39337 7.3331 10.5267 8.46644 10.5267 9.85977C10.5267 11.2531 9.39337 12.3864 8.00003 12.3864Z",fill:"#3FC045"}),r.jsx("path",{d:"M7.62 11.0933C7.49334 11.0933 7.36667 11.0466 7.26667 10.9466L6.60667 10.2866C6.41334 10.0933 6.41334 9.7733 6.60667 9.57997C6.8 9.38664 7.12 9.38664 7.31334 9.57997L7.63334 9.89997L8.7 8.9133C8.9 8.72664 9.22 8.73997 9.40667 8.93997C9.59334 9.13997 9.58 9.45997 9.38 9.64664L7.96 10.96C7.86 11.0466 7.74 11.0933 7.62 11.0933Z",fill:"#3FC045"})]})}),r.jsx("div",{className:"text",children:r.jsx("strong",{children:(A=v==null?void 0:v.numOfSoldItem)!=null?A:0})})]}),r.jsx("div",{className:"line"}),r.jsxs("div",{className:"left",children:[r.jsx("div",{children:r.jsxs("svg",{width:"17",height:"16",viewBox:"0 0 17 16",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[r.jsx("path",{d:"M10.1667 6.00016C10.1667 6.92063 9.42051 7.66683 8.50004 7.66683C7.57957 7.66683 6.83337 6.92063 6.83337 6.00016C6.83337 5.07969 7.57957 4.3335 8.50004 4.3335C9.42051 4.3335 10.1667 5.07969 10.1667 6.00016Z",stroke:"#3FC045"}),r.jsx("path",{d:"M12.6481 11.3335C13.5778 12.6592 14.0225 13.3652 13.7576 13.9334C13.731 13.9904 13.6999 14.0454 13.6646 14.098C13.2816 14.6668 12.2916 14.6668 10.3118 14.6668H6.68811C4.7083 14.6668 3.71839 14.6668 3.33536 14.098C3.29999 14.0454 3.26888 13.9904 3.24232 13.9334C2.97742 13.3652 3.42213 12.6592 4.35181 11.3335",stroke:"#3FC045",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M9.33831 11.6626C9.11344 11.8791 8.81291 12.0002 8.50017 12.0002C8.18737 12.0002 7.88684 11.8791 7.66197 11.6626C5.60291 9.66736 2.8435 7.4385 4.18918 4.20265C4.91677 2.45304 6.66333 1.3335 8.50017 1.3335C10.337 1.3335 12.0835 2.45305 12.8111 4.20265C14.1551 7.43443 11.4024 9.67423 9.33831 11.6626Z",stroke:"#3FC045"})]})}),r.jsx("div",{className:"text",children:(k==null?void 0:k.address)||"Unknown location"})]})]}),r.jsx(cf,{food:v,isLiked:W,handleLikeToggle:G}),r.jsxs("div",{className:"quantity-warpper",children:[r.jsxs("div",{className:"price",children:[r.jsx("sup",{children:"$"}),(v==null?void 0:v.cost)&&parseFloat(v==null?void 0:v.cost).toFixed(2)]}),r.jsx($t,{food:v,kitchen:k,selectedDate:C||s,initialQuantity:Math.max(R,1),onQuantityChange:F,onAvailabilityChange:U,onError:z,onWarning:Q,showAvailabilityInfo:!1,showErrorMessages:!0,size:"large",className:"food-detail-quantity"})]}),r.jsx("div",{className:"pickup-details",children:r.jsx(bn,{food:v,kitchen:k,orderType:I,selectedDate:C,selectedTime:P,onDateChange:T,onTimeChange:N,disabled:!v||!k,className:"food-detail-picker"})})]}),r.jsx("div",{className:"hr"}),r.jsxs("div",{className:"padding-20",children:[r.jsx("h3",{className:"small-title mb-8",children:"Special Instruction"}),r.jsx("p",{className:"body-text mb-16",children:"Please let us know if you are allergic to anything or if we need to avoid anything."}),r.jsx("textarea",{className:"special-instructions-input",placeholder:"Enter your special instructions here...",value:u,onChange:L=>h(L.target.value),rows:3,style:{width:"100%",padding:"12px",border:"1px solid #e0e0e0",borderRadius:"8px",fontSize:"14px",fontFamily:"inherit",resize:"vertical",marginBottom:"16px"}}),r.jsxs("div",{className:"add-to-cart-action mt-2",children:[r.jsx("button",{className:`button ${_.isAvailable?"":"sold-out"}`,onClick:L=>{console.log("ð¥ BUTTON CLICKED! Event:",L),console.log("ð¥ handleAddToCart type:",typeof K),_.isAvailable||alert("â¡ this food to the chef that we want it! When it is added to Go&Grab or Pre-Order, you will be notified."),K(L)},disabled:!_.isAvailable,style:{pointerEvents:"auto"},children:_.isAvailable?"Add to Cart":"Sold Out"}),r.jsx("div",{className:"icon",children:r.jsxs("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:()=>{const L=new URLSearchParams({kitchenId:a||"",foodId:o||"",...s&&{date:s}}).toString();n("/foods",{replace:!0,state:{from:{pathname:t.pathname,search:t.search,fullUrl:`/share?${L}`}}})},children:[r.jsx("path",{d:"M6 2L3 6V20C3 20.5304 3.21071 21.0391 3.58579 21.4142C3.96086 21.7893 4.46957 22 5 22H19C19.5304 22 20.0391 21.7893 20.4142 21.4142C20.7893 21.0391 21 20.5304 21 20V6L18 2H6Z",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M3 6H21",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),r.jsx("path",{d:"M16 10C16 11.0609 15.5786 12.0783 14.8284 12.8284C14.0783 13.5786 13.0609 14 12 14C10.9391 14 9.92172 13.5786 9.17157 12.8284C8.42143 12.0783 8 11.0609 8 10",stroke:"white",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]})})]}),r.jsxs("div",{className:"custom-accordian",children:[r.jsx("button",{className:`button${l==="description"?" active":""}`,onClick:()=>c("description"),children:"Description"}),r.jsx("button",{className:`button${l==="reviews"?" active":""}`,onClick:()=>c("reviews"),children:"Reviews"})]}),r.jsxs("div",{className:"accordian-content",children:[l==="description"&&r.jsx("div",{className:"description-content",children:(v==null?void 0:v.description)||"No description available."}),l==="reviews"&&r.jsxs("div",{className:"reviews-content",children:[r.jsxs("div",{className:"overall-reviews",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"bold",children:Y>0?Y.toFixed(1):"No ratings yet"}),r.jsx(Za,{rating:Y,size:"small",showRating:!1}),r.jsxs("div",{className:"body-text",children:["(",te,"+ reviews)"]})]}),r.jsx("div",{className:"line"}),r.jsx("div",{className:"right",children:[5,4,3,2,1].map(L=>r.jsxs("div",{className:"review",children:[r.jsx("div",{className:"text",children:L}),r.jsx("div",{className:"progress-bar",children:r.jsx("div",{className:"fill",style:{width:`${me[L]}%`}})})]},L))})]}),r.jsx("div",{className:"reviews-list",children:De.map((L,D)=>r.jsxs("div",{className:"review-item",children:[r.jsxs("div",{className:"header",children:[r.jsxs("div",{className:"profile",children:[r.jsx("img",{src:L.image,alt:L.name,className:"image"}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"name",children:L.name}),r.jsx("div",{className:"rating",children:r.jsx(Za,{rating:L.rating||5,size:"small",showRating:!1})}),r.jsx("div",{className:"date",children:L.date})]})]}),r.jsx("div",{className:"icon"})]}),r.jsx("div",{className:"description",children:L.description})]},L.id||D))})]})]})]})]})}),m&&r.jsx(ls,{onClose:handleWeChatDialogClose})]})}function df(){const e=jt(),t=gt(),n=Ut(),i=Se(w=>w.cart.items),{getCartQuantity:a,handleQuantityChange:o}=sa(),[s,l]=f.useState(new Set);f.useEffect(()=>{var w;if((w=n.state)!=null&&w.editItem){const v=n.state.editItem;l(new Set([v])),window.history.replaceState({},document.title)}},[n.state]);const c=i.length>0?i[0].kitchenId:null,{kitchen:d,foods:p,loading:u}=os(c);console.log("OrderPage - Kitchen data:",{kitchenId:c,hasKitchen:!!d,foodsCount:p.length,kitchenLoading:u});const h=f.useMemo(()=>{const w=new Map;return p.forEach(v=>{w.set(v.id,v)}),w},[p]),m=f.useCallback((w,v=null)=>a(w,v),[a]),g=w=>{var M,$,b,O;const v=h.get(w.foodId);if(console.log(`OrderPage - Getting food data for ${w.foodId}:`,{hasFullData:!!v,fullFoodData:v?{id:v.id,name:v.name,availability:v.availability,numAvailable:v.numAvailable}:null}),v)return v;const k={id:w.foodId,name:(M=w.food)==null?void 0:M.name,cost:($=w.food)==null?void 0:$.cost,imageUrl:(b=w.food)==null?void 0:b.imageUrl,kitchenId:w.kitchenId,description:(O=w.food)==null?void 0:O.description,availability:{numAvailable:99},numAvailable:99};return console.log(`OrderPage - Using fallback data for ${w.foodId}:`,k),k},C=f.useMemo(()=>{const w={grabAndGo:[],preOrders:{}};i.forEach(k=>{var $,b,O,E,W,R,x,y;const M=(($=k.pickupDetails)==null?void 0:$.orderType)||k.orderType||(k.isPreOrder?"PRE_ORDER":"GO_GRAB");if(M==="GO_GRAB"||M==="Go&Grab")w.grabAndGo.push({...k,displayPickupTime:((b=k.pickupDetails)==null?void 0:b.display)||"Pick up today",displayPickupClock:((O=k.pickupDetails)==null?void 0:O.time)||Z().add(30,"minutes").format("h:mm A")});else if(M==="PRE_ORDER"||M==="Pre-Order"||k.isPreOrder||k.selectedDate){const S=k.selectedDate||((E=k.pickupDetails)==null?void 0:E.date);S&&(w.preOrders[S]||(w.preOrders[S]=[]),w.preOrders[S].push({...k,displayPickupTime:((W=k.pickupDetails)==null?void 0:W.display)||`Pick up ${Z(S).format("MMM D ddd")}`,displayPickupClock:((R=k.pickupDetails)==null?void 0:R.time)||"6:30 PM"}))}else w.grabAndGo.push({...k,displayPickupTime:((x=k.pickupDetails)==null?void 0:x.display)||"Pick up today",displayPickupClock:((y=k.pickupDetails)==null?void 0:y.time)||Z().add(30,"minutes").format("h:mm A")})});const v={};return Object.keys(w.preOrders).sort((k,M)=>Z(k).diff(Z(M))).forEach(k=>{v[k]=w.preOrders[k]}),w.preOrders=v,w},[i]),j=f.useMemo(()=>{const w=i.reduce((M,$)=>{var W,R,x;const b=h.get($.foodId),O=(b==null?void 0:b.cost)||((W=$.food)==null?void 0:W.cost)||0,E=typeof O=="string"?parseFloat(O):O;return console.log(`OrderPage - Pricing calculation for ${$.foodId}:`,{itemName:(R=$.food)==null?void 0:R.name,quantity:$.quantity,originalCost:(x=$.food)==null?void 0:x.cost,enrichedCost:b==null?void 0:b.cost,finalCost:E,lineTotal:E*$.quantity}),M+E*$.quantity},0),v=w*.0725,k=w+v;return console.log("OrderPage - Total calculation:",{subtotal:w.toFixed(2),tax:v.toFixed(2),total:k.toFixed(2),cartItemsCount:i.length}),{subtotal:w.toFixed(2),tax:v.toFixed(2),total:k.toFixed(2)}},[i,h]),P=()=>{t(ra()),ae.info("Cart cleared successfully")},q=w=>Z(w).format("MMM D ddd"),_=(i==null?void 0:i.length)||0;return r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsxs("div",{className:"padding-20",children:[r.jsxs("div",{className:"back-link-title",children:[r.jsx(Tt,{className:"back-link",to:"/foods",children:r.jsx("svg",{width:"9",height:"14",viewBox:"0 0 9 14",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:r.jsx("path",{d:"M7.94194 0.51631C8.18602 0.760388 8.18602 1.15612 7.94194 1.40019L2.34222 6.99992L7.94194 12.5996C8.18602 12.8437 8.18602 13.2394 7.94194 13.4835C7.69786 13.7276 7.30214 13.7276 7.05806 13.4835L1.01639 7.44186C0.772315 7.19778 0.772315 6.80205 1.01639 6.55798L7.05806 0.51631C7.30214 0.272233 7.69786 0.272233 7.94194 0.51631Z",fill:"#212226"})})}),r.jsxs("div",{className:"title",children:["Order (",_," Item",_!==1?"s":"",")"]})]}),i.length>0&&i[0].kitchen&&r.jsx("h2",{className:"small-title mb-2",children:i[0].kitchen.name}),i.length===0?r.jsxs("div",{className:"text-center py-5",children:[r.jsx("p",{children:"Your cart is empty"}),r.jsx(Tt,{to:"/foods",className:"action-button",style:{textDecoration:"none",display:"inline-block",padding:"12px 24px",marginTop:"16px"},children:"Continue Shopping"})]}):r.jsxs(r.Fragment,{children:[C.grabAndGo.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"small-title mb-20",children:"Go&Grab"}),r.jsx("div",{className:"menu-listing",children:C.grabAndGo.map((w,v)=>{var M,$,b,O,E;const k=m(w.foodId);return r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:((M=w.food)==null?void 0:M.imageUrl)||"/src/assets/images/product.png",alt:(($=w.food)==null?void 0:$.name)||"Food item",onError:W=>{W.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:((b=w.food)==null?void 0:b.name)||"Unknown Item"}),r.jsx("div",{className:"text",children:((O=w.food)==null?void 0:O.description)||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",((E=w.food)==null?void 0:E.cost)||"0.00"]})]})]}),r.jsx("div",{className:"quantity-warpper",children:r.jsx("div",{className:"right mb-1",children:r.jsx($t,{food:g(w),kitchen:d||w.kitchen,selectedDate:null,size:"small",initialQuantity:k,minQuantity:0,onQuantityChange:W=>{console.log("ð OrderPage Go&Grab quantity change:",{foodId:w.foodId,newQuantity:W,currentQty:k});const R=g(w);o({food:R,kitchen:d||w.kitchen,newQuantity:W,currentQuantity:k,selectedDate:null,specialInstructions:w.specialInstructions||"",isPreOrder:!1})}})})})]},`grab-${w.foodId}-${v}`)})})]}),Object.entries(C.preOrders).map(([w,v])=>r.jsxs("div",{children:[r.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",q(w)]}),r.jsx("div",{className:"menu-listing",children:v.map((k,M)=>{var b,O,E,W,R;const $=m(k.foodId,w);return r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:((b=k.food)==null?void 0:b.imageUrl)||"/src/assets/images/product.png",alt:((O=k.food)==null?void 0:O.name)||"Food item",onError:x=>{x.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:((E=k.food)==null?void 0:E.name)||"Unknown Item"}),r.jsx("div",{className:"text",children:((W=k.food)==null?void 0:W.description)||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",((R=k.food)==null?void 0:R.cost)||"0.00"]})]})]}),r.jsxs("div",{className:"quantity-warpper",children:[r.jsx("div",{className:"right mb-1",children:r.jsx($t,{food:g(k),kitchen:d||k.kitchen,selectedDate:w,size:"small",initialQuantity:$,minQuantity:0,onQuantityChange:x=>{console.log("ð OrderPage Pre-Order quantity change:",{foodId:k.foodId,date:w,newQuantity:x,currentQty:$});const y=g(k);o({food:y,kitchen:d||k.kitchen,newQuantity:x,currentQuantity:$,selectedDate:w,specialInstructions:k.specialInstructions||"",isPreOrder:!0})}})}),r.jsx("div",{className:"title",children:k.displayPickupTime})]})]},`preorder-${k.foodId}-${w}-${M}`)})})]},w)),r.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsxs("span",{children:["Subtotal (",_," item",_!==1?"s":"","):"]}),r.jsxs("span",{children:["$",j.subtotal]})]}),r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Tax (7.25%):"}),r.jsxs("span",{children:["$",j.tax]})]}),r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["$",j.total]})]})]}),r.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"16px"},children:[r.jsx("button",{onClick:P,style:{flex:"1",padding:"12px 16px",backgroundColor:"#f8f9fa",border:"1px solid #dee2e6",borderRadius:"8px",color:"#6c757d",cursor:"pointer"},children:"Clear Cart"}),r.jsx("button",{className:"action-button",onClick:()=>e("/checkout"),style:{flex:"2"},children:"Check Out"})]})]})]})})})}var cs={exports:{}},uf="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",pf=uf,mf=pf;function ds(){}function us(){}us.resetWarningCache=ds;var ff=function(){function e(i,a,o,s,l,c){if(c!==mf){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:us,resetWarningCache:ds};return n.PropTypes=n,n};cs.exports=ff();var hf=cs.exports;const ne=hr(hf),gf=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function kt(e,t,n){const i=vf(e),{webkitRelativePath:a}=e,o=typeof t=="string"?t:typeof a=="string"&&a.length>0?a:`./${e.name}`;return typeof i.path!="string"&&Xa(i,"path",o),Xa(i,"relativePath",o),i}function vf(e){const{name:t}=e;if(t&&t.lastIndexOf(".")!==-1&&!e.type){const i=t.split(".").pop().toLowerCase(),a=gf.get(i);a&&Object.defineProperty(e,"type",{value:a,writable:!1,configurable:!1,enumerable:!0})}return e}function Xa(e,t,n){Object.defineProperty(e,t,{value:n,writable:!1,configurable:!1,enumerable:!0})}const xf=[".DS_Store","Thumbs.db"];function yf(e){return ht(this,void 0,void 0,function*(){return wn(e)&&bf(e.dataTransfer)?Cf(e.dataTransfer,e.type):wf(e)?kf(e):Array.isArray(e)&&e.every(t=>"getFile"in t&&typeof t.getFile=="function")?jf(e):[]})}function bf(e){return wn(e)}function wf(e){return wn(e)&&wn(e.target)}function wn(e){return typeof e=="object"&&e!==null}function kf(e){return Ii(e.target.files).map(t=>kt(t))}function jf(e){return ht(this,void 0,void 0,function*(){return(yield Promise.all(e.map(n=>n.getFile()))).map(n=>kt(n))})}function Cf(e,t){return ht(this,void 0,void 0,function*(){if(e.items){const n=Ii(e.items).filter(a=>a.kind==="file");if(t!=="drop")return n;const i=yield Promise.all(n.map(Sf));return er(ps(i))}return er(Ii(e.files).map(n=>kt(n)))})}function er(e){return e.filter(t=>xf.indexOf(t.name)===-1)}function Ii(e){if(e===null)return[];const t=[];for(let n=0;n<e.length;n++){const i=e[n];t.push(i)}return t}function Sf(e){if(typeof e.webkitGetAsEntry!="function")return tr(e);const t=e.webkitGetAsEntry();return t&&t.isDirectory?ms(t):tr(e,t)}function ps(e){return e.reduce((t,n)=>[...t,...Array.isArray(n)?ps(n):[n]],[])}function tr(e,t){return ht(this,void 0,void 0,function*(){var n;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const o=yield e.getAsFileSystemHandle();if(o===null)throw new Error(`${e} is not a File`);if(o!==void 0){const s=yield o.getFile();return s.handle=o,kt(s)}}const i=e.getAsFile();if(!i)throw new Error(`${e} is not a File`);return kt(i,(n=t==null?void 0:t.fullPath)!==null&&n!==void 0?n:void 0)})}function Rf(e){return ht(this,void 0,void 0,function*(){return e.isDirectory?ms(e):Df(e)})}function ms(e){const t=e.createReader();return new Promise((n,i)=>{const a=[];function o(){t.readEntries(s=>ht(this,void 0,void 0,function*(){if(s.length){const l=Promise.all(s.map(Rf));a.push(l),o()}else try{const l=yield Promise.all(a);n(l)}catch(l){i(l)}}),s=>{i(s)})}o()})}function Df(e){return ht(this,void 0,void 0,function*(){return new Promise((t,n)=>{e.file(i=>{const a=kt(i,e.fullPath);t(a)},i=>{n(i)})})})}var li=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var i=e.name||"",a=(e.type||"").toLowerCase(),o=a.replace(/\/.*$/,"");return n.some(function(s){var l=s.trim().toLowerCase();return l.charAt(0)==="."?i.toLowerCase().endsWith(l):l.endsWith("/*")?o===l.replace(/\/.*$/,""):a===l})}return!0};function nr(e){return _f(e)||Lf(e)||hs(e)||Ef()}function Ef(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Lf(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _f(e){if(Array.isArray(e))return Ti(e)}function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ir(Object(n),!0).forEach(function(i){fs(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function fs(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Mt(e,t){return Tf(e)||If(e,t)||hs(e,t)||Af()}function Af(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function hs(e,t){if(e){if(typeof e=="string")return Ti(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ti(e,t)}}function Ti(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function If(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,o=!1,s,l;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(i.push(s.value),!(t&&i.length===t));a=!0);}catch(c){o=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return i}}function Tf(e){if(Array.isArray(e))return e}var Of=typeof li=="function"?li:li.default,Pf="file-invalid-type",Nf="file-too-large",Ff="file-too-small",$f="too-many-files",Mf=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",n=t.split(","),i=n.length>1?"one of ".concat(n.join(", ")):n[0];return{code:Pf,message:"File type must be ".concat(i)}},rr=function(t){return{code:Nf,message:"File is larger than ".concat(t," ").concat(t===1?"byte":"bytes")}},or=function(t){return{code:Ff,message:"File is smaller than ".concat(t," ").concat(t===1?"byte":"bytes")}},Uf={code:$f,message:"Too many files"};function gs(e,t){var n=e.type==="application/x-moz-file"||Of(e,t);return[n,n?null:Mf(t)]}function vs(e,t,n){if(it(e.size))if(it(t)&&it(n)){if(e.size>n)return[!1,rr(n)];if(e.size<t)return[!1,or(t)]}else{if(it(t)&&e.size<t)return[!1,or(t)];if(it(n)&&e.size>n)return[!1,rr(n)]}return[!0,null]}function it(e){return e!=null}function Bf(e){var t=e.files,n=e.accept,i=e.minSize,a=e.maxSize,o=e.multiple,s=e.maxFiles,l=e.validator;return!o&&t.length>1||o&&s>=1&&t.length>s?!1:t.every(function(c){var d=gs(c,n),p=Mt(d,1),u=p[0],h=vs(c,i,a),m=Mt(h,1),g=m[0],C=l?l(c):null;return u&&g&&!C})}function kn(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble!="undefined"?e.cancelBubble:!1}function Jt(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function sr(e){e.preventDefault()}function zf(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function qf(e){return e.indexOf("Edge/")!==-1}function Wf(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return zf(e)||qf(e)}function Me(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(i){for(var a=arguments.length,o=new Array(a>1?a-1:0),s=1;s<a;s++)o[s-1]=arguments[s];return t.some(function(l){return!kn(i)&&l&&l.apply(void 0,[i].concat(o)),kn(i)})}}function Gf(){return"showOpenFilePicker"in window}function Kf(e){if(it(e)){var t=Object.entries(e).filter(function(n){var i=Mt(n,2),a=i[0],o=i[1],s=!0;return xs(a)||(console.warn('Skipped "'.concat(a,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),s=!1),(!Array.isArray(o)||!o.every(ys))&&(console.warn('Skipped "'.concat(a,'" because an invalid file extension was provided.')),s=!1),s}).reduce(function(n,i){var a=Mt(i,2),o=a[0],s=a[1];return ar(ar({},n),{},fs({},o,s))},{});return[{description:"Files",accept:t}]}return e}function Yf(e){if(it(e))return Object.entries(e).reduce(function(t,n){var i=Mt(n,2),a=i[0],o=i[1];return[].concat(nr(t),[a],nr(o))},[]).filter(function(t){return xs(t)||ys(t)}).join(",")}function Hf(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function Qf(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function xs(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function ys(e){return/^.*\.[\w]+$/.test(e)}var Vf=["children"],Zf=["open"],Jf=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],Xf=["refKey","onChange","onClick"];function eh(e){return ih(e)||nh(e)||bs(e)||th()}function th(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nh(e){if(typeof Symbol!="undefined"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ih(e){if(Array.isArray(e))return Oi(e)}function ci(e,t){return oh(e)||rh(e,t)||bs(e,t)||ah()}function ah(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bs(e,t){if(e){if(typeof e=="string")return Oi(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Oi(e,t)}}function Oi(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function rh(e,t){var n=e==null?null:typeof Symbol!="undefined"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var i=[],a=!0,o=!1,s,l;try{for(n=n.call(e);!(a=(s=n.next()).done)&&(i.push(s.value),!(t&&i.length===t));a=!0);}catch(c){o=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(o)throw l}}return i}}function oh(e){if(Array.isArray(e))return e}function lr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,i)}return n}function se(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lr(Object(n),!0).forEach(function(i){Pi(e,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lr(Object(n)).forEach(function(i){Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(n,i))})}return e}function Pi(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jn(e,t){if(e==null)return{};var n=sh(e,t),i,a;if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)i=o[a],!(t.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(e,i)&&(n[i]=e[i])}return n}function sh(e,t){if(e==null)return{};var n={},i=Object.keys(e),a,o;for(o=0;o<i.length;o++)a=i[o],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}var la=f.forwardRef(function(e,t){var n=e.children,i=jn(e,Vf),a=ks(i),o=a.open,s=jn(a,Zf);return f.useImperativeHandle(t,function(){return{open:o}},[o]),Fi.createElement(f.Fragment,null,n(se(se({},s),{},{open:o})))});la.displayName="Dropzone";var ws={disabled:!1,getFilesFromEvent:yf,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};la.defaultProps=ws;la.propTypes={children:ne.func,accept:ne.objectOf(ne.arrayOf(ne.string)),multiple:ne.bool,preventDropOnDocument:ne.bool,noClick:ne.bool,noKeyboard:ne.bool,noDrag:ne.bool,noDragEventsBubbling:ne.bool,minSize:ne.number,maxSize:ne.number,maxFiles:ne.number,disabled:ne.bool,getFilesFromEvent:ne.func,onFileDialogCancel:ne.func,onFileDialogOpen:ne.func,useFsAccessApi:ne.bool,autoFocus:ne.bool,onDragEnter:ne.func,onDragLeave:ne.func,onDragOver:ne.func,onDrop:ne.func,onDropAccepted:ne.func,onDropRejected:ne.func,onError:ne.func,validator:ne.func};var Ni={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function ks(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=se(se({},ws),e),n=t.accept,i=t.disabled,a=t.getFilesFromEvent,o=t.maxSize,s=t.minSize,l=t.multiple,c=t.maxFiles,d=t.onDragEnter,p=t.onDragLeave,u=t.onDragOver,h=t.onDrop,m=t.onDropAccepted,g=t.onDropRejected,C=t.onFileDialogCancel,j=t.onFileDialogOpen,P=t.useFsAccessApi,q=t.autoFocus,_=t.preventDropOnDocument,w=t.noClick,v=t.noKeyboard,k=t.noDrag,M=t.noDragEventsBubbling,$=t.onError,b=t.validator,O=f.useMemo(function(){return Yf(n)},[n]),E=f.useMemo(function(){return Kf(n)},[n]),W=f.useMemo(function(){return typeof j=="function"?j:cr},[j]),R=f.useMemo(function(){return typeof C=="function"?C:cr},[C]),x=f.useRef(null),y=f.useRef(null),S=f.useReducer(lh,Ni),I=ci(S,2),T=I[0],N=I[1],F=T.isFocused,U=T.isFileDialogActive,z=f.useRef(typeof window!="undefined"&&window.isSecureContext&&P&&Gf()),Q=function(){!z.current&&U&&setTimeout(function(){if(y.current){var H=y.current.files;H.length||(N({type:"closeDialog"}),R())}},300)};f.useEffect(function(){return window.addEventListener("focus",Q,!1),function(){window.removeEventListener("focus",Q,!1)}},[y,U,R,z]);var K=f.useRef([]),Y=function(H){x.current&&x.current.contains(H.target)||(H.preventDefault(),K.current=[])};f.useEffect(function(){return _&&(document.addEventListener("dragover",sr,!1),document.addEventListener("drop",Y,!1)),function(){_&&(document.removeEventListener("dragover",sr),document.removeEventListener("drop",Y))}},[x,_]),f.useEffect(function(){return!i&&q&&x.current&&x.current.focus(),function(){}},[x,q,i]);var te=f.useCallback(function(B){$?$(B):console.error(B)},[$]),me=f.useCallback(function(B){B.preventDefault(),B.persist(),ke(B),K.current=[].concat(eh(K.current),[B.target]),Jt(B)&&Promise.resolve(a(B)).then(function(H){if(!(kn(B)&&!M)){var oe=H.length,xe=oe>0&&Bf({files:H,accept:O,minSize:s,maxSize:o,multiple:l,maxFiles:c,validator:b}),Ee=oe>0&&!xe;N({isDragAccept:xe,isDragReject:Ee,isDragActive:!0,type:"setDraggedFiles"}),d&&d(B)}}).catch(function(H){return te(H)})},[a,d,te,M,O,s,o,l,c,b]),De=f.useCallback(function(B){B.preventDefault(),B.persist(),ke(B);var H=Jt(B);if(H&&B.dataTransfer)try{B.dataTransfer.dropEffect="copy"}catch(oe){}return H&&u&&u(B),!1},[u,M]),G=f.useCallback(function(B){B.preventDefault(),B.persist(),ke(B);var H=K.current.filter(function(xe){return x.current&&x.current.contains(xe)}),oe=H.indexOf(B.target);oe!==-1&&H.splice(oe,1),K.current=H,!(H.length>0)&&(N({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),Jt(B)&&p&&p(B))},[x,p,M]),V=f.useCallback(function(B,H){var oe=[],xe=[];B.forEach(function(Ee){var St=gs(Ee,O),vt=ci(St,2),Fn=vt[0],$n=vt[1],Mn=vs(Ee,s,o),Gt=ci(Mn,2),Un=Gt[0],Bn=Gt[1],zn=b?b(Ee):null;if(Fn&&Un&&!zn)oe.push(Ee);else{var qn=[$n,Bn];zn&&(qn=qn.concat(zn)),xe.push({file:Ee,errors:qn.filter(function(js){return js})})}}),(!l&&oe.length>1||l&&c>=1&&oe.length>c)&&(oe.forEach(function(Ee){xe.push({file:Ee,errors:[Uf]})}),oe.splice(0)),N({acceptedFiles:oe,fileRejections:xe,isDragReject:xe.length>0,type:"setFiles"}),h&&h(oe,xe,H),xe.length>0&&g&&g(xe,H),oe.length>0&&m&&m(oe,H)},[N,l,O,s,o,c,h,m,g,b]),A=f.useCallback(function(B){B.preventDefault(),B.persist(),ke(B),K.current=[],Jt(B)&&Promise.resolve(a(B)).then(function(H){kn(B)&&!M||V(H,B)}).catch(function(H){return te(H)}),N({type:"reset"})},[a,V,te,M]),L=f.useCallback(function(){if(z.current){N({type:"openDialog"}),W();var B={multiple:l,types:E};window.showOpenFilePicker(B).then(function(H){return a(H)}).then(function(H){V(H,null),N({type:"closeDialog"})}).catch(function(H){Hf(H)?(R(H),N({type:"closeDialog"})):Qf(H)?(z.current=!1,y.current?(y.current.value=null,y.current.click()):te(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):te(H)});return}y.current&&(N({type:"openDialog"}),W(),y.current.value=null,y.current.click())},[N,W,R,P,V,te,E,l]),D=f.useCallback(function(B){!x.current||!x.current.isEqualNode(B.target)||(B.key===" "||B.key==="Enter"||B.keyCode===32||B.keyCode===13)&&(B.preventDefault(),L())},[x,L]),J=f.useCallback(function(){N({type:"focus"})},[]),re=f.useCallback(function(){N({type:"blur"})},[]),fe=f.useCallback(function(){w||(Wf()?setTimeout(L,0):L())},[w,L]),le=function(H){return i?null:H},be=function(H){return v?null:le(H)},ve=function(H){return k?null:le(H)},ke=function(H){M&&H.stopPropagation()},We=f.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=B.refKey,oe=H===void 0?"ref":H,xe=B.role,Ee=B.onKeyDown,St=B.onFocus,vt=B.onBlur,Fn=B.onClick,$n=B.onDragEnter,Mn=B.onDragOver,Gt=B.onDragLeave,Un=B.onDrop,Bn=jn(B,Jf);return se(se(Pi({onKeyDown:be(Me(Ee,D)),onFocus:be(Me(St,J)),onBlur:be(Me(vt,re)),onClick:le(Me(Fn,fe)),onDragEnter:ve(Me($n,me)),onDragOver:ve(Me(Mn,De)),onDragLeave:ve(Me(Gt,G)),onDrop:ve(Me(Un,A)),role:typeof xe=="string"&&xe!==""?xe:"presentation"},oe,x),!i&&!v?{tabIndex:0}:{}),Bn)}},[x,D,J,re,fe,me,De,G,A,v,k,i]),et=f.useCallback(function(B){B.stopPropagation()},[]),$e=f.useMemo(function(){return function(){var B=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},H=B.refKey,oe=H===void 0?"ref":H,xe=B.onChange,Ee=B.onClick,St=jn(B,Xf),vt=Pi({accept:O,multiple:l,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:le(Me(xe,A)),onClick:le(Me(Ee,et)),tabIndex:-1},oe,y);return se(se({},vt),St)}},[y,n,l,A,i]);return se(se({},T),{},{isFocused:F&&!i,getRootProps:We,getInputProps:$e,rootRef:x,inputRef:y,open:le(L)})}function lh(e,t){switch(t.type){case"focus":return se(se({},e),{},{isFocused:!0});case"blur":return se(se({},e),{},{isFocused:!1});case"openDialog":return se(se({},Ni),{},{isFileDialogActive:!0});case"closeDialog":return se(se({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return se(se({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return se(se({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections,isDragReject:t.isDragReject});case"reset":return se({},Ni);default:return e}}function cr(){}const dr="data:image/svg+xml,%3csvg%20width='20'%20height='20'%20viewBox='0%200%2020%2020'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3cpath%20d='M9.16675%201.66699H7.50008C3.33341%201.66699%201.66675%203.33366%201.66675%207.50033V12.5003C1.66675%2016.667%203.33341%2018.3337%207.50008%2018.3337H12.5001C16.6667%2018.3337%2018.3334%2016.667%2018.3334%2012.5003V10.8337'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M13.3668%202.51639L6.80014%209.08306C6.55014%209.33306%206.30014%209.82472%206.25014%2010.1831L5.89181%2012.6914C5.75848%2013.5997%206.40014%2014.2331%207.30848%2014.1081L9.81681%2013.7497C10.1668%2013.6997%2010.6585%2013.4497%2010.9168%2013.1997L17.4835%206.63306C18.6168%205.49972%2019.1501%204.18306%2017.4835%202.51639C15.8168%200.849722%2014.5001%201.38306%2013.3668%202.51639Z'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3cpath%20d='M12.425%203.45801C12.9834%205.44967%2014.5417%207.00801%2016.5417%207.57467'%20stroke='%233FC045'%20stroke-width='1.25'%20stroke-miterlimit='10'%20stroke-linecap='round'%20stroke-linejoin='round'/%3e%3c/svg%3e";var ch={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const dh=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),uh=(e,t)=>{const n=f.forwardRef(({color:i="currentColor",size:a=24,strokeWidth:o=2,absoluteStrokeWidth:s,children:l,...c},d)=>f.createElement("svg",{ref:d,...ch,width:a,height:a,stroke:i,strokeWidth:s?Number(o)*24/Number(a):o,className:`lucide lucide-${dh(e)}`,...c},[...t.map(([p,u])=>f.createElement(p,u)),...(Array.isArray(l)?l:[l])||[]]));return n.displayName=`${e}`,n};var ca=uh;const ur=ca("Copy",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]),ph=ca("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),pr=ca("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),mh=async(e,t="payment-screenshots",n="anonymous")=>{try{if(!e)throw new Error("No file provided");if(!e.type.startsWith("image/"))throw new Error("File must be an image");const i=10*1024*1024;if(e.size>i)throw new Error("File size must be less than 10MB");const a=new Date().getTime(),o=e.name.split(".").pop()||"jpg",s=`${n}_${a}.${o}`,l=Gu(qo,`${t}/${s}`);console.log("Uploading file to Firebase Storage...");const c=await qu(l,e),d=await Wu(c.ref);return console.log("File uploaded successfully:",d),d}catch(i){throw console.error("Error uploading file to Firebase Storage:",i),i}},fh=async e=>{try{console.log("Placing order with data:",e);const t=await jr(ce(X,"orders"),e);if(console.log("Order placed successfully with ID:",t.id),await Gn(t,{orderIDKey:t.id}),e.kitchenId)try{const n=ot(X,"kitchens",e.kitchenId);await Gn(n,{totalOrders:Kn(1),lastOrderDate:new Date})}catch(n){console.warn("Could not update kitchen statistics:",n)}for(const n of e.orderedFoodItems)try{const i=ot(X,"foods",n.foodItemId);await Gn(i,{numOfSoldItem:Kn(n.quantity),numberOfAvailableItem:Kn(-n.quantity)})}catch(i){console.warn(`Could not update food item ${n.foodItemId} statistics:`,i)}return t.id}catch(t){throw console.error("Error placing order:",t),t}},hh=()=>Math.floor(1e5+Math.random()*9e5).toString(),gh=({cartItems:e,kitchenInfo:t,firebaseImageUrl:n,currentUser:i,paymentCalculation:a,groupedCartItems:o})=>{const s=new Date().toISOString(),l=hh(),c=Object.keys(o.preOrders).length>0,d=o.grabAndGo.length>0;let p="grabAndGo";c&&!d?p="preOrder":c&&d&&(p="mixed");let u=s;if(c){const g=Object.keys(o.preOrders);if(g.length>0){const C=g.sort()[0];u=new Date(C).toISOString()}}const h=e.map(g=>{var C,j,P,q,_,w,v,k,M,$,b,O;return{countRating:0,foodItemId:g.foodId||g.id,id:mr(),imageUrl:((C=g.food)==null?void 0:C.imageUrl)||((j=g.food)==null?void 0:j.image)||"",isFromPreorder:((P=g.pickupDetails)==null?void 0:P.orderType)==="PRE_ORDER"||g.isPreOrder||!1,name:((q=g.food)==null?void 0:q.name)||"Unknown Item",numOfLike:((_=g.food)==null?void 0:_.numOfLike)||0,numOfSoldItem:((w=g.food)==null?void 0:w.numOfSoldItem)||0,numberOfAvailableItem:((v=g.food)==null?void 0:v.numberOfAvailableItem)||0,quantity:parseInt(g.quantity||1),rating:0,specialInstructions:g.specialInstructions||"",...((k=g.food)==null?void 0:k.preOrder)&&{preOrder:{availableTimes:g.food.preOrder.availableTimes||[],foodItemId:g.foodId||g.id,id:mr(),nameOfFood:((M=g.food)==null?void 0:M.name)||"Unknown Item",numOfAvailableItems:(($=g.food)==null?void 0:$.numberOfAvailableItem)||0,price:parseFloat(((b=g.food)==null?void 0:b.cost)||((O=g.food)==null?void 0:O.price)||0)}},pickupDetails:g.pickupDetails||{}}});return{datePickedUp:u,datePlaced:s,kitchenId:(t==null?void 0:t.id)||(t==null?void 0:t.kitchenId)||"unknown",kitchenName:(t==null?void 0:t.name)||"Unknown Kitchen",orderID:l,orderIDKey:"",orderPaymentImage:n||"",orderStatus:"pending",orderTotalCoast:parseFloat(a.totalPayment),orderType:p,orderedFoodItems:h,paymentVia:{other:{method:"manual_upload",uploadedAt:n?s:null}},pickUpAddress:(t==null?void 0:t.address)||"Address not available",userId:(i==null?void 0:i.uid)||"mzqXlFHOJXNVA0BUvtvbbhgF78x1",subtotal:parseFloat(a.subtotal),salesTax:parseFloat(a.salesTax),taxRate:.0725,createdAt:s,updatedAt:s}},mr=()=>"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){const t=Math.random()*16|0;return(e==="x"?t:t&3|8).toString(16).toUpperCase()});function vh(){var G,V;const[e,t]=f.useState(null),[n,i]=f.useState(null),[a,o]=f.useState(null),[s,l]=f.useState(!1),[c,d]=f.useState(null),[p,u]=f.useState(!1),[h,m]=f.useState(!1),[g,C]=f.useState(null),[j,P]=f.useState(null),[q,_]=f.useState(null),[w,v]=f.useState(!1),{handleQuantityChange:k}=sa(),M=jt(),$=gt(),b=Se(A=>A.cart.items),O=Se(A=>A.food.currentKitchen),E=Se(A=>A.auth.user),W=Se(A=>A.auth.isAuthenticated),R=f.useMemo(()=>{var A,L;if(O){const D=O;if(console.log("kitchen",D),D)return{id:D.id||D.ownerId||"PKcWQYMxEZQxnKSLp4de",name:D.name||"James Kitchen",address:D.address||"120 Lane San Francisco, East Falmouth MA",latitude:((A=D.location)==null?void 0:A.lat)||D.latitude||41.5742,longitude:((L=D.location)==null?void 0:L.lng)||D.longitude||-70.6109,preorderSchedule:(D==null?void 0:D.preorderSchedule)||null}}return{id:"PKcWQYMxEZQxnKSLp4de",name:"James Kitchen",address:"120 Lane San Francisco, East Falmouth MA",latitude:41.5742,longitude:-70.6109}},[O]),x=A=>{var L,D;C(A),P(A.selectedDate||((L=A.pickupDetails)==null?void 0:L.date)),_((D=A.pickupDetails)==null?void 0:D.time),m(!0)},y=()=>{m(!1),C(null),P(null),_(null)},S=A=>{P(A)},I=A=>{_(A)},T=f.useCallback(()=>{v(!1)},[]),N=async()=>{if(g&&j&&q){const A=j!==Z().format("YYYY-MM-DD"),L={date:j,time:q,display:A?`Pick up ${Z(j).format("MMM D ddd")}`:"Pick up today",orderType:A?"PRE_ORDER":"GO_GRAB"};console.log("ð Updating pickup details for item:",g),console.log("ð New pickup details:",L);try{await k({food:g.food,kitchen:R,newQuantity:g.quantity,currentQuantity:g.quantity,selectedDate:j,selectedTime:q,specialInstructions:g.specialInstructions||"",isPreOrder:A}),ae.success(`Pickup time updated to ${L.display} at ${L.time}`),y()}catch(D){console.error("Error updating pickup details:",D),ae.error("Failed to update pickup time")}}else ae.error("Please select both date and time")},F=f.useMemo(()=>{const A={grabAndGo:[],preOrders:{}};b.forEach(D=>{var re,fe,le,be,ve,ke,We,et;const J=((re=D.pickupDetails)==null?void 0:re.orderType)||D.orderType||(D.isPreOrder?"PRE_ORDER":"GO_GRAB");if(J==="GO_GRAB")A.grabAndGo.push({...D,displayPickupTime:((fe=D.pickupDetails)==null?void 0:fe.display)||"Pick up today",displayPickupClock:((le=D.pickupDetails)==null?void 0:le.time)||Z().add(30,"minutes").format("h:mm A")});else if(J==="PRE_ORDER"||D.isPreOrder||D.selectedDate){const $e=D.selectedDate||((be=D.pickupDetails)==null?void 0:be.date);$e&&(A.preOrders[$e]||(A.preOrders[$e]=[]),A.preOrders[$e].push({...D,displayPickupTime:((ve=D.pickupDetails)==null?void 0:ve.display)||`Pick up ${Z($e).format("MMM D ddd")}`,displayPickupClock:((ke=D.pickupDetails)==null?void 0:ke.time)||"6:30 PM"}))}else A.grabAndGo.push({...D,displayPickupTime:((We=D.pickupDetails)==null?void 0:We.display)||"Pick up today",displayPickupClock:((et=D.pickupDetails)==null?void 0:et.time)||Z().add(30,"minutes").format("h:mm A")})});const L={};return Object.keys(A.preOrders).sort((D,J)=>Z(D).diff(Z(J))).forEach(D=>{L[D]=A.preOrders[D]}),A.preOrders=L,A},[b]),U=A=>Z(A).format("MMM D ddd");f.useMemo(()=>{const A=[];if(F.grabAndGo.length>0){const L=F.grabAndGo[0];A.push({type:"Go&Grab",date:"Today",time:L.displayPickupClock,count:F.grabAndGo.length})}return Object.entries(F.preOrders).forEach(([L,D])=>{const J=D[0];A.push({type:"Pre-Order",date:U(L),time:J.displayPickupClock,count:D.length})}),A},[F,U]);const z=f.useMemo(()=>{const A=b.reduce((re,fe)=>{var ve,ke;const le=parseFloat(((ve=fe.food)==null?void 0:ve.cost)||((ke=fe.food)==null?void 0:ke.price)||0),be=parseInt(fe.quantity||1);return re+le*be},0),D=A*.0725,J=A+D;return{subtotal:A.toFixed(2),salesTax:D.toFixed(2),totalPayment:J.toFixed(2)}},[b]),Q=async A=>{if(A.length>0){const L=A[0];i(L),d(null),e&&URL.revokeObjectURL(e);const D=URL.createObjectURL(L);t(D);try{l(!0);const J=(E==null?void 0:E.uid)||"anonymous",re=await mh(L,"payment-screenshots",J);o(re),ae.success("Payment screenshot uploaded successfully!"),console.log("Firebase Storage URL:",re)}catch(J){console.error("Error uploading to Firebase:",J),d(J.message),ae.error(`Upload failed: ${J.message}`)}finally{l(!1)}}},{getRootProps:K,getInputProps:Y,isDragActive:te}=ks({onDrop:Q,accept:{"image/*":[".jpeg",".jpg",".png",".gif",".bmp",".webp"]},multiple:!1,maxSize:10*1024*1024}),me=()=>{e&&URL.revokeObjectURL(e),t(null),i(null),o(null),d(null)},De=async()=>{try{if(b.length===0){ae.error("Your cart is empty. Please add items before placing an order.");return}if(!W||!E){console.log("ð Authentication required for placing order"),v(!0);return}if(!a){ae.error("Please upload a payment confirmation screenshot before placing your order.");return}u(!0);const A=gh({cartItems:b,kitchenInfo:R,firebaseImageUrl:a,currentUser:E,paymentCalculation:z,groupedCartItems:F});console.log("Order data to be placed:",A);const L=await fh(A);$(ra()),ae.success("Order placed successfully! Redirecting to success page..."),setTimeout(()=>{M("/success",{state:{orderID:A.orderID,orderDocId:L,totalAmount:z.totalPayment,kitchenName:R.name,pickupAddress:R.address,orderedItems:b.map(D=>{var le,be,ve,ke,We,et,$e,B,H,oe;const J=((le=D.pickupDetails)==null?void 0:le.date)||D.selectedDate,re=(be=D.pickupDetails)==null?void 0:be.orderType,fe=re==="PRE_ORDER"||D.isPreOrder||J&&J!==Z().format("YYYY-MM-DD");return console.log("ð [PaymentPage] Mapping cart item:",{name:(ve=D.food)==null?void 0:ve.name,pickupDate:J,orderType:re,isPreOrderItem:fe,originalIsPreOrder:D.isPreOrder}),{id:D.foodId||D.id,foodItemId:D.foodId||D.id,name:((ke=D.food)==null?void 0:ke.name)||"Unknown Item",description:((We=D.food)==null?void 0:We.description)||"This dish features tender, juicy flavors",imageUrl:((et=D.food)==null?void 0:et.imageUrl)||(($e=D.food)==null?void 0:$e.image),price:((B=D.food)==null?void 0:B.cost)||((H=D.food)==null?void 0:H.price)||"0.00",quantity:D.quantity||1,pickupDate:J,pickupTime:(oe=D.pickupDetails)==null?void 0:oe.time,isPreOrder:fe,orderType:re,isFromPreorder:D.isFromPreorder||fe}})}})},2e3)}catch(A){console.error("Error placing order:",A),ae.error(`Failed to place order: ${A.message}`)}finally{u(!1)}};return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsxs("div",{className:"padding-20 order-page",children:[r.jsx("h4",{className:"medium-title mb-12",children:"Pickup Address"}),r.jsx("p",{className:"body-text-med mb-20",children:R.address}),r.jsx("div",{className:"hr mb-18"}),r.jsxs("div",{className:"other-payments-wrapper mb-20",children:[r.jsx("h2",{className:"title",children:"Other Payments acceptable to James Kitchen Kitchen"}),r.jsxs("div",{className:"item-flex",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"text",children:"PayPal to"}),r.jsx("a",{className:"email",children:"jamesPayPal00@gmail.com"})]}),r.jsxs("div",{className:"copy",children:[r.jsx(ur,{})," Copy"]})]}),r.jsxs("div",{className:"item-flex",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"text",children:"Venmo to"}),r.jsx("a",{className:"email",children:"jamesVenmo00@gmail.com"})]}),r.jsxs("div",{className:"copy",children:[r.jsx(ur,{})," Copy"]})]})]}),r.jsxs("div",{className:"payment-method mb-20",children:[r.jsx("h5",{className:"medium-title mb-20",children:"Payment Details"}),r.jsx("div",{className:"hr mb-20"}),r.jsxs("div",{className:"item-flex",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",z.subtotal]})]}),r.jsxs("div",{className:"item-flex",children:[r.jsx("span",{children:"Sales Tax (7.25%)"}),r.jsxs("span",{children:["$",z.salesTax]})]}),r.jsx("div",{className:"hr mb-12"}),r.jsxs("div",{className:"item-flex bold",children:[r.jsx("span",{children:"Total Payment"}),r.jsxs("span",{children:["$",z.totalPayment]})]})]}),r.jsxs("div",{className:"order-items-section mb-20",children:[r.jsx("h3",{className:"order-items-title",children:"Select Pickup Date & Time"}),b.length===0?r.jsx("div",{className:"empty-cart-message",children:r.jsx("p",{className:"body-text-med",children:"No items in cart"})}):r.jsxs("div",{className:"pickup-items-list",children:[F.grabAndGo.length>0&&F.grabAndGo.map((A,L)=>{var D,J,re,fe,le,be;return r.jsxs("div",{className:"pickup-item-row",children:[r.jsxs("div",{className:"item-info",children:[r.jsx("div",{className:"food-image",children:r.jsx("img",{src:((D=A.food)==null?void 0:D.imageUrl)||((J=A.food)==null?void 0:J.image),alt:(re=A.food)==null?void 0:re.name,onError:ve=>{ve.target.style.display="none"}})}),r.jsxs("div",{className:"food-details",children:[r.jsx("h5",{className:"food-name",children:((fe=A.food)==null?void 0:fe.name)||"Unknown Item"}),r.jsxs("div",{className:"pickup-time",children:["Today, ",A.displayPickupClock]}),r.jsxs("div",{className:"item-quantity",children:["Qty: ",A.quantity," Ã $",((le=A.food)==null?void 0:le.cost)||((be=A.food)==null?void 0:be.price)||"0.00"]})]})]}),r.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>x(A),children:r.jsx("img",{src:dr,alt:"Edit pickup time"})})]},`grab-${A.foodId}-${L}`)}),Object.keys(F.preOrders).length>0&&Object.entries(F.preOrders).map(([A,L])=>L.map((D,J)=>{var re,fe,le,be,ve,ke;return r.jsxs("div",{className:"pickup-item-row",children:[r.jsxs("div",{className:"item-info",children:[r.jsx("div",{className:"food-image",children:r.jsx("img",{src:((re=D.food)==null?void 0:re.imageUrl)||((fe=D.food)==null?void 0:fe.image),alt:(le=D.food)==null?void 0:le.name,onError:We=>{We.target.style.display="none"}})}),r.jsxs("div",{className:"food-details",children:[r.jsx("h5",{className:"food-name",children:((be=D.food)==null?void 0:be.name)||"Unknown Item"}),r.jsxs("div",{className:"pickup-time",children:[U(A),", ",D.displayPickupClock]}),r.jsxs("div",{className:"item-quantity",children:["Qty: ",D.quantity," Ã $",((ve=D.food)==null?void 0:ve.cost)||((ke=D.food)==null?void 0:ke.price)||"0.00"]})]})]}),r.jsx("div",{className:"edit-icon",role:"button",tabIndex:0,onClick:()=>x(D),children:r.jsx("img",{src:dr,alt:"Edit pickup time"})})]},`preorder-${D.foodId}-${A}-${J}`)}))]})]}),r.jsxs("div",{className:"upload-section mb-20",children:[r.jsx("h5",{className:"medium-title mb-12",children:"Payment Confirmation"}),r.jsx("p",{className:"body-text-med mb-16",children:"Upload payment confirmation screenshot"}),e?r.jsx("div",{className:"upload-preview-container",children:r.jsxs("div",{className:"upload-preview",children:[r.jsx("img",{src:e,alt:"Payment confirmation preview",className:"preview-image"}),r.jsx("button",{type:"button",className:"remove-image-btn",onClick:me,"aria-label":"Remove image",disabled:s,children:r.jsx(pr,{size:16})}),s&&r.jsxs("div",{className:"upload-status-overlay",children:[r.jsx("div",{className:"upload-spinner"}),r.jsx("p",{children:"Uploading to Firebase..."})]})]})}):r.jsxs("div",{...K(),className:`upload-dropzone ${te?"active":""}`,children:[r.jsx("input",{...Y()}),r.jsxs("div",{className:"upload-content",children:[r.jsx("div",{className:"upload-icon",children:r.jsx(ph,{size:32})}),r.jsx("h6",{className:"upload-title",children:te?"Drop image here":"Upload Screenshot"}),r.jsxs("p",{className:"upload-description",children:["Drag & drop your payment confirmation or"," ",r.jsx("span",{className:"upload-link",children:"browse files"})]}),r.jsx("p",{className:"upload-formats",children:"Supports: JPG, PNG, GIF, WebP (Max 10MB)"})]})]})]}),r.jsx("button",{className:"action-button",onClick:De,disabled:p||s||b.length===0,children:p?"Placing Order...":W?"Place My Order":"Login to Place Order"})]})})}),h&&g&&r.jsx("div",{className:"modal-overlay",onClick:y,children:r.jsxs("div",{className:"modal-container",onClick:A=>A.stopPropagation(),children:[r.jsxs("div",{className:"modal-header",children:[r.jsx("h3",{className:"modal-title",children:"Edit Pickup Time"}),r.jsx("button",{className:"modal-close-btn",onClick:y,"aria-label":"Close modal",children:r.jsx(pr,{size:24})})]}),r.jsxs("div",{className:"modal-content",children:[r.jsxs("div",{className:"editing-item-info",children:[r.jsx("h4",{children:((G=g.food)==null?void 0:G.name)||"Food Item"}),r.jsxs("p",{children:["Current pickup: ",g.displayPickupTime," at"," ",g.displayPickupClock]})]}),r.jsx("div",{className:"date-time-picker-container",children:r.jsx(bn,{food:g.food,kitchen:R,orderType:g.orderType||((V=g.pickupDetails)==null?void 0:V.orderType)||"GO_GRAB",selectedDate:j,selectedTime:q,onDateChange:S,onTimeChange:I,disabled:!1,className:"payment-modal-picker",dateLabel:"Select Pickup Date:",timeLabel:"Select Pickup Time:"})})]}),r.jsxs("div",{className:"modal-footer",children:[r.jsx("button",{className:"btn-secondary",onClick:y,children:"Cancel"}),r.jsx("button",{className:"btn-primary",onClick:N,disabled:!j||!q,children:"Update Pickup Time"})]})]})}),w&&r.jsx(ls,{onClose:T})]})}const xh="data:image/svg+xml,%3csvg%20width='173'%20height='162'%20viewBox='0%200%20173%20162'%20fill='none'%20xmlns='http://www.w3.org/2000/svg'%3e%3ccircle%20cx='85.5'%20cy='93'%20r='67'%20fill='%23829F35'/%3e%3ccircle%20cx='166'%20cy='32.5'%20r='6.5'%20fill='%23829F35'/%3e%3cellipse%20cx='11'%20cy='10'%20rx='10.5'%20ry='10'%20fill='%23829F35'/%3e%3cellipse%20cx='5.5'%20cy='136.5'%20rx='5'%20ry='5.5'%20fill='%23829F35'/%3e%3cellipse%20cx='154'%20cy='160'%20rx='2.5'%20ry='2'%20fill='%23829F35'/%3e%3cpath%20d='M82.1976%20111C80.5838%20111%2078.9701%20110.393%2078.048%20109.179L65.138%2094.6121C63.2937%2092.5889%2063.7548%2089.7565%2066.0602%2088.1379C68.3655%2086.5193%2071.593%2086.924%2073.4373%2088.9472L82.1976%2098.8609L101.563%2076.808C103.407%2074.7848%20106.635%2074.3801%20108.94%2075.9987C111.245%2077.6173%20111.706%2080.4498%20109.862%2082.4729L86.3473%20109.179C85.1946%20110.191%2083.8114%20111%2082.1976%20111Z'%20fill='white'/%3e%3ccircle%20cx='114'%20cy='103.5'%20r='2.5'%20fill='white'/%3e%3ccircle%20cx='48.5'%20cy='76'%20r='4'%20fill='white'/%3e%3ccircle%20cx='107'%20cy='54.5'%20r='1.5'%20fill='white'/%3e%3ccircle%20cx='65.5'%20cy='125'%20r='2'%20fill='white'/%3e%3ccircle%20cx='87.5'%20cy='77'%20r='1'%20fill='white'/%3e%3c/svg%3e";function yh(){const t=Ut().state||{},{orderID:n,totalAmount:i,kitchenName:a,pickupAddress:o,orderedItems:s}=t;console.log("ð [SuccessPage] Order details received:",{orderID:n,totalAmount:i,kitchenName:a,pickupAddress:o,orderedItemsCount:(s==null?void 0:s.length)||0,orderedItems:s});const l=u=>u?Z(u).format("ddd, MMM D"):"Today",c=f.useMemo(()=>{if(!(s!=null&&s.length))return{goGrab:[],preOrders:{}};const u={goGrab:[],preOrders:{}};return console.log("ð [SuccessPage] Grouping ordered items:",s),s.forEach(h=>{if(console.log("ð [SuccessPage] Processing item:",{name:h.name,isPreOrder:h.isPreOrder,pickupDate:h.pickupDate,hasPickupDate:!!h.pickupDate}),(h.orderType==="PRE_ORDER"||h.orderType==="Pre-Order")&&h.pickupDate){const g=h.pickupDate;u.preOrders[g]||(u.preOrders[g]=[]),u.preOrders[g].push(h),console.log("ð [SuccessPage] Added to pre-orders for date:",g)}else u.goGrab.push(h),console.log("ð [SuccessPage] Added to go&grab")}),console.log("ð [SuccessPage] Final grouping:",{goGrabCount:u.goGrab.length,preOrderDates:Object.keys(u.preOrders),preOrderCounts:Object.entries(u.preOrders).map(([h,m])=>({date:h,count:m.length}))}),u},[s]),d=f.useMemo(()=>{if(!(s!=null&&s.length))return{subtotal:"0.00",tax:"0.00",total:"0.00"};const u=s.reduce((g,C)=>{const j=parseFloat(C.price||C.cost||0),P=parseInt(C.quantity||1);return g+j*P},0),h=u*.0725,m=u+h;return{subtotal:u.toFixed(2),tax:h.toFixed(2),total:m.toFixed(2)}},[s]),p=(s==null?void 0:s.reduce((u,h)=>u+parseInt(h.quantity||1),0))||0;return r.jsx("div",{className:"container",children:r.jsx("div",{className:"mobile-container",children:r.jsxs("div",{className:"padding-20 order-page",children:[r.jsxs("div",{className:"success-image-wrapper pt-5",children:[r.jsx("img",{src:xh,alt:"Success"}),r.jsx("h2",{className:"title",children:"Your order has been successfully placed"})]}),s&&s.length>0?r.jsxs(r.Fragment,{children:[c.goGrab.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"small-title mb-16",children:"Go & Grab"}),r.jsx("div",{className:"menu-listing",children:c.goGrab.map((u,h)=>r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:u.imageUrl||"/src/assets/images/product.png",alt:u.name||"Food item",onError:m=>{m.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:u.name||"Unknown Item"}),r.jsx("div",{className:"text",children:u.description||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",u.price||u.cost||"0.00"]})]})]}),r.jsx("div",{className:"quantity-warpper",children:r.jsx("div",{className:"right",children:r.jsxs("div",{className:"quantity-text",children:["Qty: ",u.quantity||1]})})})]},`go-grab-${u.foodItemId||u.id}-${h}`))})]}),Object.entries(c.preOrders).map(([u,h])=>r.jsxs("div",{children:[r.jsxs("h2",{className:"small-title mb-16",children:["Pre-order for ",l(u)]}),r.jsx("div",{className:"menu-listing",children:h.map((m,g)=>r.jsxs("div",{className:"menu-list",children:[r.jsxs("div",{className:"left",children:[r.jsx("div",{className:"image",children:r.jsx("img",{src:m.imageUrl||"/src/assets/images/product.png",alt:m.name||"Food item",onError:C=>{C.target.src="/src/assets/images/product.png"}})}),r.jsxs("div",{className:"data",children:[r.jsx("div",{className:"title",children:m.name||"Unknown Item"}),r.jsx("div",{className:"text",children:m.description||"This dish features tender, juicy flavors"}),r.jsxs("div",{className:"price",children:["$ ",m.price||m.cost||"0.00"]})]})]}),r.jsx("div",{className:"quantity-warpper",children:r.jsxs("div",{className:"right flex-column",children:[r.jsxs("div",{className:"quantity-text",children:["Qty: ",m.quantity||1]}),m.pickupTime&&r.jsx("div",{className:"pickup-time-display",children:m.pickupTime})]})})]},`preorder-${m.foodItemId||m.id}-${u}-${g}`))})]},u)),r.jsxs("div",{className:"order-summary",style:{backgroundColor:"#f8f9fa",padding:"16px",borderRadius:"8px",marginTop:"24px",marginBottom:"16px"},children:[r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsxs("span",{children:["Subtotal (",p," item",p!==1?"s":"","):"]}),r.jsxs("span",{children:["$",d.subtotal]})]}),r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",marginBottom:"8px"},children:[r.jsx("span",{children:"Tax (7.25%):"}),r.jsxs("span",{children:["$",d.tax]})]}),r.jsxs("div",{className:"summary-row",style:{display:"flex",justifyContent:"space-between",fontWeight:"600",fontSize:"16px",borderTop:"1px solid #dee2e6",paddingTop:"8px"},children:[r.jsx("span",{children:"Total:"}),r.jsxs("span",{children:["$",d.total]})]})]})]}):r.jsxs("div",{style:{padding:"20px",background:"#f0f0f0",margin:"20px 0",borderRadius:"8px"},children:[r.jsx("h4",{children:"Debug: No Ordered Items Found"}),r.jsxs("p",{children:["Order Details: ",JSON.stringify(t,null,2)]})]}),r.jsx("div",{className:"success-actions mb-16",children:r.jsx(Tt,{to:"/",className:"action-button",children:"Back to Home"})}),r.jsxs("div",{className:"scanner-bottom mb-16",children:[r.jsxs("div",{className:"text",children:["Order can be viewed in the ",r.jsx("strong",{children:"HomeFresh"})," app, available in the iOS App Store. The app also sends reminders on the morning of each scheduled pickup."]}),r.jsx("div",{className:"qr",children:r.jsx("img",{src:as,alt:"QR Code"})})]})]})})})}function bh(){const{user:e,initializing:t}=oa(),n=Ut();return t?r.jsx("div",{className:"d-flex vh-100 align-items-center justify-content-center",children:"Loading..."}):e?r.jsx(_s,{}):r.jsx(Ls,{to:"/login",replace:!0,state:{from:n}})}function wh(){return r.jsxs(As,{children:[r.jsx(Le,{path:"/",element:r.jsx(of,{})}),r.jsx(Le,{path:"/foods",element:r.jsx(Qa,{})}),r.jsx(Le,{path:"/foods/:kitchenId",element:r.jsx(Qa,{})}),r.jsx(Le,{path:"/share",element:r.jsx(Ja,{})}),r.jsx(Le,{path:"/share/",element:r.jsx(Ja,{})}),r.jsx(Le,{path:"/order",element:r.jsx(df,{})}),r.jsx(Le,{path:"/checkout",element:r.jsx(vh,{})}),r.jsx(Le,{path:"/success",element:r.jsx(yh,{})}),r.jsx(Le,{path:"/login",element:r.jsx(Zm,{})}),r.jsx(Le,{path:"/wechat/callback",element:r.jsx(Jm,{})}),r.jsx(Le,{path:"/wechat/debug",element:r.jsx(ef,{})}),r.jsx(Le,{element:r.jsx(bh,{}),children:r.jsx(Le,{path:"/home",element:r.jsx(Vm,{})})})]})}const kh=()=>{const e=gt(),t=Se(o=>o.auth),[n,i]=f.useState(window.innerWidth<768);f.useEffect(()=>{const o=()=>{i(window.innerWidth<768)};return window.addEventListener("resize",o),()=>window.removeEventListener("resize",o)},[]);const a=()=>{e(to())};return n?null:r.jsxs("div",{style:{position:"fixed",top:"10px",right:"10px",background:"#f8f9fa",padding:"15px",border:"2px solid #dee2e6",borderRadius:"8px",fontSize:"12px",fontFamily:"monospace",zIndex:9999,maxWidth:"300px"},children:[r.jsx("h6",{style:{margin:"0 0 10px 0",fontSize:"14px"},children:"ð Auth Debug Panel"}),r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("strong",{children:"Is Authenticated:"})," ",r.jsx("span",{style:{color:t.isAuthenticated?"green":"red"},children:t.isAuthenticated?"â YES":"â NO"})]}),r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("strong",{children:"Auth Status:"})," ",r.jsx("span",{style:{color:t.loading?"orange":"gray"},children:t.loading?"ï¿½ LOADING":"READY"})]}),r.jsxs("div",{style:{marginBottom:"10px"},children:[r.jsx("strong",{children:"User:"})," ",t.user?r.jsx("span",{style:{color:"green"},children:t.user.nickname||t.user.openid||"WeChat User"}):r.jsx("span",{style:{color:"red"},children:"None"})]}),t.error&&r.jsxs("div",{style:{marginBottom:"10px",color:"red"},children:[r.jsx("strong",{children:"Error:"})," ",t.error]}),t.isAuthenticated&&r.jsx("button",{onClick:a,style:{padding:"5px 10px",backgroundColor:"#dc3545",color:"white",border:"none",borderRadius:"4px",cursor:"pointer",fontSize:"11px"},children:"ð Logout"}),r.jsx("div",{style:{marginTop:"10px",fontSize:"10px",color:"#6c757d"},children:"WeChat Authentication System"})]})};Rr(document.getElementById("root")).render(r.jsx(Fi.StrictMode,{children:r.jsx(gl,{store:Xo,children:r.jsx(Ar,{loading:r.jsx("div",{children:"Loading..."}),persistor:es,children:r.jsx(Is,{children:r.jsxs(Qm,{children:[r.jsx(wh,{}),r.jsx(kh,{}),r.jsx(mc,{position:"top-center",reverseOrder:!1,gutter:8,toastOptions:{duration:3e3,style:{background:"#fff",color:"#333",borderRadius:"12px",padding:"16px",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid #e0e0e0"},success:{iconTheme:{primary:"#10B981",secondary:"#fff"}},error:{iconTheme:{primary:"#EF4444",secondary:"#fff"}}}})]})})})})}));
